var oA=Object.create;var _c=Object.defineProperty;var aA=Object.getOwnPropertyDescriptor;var cA=Object.getOwnPropertyNames;var lA=Object.getPrototypeOf,uA=Object.prototype.hasOwnProperty;var Ag=r=>_c(r,"__esModule",{value:!0});var w=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),dA=(r,e)=>{Ag(r);for(var t in e)_c(r,t,{get:e[t],enumerable:!0})},hA=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of cA(e))!uA.call(r,i)&&i!=="default"&&_c(r,i,{get:()=>e[i],enumerable:!(t=aA(e,i))||t.enumerable});return r},Mg=r=>hA(Ag(_c(r!=null?oA(lA(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var Mt=w(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.isSafeCloseError=pA;Mr.kBrowserOrContextClosedError=Mr.kBrowserClosedError=Mr.TimeoutError=void 0;var Ig=class extends Error{constructor(e){super(e);this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}},Fg=class extends Ig{};Mr.TimeoutError=Fg;var Dg="Browser has been closed";Mr.kBrowserClosedError=Dg;var Rg="Target page, context or browser has been closed";Mr.kBrowserOrContextClosedError=Rg;function pA(r){return r.message.endsWith(Dg)||r.message.endsWith(Rg)}});var Xr=w(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.serializeError=mA;Kn.parseError=_A;Kn.parseSerializedValue=gc;Kn.serializeValue=wc;var fA=Mt();function mA(r){return Rh(r)?{error:{message:r.message,stack:r.stack,name:r.name}}:{value:wc(r,e=>({fallThrough:e}),new Set)}}function _A(r){if(!r.error){if(r.value===void 0)throw new Error("Serialized error must have either an error or a value");return gc(r.value,void 0)}if(r.error.name==="TimeoutError"){let t=new fA.TimeoutError(r.error.message);return t.stack=r.error.stack||"",t}let e=new Error(r.error.message);return e.stack=r.error.stack||"",e.name=r.error.name,e}function gc(r,e){if(r.n!==void 0)return r.n;if(r.s!==void 0)return r.s;if(r.b!==void 0)return r.b;if(r.v!==void 0){if(r.v==="undefined")return;if(r.v==="null")return null;if(r.v==="NaN")return NaN;if(r.v==="Infinity")return 1/0;if(r.v==="-Infinity")return-1/0;if(r.v==="-0")return-0}if(r.d!==void 0)return new Date(r.d);if(r.r!==void 0)return new RegExp(r.r.p,r.r.f);if(r.a!==void 0)return r.a.map(t=>gc(t,e));if(r.o!==void 0){let t={};for(let{k:i,v:n}of r.o)t[i]=gc(n,e);return t}if(r.h!==void 0){if(e===void 0)throw new Error("Unexpected handle");return e[r.h]}throw new Error("Unexpected value")}function wc(r,e,t){let i=e(r);if("fallThrough"in i)r=i.fallThrough;else return i;if(t.has(r))throw new Error("Argument is a circular structure");if(typeof r=="symbol")return{v:"undefined"};if(Object.is(r,void 0))return{v:"undefined"};if(Object.is(r,null))return{v:"null"};if(Object.is(r,NaN))return{v:"NaN"};if(Object.is(r,1/0))return{v:"Infinity"};if(Object.is(r,-1/0))return{v:"-Infinity"};if(Object.is(r,-0))return{v:"-0"};if(typeof r=="boolean")return{b:r};if(typeof r=="number")return{n:r};if(typeof r=="string")return{s:r};if(Rh(r)){let n=r;return"captureStackTrace"in global.Error?{s:n.stack||""}:{s:`${n.name}: ${n.message}
${n.stack}`}}if(wA(r))return{d:r.toJSON()};if(gA(r))return{r:{p:r.source,f:r.flags}};if(Array.isArray(r)){let n=[];t.add(r);for(let s=0;s<r.length;++s)n.push(wc(r[s],e,t));return t.delete(r),{a:n}}if(typeof r=="object"){let n=[];t.add(r);for(let s of Object.keys(r))n.push({k:s,v:wc(r[s],e,t)});return t.delete(r),{o:n}}throw new Error("Unexpected value")}function gA(r){return r instanceof RegExp||Object.prototype.toString.call(r)==="[object RegExp]"}function wA(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function Rh(r){var e;return r instanceof Error||(r==null||(e=r.__proto__)===null||e===void 0?void 0:e.name)==="Error"||(r==null?void 0:r.__proto__)&&Rh(r.__proto__)}});var Ng=w(Nh=>{var en=require("path"),Yr=process.platform==="win32",Qr=require("fs"),vA=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function yA(){var r;if(vA){var e=new Error;r=t}else r=i;return r;function t(n){n&&(e.message=n.message,n=e,i(n))}function i(n){if(n){if(process.throwDeprecation)throw n;if(!process.noDeprecation){var s="fs: missing callback "+(n.stack||n.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function bA(r){return typeof r=="function"?r:yA()}var fz=en.normalize;Yr?Ir=/(.*?)(?:[\/\\]+|$)/g:Ir=/(.*?)(?:[\/]+|$)/g;var Ir;Yr?So=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:So=/^[\/]*/;var So;Nh.realpathSync=function(e,t){if(e=en.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var i=e,n={},s={},o,c,l,u;d();function d(){var g=So.exec(e);o=g[0].length,c=g[0],l=g[0],u="",Yr&&!s[l]&&(Qr.lstatSync(l),s[l]=!0)}for(;o<e.length;){Ir.lastIndex=o;var h=Ir.exec(e);if(u=c,c+=h[0],l=u+h[1],o=Ir.lastIndex,!(s[l]||t&&t[l]===l)){var p;if(t&&Object.prototype.hasOwnProperty.call(t,l))p=t[l];else{var f=Qr.lstatSync(l);if(!f.isSymbolicLink()){s[l]=!0,t&&(t[l]=l);continue}var _=null;if(!Yr){var m=f.dev.toString(32)+":"+f.ino.toString(32);n.hasOwnProperty(m)&&(_=n[m])}_===null&&(Qr.statSync(l),_=Qr.readlinkSync(l)),p=en.resolve(u,_),t&&(t[l]=p),Yr||(n[m]=_)}e=en.resolve(p,e.slice(o)),d()}}return t&&(t[i]=e),e};Nh.realpath=function(e,t,i){if(typeof i!="function"&&(i=bA(t),t=null),e=en.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(i.bind(null,null,t[e]));var n=e,s={},o={},c,l,u,d;h();function h(){var g=So.exec(e);c=g[0].length,l=g[0],u=g[0],d="",Yr&&!o[u]?Qr.lstat(u,function(v){if(v)return i(v);o[u]=!0,p()}):process.nextTick(p)}function p(){if(c>=e.length)return t&&(t[n]=e),i(null,e);Ir.lastIndex=c;var g=Ir.exec(e);return d=l,l+=g[0],u=d+g[1],c=Ir.lastIndex,o[u]||t&&t[u]===u?process.nextTick(p):t&&Object.prototype.hasOwnProperty.call(t,u)?m(t[u]):Qr.lstat(u,f)}function f(g,v){if(g)return i(g);if(!v.isSymbolicLink())return o[u]=!0,t&&(t[u]=u),process.nextTick(p);if(!Yr){var x=v.dev.toString(32)+":"+v.ino.toString(32);if(s.hasOwnProperty(x))return _(null,s[x],u)}Qr.stat(u,function(b){if(b)return i(b);Qr.readlink(u,function(T,k){Yr||(s[x]=k),_(T,k)})})}function _(g,v,x){if(g)return i(g);var b=en.resolve(d,v);t&&(t[x]=b),m(b)}function m(g){e=en.resolve(g,e.slice(c)),h()}}});var Hh=w((_z,Hg)=>{Hg.exports=Zr;Zr.realpath=Zr;Zr.sync=Bh;Zr.realpathSync=Bh;Zr.monkeypatch=SA;Zr.unmonkeypatch=EA;var Jn=require("fs"),qh=Jn.realpath,Lh=Jn.realpathSync,xA=process.version,qg=/^v[0-5]\./.test(xA),Lg=Ng();function Bg(r){return r&&r.syscall==="realpath"&&(r.code==="ELOOP"||r.code==="ENOMEM"||r.code==="ENAMETOOLONG")}function Zr(r,e,t){if(qg)return qh(r,e,t);typeof e=="function"&&(t=e,e=null),qh(r,e,function(i,n){Bg(i)?Lg.realpath(r,e,t):t(i,n)})}function Bh(r,e){if(qg)return Lh(r,e);try{return Lh(r,e)}catch(t){if(Bg(t))return Lg.realpathSync(r,e);throw t}}function SA(){Jn.realpath=Zr,Jn.realpathSync=Bh}function EA(){Jn.realpath=qh,Jn.realpathSync=Lh}});var Wg=w((gz,jg)=>{jg.exports=function(r,e){for(var t=[],i=0;i<r.length;i++){var n=e(r[i],i);CA(n)?t.push.apply(t,n):t.push(n)}return t};var CA=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"}});var Gg=w((wz,Vg)=>{"use strict";Vg.exports=$g;function $g(r,e,t){r instanceof RegExp&&(r=zg(r,t)),e instanceof RegExp&&(e=zg(e,t));var i=Ug(r,e,t);return i&&{start:i[0],end:i[1],pre:t.slice(0,i[0]),body:t.slice(i[0]+r.length,i[1]),post:t.slice(i[1]+e.length)}}function zg(r,e){var t=e.match(r);return t?t[0]:null}$g.range=Ug;function Ug(r,e,t){var i,n,s,o,c,l=t.indexOf(r),u=t.indexOf(e,l+1),d=l;if(l>=0&&u>0){if(r===e)return[l,u];for(i=[],s=t.length;d>=0&&!c;)d==l?(i.push(d),l=t.indexOf(r,d+1)):i.length==1?c=[i.pop(),u]:(n=i.pop(),n<s&&(s=n,o=u),u=t.indexOf(e,d+1)),d=l<u&&l>=0?l:u;i.length&&(c=[s,o])}return c}});var tw=w((vz,ew)=>{var kA=Wg(),Kg=Gg();ew.exports=TA;var Jg="\0SLASH"+Math.random()+"\0",Xg="\0OPEN"+Math.random()+"\0",jh="\0CLOSE"+Math.random()+"\0",Yg="\0COMMA"+Math.random()+"\0",Qg="\0PERIOD"+Math.random()+"\0";function Wh(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function PA(r){return r.split("\\\\").join(Jg).split("\\{").join(Xg).split("\\}").join(jh).split("\\,").join(Yg).split("\\.").join(Qg)}function OA(r){return r.split(Jg).join("\\").split(Xg).join("{").split(jh).join("}").split(Yg).join(",").split(Qg).join(".")}function Zg(r){if(!r)return[""];var e=[],t=Kg("{","}",r);if(!t)return r.split(",");var i=t.pre,n=t.body,s=t.post,o=i.split(",");o[o.length-1]+="{"+n+"}";var c=Zg(s);return s.length&&(o[o.length-1]+=c.shift(),o.push.apply(o,c)),e.push.apply(e,o),e}function TA(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),Xn(PA(r),!0).map(OA)):[]}function AA(r){return"{"+r+"}"}function MA(r){return/^-?0\d/.test(r)}function IA(r,e){return r<=e}function FA(r,e){return r>=e}function Xn(r,e){var t=[],i=Kg("{","}",r);if(!i||/\$$/.test(i.pre))return[r];var n=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),o=n||s,c=i.body.indexOf(",")>=0;if(!o&&!c)return i.post.match(/,.*\}/)?(r=i.pre+"{"+i.body+jh+i.post,Xn(r)):[r];var l;if(o)l=i.body.split(/\.\./);else if(l=Zg(i.body),l.length===1&&(l=Xn(l[0],!1).map(AA),l.length===1)){var d=i.post.length?Xn(i.post,!1):[""];return d.map(function(W){return i.pre+l[0]+W})}var u=i.pre,d=i.post.length?Xn(i.post,!1):[""],h;if(o){var p=Wh(l[0]),f=Wh(l[1]),_=Math.max(l[0].length,l[1].length),m=l.length==3?Math.abs(Wh(l[2])):1,g=IA,v=f<p;v&&(m*=-1,g=FA);var x=l.some(MA);h=[];for(var b=p;g(b,f);b+=m){var T;if(s)T=String.fromCharCode(b),T==="\\"&&(T="");else if(T=String(b),x){var k=_-T.length;if(k>0){var F=new Array(k+1).join("0");b<0?T="-"+F+T.slice(1):T=F+T}}h.push(T)}}else h=kA(l,function(D){return Xn(D,!1)});for(var y=0;y<h.length;y++)for(var C=0;C<d.length;C++){var A=u+h[y]+d[C];(!e||o||A)&&t.push(A)}return t}});var yc=w((yz,aw)=>{aw.exports=Ht;Ht.Minimatch=nt;var Eo={sep:"/"};try{Eo=require("path")}catch(r){}var $h=Ht.GLOBSTAR=nt.GLOBSTAR={},DA=tw(),rw={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},zh="[^/]",Uh=zh+"*?",RA="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",NA="(?:(?!(?:\\/|^)\\.).)*?",iw=qA("().*{}+?[]^$\\!");function qA(r){return r.split("").reduce(function(e,t){return e[t]=!0,e},{})}var nw=/\/+/;Ht.filter=LA;function LA(r,e){return e=e||{},function(t,i,n){return Ht(t,r,e)}}function sw(r,e){r=r||{},e=e||{};var t={};return Object.keys(e).forEach(function(i){t[i]=e[i]}),Object.keys(r).forEach(function(i){t[i]=r[i]}),t}Ht.defaults=function(r){if(!r||!Object.keys(r).length)return Ht;var e=Ht,t=function(n,s,o){return e.minimatch(n,s,sw(r,o))};return t.Minimatch=function(n,s){return new e.Minimatch(n,sw(r,s))},t};nt.defaults=function(r){return!r||!Object.keys(r).length?nt:Ht.defaults(r).Minimatch};function Ht(r,e,t){if(typeof e!="string")throw new TypeError("glob pattern string required");return t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:e.trim()===""?r==="":new nt(e,t).match(r)}function nt(r,e){if(!(this instanceof nt))return new nt(r,e);if(typeof r!="string")throw new TypeError("glob pattern string required");e||(e={}),r=r.trim(),Eo.sep!=="/"&&(r=r.split(Eo.sep).join("/")),this.options=e,this.set=[],this.pattern=r,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}nt.prototype.debug=function(){};nt.prototype.make=BA;function BA(){if(!this._made){var r=this.pattern,e=this.options;if(!e.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,t),t=this.globParts=t.map(function(i){return i.split(nw)}),this.debug(this.pattern,t),t=t.map(function(i,n,s){return i.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(i){return i.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}}nt.prototype.parseNegate=HA;function HA(){var r=this.pattern,e=!1,t=this.options,i=0;if(!t.nonegate){for(var n=0,s=r.length;n<s&&r.charAt(n)==="!";n++)e=!e,i++;i&&(this.pattern=r.substr(i)),this.negate=e}}Ht.braceExpand=function(r,e){return ow(r,e)};nt.prototype.braceExpand=ow;function ow(r,e){if(e||(this instanceof nt?e=this.options:e={}),r=typeof r=="undefined"?this.pattern:r,typeof r=="undefined")throw new TypeError("undefined pattern");return e.nobrace||!r.match(/\{.*\}/)?[r]:DA(r)}nt.prototype.parse=jA;var vc={};function jA(r,e){if(r.length>1024*64)throw new TypeError("pattern is too long");var t=this.options;if(!t.noglobstar&&r==="**")return $h;if(r==="")return"";var i="",n=!!t.nocase,s=!1,o=[],c=[],l,u=!1,d=-1,h=-1,p=r.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function _(){if(l){switch(l){case"*":i+=Uh,n=!0;break;case"?":i+=zh,n=!0;break;default:i+="\\"+l;break}f.debug("clearStateChar %j %j",l,i),l=!1}}for(var m=0,g=r.length,v;m<g&&(v=r.charAt(m));m++){if(this.debug("%s	%s %s %j",r,m,i,v),s&&iw[v]){i+="\\"+v,s=!1;continue}switch(v){case"/":return!1;case"\\":_(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,m,i,v),u){this.debug("  in class"),v==="!"&&m===h+1&&(v="^"),i+=v;continue}f.debug("call clearStateChar %j",l),_(),l=v,t.noext&&_();continue;case"(":if(u){i+="(";continue}if(!l){i+="\\(";continue}o.push({type:l,start:m-1,reStart:i.length,open:rw[l].open,close:rw[l].close}),i+=l==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",l,i),l=!1;continue;case")":if(u||!o.length){i+="\\)";continue}_(),n=!0;var x=o.pop();i+=x.close,x.type==="!"&&c.push(x),x.reEnd=i.length;continue;case"|":if(u||!o.length||s){i+="\\|",s=!1;continue}_(),i+="|";continue;case"[":if(_(),u){i+="\\"+v;continue}u=!0,h=m,d=i.length,i+=v;continue;case"]":if(m===h+1||!u){i+="\\"+v,s=!1;continue}if(u){var b=r.substring(h+1,m);try{RegExp("["+b+"]")}catch(J){var T=this.parse(b,vc);i=i.substr(0,d)+"\\["+T[0]+"\\]",n=n||T[1],u=!1;continue}}n=!0,u=!1,i+=v;continue;default:_(),s?s=!1:iw[v]&&!(v==="^"&&u)&&(i+="\\"),i+=v}}for(u&&(b=r.substr(h+1),T=this.parse(b,vc),i=i.substr(0,d)+"\\["+T[0],n=n||T[1]),x=o.pop();x;x=o.pop()){var k=i.slice(x.reStart+x.open.length);this.debug("setting tail",i,x),k=k.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(J,re,Y){return Y||(Y="\\"),re+re+Y+"|"}),this.debug(`tail=%j
   %s`,k,k,x,i);var F=x.type==="*"?Uh:x.type==="?"?zh:"\\"+x.type;n=!0,i=i.slice(0,x.reStart)+F+"\\("+k}_(),s&&(i+="\\\\");var y=!1;switch(i.charAt(0)){case".":case"[":case"(":y=!0}for(var C=c.length-1;C>-1;C--){var A=c[C],D=i.slice(0,A.reStart),W=i.slice(A.reStart,A.reEnd-8),V=i.slice(A.reEnd-8,A.reEnd),M=i.slice(A.reEnd);V+=M;var K=D.split("(").length-1,N=M;for(m=0;m<K;m++)N=N.replace(/\)[+*?]?/,"");M=N;var L="";M===""&&e!==vc&&(L="$");var ae=D+W+M+L+V;i=ae}if(i!==""&&n&&(i="(?=.)"+i),y&&(i=p+i),e===vc)return[i,n];if(!n)return zA(r);var Q=t.nocase?"i":"";try{var R=new RegExp("^"+i+"$",Q)}catch(J){return new RegExp("$.")}return R._glob=r,R._src=i,R}Ht.makeRe=function(r,e){return new nt(r,e||{}).makeRe()};nt.prototype.makeRe=WA;function WA(){if(this.regexp||this.regexp===!1)return this.regexp;var r=this.set;if(!r.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?Uh:e.dot?RA:NA,i=e.nocase?"i":"",n=r.map(function(s){return s.map(function(o){return o===$h?t:typeof o=="string"?UA(o):o._src}).join("\\/")}).join("|");n="^(?:"+n+")$",this.negate&&(n="^(?!"+n+").*$");try{this.regexp=new RegExp(n,i)}catch(s){this.regexp=!1}return this.regexp}Ht.match=function(r,e,t){t=t||{};var i=new nt(e,t);return r=r.filter(function(n){return i.match(n)}),i.options.nonull&&!r.length&&r.push(e),r};nt.prototype.match=$A;function $A(r,e){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&e)return!0;var t=this.options;Eo.sep!=="/"&&(r=r.split(Eo.sep).join("/")),r=r.split(nw),this.debug(this.pattern,"split",r);var i=this.set;this.debug(this.pattern,"set",i);var n,s;for(s=r.length-1;s>=0&&(n=r[s],!n);s--);for(s=0;s<i.length;s++){var o=i[s],c=r;t.matchBase&&o.length===1&&(c=[n]);var l=this.matchOne(c,o,e);if(l)return t.flipNegate?!0:!this.negate}return t.flipNegate?!1:this.negate}nt.prototype.matchOne=function(r,e,t){var i=this.options;this.debug("matchOne",{this:this,file:r,pattern:e}),this.debug("matchOne",r.length,e.length);for(var n=0,s=0,o=r.length,c=e.length;n<o&&s<c;n++,s++){this.debug("matchOne loop");var l=e[s],u=r[n];if(this.debug(e,l,u),l===!1)return!1;if(l===$h){this.debug("GLOBSTAR",[e,l,u]);var d=n,h=s+1;if(h===c){for(this.debug("** at the end");n<o;n++)if(r[n]==="."||r[n]===".."||!i.dot&&r[n].charAt(0)===".")return!1;return!0}for(;d<o;){var p=r[d];if(this.debug(`
globstar while`,r,d,e,h,p),this.matchOne(r.slice(d),e.slice(h),t))return this.debug("globstar found match!",d,o,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",r,d,e,h);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(t&&(this.debug(`
>>> no match, partial?`,r,d,e,h),d===o))}var f;if(typeof l=="string"?(i.nocase?f=u.toLowerCase()===l.toLowerCase():f=u===l,this.debug("string match",l,u,f)):(f=u.match(l),this.debug("pattern match",l,u,f)),!f)return!1}if(n===o&&s===c)return!0;if(n===o)return t;if(s===c){var _=n===o-1&&r[n]==="";return _}throw new Error("wtf?")};function zA(r){return r.replace(/\\(.)/g,"$1")}function UA(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var cw=w((bz,Vh)=>{typeof Object.create=="function"?Vh.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Vh.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}});var lw=w((xz,Kh)=>{try{if(Gh=require("util"),typeof Gh.inherits!="function")throw"";Kh.exports=Gh.inherits}catch(r){Kh.exports=cw()}var Gh});var xc=w((Sz,bc)=>{"use strict";function uw(r){return r.charAt(0)==="/"}function dw(r){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,t=e.exec(r),i=t[1]||"",n=Boolean(i&&i.charAt(1)!==":");return Boolean(t[2]||n)}bc.exports=process.platform==="win32"?dw:uw;bc.exports.posix=uw;bc.exports.win32=dw});var Xh=w(ei=>{ei.setopts=YA;ei.ownProp=hw;ei.makeAbs=Co;ei.finish=QA;ei.mark=ZA;ei.isIgnored=fw;ei.childrenIgnored=eM;function hw(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var VA=require("fs"),Yn=require("path"),GA=yc(),pw=xc(),Jh=GA.Minimatch;function KA(r,e){return r.localeCompare(e,"en")}function JA(r,e){r.ignore=e.ignore||[],Array.isArray(r.ignore)||(r.ignore=[r.ignore]),r.ignore.length&&(r.ignore=r.ignore.map(XA))}function XA(r){var e=null;if(r.slice(-3)==="/**"){var t=r.replace(/(\/\*\*)+$/,"");e=new Jh(t,{dot:!0})}return{matcher:new Jh(r,{dot:!0}),gmatcher:e}}function YA(r,e,t){if(t||(t={}),t.matchBase&&e.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}r.silent=!!t.silent,r.pattern=e,r.strict=t.strict!==!1,r.realpath=!!t.realpath,r.realpathCache=t.realpathCache||Object.create(null),r.follow=!!t.follow,r.dot=!!t.dot,r.mark=!!t.mark,r.nodir=!!t.nodir,r.nodir&&(r.mark=!0),r.sync=!!t.sync,r.nounique=!!t.nounique,r.nonull=!!t.nonull,r.nosort=!!t.nosort,r.nocase=!!t.nocase,r.stat=!!t.stat,r.noprocess=!!t.noprocess,r.absolute=!!t.absolute,r.fs=t.fs||VA,r.maxLength=t.maxLength||1/0,r.cache=t.cache||Object.create(null),r.statCache=t.statCache||Object.create(null),r.symlinks=t.symlinks||Object.create(null),JA(r,t),r.changedCwd=!1;var i=process.cwd();hw(t,"cwd")?(r.cwd=Yn.resolve(t.cwd),r.changedCwd=r.cwd!==i):r.cwd=i,r.root=t.root||Yn.resolve(r.cwd,"/"),r.root=Yn.resolve(r.root),process.platform==="win32"&&(r.root=r.root.replace(/\\/g,"/")),r.cwdAbs=pw(r.cwd)?r.cwd:Co(r,r.cwd),process.platform==="win32"&&(r.cwdAbs=r.cwdAbs.replace(/\\/g,"/")),r.nomount=!!t.nomount,t.nonegate=!0,t.nocomment=!0,r.minimatch=new Jh(e,t),r.options=r.minimatch.options}function QA(r){for(var e=r.nounique,t=e?[]:Object.create(null),i=0,n=r.matches.length;i<n;i++){var s=r.matches[i];if(!s||Object.keys(s).length===0){if(r.nonull){var o=r.minimatch.globSet[i];e?t.push(o):t[o]=!0}}else{var c=Object.keys(s);e?t.push.apply(t,c):c.forEach(function(l){t[l]=!0})}}if(e||(t=Object.keys(t)),r.nosort||(t=t.sort(KA)),r.mark){for(var i=0;i<t.length;i++)t[i]=r._mark(t[i]);r.nodir&&(t=t.filter(function(l){var u=!/\/$/.test(l),d=r.cache[l]||r.cache[Co(r,l)];return u&&d&&(u=d!=="DIR"&&!Array.isArray(d)),u}))}r.ignore.length&&(t=t.filter(function(l){return!fw(r,l)})),r.found=t}function ZA(r,e){var t=Co(r,e),i=r.cache[t],n=e;if(i){var s=i==="DIR"||Array.isArray(i),o=e.slice(-1)==="/";if(s&&!o?n+="/":!s&&o&&(n=n.slice(0,-1)),n!==e){var c=Co(r,n);r.statCache[c]=r.statCache[t],r.cache[c]=r.cache[t]}}return n}function Co(r,e){var t=e;return e.charAt(0)==="/"?t=Yn.join(r.root,e):pw(e)||e===""?t=e:r.changedCwd?t=Yn.resolve(r.cwd,e):t=Yn.resolve(e),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function fw(r,e){return r.ignore.length?r.ignore.some(function(t){return t.matcher.match(e)||!!(t.gmatcher&&t.gmatcher.match(e))}):!1}function eM(r,e){return r.ignore.length?r.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(e))}):!1}});var vw=w((Oz,ww)=>{ww.exports=gw;gw.GlobSync=Ye;var tM=Hh(),mw=yc(),Cz=mw.Minimatch,kz=Zh().Glob,Pz=require("util"),Yh=require("path"),_w=require("assert"),Sc=xc(),tn=Xh(),rM=tn.setopts,Qh=tn.ownProp,iM=tn.childrenIgnored,nM=tn.isIgnored;function gw(r,e){if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new Ye(r,e).found}function Ye(r,e){if(!r)throw new Error("must provide pattern");if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof Ye))return new Ye(r,e);if(rM(this,r,e),this.noprocess)return this;var t=this.minimatch.set.length;this.matches=new Array(t);for(var i=0;i<t;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}Ye.prototype._finish=function(){if(_w(this instanceof Ye),this.realpath){var r=this;this.matches.forEach(function(e,t){var i=r.matches[t]=Object.create(null);for(var n in e)try{n=r._makeAbs(n);var s=tM.realpathSync(n,r.realpathCache);i[s]=!0}catch(o){if(o.syscall==="stat")i[r._makeAbs(n)]=!0;else throw o}})}tn.finish(this)};Ye.prototype._process=function(r,e,t){_w(this instanceof Ye);for(var i=0;typeof r[i]=="string";)i++;var n;switch(i){case r.length:this._processSimple(r.join("/"),e);return;case 0:n=null;break;default:n=r.slice(0,i).join("/");break}var s=r.slice(i),o;n===null?o=".":((Sc(n)||Sc(r.join("/")))&&(!n||!Sc(n))&&(n="/"+n),o=n);var c=this._makeAbs(o);if(!iM(this,o)){var l=s[0]===mw.GLOBSTAR;l?this._processGlobStar(n,o,c,s,e,t):this._processReaddir(n,o,c,s,e,t)}};Ye.prototype._processReaddir=function(r,e,t,i,n,s){var o=this._readdir(t,s);if(!!o){for(var c=i[0],l=!!this.minimatch.negate,u=c._glob,d=this.dot||u.charAt(0)===".",h=[],p=0;p<o.length;p++){var f=o[p];if(f.charAt(0)!=="."||d){var _;l&&!r?_=!f.match(c):_=f.match(c),_&&h.push(f)}}var m=h.length;if(m!==0){if(i.length===1&&!this.mark&&!this.stat){this.matches[n]||(this.matches[n]=Object.create(null));for(var p=0;p<m;p++){var f=h[p];r&&(r.slice(-1)!=="/"?f=r+"/"+f:f=r+f),f.charAt(0)==="/"&&!this.nomount&&(f=Yh.join(this.root,f)),this._emitMatch(n,f)}return}i.shift();for(var p=0;p<m;p++){var f=h[p],g;r?g=[r,f]:g=[f],this._process(g.concat(i),n,s)}}}};Ye.prototype._emitMatch=function(r,e){if(!nM(this,e)){var t=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=t),!this.matches[r][e]){if(this.nodir){var i=this.cache[t];if(i==="DIR"||Array.isArray(i))return}this.matches[r][e]=!0,this.stat&&this._stat(e)}}};Ye.prototype._readdirInGlobStar=function(r){if(this.follow)return this._readdir(r,!1);var e,t,i;try{t=this.fs.lstatSync(r)}catch(s){if(s.code==="ENOENT")return null}var n=t&&t.isSymbolicLink();return this.symlinks[r]=n,!n&&t&&!t.isDirectory()?this.cache[r]="FILE":e=this._readdir(r,!1),e};Ye.prototype._readdir=function(r,e){var t;if(e&&!Qh(this.symlinks,r))return this._readdirInGlobStar(r);if(Qh(this.cache,r)){var i=this.cache[r];if(!i||i==="FILE")return null;if(Array.isArray(i))return i}try{return this._readdirEntries(r,this.fs.readdirSync(r))}catch(n){return this._readdirError(r,n),null}};Ye.prototype._readdirEntries=function(r,e){if(!this.mark&&!this.stat)for(var t=0;t<e.length;t++){var i=e[t];r==="/"?i=r+i:i=r+"/"+i,this.cache[i]=!0}return this.cache[r]=e,e};Ye.prototype._readdirError=function(r,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var t=this._makeAbs(r);if(this.cache[t]="FILE",t===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=e.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(r)]=!1;break;default:if(this.cache[this._makeAbs(r)]=!1,this.strict)throw e;this.silent||console.error("glob error",e);break}};Ye.prototype._processGlobStar=function(r,e,t,i,n,s){var o=this._readdir(t,s);if(!!o){var c=i.slice(1),l=r?[r]:[],u=l.concat(c);this._process(u,n,!1);var d=o.length,h=this.symlinks[t];if(!(h&&s))for(var p=0;p<d;p++){var f=o[p];if(!(f.charAt(0)==="."&&!this.dot)){var _=l.concat(o[p],c);this._process(_,n,!0);var m=l.concat(o[p],i);this._process(m,n,!0)}}}};Ye.prototype._processSimple=function(r,e){var t=this._stat(r);if(this.matches[e]||(this.matches[e]=Object.create(null)),!!t){if(r&&Sc(r)&&!this.nomount){var i=/[\/\\]$/.test(r);r.charAt(0)==="/"?r=Yh.join(this.root,r):(r=Yh.resolve(this.root,r),i&&(r+="/"))}process.platform==="win32"&&(r=r.replace(/\\/g,"/")),this._emitMatch(e,r)}};Ye.prototype._stat=function(r){var e=this._makeAbs(r),t=r.slice(-1)==="/";if(r.length>this.maxLength)return!1;if(!this.stat&&Qh(this.cache,e)){var o=this.cache[e];if(Array.isArray(o)&&(o="DIR"),!t||o==="DIR")return o;if(t&&o==="FILE")return!1}var i,n=this.statCache[e];if(!n){var s;try{s=this.fs.lstatSync(e)}catch(c){if(c&&(c.code==="ENOENT"||c.code==="ENOTDIR"))return this.statCache[e]=!1,!1}if(s&&s.isSymbolicLink())try{n=this.fs.statSync(e)}catch(c){n=s}else n=s}this.statCache[e]=n;var o=!0;return n&&(o=n.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,t&&o==="FILE"?!1:o};Ye.prototype._mark=function(r){return tn.mark(this,r)};Ye.prototype._makeAbs=function(r){return tn.makeAbs(this,r)}});var ep=w((Tz,bw)=>{bw.exports=yw;function yw(r,e){if(r&&e)return yw(r)(e);if(typeof r!="function")throw new TypeError("need wrapper function");return Object.keys(r).forEach(function(i){t[i]=r[i]}),t;function t(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];var s=r.apply(this,i),o=i[i.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(c){s[c]=o[c]}),s}}});var ko=w((Az,tp)=>{var xw=ep();tp.exports=xw(Ec);tp.exports.strict=xw(Sw);Ec.proto=Ec(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ec(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Sw(this)},configurable:!0})});function Ec(r){var e=function(){return e.called?e.value:(e.called=!0,e.value=r.apply(this,arguments))};return e.called=!1,e}function Sw(r){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=r.apply(this,arguments)},t=r.name||"Function wrapped with `once`";return e.onceError=t+" shouldn't be called more than once",e.called=!1,e}});var Cw=w((Mz,Ew)=>{var sM=ep(),Po=Object.create(null),oM=ko();Ew.exports=sM(aM);function aM(r,e){return Po[r]?(Po[r].push(e),null):(Po[r]=[e],cM(r))}function cM(r){return oM(function e(){var t=Po[r],i=t.length,n=lM(arguments);try{for(var s=0;s<i;s++)t[s].apply(null,n)}finally{t.length>i?(t.splice(0,i),process.nextTick(function(){e.apply(null,n)})):delete Po[r]}})}function lM(r){for(var e=r.length,t=[],i=0;i<e;i++)t[i]=r[i];return t}});var Zh=w((Dz,Pw)=>{Pw.exports=nn;var uM=Hh(),kw=yc(),Iz=kw.Minimatch,dM=lw(),hM=require("events").EventEmitter,rp=require("path"),ip=require("assert"),Oo=xc(),np=vw(),rn=Xh(),pM=rn.setopts,sp=rn.ownProp,op=Cw(),Fz=require("util"),fM=rn.childrenIgnored,mM=rn.isIgnored,_M=ko();function nn(r,e,t){if(typeof e=="function"&&(t=e,e={}),e||(e={}),e.sync){if(t)throw new TypeError("callback provided to sync glob");return np(r,e)}return new Pe(r,e,t)}nn.sync=np;var gM=nn.GlobSync=np.GlobSync;nn.glob=nn;function wM(r,e){if(e===null||typeof e!="object")return r;for(var t=Object.keys(e),i=t.length;i--;)r[t[i]]=e[t[i]];return r}nn.hasMagic=function(r,e){var t=wM({},e);t.noprocess=!0;var i=new Pe(r,t),n=i.minimatch.set;if(!r)return!1;if(n.length>1)return!0;for(var s=0;s<n[0].length;s++)if(typeof n[0][s]!="string")return!0;return!1};nn.Glob=Pe;dM(Pe,hM);function Pe(r,e,t){if(typeof e=="function"&&(t=e,e=null),e&&e.sync){if(t)throw new TypeError("callback provided to sync glob");return new gM(r,e)}if(!(this instanceof Pe))return new Pe(r,e,t);pM(this,r,e),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),typeof t=="function"&&(t=_M(t),this.on("error",t),this.on("end",function(l){t(null,l)}));var n=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(i===0)return c();for(var s=!0,o=0;o<i;o++)this._process(this.minimatch.set[o],o,!1,c);s=!1;function c(){--n._processing,n._processing<=0&&(s?process.nextTick(function(){n._finish()}):n._finish())}}Pe.prototype._finish=function(){if(ip(this instanceof Pe),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();rn.finish(this),this.emit("end",this.found)}};Pe.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var r=this.matches.length;if(r===0)return this._finish();for(var e=this,t=0;t<this.matches.length;t++)this._realpathSet(t,i);function i(){--r==0&&e._finish()}};Pe.prototype._realpathSet=function(r,e){var t=this.matches[r];if(!t)return e();var i=Object.keys(t),n=this,s=i.length;if(s===0)return e();var o=this.matches[r]=Object.create(null);i.forEach(function(c,l){c=n._makeAbs(c),uM.realpath(c,n.realpathCache,function(u,d){u?u.syscall==="stat"?o[c]=!0:n.emit("error",u):o[d]=!0,--s==0&&(n.matches[r]=o,e())})})};Pe.prototype._mark=function(r){return rn.mark(this,r)};Pe.prototype._makeAbs=function(r){return rn.makeAbs(this,r)};Pe.prototype.abort=function(){this.aborted=!0,this.emit("abort")};Pe.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};Pe.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var r=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<r.length;e++){var t=r[e];this._emitMatch(t[0],t[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(var e=0;e<i.length;e++){var n=i[e];this._processing--,this._process(n[0],n[1],n[2],n[3])}}}};Pe.prototype._process=function(r,e,t,i){if(ip(this instanceof Pe),ip(typeof i=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([r,e,t,i]);return}for(var n=0;typeof r[n]=="string";)n++;var s;switch(n){case r.length:this._processSimple(r.join("/"),e,i);return;case 0:s=null;break;default:s=r.slice(0,n).join("/");break}var o=r.slice(n),c;s===null?c=".":((Oo(s)||Oo(r.join("/")))&&(!s||!Oo(s))&&(s="/"+s),c=s);var l=this._makeAbs(c);if(fM(this,c))return i();var u=o[0]===kw.GLOBSTAR;u?this._processGlobStar(s,c,l,o,e,t,i):this._processReaddir(s,c,l,o,e,t,i)}};Pe.prototype._processReaddir=function(r,e,t,i,n,s,o){var c=this;this._readdir(t,s,function(l,u){return c._processReaddir2(r,e,t,i,n,s,u,o)})};Pe.prototype._processReaddir2=function(r,e,t,i,n,s,o,c){if(!o)return c();for(var l=i[0],u=!!this.minimatch.negate,d=l._glob,h=this.dot||d.charAt(0)===".",p=[],f=0;f<o.length;f++){var _=o[f];if(_.charAt(0)!=="."||h){var m;u&&!r?m=!_.match(l):m=_.match(l),m&&p.push(_)}}var g=p.length;if(g===0)return c();if(i.length===1&&!this.mark&&!this.stat){this.matches[n]||(this.matches[n]=Object.create(null));for(var f=0;f<g;f++){var _=p[f];r&&(r!=="/"?_=r+"/"+_:_=r+_),_.charAt(0)==="/"&&!this.nomount&&(_=rp.join(this.root,_)),this._emitMatch(n,_)}return c()}i.shift();for(var f=0;f<g;f++){var _=p[f],v;r&&(r!=="/"?_=r+"/"+_:_=r+_),this._process([_].concat(i),n,s,c)}c()};Pe.prototype._emitMatch=function(r,e){if(!this.aborted&&!mM(this,e)){if(this.paused){this._emitQueue.push([r,e]);return}var t=Oo(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=t),!this.matches[r][e]){if(this.nodir){var i=this.cache[t];if(i==="DIR"||Array.isArray(i))return}this.matches[r][e]=!0;var n=this.statCache[t];n&&this.emit("stat",e,n),this.emit("match",e)}}};Pe.prototype._readdirInGlobStar=function(r,e){if(this.aborted)return;if(this.follow)return this._readdir(r,!1,e);var t="lstat\0"+r,i=this,n=op(t,s);n&&i.fs.lstat(r,n);function s(o,c){if(o&&o.code==="ENOENT")return e();var l=c&&c.isSymbolicLink();i.symlinks[r]=l,!l&&c&&!c.isDirectory()?(i.cache[r]="FILE",e()):i._readdir(r,!1,e)}};Pe.prototype._readdir=function(r,e,t){if(!this.aborted&&(t=op("readdir\0"+r+"\0"+e,t),!!t)){if(e&&!sp(this.symlinks,r))return this._readdirInGlobStar(r,t);if(sp(this.cache,r)){var i=this.cache[r];if(!i||i==="FILE")return t();if(Array.isArray(i))return t(null,i)}var n=this;n.fs.readdir(r,vM(this,r,t))}};function vM(r,e,t){return function(i,n){i?r._readdirError(e,i,t):r._readdirEntries(e,n,t)}}Pe.prototype._readdirEntries=function(r,e,t){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<e.length;i++){var n=e[i];r==="/"?n=r+n:n=r+"/"+n,this.cache[n]=!0}return this.cache[r]=e,t(null,e)}};Pe.prototype._readdirError=function(r,e,t){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(r);if(this.cache[i]="FILE",i===this.cwdAbs){var n=new Error(e.code+" invalid cwd "+this.cwd);n.path=this.cwd,n.code=e.code,this.emit("error",n),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(r)]=!1;break;default:this.cache[this._makeAbs(r)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e);break}return t()}};Pe.prototype._processGlobStar=function(r,e,t,i,n,s,o){var c=this;this._readdir(t,s,function(l,u){c._processGlobStar2(r,e,t,i,n,s,u,o)})};Pe.prototype._processGlobStar2=function(r,e,t,i,n,s,o,c){if(!o)return c();var l=i.slice(1),u=r?[r]:[],d=u.concat(l);this._process(d,n,!1,c);var h=this.symlinks[t],p=o.length;if(h&&s)return c();for(var f=0;f<p;f++){var _=o[f];if(!(_.charAt(0)==="."&&!this.dot)){var m=u.concat(o[f],l);this._process(m,n,!0,c);var g=u.concat(o[f],i);this._process(g,n,!0,c)}}c()};Pe.prototype._processSimple=function(r,e,t){var i=this;this._stat(r,function(n,s){i._processSimple2(r,e,n,s,t)})};Pe.prototype._processSimple2=function(r,e,t,i,n){if(this.matches[e]||(this.matches[e]=Object.create(null)),!i)return n();if(r&&Oo(r)&&!this.nomount){var s=/[\/\\]$/.test(r);r.charAt(0)==="/"?r=rp.join(this.root,r):(r=rp.resolve(this.root,r),s&&(r+="/"))}process.platform==="win32"&&(r=r.replace(/\\/g,"/")),this._emitMatch(e,r),n()};Pe.prototype._stat=function(r,e){var t=this._makeAbs(r),i=r.slice(-1)==="/";if(r.length>this.maxLength)return e();if(!this.stat&&sp(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!i||n==="DIR")return e(null,n);if(i&&n==="FILE")return e()}var s,o=this.statCache[t];if(o!==void 0){if(o===!1)return e(null,o);var c=o.isDirectory()?"DIR":"FILE";return i&&c==="FILE"?e():e(null,c,o)}var l=this,u=op("stat\0"+t,d);u&&l.fs.lstat(t,u);function d(h,p){if(p&&p.isSymbolicLink())return l.fs.stat(t,function(f,_){f?l._stat2(r,t,null,p,e):l._stat2(r,t,f,_,e)});l._stat2(r,t,h,p,e)}};Pe.prototype._stat2=function(r,e,t,i,n){if(t&&(t.code==="ENOENT"||t.code==="ENOTDIR"))return this.statCache[e]=!1,n();var s=r.slice(-1)==="/";if(this.statCache[e]=i,e.slice(-1)==="/"&&i&&!i.isDirectory())return n(null,!1,i);var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,s&&o==="FILE"?n():n(null,o,i)}});var Rw=w((Rz,Dw)=>{var Me=require("assert"),Ow=require("path"),Tw=require("fs"),Qn;try{Qn=Zh()}catch(r){}var yM={nosort:!0,silent:!0},ap=0,To=process.platform==="win32",Aw=r=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{r[t]=r[t]||Tw[t],t=t+"Sync",r[t]=r[t]||Tw[t]}),r.maxBusyTries=r.maxBusyTries||3,r.emfileWait=r.emfileWait||1e3,r.glob===!1&&(r.disableGlob=!0),r.disableGlob!==!0&&Qn===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");r.disableGlob=r.disableGlob||!1,r.glob=r.glob||yM},cp=(r,e,t)=>{typeof e=="function"&&(t=e,e={}),Me(r,"rimraf: missing path"),Me.equal(typeof r,"string","rimraf: path should be a string"),Me.equal(typeof t,"function","rimraf: callback function required"),Me(e,"rimraf: invalid options argument provided"),Me.equal(typeof e,"object","rimraf: options should be object"),Aw(e);let i=0,n=null,s=0,o=l=>{n=n||l,--s==0&&t(n)},c=(l,u)=>{if(l)return t(l);if(s=u.length,s===0)return t();u.forEach(d=>{let h=p=>{if(p){if((p.code==="EBUSY"||p.code==="ENOTEMPTY"||p.code==="EPERM")&&i<e.maxBusyTries)return i++,setTimeout(()=>lp(d,e,h),i*100);if(p.code==="EMFILE"&&ap<e.emfileWait)return setTimeout(()=>lp(d,e,h),ap++);p.code==="ENOENT"&&(p=null)}ap=0,o(p)};lp(d,e,h)})};if(e.disableGlob||!Qn.hasMagic(r))return c(null,[r]);e.lstat(r,(l,u)=>{if(!l)return c(null,[r]);Qn(r,e.glob,c)})},lp=(r,e,t)=>{Me(r),Me(e),Me(typeof t=="function"),e.lstat(r,(i,n)=>{if(i&&i.code==="ENOENT")return t(null);if(i&&i.code==="EPERM"&&To&&Mw(r,e,i,t),n&&n.isDirectory())return Cc(r,e,i,t);e.unlink(r,s=>{if(s){if(s.code==="ENOENT")return t(null);if(s.code==="EPERM")return To?Mw(r,e,s,t):Cc(r,e,s,t);if(s.code==="EISDIR")return Cc(r,e,s,t)}return t(s)})})},Mw=(r,e,t,i)=>{Me(r),Me(e),Me(typeof i=="function"),e.chmod(r,438,n=>{n?i(n.code==="ENOENT"?null:t):e.stat(r,(s,o)=>{s?i(s.code==="ENOENT"?null:t):o.isDirectory()?Cc(r,e,t,i):e.unlink(r,i)})})},Iw=(r,e,t)=>{Me(r),Me(e);try{e.chmodSync(r,438)}catch(n){if(n.code==="ENOENT")return;throw t}let i;try{i=e.statSync(r)}catch(n){if(n.code==="ENOENT")return;throw t}i.isDirectory()?kc(r,e,t):e.unlinkSync(r)},Cc=(r,e,t,i)=>{Me(r),Me(e),Me(typeof i=="function"),e.rmdir(r,n=>{n&&(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")?bM(r,e,i):n&&n.code==="ENOTDIR"?i(t):i(n)})},bM=(r,e,t)=>{Me(r),Me(e),Me(typeof t=="function"),e.readdir(r,(i,n)=>{if(i)return t(i);let s=n.length;if(s===0)return e.rmdir(r,t);let o;n.forEach(c=>{cp(Ow.join(r,c),e,l=>{if(!o){if(l)return t(o=l);--s==0&&e.rmdir(r,t)}})})})},Fw=(r,e)=>{e=e||{},Aw(e),Me(r,"rimraf: missing path"),Me.equal(typeof r,"string","rimraf: path should be a string"),Me(e,"rimraf: missing options"),Me.equal(typeof e,"object","rimraf: options should be object");let t;if(e.disableGlob||!Qn.hasMagic(r))t=[r];else try{e.lstatSync(r),t=[r]}catch(i){t=Qn.sync(r,e.glob)}if(!!t.length)for(let i=0;i<t.length;i++){let n=t[i],s;try{s=e.lstatSync(n)}catch(o){if(o.code==="ENOENT")return;o.code==="EPERM"&&To&&Iw(n,e,o)}try{s&&s.isDirectory()?kc(n,e,null):e.unlinkSync(n)}catch(o){if(o.code==="ENOENT")return;if(o.code==="EPERM")return To?Iw(n,e,o):kc(n,e,o);if(o.code!=="EISDIR")throw o;kc(n,e,o)}}},kc=(r,e,t)=>{Me(r),Me(e);try{e.rmdirSync(r)}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR")throw t;(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")&&xM(r,e)}},xM=(r,e)=>{Me(r),Me(e),e.readdirSync(r).forEach(n=>Fw(Ow.join(r,n),e));let t=To?100:1,i=0;do{let n=!0;try{let s=e.rmdirSync(r,e);return n=!1,s}finally{if(++i<t&&n)continue}}while(!0)};Dw.exports=cp;cp.sync=Fw});var qw=w(Nw=>{"use strict";var SM=require("url").parse,EM={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},CM=String.prototype.endsWith||function(r){return r.length<=this.length&&this.indexOf(r,this.length-r.length)!==-1};function kM(r){var e=typeof r=="string"?SM(r):r||{},t=e.protocol,i=e.host,n=e.port;if(typeof i!="string"||!i||typeof t!="string"||(t=t.split(":",1)[0],i=i.replace(/:\d*$/,""),n=parseInt(n)||EM[t]||0,!PM(i,n)))return"";var s=Zn("npm_config_"+t+"_proxy")||Zn(t+"_proxy")||Zn("npm_config_proxy")||Zn("all_proxy");return s&&s.indexOf("://")===-1&&(s=t+"://"+s),s}function PM(r,e){var t=(Zn("npm_config_no_proxy")||Zn("no_proxy")).toLowerCase();return t?t==="*"?!1:t.split(/[,\s]/).every(function(i){if(!i)return!0;var n=i.match(/^(.+):(\d+)$/),s=n?n[1]:i,o=n?parseInt(n[2]):0;return o&&o!==e?!0:/^[.*]/.test(s)?(s.charAt(0)==="*"&&(s=s.slice(1)),!CM.call(r,s)):r!==s}):!0}function Zn(r){return process.env[r.toLowerCase()]||process.env[r.toUpperCase()]||""}Nw.getProxyForUrl=kM});var Oc=w(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.getUbuntuVersion=AM;Pc.getUbuntuVersionSync=MM;var Ao=TM(require("fs")),Lw=OM(require("os"));function Bw(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Bw=function(i){return i?t:e})(r)}function OM(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Bw(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function TM(r){return r&&r.__esModule?r:{default:r}}var es;async function AM(){return es===void 0&&(es=await IM()),es}function MM(){return es===void 0&&(es=FM()),es}async function IM(){if(Lw.platform()!=="linux")return"";let r=await Ao.default.promises.readFile("/etc/upstream-release/lsb-release","utf8").catch(e=>"");return r||(r=await Ao.default.promises.readFile("/etc/os-release","utf8").catch(e=>"")),r?Hw(r):""}function FM(){if(Lw.platform()!=="linux")return"";try{let r;return Ao.default.existsSync("/etc/upstream-release/lsb-release")?r=Ao.default.readFileSync("/etc/upstream-release/lsb-release","utf8"):r=Ao.default.readFileSync("/etc/os-release","utf8"),r?Hw(r):""}catch(r){return""}}function Hw(r){let e=new Map;for(let t of r.split(`
`)){let i=t.split("="),n=i.shift(),s=i.join("=").trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substring(1,s.length-1)),!!n&&e.set(n.toLowerCase(),s)}return e.get("distrib_id")&&e.get("distrib_id").toLowerCase()==="ubuntu"?e.get("distrib_release")||"":!e.get("name")||e.get("name").toLowerCase()!=="ubuntu"?"":e.get("version_id")||""}});var Ww=w((Lz,jw)=>{var ts=1e3,rs=ts*60,is=rs*60,sn=is*24,DM=sn*7,RM=sn*365.25;jw.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return NM(r);if(t==="number"&&isFinite(r))return e.long?LM(r):qM(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function NM(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return t*RM;case"weeks":case"week":case"w":return t*DM;case"days":case"day":case"d":return t*sn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*is;case"minutes":case"minute":case"mins":case"min":case"m":return t*rs;case"seconds":case"second":case"secs":case"sec":case"s":return t*ts;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function qM(r){var e=Math.abs(r);return e>=sn?Math.round(r/sn)+"d":e>=is?Math.round(r/is)+"h":e>=rs?Math.round(r/rs)+"m":e>=ts?Math.round(r/ts)+"s":r+"ms"}function LM(r){var e=Math.abs(r);return e>=sn?Tc(r,e,sn,"day"):e>=is?Tc(r,e,is,"hour"):e>=rs?Tc(r,e,rs,"minute"):e>=ts?Tc(r,e,ts,"second"):r+" ms"}function Tc(r,e,t,i){var n=e>=t*1.5;return Math.round(r/t)+" "+i+(n?"s":"")}});var up=w((Bz,$w)=>{function BM(r){t.debug=t,t.default=t,t.coerce=l,t.disable=s,t.enable=n,t.enabled=o,t.humanize=Ww(),t.destroy=u,Object.keys(r).forEach(d=>{t[d]=r[d]}),t.names=[],t.skips=[],t.formatters={};function e(d){let h=0;for(let p=0;p<d.length;p++)h=(h<<5)-h+d.charCodeAt(p),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(d){let h,p=null,f,_;function m(...g){if(!m.enabled)return;let v=m,x=Number(new Date),b=x-(h||x);v.diff=b,v.prev=h,v.curr=x,h=x,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let T=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(F,y)=>{if(F==="%%")return"%";T++;let C=t.formatters[y];if(typeof C=="function"){let A=g[T];F=C.call(v,A),g.splice(T,1),T--}return F}),t.formatArgs.call(v,g),(v.log||t.log).apply(v,g)}return m.namespace=d,m.useColors=t.useColors(),m.color=t.selectColor(d),m.extend=i,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==t.namespaces&&(f=t.namespaces,_=t.enabled(d)),_),set:g=>{p=g}}),typeof t.init=="function"&&t.init(m),m}function i(d,h){let p=t(this.namespace+(typeof h=="undefined"?":":h)+d);return p.log=this.log,p}function n(d){t.save(d),t.namespaces=d,t.names=[],t.skips=[];let h,p=(typeof d=="string"?d:"").split(/[\s,]+/),f=p.length;for(h=0;h<f;h++)!p[h]||(d=p[h].replace(/\*/g,".*?"),d[0]==="-"?t.skips.push(new RegExp("^"+d.substr(1)+"$")):t.names.push(new RegExp("^"+d+"$")))}function s(){let d=[...t.names.map(c),...t.skips.map(c).map(h=>"-"+h)].join(",");return t.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let h,p;for(h=0,p=t.skips.length;h<p;h++)if(t.skips[h].test(d))return!1;for(h=0,p=t.names.length;h<p;h++)if(t.names[h].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}$w.exports=BM});var zw=w((qt,Ac)=>{qt.formatArgs=jM;qt.save=WM;qt.load=$M;qt.useColors=HM;qt.storage=zM();qt.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();qt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function HM(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function jM(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Ac.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,i=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(t++,n==="%c"&&(i=t))}),r.splice(i,0,e)}qt.log=console.debug||console.log||(()=>{});function WM(r){try{r?qt.storage.setItem("debug",r):qt.storage.removeItem("debug")}catch(e){}}function $M(){let r;try{r=qt.storage.getItem("debug")}catch(e){}return!r&&typeof process!="undefined"&&"env"in process&&(r=process.env.DEBUG),r}function zM(){try{return localStorage}catch(r){}}Ac.exports=up()(qt);var{formatters:UM}=Ac.exports;UM.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Vw=w((Hz,Uw)=>{"use strict";Uw.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",i=e.indexOf(t+r),n=e.indexOf("--");return i!==-1&&(n===-1||i<n)}});var Jw=w((jz,Kw)=>{"use strict";var VM=require("os"),Gw=require("tty"),jt=Vw(),{env:st}=process,ti;jt("no-color")||jt("no-colors")||jt("color=false")||jt("color=never")?ti=0:(jt("color")||jt("colors")||jt("color=true")||jt("color=always"))&&(ti=1);"FORCE_COLOR"in st&&(st.FORCE_COLOR==="true"?ti=1:st.FORCE_COLOR==="false"?ti=0:ti=st.FORCE_COLOR.length===0?1:Math.min(parseInt(st.FORCE_COLOR,10),3));function dp(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function hp(r,e){if(ti===0)return 0;if(jt("color=16m")||jt("color=full")||jt("color=truecolor"))return 3;if(jt("color=256"))return 2;if(r&&!e&&ti===void 0)return 0;let t=ti||0;if(st.TERM==="dumb")return t;if(process.platform==="win32"){let i=VM.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in st)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(i=>i in st)||st.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in st)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(st.TEAMCITY_VERSION)?1:0;if(st.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in st){let i=parseInt((st.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(st.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(st.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(st.TERM)||"COLORTERM"in st?1:t}function GM(r){let e=hp(r,r&&r.isTTY);return dp(e)}Kw.exports={supportsColor:GM,stdout:dp(hp(!0,Gw.isatty(1))),stderr:dp(hp(!0,Gw.isatty(2)))}});var Yw=w((ut,Ic)=>{var KM=require("tty"),Mc=require("util");ut.init=tI;ut.log=QM;ut.formatArgs=XM;ut.save=ZM;ut.load=eI;ut.useColors=JM;ut.destroy=Mc.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ut.colors=[6,2,3,4,5,1];try{let r=Jw();r&&(r.stderr||r).level>=2&&(ut.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(r){}ut.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[e];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),r[t]=i,r},{});function JM(){return"colors"in ut.inspectOpts?Boolean(ut.inspectOpts.colors):KM.isatty(process.stderr.fd)}function XM(r){let{namespace:e,useColors:t}=this;if(t){let i=this.color,n="[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${e} [0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(n+"m+"+Ic.exports.humanize(this.diff)+"[0m")}else r[0]=YM()+e+" "+r[0]}function YM(){return ut.inspectOpts.hideDate?"":new Date().toISOString()+" "}function QM(...r){return process.stderr.write(Mc.format(...r)+`
`)}function ZM(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function eI(){return process.env.DEBUG}function tI(r){r.inspectOpts={};let e=Object.keys(ut.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=ut.inspectOpts[e[t]]}Ic.exports=up()(ut);var{formatters:Xw}=Ic.exports;Xw.o=function(r){return this.inspectOpts.colors=this.useColors,Mc.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Xw.O=function(r){return this.inspectOpts.colors=this.useColors,Mc.inspect(r,this.inspectOpts)}});var Fr=w((Wz,pp)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?pp.exports=zw():pp.exports=Yw()});var Qw=w(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});function rI(r){return function(e,t){return new Promise((i,n)=>{r.call(this,e,t,(s,o)=>{s?n(s):i(o)})})}}fp.default=rI});var tv=w((_p,ev)=>{"use strict";var Zw=_p&&_p.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},iI=require("events"),nI=Zw(Fr()),sI=Zw(Qw()),Mo=nI.default("agent-base");function oI(r){return Boolean(r)&&typeof r.addRequest=="function"}function mp(){let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function Fc(r,e){return new Fc.Agent(r,e)}(function(r){class e extends iI.EventEmitter{constructor(i,n){super();let s=n;typeof i=="function"?this.callback=i:i&&(s=i),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:mp()?443:80}set defaultPort(i){this.explicitDefaultPort=i}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:mp()?"https:":"http:"}set protocol(i){this.explicitProtocol=i}callback(i,n,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(i,n){let s=Object.assign({},n);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=mp()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,i._last=!0,i.shouldKeepAlive=!1;let o=!1,c=null,l=s.timeout||this.timeout,u=f=>{i._hadError||(i.emit("error",f),i._hadError=!0)},d=()=>{c=null,o=!0;let f=new Error(`A "socket" was not created for HTTP request before ${l}ms`);f.code="ETIMEOUT",u(f)},h=f=>{o||(c!==null&&(clearTimeout(c),c=null),u(f))},p=f=>{if(o)return;if(c!=null&&(clearTimeout(c),c=null),oI(f)){Mo("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(i,s);return}if(f){f.once("free",()=>{this.freeSocket(f,s)}),i.onSocket(f);return}let _=new Error(`no Duplex stream was returned to agent-base for \`${i.method} ${i.path}\``);u(_)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(Mo("Converting legacy callback function to promise"),this.promisifiedCallback=sI.default(this.callback)):this.promisifiedCallback=this.callback),typeof l=="number"&&l>0&&(c=setTimeout(d,l)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{Mo("Resolving socket for %o request: %o",s.protocol,`${i.method} ${i.path}`),Promise.resolve(this.promisifiedCallback(i,s)).then(p,h)}catch(f){Promise.reject(f).catch(h)}}freeSocket(i,n){Mo("Freeing socket %o %o",i.constructor.name,n),i.destroy()}destroy(){Mo("Destroying agent %o",this.constructor.name)}}r.Agent=e,r.prototype=r.Agent.prototype})(Fc||(Fc={}));ev.exports=Fc});var rv=w(Fo=>{"use strict";var aI=Fo&&Fo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fo,"__esModule",{value:!0});var cI=aI(Fr()),Io=cI.default("https-proxy-agent:parse-proxy-response");function lI(r){return new Promise((e,t)=>{let i=0,n=[];function s(){let h=r.read();h?d(h):r.once("readable",s)}function o(){r.removeListener("end",l),r.removeListener("error",u),r.removeListener("close",c),r.removeListener("readable",s)}function c(h){Io("onclose had error %o",h)}function l(){Io("onend")}function u(h){o(),Io("onerror %o",h),t(h)}function d(h){n.push(h),i+=h.length;let p=Buffer.concat(n,i);if(p.indexOf(`\r
\r
`)===-1){Io("have not received end of HTTP headers yet..."),s();return}let _=p.toString("ascii",0,p.indexOf(`\r
`)),m=+_.split(" ")[1];Io("got proxy server response: %o",_),e({statusCode:m,buffered:p})}r.on("error",u),r.on("close",c),r.on("end",l),s()})}Fo.default=lI});var ov=w(on=>{"use strict";var uI=on&&on.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(d){try{u(i.next(d))}catch(h){o(h)}}function l(d){try{u(i.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):n(d.value).then(c,l)}u((i=i.apply(r,e||[])).next())})},ns=on&&on.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(on,"__esModule",{value:!0});var iv=ns(require("net")),nv=ns(require("tls")),dI=ns(require("url")),hI=ns(require("assert")),pI=ns(Fr()),fI=tv(),mI=ns(rv()),Do=pI.default("https-proxy-agent:agent"),sv=class extends fI.Agent{constructor(e){let t;if(typeof e=="string"?t=dI.default.parse(e):t=e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Do("creating new HttpsProxyAgent instance: %o",t);super(t);let i=Object.assign({},t);this.secureProxy=t.secureProxy||wI(i.protocol),i.host=i.hostname||i.host,typeof i.port=="string"&&(i.port=parseInt(i.port,10)),!i.port&&i.host&&(i.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in i)&&(i.ALPNProtocols=["http 1.1"]),i.host&&i.path&&(delete i.path,delete i.pathname),this.proxy=i}callback(e,t){return uI(this,void 0,void 0,function*(){let{proxy:i,secureProxy:n}=this,s;n?(Do("Creating `tls.Socket`: %o",i),s=nv.default.connect(i)):(Do("Creating `net.Socket`: %o",i),s=iv.default.connect(i));let o=Object.assign({},i.headers),l=`CONNECT ${`${t.host}:${t.port}`} HTTP/1.1\r
`;i.auth&&(o["Proxy-Authorization"]=`Basic ${Buffer.from(i.auth).toString("base64")}`);let{host:u,port:d,secureEndpoint:h}=t;gI(d,h)||(u+=`:${d}`),o.Host=u,o.Connection="close";for(let g of Object.keys(o))l+=`${g}: ${o[g]}\r
`;let p=mI.default(s);s.write(`${l}\r
`);let{statusCode:f,buffered:_}=yield p;if(f===200){if(e.once("socket",_I),t.secureEndpoint){let g=t.servername||t.host;if(!g)throw new Error('Could not determine "servername"');return Do("Upgrading socket connection to TLS"),nv.default.connect(Object.assign(Object.assign({},vI(t,"host","hostname","path","port")),{socket:s,servername:g}))}return s}s.destroy();let m=new iv.default.Socket;return m.readable=!0,e.once("socket",g=>{Do("replaying proxy buffer for failed request"),hI.default(g.listenerCount("data")>0),g.push(_),g.push(null)}),m})}};on.default=sv;function _I(r){r.resume()}function gI(r,e){return Boolean(!e&&r===80||e&&r===443)}function wI(r){return typeof r=="string"?/^https:?$/i.test(r):!1}function vI(r,...e){let t={},i;for(i in r)e.includes(i)||(t[i]=r[i]);return t}});var yp=w((vp,av)=>{"use strict";var yI=vp&&vp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},gp=yI(ov());function wp(r){return new gp.default(r)}(function(r){r.HttpsProxyAgent=gp.default,r.prototype=gp.default.prototype})(wp||(wp={}));av.exports=wp});var bp=w((Vz,bI)=>{bI.exports={name:"playwright-core",version:"1.15.2",description:"A high-level API to automate web browsers",repository:"github:Microsoft/playwright",engines:{node:">=12"},homepage:"https://playwright.dev",main:"index.js",bin:{playwright:"./lib/cli/cli.js"},exports:{".":{import:"./index.mjs",require:"./index.js"},"./":"./"},scripts:{install:"node install.js"},author:{name:"Microsoft Corporation"},license:"Apache-2.0",dependencies:{commander:"^6.1.0",debug:"^4.1.1","extract-zip":"^2.0.1","https-proxy-agent":"^5.0.0","jpeg-js":"^0.4.2",mime:"^2.4.6",pngjs:"^5.0.0",progress:"^2.0.3","proper-lockfile":"^4.1.1","proxy-from-env":"^1.1.0",rimraf:"^3.0.2","stack-utils":"^2.0.3",ws:"^7.4.6",yazl:"^2.5.1"}}});var H=w(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.fetchData=AI;ve.downloadFile=MI;ve.spawnAsync=II;ve.makeWaitForNextTask=FI;ve.assert=DI;ve.debugAssert=RI;ve.isString=NI;ve.isRegExp=qI;ve.isObject=LI;ve.isError=BI;ve.debugMode=HI;ve.setUnderTest=jI;ve.isUnderTest=hv;ve.getFromENV=Ep;ve.getAsBooleanFromENV=WI;ve.mkdirIfNeeded=$I;ve.headersObjectToArray=zI;ve.headersArrayToObject=UI;ve.monotonicTime=VI;ve.objectToArray=GI;ve.arrayToObject=KI;ve.calculateFileSha1=JI;ve.calculateSha1=XI;ve.createGuid=YI;ve.removeFolders=QI;ve.canAccessFile=ZI;ve.getUserAgent=eF;ve.getPlaywrightVersion=fv;ve.constructURLBasedOnBaseURL=tF;ve.wrapInASCIIBox=iF;ve.isFilePayload=nF;ve.hostPlatform=ve.existsAsync=void 0;var xI=No(require("path")),Ro=No(require("fs")),SI=No(require("stream")),EI=No(Rw()),xp=lv(require("crypto")),ss=No(require("os")),CI=require("child_process"),kI=qw(),Dc=lv(require("url")),PI=Oc();function cv(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(cv=function(i){return i?t:e})(r)}function lv(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=cv(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function No(r){return r&&r.__esModule?r:{default:r}}var OI=yp(),TI=r=>new Promise(e=>Ro.default.stat(r,t=>e(!t)));ve.existsAsync=TI;function Sp(r,e,t){let i=Dc.parse(r);i.method=e;let n=(0,kI.getProxyForUrl)(r);if(n)if(r.startsWith("http:")){let c=Dc.parse(n);i={path:i.href,host:c.hostname,port:c.port}}else{let c=Dc.parse(n);c.secureProxy=c.protocol==="https:",i.agent=new OI(c),i.rejectUnauthorized=!1}let s=c=>{c.statusCode>=300&&c.statusCode<400&&c.headers.location?Sp(c.headers.location,e,t):t(c)},o=i.protocol==="https:"?require("https").request(i,s):require("http").request(i,s);return o.end(),o}function AI(r){return new Promise((e,t)=>{Sp(r,"GET",function(i){if(i.statusCode!==200){t(new Error(`fetch failed: server returned code ${i.statusCode}. URL: ${r}`));return}let n="";i.on("data",s=>n+=s),i.on("error",s=>t(s)),i.on("end",()=>e(n))}).on("error",i=>t(i))})}function MI(r,e,t={}){let{progressCallback:i,log:n=()=>{}}=t;n("running download:"),n(`-- from url: ${r}`),n(`-- to location: ${e}`);let s=({error:h})=>{},o=0,c=0,l=new Promise(h=>{s=h});return Sp(r,"GET",h=>{if(n(`-- response status code: ${h.statusCode}`),h.statusCode!==200){let f=new Error(`Download failed: server returned code ${h.statusCode}. URL: ${r}`);h.resume(),s({error:f});return}let p=Ro.default.createWriteStream(e);p.on("finish",()=>s({error:null})),p.on("error",f=>s({error:f})),h.pipe(p),c=parseInt(h.headers["content-length"],10),n(`-- total bytes: ${c}`),i&&h.on("data",d)}).on("error",h=>s({error:h})),l;function d(h){o+=h.length,i(o,c)}}function II(r,e,t){let i=(0,CI.spawn)(r,e,t);return new Promise(n=>{let s="",o="";i.stdout&&i.stdout.on("data",c=>s+=c),i.stderr&&i.stderr.on("data",c=>o+=c),i.on("close",c=>n({stdout:s,stderr:o,code:c})),i.on("error",c=>n({stdout:s,stderr:o,code:0,error:c}))})}function FI(){if(process.versions.electron)return i=>setTimeout(i,0);if(parseInt(process.versions.node,10)>=11)return setImmediate;let r=!1,e=[],t=()=>{let i=e.shift();if(!i){r=!1;return}setImmediate(t),i()};return i=>{e.push(i),r||(r=!0,setImmediate(t))}}function DI(r,e){if(!r)throw new Error(e||"Assertion error")}function RI(r,e){if(hv()&&!r)throw new Error(e)}function NI(r){return typeof r=="string"||r instanceof String}function qI(r){return r instanceof RegExp||Object.prototype.toString.call(r)==="[object RegExp]"}function LI(r){return typeof r=="object"&&r!==null}function BI(r){return r instanceof Error||r&&r.__proto__&&r.__proto__.name==="Error"}var uv=Ep("PWDEBUG")||"";function HI(){return uv==="console"?"console":uv?"inspector":""}var dv=!1;function jI(){dv=!0}function hv(){return dv}function Ep(r){let e=process.env[r];return e=e===void 0?process.env[`npm_config_${r.toLowerCase()}`]:e,e=e===void 0?process.env[`npm_package_config_${r.toLowerCase()}`]:e,e}function WI(r){let e=Ep(r);return!!e&&e!=="false"&&e!=="0"}async function $I(r){await Ro.default.promises.mkdir(xI.default.dirname(r),{recursive:!0}).catch(()=>{})}function zI(r,e,t){t||(t=e);let i=[];for(let n in r){let s=r[n];if(e){let o=n.toLowerCase()==="set-cookie"?t:e;for(let c of s.split(o))i.push({name:n,value:c.trim()})}else i.push({name:n,value:s})}return i}function UI(r,e){let t={};for(let{name:i,value:n}of r)t[e?i.toLowerCase():i]=n;return t}function VI(){let[r,e]=process.hrtime();return r*1e3+(e/1e3|0)/1e3}var pv=class extends SI.default.Writable{constructor(...e){super(...e);this._hash=xp.createHash("sha1")}_write(e,t,i){this._hash.update(e),i()}digest(){return this._hash.digest("hex")}};function GI(r){if(!r)return;let e=[];for(let[t,i]of Object.entries(r))e.push({name:t,value:i});return e}function KI(r){if(!r)return;let e={};for(let{name:t,value:i}of r)e[t]=i;return e}async function JI(r){let e=new pv,t=Ro.default.createReadStream(r);return t.on("open",()=>t.pipe(e)),await new Promise((i,n)=>{e.on("finish",i),e.on("error",n)}),e.digest()}function XI(r){let e=xp.createHash("sha1");return e.update(r),e.digest("hex")}function YI(){return xp.randomBytes(16).toString("hex")}async function QI(r){return await Promise.all(r.map(e=>new Promise(t=>{(0,EI.default)(e,{maxBusyTries:10},i=>{t(i)})})))}function ZI(r){if(!r)return!1;try{return Ro.default.accessSync(r),!0}catch(e){return!1}}function eF(){return`Playwright/${fv()} (${ss.default.arch()}/${ss.default.platform()}/${ss.default.release()})`}function fv(r=!1){let e=bp();return r?e.version.split(".").slice(0,2).join("."):e.version}function tF(r,e){try{return new Dc.URL(e,r).toString()}catch(t){return e}}var rF=(()=>{let r=ss.default.platform();if(r==="darwin"){let e=ss.default.release().split(".").map(i=>parseInt(i,10)),t="";if(e[0]<18)t="mac10.13";else if(e[0]===18)t="mac10.14";else if(e[0]===19)t="mac10.15";else{let i=11;t="mac"+Math.min(e[0]-9,i),ss.default.cpus().some(n=>n.model.includes("Apple"))&&(t+="-arm64")}return t}if(r==="linux"){let e=(0,PI.getUbuntuVersionSync)();return parseInt(e,10)<=19?"ubuntu18.04":"ubuntu20.04"}return r==="win32"?"win64":r})();ve.hostPlatform=rF;function iF(r,e=0){let t=r.split(`
`),i=Math.max(...t.map(n=>n.length));return["\u2554"+"\u2550".repeat(i+e*2)+"\u2557",...t.map(n=>"\u2551"+" ".repeat(e)+n+" ".repeat(i-n.length+e)+"\u2551"),"\u255A"+"\u2550".repeat(i+e*2)+"\u255D"].join(`
`)}function nF(r){return typeof r=="object"&&r.name&&r.mimeType&&r.buffer}});var Cp=w(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.tEnum=Be.tObject=Be.tArray=Be.tOptional=Be.tAny=Be.tUndefined=Be.tBinary=Be.tString=Be.tBoolean=Be.tNumber=Be.ValidationError=void 0;var sF=H(),tr=class extends Error{};Be.ValidationError=tr;var oF=(r,e)=>{if(r instanceof Number)return r.valueOf();if(typeof r=="number")return r;throw new tr(`${e}: expected number, got ${typeof r}`)};Be.tNumber=oF;var aF=(r,e)=>{if(r instanceof Boolean)return r.valueOf();if(typeof r=="boolean")return r;throw new tr(`${e}: expected boolean, got ${typeof r}`)};Be.tBoolean=aF;var cF=(r,e)=>{if(r instanceof String)return r.valueOf();if(typeof r=="string")return r;throw new tr(`${e}: expected string, got ${typeof r}`)};Be.tString=cF;var lF=(r,e)=>{if(r instanceof String)return r.valueOf();if(typeof r=="string")return r;throw new tr(`${e}: expected base64-encoded buffer, got ${typeof r}`)};Be.tBinary=lF;var uF=(r,e)=>{if(Object.is(r,void 0))return r;throw new tr(`${e}: expected undefined, got ${typeof r}`)};Be.tUndefined=uF;var dF=(r,e)=>r;Be.tAny=dF;var hF=r=>(e,t)=>Object.is(e,void 0)?e:r(e,t);Be.tOptional=hF;var pF=r=>(e,t)=>{if(!Array.isArray(e))throw new tr(`${t}: expected array, got ${typeof e}`);return e.map((i,n)=>r(i,t+"["+n+"]"))};Be.tArray=pF;var fF=r=>(e,t)=>{if(Object.is(e,null))throw new tr(`${t}: expected object, got null`);if(typeof e!="object")throw new tr(`${t}: expected object, got ${typeof e}`);let i={};for(let[n,s]of Object.entries(r)){let o=s(e[n],t?t+"."+n:n);Object.is(o,void 0)||(i[n]=o)}if((0,sF.isUnderTest)())for(let[n,s]of Object.entries(e))n.startsWith("__testHook")&&(i[n]=s);return i};Be.tObject=fF;var mF=r=>(e,t)=>{if(!r.includes(e))throw new tr(`${t}: expected one of (${r.join("|")})`);return e};Be.tEnum=mF});var kp=w(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.createScheme=_F;Object.defineProperty(qo,"Validator",{enumerable:!0,get:function(){return a.Validator}});Object.defineProperty(qo,"ValidationError",{enumerable:!0,get:function(){return a.ValidationError}});var a=Cp();function _F(r){let e={},t=i=>(n,s)=>{let o=e[i];if(!o)throw new a.ValidationError(s+': unknown type "'+i+'"');return o(n,s)};return e.StackFrame=(0,a.tObject)({file:a.tString,line:(0,a.tOptional)(a.tNumber),column:(0,a.tOptional)(a.tNumber),function:(0,a.tOptional)(a.tString)}),e.Metadata=(0,a.tObject)({stack:(0,a.tOptional)((0,a.tArray)(t("StackFrame"))),apiName:(0,a.tOptional)(a.tString),collectLogs:(0,a.tOptional)(a.tBoolean)}),e.Point=(0,a.tObject)({x:a.tNumber,y:a.tNumber}),e.Rect=(0,a.tObject)({x:a.tNumber,y:a.tNumber,width:a.tNumber,height:a.tNumber}),e.SerializedValue=(0,a.tObject)({n:(0,a.tOptional)(a.tNumber),b:(0,a.tOptional)(a.tBoolean),s:(0,a.tOptional)(a.tString),v:(0,a.tOptional)((0,a.tEnum)(["null","undefined","NaN","Infinity","-Infinity","-0"])),d:(0,a.tOptional)(a.tString),r:(0,a.tOptional)((0,a.tObject)({p:a.tString,f:a.tString})),a:(0,a.tOptional)((0,a.tArray)(t("SerializedValue"))),o:(0,a.tOptional)((0,a.tArray)((0,a.tObject)({k:a.tString,v:t("SerializedValue")}))),h:(0,a.tOptional)(a.tNumber)}),e.SerializedArgument=(0,a.tObject)({value:t("SerializedValue"),handles:(0,a.tArray)(r("*"))}),e.AXNode=(0,a.tObject)({role:a.tString,name:a.tString,valueString:(0,a.tOptional)(a.tString),valueNumber:(0,a.tOptional)(a.tNumber),description:(0,a.tOptional)(a.tString),keyshortcuts:(0,a.tOptional)(a.tString),roledescription:(0,a.tOptional)(a.tString),valuetext:(0,a.tOptional)(a.tString),disabled:(0,a.tOptional)(a.tBoolean),expanded:(0,a.tOptional)(a.tBoolean),focused:(0,a.tOptional)(a.tBoolean),modal:(0,a.tOptional)(a.tBoolean),multiline:(0,a.tOptional)(a.tBoolean),multiselectable:(0,a.tOptional)(a.tBoolean),readonly:(0,a.tOptional)(a.tBoolean),required:(0,a.tOptional)(a.tBoolean),selected:(0,a.tOptional)(a.tBoolean),checked:(0,a.tOptional)((0,a.tEnum)(["checked","unchecked","mixed"])),pressed:(0,a.tOptional)((0,a.tEnum)(["pressed","released","mixed"])),level:(0,a.tOptional)(a.tNumber),valuemin:(0,a.tOptional)(a.tNumber),valuemax:(0,a.tOptional)(a.tNumber),autocomplete:(0,a.tOptional)(a.tString),haspopup:(0,a.tOptional)(a.tString),invalid:(0,a.tOptional)(a.tString),orientation:(0,a.tOptional)(a.tString),children:(0,a.tOptional)((0,a.tArray)(t("AXNode")))}),e.SetNetworkCookie=(0,a.tObject)({name:a.tString,value:a.tString,url:(0,a.tOptional)(a.tString),domain:(0,a.tOptional)(a.tString),path:(0,a.tOptional)(a.tString),expires:(0,a.tOptional)(a.tNumber),httpOnly:(0,a.tOptional)(a.tBoolean),secure:(0,a.tOptional)(a.tBoolean),sameSite:(0,a.tOptional)((0,a.tEnum)(["Strict","Lax","None"]))}),e.NetworkCookie=(0,a.tObject)({name:a.tString,value:a.tString,domain:a.tString,path:a.tString,expires:a.tNumber,httpOnly:a.tBoolean,secure:a.tBoolean,sameSite:(0,a.tEnum)(["Strict","Lax","None"])}),e.NameValue=(0,a.tObject)({name:a.tString,value:a.tString}),e.OriginStorage=(0,a.tObject)({origin:a.tString,localStorage:(0,a.tArray)(t("NameValue"))}),e.SerializedError=(0,a.tObject)({error:(0,a.tOptional)((0,a.tObject)({message:a.tString,name:a.tString,stack:(0,a.tOptional)(a.tString)})),value:(0,a.tOptional)(t("SerializedValue"))}),e.InterceptedResponse=(0,a.tObject)({request:r("Request"),status:a.tNumber,statusText:a.tString,headers:(0,a.tArray)(t("NameValue"))}),e.FetchRequestFetchParams=(0,a.tObject)({url:a.tString,params:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),method:(0,a.tOptional)(a.tString),headers:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),postData:(0,a.tOptional)(a.tBinary),formData:(0,a.tOptional)(a.tAny),timeout:(0,a.tOptional)(a.tNumber),failOnStatusCode:(0,a.tOptional)(a.tBoolean)}),e.FetchRequestFetchResponseBodyParams=(0,a.tObject)({fetchUid:a.tString}),e.FetchRequestDisposeFetchResponseParams=(0,a.tObject)({fetchUid:a.tString}),e.FetchRequestDisposeParams=(0,a.tOptional)((0,a.tObject)({})),e.FetchResponse=(0,a.tObject)({fetchUid:a.tString,url:a.tString,status:a.tNumber,statusText:a.tString,headers:(0,a.tArray)(t("NameValue"))}),e.RootInitializeParams=(0,a.tObject)({sdkLanguage:a.tString}),e.PlaywrightSocksConnectedParams=(0,a.tObject)({uid:a.tString,host:a.tString,port:a.tNumber}),e.PlaywrightSocksFailedParams=(0,a.tObject)({uid:a.tString,errorCode:a.tString}),e.PlaywrightSocksDataParams=(0,a.tObject)({uid:a.tString,data:a.tBinary}),e.PlaywrightSocksErrorParams=(0,a.tObject)({uid:a.tString,error:a.tString}),e.PlaywrightSocksEndParams=(0,a.tObject)({uid:a.tString}),e.PlaywrightNewRequestParams=(0,a.tObject)({baseURL:(0,a.tOptional)(a.tString),userAgent:(0,a.tOptional)(a.tString),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)})),timeout:(0,a.tOptional)(a.tNumber)}),e.SelectorsRegisterParams=(0,a.tObject)({name:a.tString,source:a.tString,contentScript:(0,a.tOptional)(a.tBoolean)}),e.BrowserTypeConnectParams=(0,a.tObject)({wsEndpoint:a.tString,headers:(0,a.tOptional)(a.tAny),slowMo:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.BrowserTypeLaunchParams=(0,a.tObject)({channel:(0,a.tOptional)(a.tString),executablePath:(0,a.tOptional)(a.tString),args:(0,a.tOptional)((0,a.tArray)(a.tString)),ignoreAllDefaultArgs:(0,a.tOptional)(a.tBoolean),ignoreDefaultArgs:(0,a.tOptional)((0,a.tArray)(a.tString)),handleSIGINT:(0,a.tOptional)(a.tBoolean),handleSIGTERM:(0,a.tOptional)(a.tBoolean),handleSIGHUP:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),env:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),headless:(0,a.tOptional)(a.tBoolean),devtools:(0,a.tOptional)(a.tBoolean),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)})),downloadsPath:(0,a.tOptional)(a.tString),tracesDir:(0,a.tOptional)(a.tString),chromiumSandbox:(0,a.tOptional)(a.tBoolean),firefoxUserPrefs:(0,a.tOptional)(a.tAny),slowMo:(0,a.tOptional)(a.tNumber)}),e.BrowserTypeLaunchPersistentContextParams=(0,a.tObject)({channel:(0,a.tOptional)(a.tString),executablePath:(0,a.tOptional)(a.tString),args:(0,a.tOptional)((0,a.tArray)(a.tString)),ignoreAllDefaultArgs:(0,a.tOptional)(a.tBoolean),ignoreDefaultArgs:(0,a.tOptional)((0,a.tArray)(a.tString)),handleSIGINT:(0,a.tOptional)(a.tBoolean),handleSIGTERM:(0,a.tOptional)(a.tBoolean),handleSIGHUP:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),env:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),headless:(0,a.tOptional)(a.tBoolean),devtools:(0,a.tOptional)(a.tBoolean),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)})),downloadsPath:(0,a.tOptional)(a.tString),tracesDir:(0,a.tOptional)(a.tString),chromiumSandbox:(0,a.tOptional)(a.tBoolean),noDefaultViewport:(0,a.tOptional)(a.tBoolean),viewport:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber})),screen:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber})),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),javaScriptEnabled:(0,a.tOptional)(a.tBoolean),bypassCSP:(0,a.tOptional)(a.tBoolean),userAgent:(0,a.tOptional)(a.tString),locale:(0,a.tOptional)(a.tString),timezoneId:(0,a.tOptional)(a.tString),geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)})),permissions:(0,a.tOptional)((0,a.tArray)(a.tString)),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),offline:(0,a.tOptional)(a.tBoolean),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),deviceScaleFactor:(0,a.tOptional)(a.tNumber),isMobile:(0,a.tOptional)(a.tBoolean),hasTouch:(0,a.tOptional)(a.tBoolean),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference"])),reducedMotion:(0,a.tOptional)((0,a.tEnum)(["reduce","no-preference"])),forcedColors:(0,a.tOptional)((0,a.tEnum)(["active","none"])),acceptDownloads:(0,a.tOptional)(a.tBoolean),baseURL:(0,a.tOptional)(a.tString),_debugName:(0,a.tOptional)(a.tString),recordVideo:(0,a.tOptional)((0,a.tObject)({dir:a.tString,size:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber}))})),recordHar:(0,a.tOptional)((0,a.tObject)({omitContent:(0,a.tOptional)(a.tBoolean),path:a.tString})),strictSelectors:(0,a.tOptional)(a.tBoolean),userDataDir:a.tString,slowMo:(0,a.tOptional)(a.tNumber)}),e.BrowserTypeConnectOverCDPParams=(0,a.tObject)({endpointURL:a.tString,headers:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),slowMo:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.BrowserCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserKillForTestsParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserNewContextParams=(0,a.tObject)({noDefaultViewport:(0,a.tOptional)(a.tBoolean),viewport:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber})),screen:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber})),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),javaScriptEnabled:(0,a.tOptional)(a.tBoolean),bypassCSP:(0,a.tOptional)(a.tBoolean),userAgent:(0,a.tOptional)(a.tString),locale:(0,a.tOptional)(a.tString),timezoneId:(0,a.tOptional)(a.tString),geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)})),permissions:(0,a.tOptional)((0,a.tArray)(a.tString)),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),offline:(0,a.tOptional)(a.tBoolean),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),deviceScaleFactor:(0,a.tOptional)(a.tNumber),isMobile:(0,a.tOptional)(a.tBoolean),hasTouch:(0,a.tOptional)(a.tBoolean),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference"])),reducedMotion:(0,a.tOptional)((0,a.tEnum)(["reduce","no-preference"])),forcedColors:(0,a.tOptional)((0,a.tEnum)(["active","none"])),acceptDownloads:(0,a.tOptional)(a.tBoolean),baseURL:(0,a.tOptional)(a.tString),_debugName:(0,a.tOptional)(a.tString),recordVideo:(0,a.tOptional)((0,a.tObject)({dir:a.tString,size:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber}))})),recordHar:(0,a.tOptional)((0,a.tObject)({omitContent:(0,a.tOptional)(a.tBoolean),path:a.tString})),strictSelectors:(0,a.tOptional)(a.tBoolean),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)})),storageState:(0,a.tOptional)((0,a.tObject)({cookies:(0,a.tOptional)((0,a.tArray)(t("SetNetworkCookie"))),origins:(0,a.tOptional)((0,a.tArray)(t("OriginStorage")))}))}),e.BrowserNewBrowserCDPSessionParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserStartTracingParams=(0,a.tObject)({page:(0,a.tOptional)(r("Page")),path:(0,a.tOptional)(a.tString),screenshots:(0,a.tOptional)(a.tBoolean),categories:(0,a.tOptional)((0,a.tArray)(a.tString))}),e.BrowserStopTracingParams=(0,a.tOptional)((0,a.tObject)({})),e.EventTargetWaitForEventInfoParams=(0,a.tObject)({info:(0,a.tObject)({waitId:a.tString,phase:(0,a.tEnum)(["before","after","log"]),event:(0,a.tOptional)(a.tString),message:(0,a.tOptional)(a.tString),error:(0,a.tOptional)(a.tString)})}),e.BrowserContextWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.PageWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.WebSocketWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.ElectronApplicationWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.AndroidDeviceWaitForEventInfoParams=t("EventTargetWaitForEventInfoParams"),e.BrowserContextAddCookiesParams=(0,a.tObject)({cookies:(0,a.tArray)(t("SetNetworkCookie"))}),e.BrowserContextAddInitScriptParams=(0,a.tObject)({source:a.tString}),e.BrowserContextClearCookiesParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextClearPermissionsParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextCookiesParams=(0,a.tObject)({urls:(0,a.tArray)(a.tString)}),e.BrowserContextExposeBindingParams=(0,a.tObject)({name:a.tString,needsHandle:(0,a.tOptional)(a.tBoolean)}),e.BrowserContextGrantPermissionsParams=(0,a.tObject)({permissions:(0,a.tArray)(a.tString),origin:(0,a.tOptional)(a.tString)}),e.BrowserContextNewPageParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextSetDefaultNavigationTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.BrowserContextSetDefaultTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.BrowserContextSetExtraHTTPHeadersParams=(0,a.tObject)({headers:(0,a.tArray)(t("NameValue"))}),e.BrowserContextSetGeolocationParams=(0,a.tObject)({geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)}))}),e.BrowserContextSetHTTPCredentialsParams=(0,a.tObject)({httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString}))}),e.BrowserContextSetNetworkInterceptionEnabledParams=(0,a.tObject)({enabled:a.tBoolean}),e.BrowserContextSetOfflineParams=(0,a.tObject)({offline:a.tBoolean}),e.BrowserContextStorageStateParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextPauseParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextRecorderSupplementEnableParams=(0,a.tObject)({language:(0,a.tOptional)(a.tString),startRecording:(0,a.tOptional)(a.tBoolean),pauseOnNextStatement:(0,a.tOptional)(a.tBoolean),launchOptions:(0,a.tOptional)(a.tAny),contextOptions:(0,a.tOptional)(a.tAny),device:(0,a.tOptional)(a.tString),saveStorage:(0,a.tOptional)(a.tString),outputFile:(0,a.tOptional)(a.tString)}),e.BrowserContextNewCDPSessionParams=(0,a.tObject)({page:(0,a.tOptional)(r("Page")),frame:(0,a.tOptional)(r("Frame"))}),e.BrowserContextTracingStartParams=(0,a.tObject)({name:(0,a.tOptional)(a.tString),snapshots:(0,a.tOptional)(a.tBoolean),screenshots:(0,a.tOptional)(a.tBoolean)}),e.BrowserContextTracingStartChunkParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextTracingStopChunkParams=(0,a.tObject)({save:a.tBoolean}),e.BrowserContextTracingStopParams=(0,a.tOptional)((0,a.tObject)({})),e.BrowserContextHarExportParams=(0,a.tOptional)((0,a.tObject)({})),e.PageSetDefaultNavigationTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.PageSetDefaultTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.PageSetFileChooserInterceptedNoReplyParams=(0,a.tObject)({intercepted:a.tBoolean}),e.PageAddInitScriptParams=(0,a.tObject)({source:a.tString}),e.PageCloseParams=(0,a.tObject)({runBeforeUnload:(0,a.tOptional)(a.tBoolean)}),e.PageEmulateMediaParams=(0,a.tObject)({media:(0,a.tOptional)((0,a.tEnum)(["screen","print","null"])),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference","null"])),reducedMotion:(0,a.tOptional)((0,a.tEnum)(["reduce","no-preference","null"])),forcedColors:(0,a.tOptional)((0,a.tEnum)(["active","none","null"]))}),e.PageExposeBindingParams=(0,a.tObject)({name:a.tString,needsHandle:(0,a.tOptional)(a.tBoolean)}),e.PageGoBackParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"]))}),e.PageGoForwardParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"]))}),e.PageReloadParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"]))}),e.PageScreenshotParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),type:(0,a.tOptional)((0,a.tEnum)(["png","jpeg"])),quality:(0,a.tOptional)(a.tNumber),omitBackground:(0,a.tOptional)(a.tBoolean),fullPage:(0,a.tOptional)(a.tBoolean),clip:(0,a.tOptional)(t("Rect"))}),e.PageSetExtraHTTPHeadersParams=(0,a.tObject)({headers:(0,a.tArray)(t("NameValue"))}),e.PageSetNetworkInterceptionEnabledParams=(0,a.tObject)({enabled:a.tBoolean}),e.PageSetViewportSizeParams=(0,a.tObject)({viewportSize:(0,a.tObject)({width:a.tNumber,height:a.tNumber})}),e.PageKeyboardDownParams=(0,a.tObject)({key:a.tString}),e.PageKeyboardUpParams=(0,a.tObject)({key:a.tString}),e.PageKeyboardInsertTextParams=(0,a.tObject)({text:a.tString}),e.PageKeyboardTypeParams=(0,a.tObject)({text:a.tString,delay:(0,a.tOptional)(a.tNumber)}),e.PageKeyboardPressParams=(0,a.tObject)({key:a.tString,delay:(0,a.tOptional)(a.tNumber)}),e.PageMouseMoveParams=(0,a.tObject)({x:a.tNumber,y:a.tNumber,steps:(0,a.tOptional)(a.tNumber)}),e.PageMouseDownParams=(0,a.tObject)({button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber)}),e.PageMouseUpParams=(0,a.tObject)({button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber)}),e.PageMouseClickParams=(0,a.tObject)({x:a.tNumber,y:a.tNumber,delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber)}),e.PageMouseWheelParams=(0,a.tObject)({deltaX:a.tNumber,deltaY:a.tNumber}),e.PageTouchscreenTapParams=(0,a.tObject)({x:a.tNumber,y:a.tNumber}),e.PageAccessibilitySnapshotParams=(0,a.tObject)({interestingOnly:(0,a.tOptional)(a.tBoolean),root:(0,a.tOptional)(r("ElementHandle"))}),e.PagePdfParams=(0,a.tObject)({scale:(0,a.tOptional)(a.tNumber),displayHeaderFooter:(0,a.tOptional)(a.tBoolean),headerTemplate:(0,a.tOptional)(a.tString),footerTemplate:(0,a.tOptional)(a.tString),printBackground:(0,a.tOptional)(a.tBoolean),landscape:(0,a.tOptional)(a.tBoolean),pageRanges:(0,a.tOptional)(a.tString),format:(0,a.tOptional)(a.tString),width:(0,a.tOptional)(a.tString),height:(0,a.tOptional)(a.tString),preferCSSPageSize:(0,a.tOptional)(a.tBoolean),margin:(0,a.tOptional)((0,a.tObject)({top:(0,a.tOptional)(a.tString),bottom:(0,a.tOptional)(a.tString),left:(0,a.tOptional)(a.tString),right:(0,a.tOptional)(a.tString)}))}),e.PageStartJSCoverageParams=(0,a.tObject)({resetOnNavigation:(0,a.tOptional)(a.tBoolean),reportAnonymousScripts:(0,a.tOptional)(a.tBoolean)}),e.PageStopJSCoverageParams=(0,a.tOptional)((0,a.tObject)({})),e.PageStartCSSCoverageParams=(0,a.tObject)({resetOnNavigation:(0,a.tOptional)(a.tBoolean)}),e.PageStopCSSCoverageParams=(0,a.tOptional)((0,a.tObject)({})),e.PageBringToFrontParams=(0,a.tOptional)((0,a.tObject)({})),e.FrameEvalOnSelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.FrameEvalOnSelectorAllParams=(0,a.tObject)({selector:a.tString,expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.FrameAddScriptTagParams=(0,a.tObject)({url:(0,a.tOptional)(a.tString),content:(0,a.tOptional)(a.tString),type:(0,a.tOptional)(a.tString)}),e.FrameAddStyleTagParams=(0,a.tObject)({url:(0,a.tOptional)(a.tString),content:(0,a.tOptional)(a.tString)}),e.FrameCheckParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameClickParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameContentParams=(0,a.tOptional)((0,a.tObject)({})),e.FrameDragAndDropParams=(0,a.tObject)({source:a.tString,target:a.tString,force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean),sourcePosition:(0,a.tOptional)(t("Point")),targetPosition:(0,a.tOptional)(t("Point"))}),e.FrameDblclickParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameDispatchEventParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),type:a.tString,eventInit:t("SerializedArgument"),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameEvaluateExpressionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.FrameEvaluateExpressionHandleParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.FrameFillParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),value:a.tString,force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.FrameFocusParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameFrameElementParams=(0,a.tOptional)((0,a.tObject)({})),e.FrameGetAttributeParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),name:a.tString,timeout:(0,a.tOptional)(a.tNumber)}),e.FrameGotoParams=(0,a.tObject)({url:a.tString,timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"])),referer:(0,a.tOptional)(a.tString)}),e.FrameHoverParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameInnerHTMLParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameInnerTextParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameInputValueParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameIsCheckedParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameIsDisabledParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameIsEnabledParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameIsHiddenParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean)}),e.FrameIsVisibleParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean)}),e.FrameIsEditableParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FramePressParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),key:a.tString,delay:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameQuerySelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean)}),e.FrameQuerySelectorAllParams=(0,a.tObject)({selector:a.tString}),e.FrameSelectOptionParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),elements:(0,a.tOptional)((0,a.tArray)(r("ElementHandle"))),options:(0,a.tOptional)((0,a.tArray)((0,a.tObject)({value:(0,a.tOptional)(a.tString),label:(0,a.tOptional)(a.tString),index:(0,a.tOptional)(a.tNumber)}))),force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.FrameSetContentParams=(0,a.tObject)({html:a.tString,timeout:(0,a.tOptional)(a.tNumber),waitUntil:(0,a.tOptional)((0,a.tEnum)(["load","domcontentloaded","networkidle"]))}),e.FrameSetInputFilesParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),files:(0,a.tArray)((0,a.tObject)({name:a.tString,mimeType:(0,a.tOptional)(a.tString),buffer:a.tBinary})),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.FrameTapParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameTextContentParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameTitleParams=(0,a.tOptional)((0,a.tObject)({})),e.FrameTypeParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),text:a.tString,delay:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.FrameUncheckParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.FrameWaitForFunctionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument"),timeout:(0,a.tOptional)(a.tNumber),pollingInterval:(0,a.tOptional)(a.tNumber)}),e.FrameWaitForSelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),state:(0,a.tOptional)((0,a.tEnum)(["attached","detached","visible","hidden"]))}),e.WorkerEvaluateExpressionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.WorkerEvaluateExpressionHandleParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.JSHandleDisposeParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleDisposeParams=t("JSHandleDisposeParams"),e.JSHandleEvaluateExpressionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElementHandleEvaluateExpressionParams=t("JSHandleEvaluateExpressionParams"),e.JSHandleEvaluateExpressionHandleParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElementHandleEvaluateExpressionHandleParams=t("JSHandleEvaluateExpressionHandleParams"),e.JSHandleGetPropertyListParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleGetPropertyListParams=t("JSHandleGetPropertyListParams"),e.JSHandleGetPropertyParams=(0,a.tObject)({name:a.tString}),e.ElementHandleGetPropertyParams=t("JSHandleGetPropertyParams"),e.JSHandleJsonValueParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleJsonValueParams=t("JSHandleJsonValueParams"),e.ElementHandleEvalOnSelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElementHandleEvalOnSelectorAllParams=(0,a.tObject)({selector:a.tString,expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElementHandleBoundingBoxParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleCheckParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleClickParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),clickCount:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleContentFrameParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleDblclickParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),delay:(0,a.tOptional)(a.tNumber),button:(0,a.tOptional)((0,a.tEnum)(["left","right","middle"])),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleDispatchEventParams=(0,a.tObject)({type:a.tString,eventInit:t("SerializedArgument")}),e.ElementHandleFillParams=(0,a.tObject)({value:a.tString,force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleFocusParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleGetAttributeParams=(0,a.tObject)({name:a.tString}),e.ElementHandleHoverParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleInnerHTMLParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleInnerTextParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleInputValueParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsCheckedParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsDisabledParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsEditableParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsEnabledParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsHiddenParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleIsVisibleParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleOwnerFrameParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandlePressParams=(0,a.tObject)({key:a.tString,delay:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleQuerySelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleQuerySelectorAllParams=(0,a.tObject)({selector:a.tString}),e.ElementHandleScreenshotParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber),type:(0,a.tOptional)((0,a.tEnum)(["png","jpeg"])),quality:(0,a.tOptional)(a.tNumber),omitBackground:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleScrollIntoViewIfNeededParams=(0,a.tObject)({timeout:(0,a.tOptional)(a.tNumber)}),e.ElementHandleSelectOptionParams=(0,a.tObject)({elements:(0,a.tOptional)((0,a.tArray)(r("ElementHandle"))),options:(0,a.tOptional)((0,a.tArray)((0,a.tObject)({value:(0,a.tOptional)(a.tString),label:(0,a.tOptional)(a.tString),index:(0,a.tOptional)(a.tNumber)}))),force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleSelectTextParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.ElementHandleSetInputFilesParams=(0,a.tObject)({files:(0,a.tArray)((0,a.tObject)({name:a.tString,mimeType:(0,a.tOptional)(a.tString),buffer:a.tBinary})),timeout:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleTapParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),modifiers:(0,a.tOptional)((0,a.tArray)((0,a.tEnum)(["Alt","Control","Meta","Shift"]))),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleTextContentParams=(0,a.tOptional)((0,a.tObject)({})),e.ElementHandleTypeParams=(0,a.tObject)({text:a.tString,delay:(0,a.tOptional)(a.tNumber),noWaitAfter:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber)}),e.ElementHandleUncheckParams=(0,a.tObject)({force:(0,a.tOptional)(a.tBoolean),noWaitAfter:(0,a.tOptional)(a.tBoolean),position:(0,a.tOptional)(t("Point")),timeout:(0,a.tOptional)(a.tNumber),trial:(0,a.tOptional)(a.tBoolean)}),e.ElementHandleWaitForElementStateParams=(0,a.tObject)({state:(0,a.tEnum)(["visible","hidden","stable","enabled","disabled","editable"]),timeout:(0,a.tOptional)(a.tNumber)}),e.ElementHandleWaitForSelectorParams=(0,a.tObject)({selector:a.tString,strict:(0,a.tOptional)(a.tBoolean),timeout:(0,a.tOptional)(a.tNumber),state:(0,a.tOptional)((0,a.tEnum)(["attached","detached","visible","hidden"]))}),e.RequestResponseParams=(0,a.tOptional)((0,a.tObject)({})),e.RequestRawRequestHeadersParams=(0,a.tOptional)((0,a.tObject)({})),e.RouteAbortParams=(0,a.tObject)({errorCode:(0,a.tOptional)(a.tString)}),e.RouteContinueParams=(0,a.tObject)({url:(0,a.tOptional)(a.tString),method:(0,a.tOptional)(a.tString),headers:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),postData:(0,a.tOptional)(a.tBinary),interceptResponse:(0,a.tOptional)(a.tBoolean)}),e.RouteFulfillParams=(0,a.tObject)({status:(0,a.tOptional)(a.tNumber),headers:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),body:(0,a.tOptional)(a.tString),isBase64:(0,a.tOptional)(a.tBoolean),useInterceptedResponseBody:(0,a.tOptional)(a.tBoolean),fetchResponseUid:(0,a.tOptional)(a.tString)}),e.RouteResponseBodyParams=(0,a.tOptional)((0,a.tObject)({})),e.ResourceTiming=(0,a.tObject)({startTime:a.tNumber,domainLookupStart:a.tNumber,domainLookupEnd:a.tNumber,connectStart:a.tNumber,secureConnectionStart:a.tNumber,connectEnd:a.tNumber,requestStart:a.tNumber,responseStart:a.tNumber}),e.ResponseBodyParams=(0,a.tOptional)((0,a.tObject)({})),e.ResponseSecurityDetailsParams=(0,a.tOptional)((0,a.tObject)({})),e.ResponseServerAddrParams=(0,a.tOptional)((0,a.tObject)({})),e.ResponseRawResponseHeadersParams=(0,a.tOptional)((0,a.tObject)({})),e.ResponseSizesParams=(0,a.tOptional)((0,a.tObject)({})),e.SecurityDetails=(0,a.tObject)({issuer:(0,a.tOptional)(a.tString),protocol:(0,a.tOptional)(a.tString),subjectName:(0,a.tOptional)(a.tString),validFrom:(0,a.tOptional)(a.tNumber),validTo:(0,a.tOptional)(a.tNumber)}),e.RequestSizes=(0,a.tObject)({requestBodySize:a.tNumber,requestHeadersSize:a.tNumber,responseBodySize:a.tNumber,responseHeadersSize:a.tNumber}),e.RemoteAddr=(0,a.tObject)({ipAddress:a.tString,port:a.tNumber}),e.BindingCallRejectParams=(0,a.tObject)({error:t("SerializedError")}),e.BindingCallResolveParams=(0,a.tObject)({result:t("SerializedArgument")}),e.DialogAcceptParams=(0,a.tObject)({promptText:(0,a.tOptional)(a.tString)}),e.DialogDismissParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactPathAfterFinishedParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactSaveAsParams=(0,a.tObject)({path:a.tString}),e.ArtifactSaveAsStreamParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactFailureParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactStreamParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactCancelParams=(0,a.tOptional)((0,a.tObject)({})),e.ArtifactDeleteParams=(0,a.tOptional)((0,a.tObject)({})),e.StreamReadParams=(0,a.tObject)({size:(0,a.tOptional)(a.tNumber)}),e.StreamCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.CDPSessionSendParams=(0,a.tObject)({method:a.tString,params:(0,a.tOptional)(a.tAny)}),e.CDPSessionDetachParams=(0,a.tOptional)((0,a.tObject)({})),e.ElectronLaunchParams=(0,a.tObject)({executablePath:(0,a.tOptional)(a.tString),args:(0,a.tOptional)((0,a.tArray)(a.tString)),cwd:(0,a.tOptional)(a.tString),env:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),timeout:(0,a.tOptional)(a.tNumber),acceptDownloads:(0,a.tOptional)(a.tBoolean),bypassCSP:(0,a.tOptional)(a.tBoolean),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference"])),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)})),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),locale:(0,a.tOptional)(a.tString),offline:(0,a.tOptional)(a.tBoolean),recordHar:(0,a.tOptional)((0,a.tObject)({omitContent:(0,a.tOptional)(a.tBoolean),path:a.tString})),recordVideo:(0,a.tOptional)((0,a.tObject)({dir:a.tString,size:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber}))})),strictSelectors:(0,a.tOptional)(a.tBoolean),timezoneId:(0,a.tOptional)(a.tString)}),e.ElectronApplicationBrowserWindowParams=(0,a.tObject)({page:r("Page")}),e.ElectronApplicationEvaluateExpressionParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElectronApplicationEvaluateExpressionHandleParams=(0,a.tObject)({expression:a.tString,isFunction:(0,a.tOptional)(a.tBoolean),arg:t("SerializedArgument")}),e.ElectronApplicationCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidDevicesParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidSetDefaultTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.AndroidSocketWriteParams=(0,a.tObject)({data:a.tBinary}),e.AndroidSocketCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidDeviceWaitParams=(0,a.tObject)({selector:t("AndroidSelector"),state:(0,a.tOptional)((0,a.tEnum)(["gone"])),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceFillParams=(0,a.tObject)({selector:t("AndroidSelector"),text:a.tString,timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceTapParams=(0,a.tObject)({selector:t("AndroidSelector"),duration:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceDragParams=(0,a.tObject)({selector:t("AndroidSelector"),dest:t("Point"),speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceFlingParams=(0,a.tObject)({selector:t("AndroidSelector"),direction:(0,a.tEnum)(["up","down","left","right"]),speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceLongTapParams=(0,a.tObject)({selector:t("AndroidSelector"),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDevicePinchCloseParams=(0,a.tObject)({selector:t("AndroidSelector"),percent:a.tNumber,speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDevicePinchOpenParams=(0,a.tObject)({selector:t("AndroidSelector"),percent:a.tNumber,speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceScrollParams=(0,a.tObject)({selector:t("AndroidSelector"),direction:(0,a.tEnum)(["up","down","left","right"]),percent:a.tNumber,speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceSwipeParams=(0,a.tObject)({selector:t("AndroidSelector"),direction:(0,a.tEnum)(["up","down","left","right"]),percent:a.tNumber,speed:(0,a.tOptional)(a.tNumber),timeout:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceInfoParams=(0,a.tObject)({selector:t("AndroidSelector")}),e.AndroidDeviceScreenshotParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidDeviceInputTypeParams=(0,a.tObject)({text:a.tString}),e.AndroidDeviceInputPressParams=(0,a.tObject)({key:a.tString}),e.AndroidDeviceInputTapParams=(0,a.tObject)({point:t("Point")}),e.AndroidDeviceInputSwipeParams=(0,a.tObject)({segments:(0,a.tArray)(t("Point")),steps:a.tNumber}),e.AndroidDeviceInputDragParams=(0,a.tObject)({from:t("Point"),to:t("Point"),steps:a.tNumber}),e.AndroidDeviceLaunchBrowserParams=(0,a.tObject)({pkg:(0,a.tOptional)(a.tString),ignoreHTTPSErrors:(0,a.tOptional)(a.tBoolean),javaScriptEnabled:(0,a.tOptional)(a.tBoolean),bypassCSP:(0,a.tOptional)(a.tBoolean),userAgent:(0,a.tOptional)(a.tString),locale:(0,a.tOptional)(a.tString),timezoneId:(0,a.tOptional)(a.tString),geolocation:(0,a.tOptional)((0,a.tObject)({longitude:a.tNumber,latitude:a.tNumber,accuracy:(0,a.tOptional)(a.tNumber)})),permissions:(0,a.tOptional)((0,a.tArray)(a.tString)),extraHTTPHeaders:(0,a.tOptional)((0,a.tArray)(t("NameValue"))),offline:(0,a.tOptional)(a.tBoolean),httpCredentials:(0,a.tOptional)((0,a.tObject)({username:a.tString,password:a.tString})),deviceScaleFactor:(0,a.tOptional)(a.tNumber),isMobile:(0,a.tOptional)(a.tBoolean),hasTouch:(0,a.tOptional)(a.tBoolean),colorScheme:(0,a.tOptional)((0,a.tEnum)(["dark","light","no-preference"])),reducedMotion:(0,a.tOptional)((0,a.tEnum)(["reduce","no-preference"])),forcedColors:(0,a.tOptional)((0,a.tEnum)(["active","none"])),acceptDownloads:(0,a.tOptional)(a.tBoolean),_debugName:(0,a.tOptional)(a.tString),recordVideo:(0,a.tOptional)((0,a.tObject)({dir:a.tString,size:(0,a.tOptional)((0,a.tObject)({width:a.tNumber,height:a.tNumber}))})),recordHar:(0,a.tOptional)((0,a.tObject)({omitContent:(0,a.tOptional)(a.tBoolean),path:a.tString})),strictSelectors:(0,a.tOptional)(a.tBoolean),proxy:(0,a.tOptional)((0,a.tObject)({server:a.tString,bypass:(0,a.tOptional)(a.tString),username:(0,a.tOptional)(a.tString),password:(0,a.tOptional)(a.tString)}))}),e.AndroidDeviceOpenParams=(0,a.tObject)({command:a.tString}),e.AndroidDeviceShellParams=(0,a.tObject)({command:a.tString}),e.AndroidDeviceInstallApkParams=(0,a.tObject)({file:a.tBinary,args:(0,a.tOptional)((0,a.tArray)(a.tString))}),e.AndroidDevicePushParams=(0,a.tObject)({file:a.tBinary,path:a.tString,mode:(0,a.tOptional)(a.tNumber)}),e.AndroidDeviceSetDefaultTimeoutNoReplyParams=(0,a.tObject)({timeout:a.tNumber}),e.AndroidDeviceConnectToWebViewParams=(0,a.tObject)({pid:a.tNumber}),e.AndroidDeviceCloseParams=(0,a.tOptional)((0,a.tObject)({})),e.AndroidWebView=(0,a.tObject)({pid:a.tNumber,pkg:a.tString}),e.AndroidSelector=(0,a.tObject)({checkable:(0,a.tOptional)(a.tBoolean),checked:(0,a.tOptional)(a.tBoolean),clazz:(0,a.tOptional)(a.tString),clickable:(0,a.tOptional)(a.tBoolean),depth:(0,a.tOptional)(a.tNumber),desc:(0,a.tOptional)(a.tString),enabled:(0,a.tOptional)(a.tBoolean),focusable:(0,a.tOptional)(a.tBoolean),focused:(0,a.tOptional)(a.tBoolean),hasChild:(0,a.tOptional)((0,a.tObject)({selector:t("AndroidSelector")})),hasDescendant:(0,a.tOptional)((0,a.tObject)({selector:t("AndroidSelector"),maxDepth:(0,a.tOptional)(a.tNumber)})),longClickable:(0,a.tOptional)(a.tBoolean),pkg:(0,a.tOptional)(a.tString),res:(0,a.tOptional)(a.tString),scrollable:(0,a.tOptional)(a.tBoolean),selected:(0,a.tOptional)(a.tBoolean),text:(0,a.tOptional)(a.tString)}),e.AndroidElementInfo=(0,a.tObject)({children:(0,a.tOptional)((0,a.tArray)(t("AndroidElementInfo"))),clazz:a.tString,desc:a.tString,res:a.tString,pkg:a.tString,text:a.tString,bounds:t("Rect"),checkable:a.tBoolean,checked:a.tBoolean,clickable:a.tBoolean,enabled:a.tBoolean,focusable:a.tBoolean,focused:a.tBoolean,longClickable:a.tBoolean,scrollable:a.tBoolean,selected:a.tBoolean}),e.JsonPipeSendParams=(0,a.tObject)({message:a.tAny}),e.JsonPipeCloseParams=(0,a.tOptional)((0,a.tObject)({})),e}});var _v=w(mv=>{"use strict";Object.defineProperty(mv,"__esModule",{value:!0})});var Qe=w(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.createInstrumentation=yF;an.internalCallMetadata=bF;Object.defineProperty(an,"CallMetadata",{enumerable:!0,get:function(){return vF.CallMetadata}});an.SdkObject=void 0;var gF=require("events"),wF=H(),vF=_v(),gv=class extends gF.EventEmitter{constructor(e,t,i){super();this.guid=void 0,this.attribution=void 0,this.instrumentation=void 0,this.guid=i||`${t||""}@${(0,wF.createGuid)()}`,this.setMaxListeners(0),this.attribution={...e.attribution},this.instrumentation=e.instrumentation}};an.SdkObject=gv;function yF(){let r=[];return new Proxy({},{get:(e,t)=>t==="addListener"?i=>r.push(i):t==="removeListener"?i=>r.splice(r.indexOf(i),1):t.startsWith("on")?async(...i)=>{for(let o of r){var n,s;await((n=(s=o)[t])===null||n===void 0?void 0:n.call(s,...i))}}:e[t]})}function bF(){return{id:"",startTime:0,endTime:0,type:"Internal",method:"",params:{},log:[],snapshots:[]}}});var vv=w((Qz,wv)=>{"use strict";var xF=/[|\\{}()[\]^$+*?.-]/g;wv.exports=r=>{if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(xF,"\\$&")}});var Sv=w((Zz,xv)=>{"use strict";var SF=vv(),EF=typeof process=="object"&&process&&typeof process.cwd=="function"?process.cwd():".",yv=[].concat(require("module").builtinModules,"bootstrap_node","node").map(r=>new RegExp(`(?:\\((?:node:)?${r}(?:\\.js)?:\\d+:\\d+\\)$|^\\s*at (?:node:)?${r}(?:\\.js)?:\\d+:\\d+$)`));yv.push(/\((?:node:)?internal\/[^:]+:\d+:\d+\)$/,/\s*at (?:node:)?internal\/[^:]+:\d+:\d+$/,/\/\.node-spawn-wrap-\w+-\w+\/node:\d+:\d+\)?$/);var Rc=class{constructor(e){e={ignoredPackages:[],...e},"internals"in e||(e.internals=Rc.nodeInternals()),"cwd"in e||(e.cwd=EF),this._cwd=e.cwd.replace(/\\/g,"/"),this._internals=[].concat(e.internals,CF(e.ignoredPackages)),this._wrapCallSite=e.wrapCallSite||!1}static nodeInternals(){return[...yv]}clean(e,t=0){t=" ".repeat(t),Array.isArray(e)||(e=e.split(`
`)),!/^\s*at /.test(e[0])&&/^\s*at /.test(e[1])&&(e=e.slice(1));let i=!1,n=null,s=[];return e.forEach(o=>{if(o=o.replace(/\\/g,"/"),this._internals.some(l=>l.test(o)))return;let c=/^\s*at /.test(o);i?o=o.trimEnd().replace(/^(\s+)at /,"$1"):(o=o.trim(),c&&(o=o.slice(3))),o=o.replace(`${this._cwd}/`,""),o&&(c?(n&&(s.push(n),n=null),s.push(o)):(i=!0,n=o))}),s.map(o=>`${t}${o}
`).join("")}captureString(e,t=this.captureString){typeof e=="function"&&(t=e,e=1/0);let{stackTraceLimit:i}=Error;e&&(Error.stackTraceLimit=e);let n={};Error.captureStackTrace(n,t);let{stack:s}=n;return Error.stackTraceLimit=i,this.clean(s)}capture(e,t=this.capture){typeof e=="function"&&(t=e,e=1/0);let{prepareStackTrace:i,stackTraceLimit:n}=Error;Error.prepareStackTrace=(c,l)=>this._wrapCallSite?l.map(this._wrapCallSite):l,e&&(Error.stackTraceLimit=e);let s={};Error.captureStackTrace(s,t);let{stack:o}=s;return Object.assign(Error,{prepareStackTrace:i,stackTraceLimit:n}),o}at(e=this.at){let[t]=this.capture(1,e);if(!t)return{};let i={line:t.getLineNumber(),column:t.getColumnNumber()};bv(i,t.getFileName(),this._cwd),t.isConstructor()&&(i.constructor=!0),t.isEval()&&(i.evalOrigin=t.getEvalOrigin()),t.isNative()&&(i.native=!0);let n;try{n=t.getTypeName()}catch(c){}n&&n!=="Object"&&n!=="[object Object]"&&(i.type=n);let s=t.getFunctionName();s&&(i.function=s);let o=t.getMethodName();return o&&s!==o&&(i.method=o),i}parseLine(e){let t=e&&e.match(kF);if(!t)return null;let i=t[1]==="new",n=t[2],s=t[3],o=t[4],c=Number(t[5]),l=Number(t[6]),u=t[7],d=t[8],h=t[9],p=t[10]==="native",f=t[11]===")",_,m={};if(d&&(m.line=Number(d)),h&&(m.column=Number(h)),f&&u){let g=0;for(let v=u.length-1;v>0;v--)if(u.charAt(v)===")")g++;else if(u.charAt(v)==="("&&u.charAt(v-1)===" "&&(g--,g===-1&&u.charAt(v-1)===" ")){let x=u.slice(0,v-1);u=u.slice(v+1),n+=` (${x}`;break}}if(n){let g=n.match(PF);g&&(n=g[1],_=g[2])}return bv(m,u,this._cwd),i&&(m.constructor=!0),s&&(m.evalOrigin=s,m.evalLine=c,m.evalColumn=l,m.evalFile=o&&o.replace(/\\/g,"/")),p&&(m.native=!0),n&&(m.function=n),_&&n!==_&&(m.method=_),m}};function bv(r,e,t){e&&(e=e.replace(/\\/g,"/"),e.startsWith(`${t}/`)&&(e=e.slice(t.length+1)),r.file=e)}function CF(r){if(r.length===0)return[];let e=r.map(t=>SF(t));return new RegExp(`[/\\\\]node_modules[/\\\\](?:${e.join("|")})[/\\\\][^:]+:\\d+:\\d+`)}var kF=new RegExp("^(?:\\s*at )?(?:(new) )?(?:(.*?) \\()?(?:eval at ([^ ]+) \\((.+?):(\\d+):(\\d+)\\), )?(?:(.+?):(\\d+):(\\d+)|(native))(\\)?)$"),PF=/^(.*?) \[as (.*?)\]$/;xv.exports=Rc});var It=w(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.rewriteErrorMessage=MF;Lo.captureStackTrace=NF;Lo.splitErrorMessage=qF;var ri=Ev(require("path")),OF=Ev(Sv()),TF=H();function Ev(r){return r&&r.__esModule?r:{default:r}}var AF=new OF.default;function MF(r,e){var t;let i=(((t=r.stack)===null||t===void 0?void 0:t.split(`
`))||[]).filter(s=>s.startsWith("    at "));r.message=e;let n=`${r.name}: ${r.message}`;return i.length&&(r.stack=`${n}
${i.join(`
`)}`),r}var Nc=ri.default.resolve(__dirname,"..",".."),IF=ri.default.join(Nc,"lib","client"),FF=ri.default.join(Nc,"src","client"),DF=ri.default.join(Nc,"lib","test"),RF=ri.default.join(Nc,"src","test");function NF(){let r=Error.stackTraceLimit;Error.stackTraceLimit=30;let t=new Error().stack;Error.stackTraceLimit=r;let i=(0,TF.isUnderTest)(),n=t.split(`
`).map(c=>{let l=AF.parseLine(c);if(!l||!l.file||l.file.startsWith("internal")||l.file.includes(ri.default.join("node_modules","expect")))return null;let u=ri.default.resolve(process.cwd(),l.file);if(i&&u.includes(ri.default.join("playwright","tests","config","coverage.js")))return null;let d=!u.includes("test/index")&&!u.includes("test\\index")&&(u.startsWith(IF)||u.startsWith(FF)||u.startsWith(DF)||u.startsWith(RF));return{frame:{file:u,line:l.line,column:l.column,function:l.function},frameText:c,inClient:d}}).filter(Boolean),s="",o=n;for(let c=0;c<n.length-1;c++)if(n[c].inClient&&!n[c+1].inClient){let l=n[c].frame;s=l.function?l.function[0].toLowerCase()+l.function.slice(1):"",n=n.slice(c+1);break}return{allFrames:o.map(c=>c.frame),frames:n.map(c=>c.frame),frameTexts:n.map(c=>c.frameText),apiName:s}}function qF(r){let e=r.indexOf(":");return{name:e!==-1?r.slice(0,e):"",message:e!==-1&&e+2<=r.length?r.substring(e+2):r}}});var $e=w(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.lookupDispatcher=kv;Lt.existingDispatcher=WF;Lt.lookupNullableDispatcher=$F;Lt.DispatcherConnection=Lt.Root=Lt.Dispatcher=Lt.dispatcherSymbol=void 0;var LF=require("events"),qc=Xr(),Bo=kp(),rr=H(),BF=Cp(),HF=Mt(),Cv=Qe(),jF=It(),Lc=Symbol("dispatcher");Lt.dispatcherSymbol=Lc;function kv(r){let e=r[Lc];return(0,rr.debugAssert)(e),e}function WF(r){return r[Lc]}function $F(r){return r?kv(r):void 0}var Bc=class extends LF.EventEmitter{constructor(e,t,i,n,s){super();this._connection=void 0,this._isScope=void 0,this._parent=void 0,this._dispatchers=new Map,this._disposed=!1,this._guid=void 0,this._type=void 0,this._scope=void 0,this._object=void 0,this._connection=e instanceof Hc?e:e._connection,this._isScope=!!s,this._parent=e instanceof Hc?void 0:e,this._scope=s?this:this._parent;let o=t.guid;(0,rr.assert)(!this._connection._dispatchers.has(o)),this._connection._dispatchers.set(o,this),this._parent&&((0,rr.assert)(!this._parent._dispatchers.has(o)),this._parent._dispatchers.set(o,this)),this._type=i,this._guid=o,this._object=t,t[Lc]=this,this._parent&&this._connection.sendMessageToClient(this._parent._guid,i,"__create__",{type:i,initializer:n,guid:o},this._parent._object)}_dispatchEvent(e,t){if(this._disposed){if((0,rr.isUnderTest)())throw new Error(`${this._guid} is sending "${e}" event after being disposed`);return}let i=this._object instanceof Cv.SdkObject?this._object:void 0;this._connection.sendMessageToClient(this._guid,this._type,e,t,i)}_dispose(){(0,rr.assert)(!this._disposed),this._disposed=!0,this._parent&&this._parent._dispatchers.delete(this._guid),this._connection._dispatchers.delete(this._guid);for(let e of[...this._dispatchers.values()])e._dispose();this._dispatchers.clear(),this._isScope&&this._connection.sendMessageToClient(this._guid,this._type,"__dispose__",{})}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._dispatchers.values()).map(e=>e._debugScopeState())}}async waitForEventInfo(){}};Lt.Dispatcher=Bc;var Pv=class extends Bc{constructor(e,t){super(e,{guid:""},"Root",{},!0);this._initialized=!1,this.createPlaywright=t}async initialize(e){return(0,rr.assert)(this.createPlaywright),(0,rr.assert)(!this._initialized),this._initialized=!0,{playwright:await this.createPlaywright(this,e)}}};Lt.Root=Pv;var Hc=class{sendMessageToClient(e,t,i,n,s){if(n=this._replaceDispatchersWithGuids(n),s){var o,c,l,u,d;let h={id:`event@${++UF}`,objectId:s==null?void 0:s.guid,pageId:s==null||(o=s.attribution)===null||o===void 0||(c=o.page)===null||c===void 0?void 0:c.guid,frameId:s==null||(l=s.attribution)===null||l===void 0||(u=l.frame)===null||u===void 0?void 0:u.guid,startTime:(0,rr.monotonicTime)(),endTime:0,type:t,method:i,params:n||{},log:[],snapshots:[]};(d=s.instrumentation)===null||d===void 0||d.onEvent(s,h)}this.onmessage({guid:e,method:i,params:n})}constructor(){this._dispatchers=new Map,this.onmessage=i=>{},this._validateParams=void 0,this._validateMetadata=void 0,this._waitOperations=new Map;let e=i=>(n,s)=>{if(n&&typeof n=="object"&&typeof n.guid=="string"){let o=n.guid,c=this._dispatchers.get(o);if(!c)throw new Bo.ValidationError(`${s}: no object with guid ${o}`);if(i!=="*"&&c._type!==i)throw new Bo.ValidationError(`${s}: object with guid ${o} has type ${c._type}, expected ${i}`);return c}throw new Bo.ValidationError(`${s}: expected ${i}`)},t=(0,Bo.createScheme)(e);this._validateParams=(i,n,s)=>{let o=i+n[0].toUpperCase()+n.substring(1)+"Params";if(!t[o])throw new Bo.ValidationError(`Unknown scheme for ${i}.${n}`);return t[o](s,"")},this._validateMetadata=i=>(0,BF.tOptional)(t.Metadata)(i,"")}async dispatch(e){var t,i,n,s,o;let{id:c,guid:l,method:u,params:d,metadata:h}=e,p=this._dispatchers.get(l);if(!p){this.onmessage({id:c,error:(0,qc.serializeError)(new Error(HF.kBrowserOrContextClosedError))});return}if(u==="debugScopeState"){let b=this._dispatchers.get("");this.onmessage({id:c,result:b._debugScopeState()});return}let f,_;try{if(f=this._validateParams(p._type,u,d),_=this._validateMetadata(h),typeof p[u]!="function")throw new Error(`Mismatching dispatcher: "${p._type}" does not implement "${u}"`)}catch(b){this.onmessage({id:c,error:(0,qc.serializeError)(b)});return}let m=p._object instanceof Cv.SdkObject?p._object:void 0,g={id:`call@${c}`,stack:_.stack,apiName:_.apiName,objectId:m==null?void 0:m.guid,pageId:m==null||(t=m.attribution)===null||t===void 0||(i=t.page)===null||i===void 0?void 0:i.guid,frameId:m==null||(n=m.attribution)===null||n===void 0||(s=n.frame)===null||s===void 0?void 0:s.guid,startTime:(0,rr.monotonicTime)(),endTime:0,type:p._type,method:u,params:d||{},log:[],snapshots:[]};if(m&&d!==null&&d!==void 0&&(o=d.info)!==null&&o!==void 0&&o.waitId){let b=d.info;switch(b.phase){case"before":{this._waitOperations.set(b.waitId,g),await m.instrumentation.onBeforeCall(m,g),this.onmessage({id:c});return}case"log":{let T=this._waitOperations.get(b.waitId);T.log.push(b.message),m.instrumentation.onCallLog("api",b.message,m,T),this.onmessage({id:c});return}case"after":{let T=this._waitOperations.get(b.waitId);T.endTime=(0,rr.monotonicTime)(),T.error=b.error?{error:{name:"Error",message:b.error}}:void 0,this._waitOperations.delete(b.waitId),await m.instrumentation.onAfterCall(m,T),this.onmessage({id:c});return}}}let v;await(m==null?void 0:m.instrumentation.onBeforeCall(m,g));try{let b=await p[u](f,g);g.result=this._replaceDispatchersWithGuids(b)}catch(b){g.error=(0,qc.serializeError)(b),g.log.length&&(0,jF.rewriteErrorMessage)(b,b.message+zF(g.log)),v=(0,qc.serializeError)(b)}finally{g.endTime=(0,rr.monotonicTime)(),await(m==null?void 0:m.instrumentation.onAfterCall(m,g))}let x=_.collectLogs?g.log:void 0;g.error?this.onmessage({id:c,error:v,log:x}):this.onmessage({id:c,result:g.result,log:x})}_replaceDispatchersWithGuids(e){if(!e)return e;if(e instanceof Bc)return{guid:e._guid};if(Array.isArray(e))return e.map(t=>this._replaceDispatchersWithGuids(t));if(typeof e=="object"){let t={};for(let i of Object.keys(e))t[i]=this._replaceDispatchersWithGuids(e[i]);return t}return e}};Lt.DispatcherConnection=Hc;function zF(r){if(!r.length)return"";let e=" logs ",t=60,i=(t-e.length)/2,n=t-e.length-i;return`
${"=".repeat(i)}${e}${"=".repeat(n)}
${r.join(`
`)}
${"=".repeat(t)}`}var UF=0});var cn=w((rU,Ov)=>{"use strict";Ov.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}});var Ho=w((iU,Pp)=>{"use strict";var{EMPTY_BUFFER:VF}=cn();function Tv(r,e){if(r.length===0)return VF;if(r.length===1)return r[0];let t=Buffer.allocUnsafe(e),i=0;for(let n=0;n<r.length;n++){let s=r[n];t.set(s,i),i+=s.length}return i<e?t.slice(0,i):t}function Av(r,e,t,i,n){for(let s=0;s<n;s++)t[i+s]=r[s]^e[s&3]}function Mv(r,e){let t=r.length;for(let i=0;i<t;i++)r[i]^=e[i&3]}function Iv(r){return r.byteLength===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}function jc(r){if(jc.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=Buffer.from(r):ArrayBuffer.isView(r)?e=Buffer.from(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),jc.readOnly=!1),e}try{let r=require("bufferutil"),e=r.BufferUtil||r;Pp.exports={concat:Tv,mask(t,i,n,s,o){o<48?Av(t,i,n,s,o):e.mask(t,i,n,s,o)},toArrayBuffer:Iv,toBuffer:jc,unmask(t,i){t.length<32?Mv(t,i):e.unmask(t,i)}}}catch(r){Pp.exports={concat:Tv,mask:Av,toArrayBuffer:Iv,toBuffer:jc,unmask:Mv}}});var Nv=w((nU,Rv)=>{"use strict";var Fv=Symbol("kDone"),Op=Symbol("kRun"),Dv=class{constructor(e){this[Fv]=()=>{this.pending--,this[Op]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Op]()}[Op](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[Fv])}}};Rv.exports=Dv});var $o=w((sU,jv)=>{"use strict";var jo=require("zlib"),qv=Ho(),GF=Nv(),{kStatusCode:Lv,NOOP:KF}=cn(),JF=Buffer.from([0,0,255,255]),Wc=Symbol("permessage-deflate"),Dr=Symbol("total-length"),Wo=Symbol("callback"),ii=Symbol("buffers"),$c=Symbol("error"),zc,Bv=class{constructor(e,t,i){if(this._maxPayload=i|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!zc){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;zc=new GF(n)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Wo];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,i=e.find(n=>!(t.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>n.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(i.server_no_context_takeover=!0),t.clientNoContextTakeover&&(i.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(i.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?i.client_max_window_bits=t.clientMaxWindowBits:(i.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete i.client_max_window_bits,i}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(i=>{let n=t[i];if(n.length>1)throw new Error(`Parameter "${i}" must have only a single value`);if(n=n[0],i==="client_max_window_bits"){if(n!==!0){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else if(i==="server_max_window_bits"){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=s}else if(i==="client_no_context_takeover"||i==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else throw new Error(`Unknown parameter "${i}"`);t[i]=n})}),e}decompress(e,t,i){zc.add(n=>{this._decompress(e,t,(s,o)=>{n(),i(s,o)})})}compress(e,t,i){zc.add(n=>{this._compress(e,t,(s,o)=>{n(),i(s,o)})})}_decompress(e,t,i){let n=this._isServer?"client":"server";if(!this._inflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?jo.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=jo.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[Wc]=this,this._inflate[Dr]=0,this._inflate[ii]=[],this._inflate.on("error",YF),this._inflate.on("data",Hv)}this._inflate[Wo]=i,this._inflate.write(e),t&&this._inflate.write(JF),this._inflate.flush(()=>{let s=this._inflate[$c];if(s){this._inflate.close(),this._inflate=null,i(s);return}let o=qv.concat(this._inflate[ii],this._inflate[Dr]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Dr]=0,this._inflate[ii]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),i(null,o)})}_compress(e,t,i){let n=this._isServer?"server":"client";if(!this._deflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?jo.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=jo.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Dr]=0,this._deflate[ii]=[],this._deflate.on("error",KF),this._deflate.on("data",XF)}this._deflate[Wo]=i,this._deflate.write(e),this._deflate.flush(jo.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=qv.concat(this._deflate[ii],this._deflate[Dr]);t&&(s=s.slice(0,s.length-4)),this._deflate[Wo]=null,this._deflate[Dr]=0,this._deflate[ii]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),i(null,s)})}};jv.exports=Bv;function XF(r){this[ii].push(r),this[Dr]+=r.length}function Hv(r){if(this[Dr]+=r.length,this[Wc]._maxPayload<1||this[Dr]<=this[Wc]._maxPayload){this[ii].push(r);return}this[$c]=new RangeError("Max payload size exceeded"),this[$c].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[$c][Lv]=1009,this.removeListener("data",Hv),this.reset()}function YF(r){this[Wc]._inflate=null,r[Lv]=1007,this[Wo](r)}});var Ap=w((oU,Tp)=>{"use strict";function Wv(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function $v(r){let e=r.length,t=0;for(;t<e;)if((r[t]&128)==0)t++;else if((r[t]&224)==192){if(t+1===e||(r[t+1]&192)!=128||(r[t]&254)==192)return!1;t+=2}else if((r[t]&240)==224){if(t+2>=e||(r[t+1]&192)!=128||(r[t+2]&192)!=128||r[t]===224&&(r[t+1]&224)==128||r[t]===237&&(r[t+1]&224)==160)return!1;t+=3}else if((r[t]&248)==240){if(t+3>=e||(r[t+1]&192)!=128||(r[t+2]&192)!=128||(r[t+3]&192)!=128||r[t]===240&&(r[t+1]&240)==128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}try{let r=require("utf-8-validate");typeof r=="object"&&(r=r.Validation.isValidUTF8),Tp.exports={isValidStatusCode:Wv,isValidUTF8(e){return e.length<150?$v(e):r(e)}}}catch(r){Tp.exports={isValidStatusCode:Wv,isValidUTF8:$v}}});var Fp=w((aU,Xv)=>{"use strict";var{Writable:QF}=require("stream"),zv=$o(),{BINARY_TYPES:ZF,EMPTY_BUFFER:eD,kStatusCode:tD,kWebSocket:rD}=cn(),{concat:Mp,toArrayBuffer:iD,unmask:nD}=Ho(),{isValidStatusCode:sD,isValidUTF8:Uv}=Ap(),zo=0,Vv=1,Gv=2,Kv=3,Ip=4,oD=5,Jv=class extends QF{constructor(e,t,i,n){super();this._binaryType=e||ZF[0],this[rD]=void 0,this._extensions=t||{},this._isServer=!!i,this._maxPayload=n|0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=zo,this._loop=!1}_write(e,t,i){if(this._opcode===8&&this._state==zo)return i();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(i)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let i=this._buffers[0];return this._buffers[0]=i.slice(e),i.slice(0,e)}let t=Buffer.allocUnsafe(e);do{let i=this._buffers[0],n=t.length-e;e>=i.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(i.buffer,i.byteOffset,e),n),this._buffers[0]=i.slice(e)),e-=i.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case zo:t=this.getInfo();break;case Vv:t=this.getPayloadLength16();break;case Gv:t=this.getPayloadLength64();break;case Kv:this.getMask();break;case Ip:t=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((e[0]&48)!=0)return this._loop=!1,Ze(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(e[0]&64)==64;if(t&&!this._extensions[zv.extensionName])return this._loop=!1,Ze(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)==128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,Ze(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,Ze(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,Ze(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,Ze(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,Ze(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,Ze(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,Ze(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)==128,this._isServer){if(!this._masked)return this._loop=!1,Ze(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,Ze(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Vv;else if(this._payloadLength===127)this._state=Gv;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,53-32)-1?(this._loop=!1,Ze(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,Ze(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Kv:this._state=Ip}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Ip}getData(e){let t=eD;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&nD(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=oD,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[zv.extensionName].decompress(e,this._fin,(n,s)=>{if(n)return t(n);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(Ze(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}let o=this.dataMessage();if(o)return t(o);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=Mp(t,e):this._binaryType==="arraybuffer"?i=iD(Mp(t,e)):i=t,this.emit("message",i)}else{let i=Mp(t,e);if(!Uv(i))return this._loop=!1,Ze(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",i.toString())}}this._state=zo}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,""),this.end();else{if(e.length===1)return Ze(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let t=e.readUInt16BE(0);if(!sD(t))return Ze(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let i=e.slice(2);if(!Uv(i))return Ze(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,i.toString()),this.end()}}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=zo}};Xv.exports=Jv;function Ze(r,e,t,i,n){let s=new r(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(s,Ze),s.code=n,s[tD]=i,s}});var Dp=w((uU,Zv)=>{"use strict";var cU=require("net"),lU=require("tls"),{randomFillSync:aD}=require("crypto"),Yv=$o(),{EMPTY_BUFFER:cD}=cn(),{isValidStatusCode:lD}=Ap(),{mask:Qv,toBuffer:Rr}=Ho(),ln=Buffer.alloc(4),Nr=class{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let i=t.mask&&t.readOnly,n=t.mask?6:2,s=e.length;e.length>=65536?(n+=8,s=127):e.length>125&&(n+=2,s=126);let o=Buffer.allocUnsafe(i?e.length+n:n);return o[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(o[0]|=64),o[1]=s,s===126?o.writeUInt16BE(e.length,2):s===127&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(aD(ln,0,4),o[1]|=128,o[n-4]=ln[0],o[n-3]=ln[1],o[n-2]=ln[2],o[n-1]=ln[3],i?(Qv(e,ln,o,n,e.length),[o]):(Qv(e,ln,e,0,e.length),[o,e])):[o,e]}close(e,t,i,n){let s;if(e===void 0)s=cD;else{if(typeof e!="number"||!lD(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||t==="")s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let o=Buffer.byteLength(t);if(o>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+o),s.writeUInt16BE(e,0),s.write(t,2)}}this._deflating?this.enqueue([this.doClose,s,i,n]):this.doClose(s,i,n)}doClose(e,t,i){this.sendFrame(Nr.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),i)}ping(e,t,i){let n=Rr(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,t,Rr.readOnly,i]):this.doPing(n,t,Rr.readOnly,i)}doPing(e,t,i,n){this.sendFrame(Nr.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:i}),n)}pong(e,t,i){let n=Rr(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,t,Rr.readOnly,i]):this.doPong(n,t,Rr.readOnly,i)}doPong(e,t,i,n){this.sendFrame(Nr.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:i}),n)}send(e,t,i){let n=Rr(e),s=this._extensions[Yv.extensionName],o=t.binary?2:1,c=t.compress;if(this._firstFragment?(this._firstFragment=!1,c&&s&&(c=n.length>=s._threshold),this._compress=c):(c=!1,o=0),t.fin&&(this._firstFragment=!0),s){let l={fin:t.fin,rsv1:c,opcode:o,mask:t.mask,readOnly:Rr.readOnly};this._deflating?this.enqueue([this.dispatch,n,this._compress,l,i]):this.dispatch(n,this._compress,l,i)}else this.sendFrame(Nr.frame(n,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:Rr.readOnly}),i)}dispatch(e,t,i,n){if(!t){this.sendFrame(Nr.frame(e,i),n);return}let s=this._extensions[Yv.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,s.compress(e,i.fin,(o,c)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");typeof n=="function"&&n(l);for(let u=0;u<this._queue.length;u++){let d=this._queue[u][4];typeof d=="function"&&d(l)}return}this._bufferedBytes-=e.length,this._deflating=!1,i.readOnly=!1,this.sendFrame(Nr.frame(c,i),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};Zv.exports=Nr});var sy=w((dU,ny)=>{"use strict";var Uo=class{constructor(e,t){this.target=t,this.type=e}},ey=class extends Uo{constructor(e,t){super("message",t);this.data=e}},ty=class extends Uo{constructor(e,t,i){super("close",i);this.wasClean=i._closeFrameReceived&&i._closeFrameSent,this.reason=t,this.code=e}},ry=class extends Uo{constructor(e){super("open",e)}},iy=class extends Uo{constructor(e,t){super("error",t);this.message=e.message,this.error=e}},uD={addEventListener(r,e,t){if(typeof e!="function")return;function i(l){e.call(this,new ey(l,this))}function n(l,u){e.call(this,new ty(l,u,this))}function s(l){e.call(this,new iy(l,this))}function o(){e.call(this,new ry(this))}let c=t&&t.once?"once":"on";r==="message"?(i._listener=e,this[c](r,i)):r==="close"?(n._listener=e,this[c](r,n)):r==="error"?(s._listener=e,this[c](r,s)):r==="open"?(o._listener=e,this[c](r,o)):this[c](r,e)},removeEventListener(r,e){let t=this.listeners(r);for(let i=0;i<t.length;i++)(t[i]===e||t[i]._listener===e)&&this.removeListener(r,t[i])}};ny.exports=uD});var Rp=w((hU,oy)=>{"use strict";var Vo=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function wr(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function dD(r){let e=Object.create(null);if(r===void 0||r==="")return e;let t=Object.create(null),i=!1,n=!1,s=!1,o,c,l=-1,u=-1,d=0;for(;d<r.length;d++){let p=r.charCodeAt(d);if(o===void 0)if(u===-1&&Vo[p]===1)l===-1&&(l=d);else if(p===32||p===9)u===-1&&l!==-1&&(u=d);else if(p===59||p===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=r.slice(l,u);p===44?(wr(e,f,t),t=Object.create(null)):o=f,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(c===void 0)if(u===-1&&Vo[p]===1)l===-1&&(l=d);else if(p===32||p===9)u===-1&&l!==-1&&(u=d);else if(p===59||p===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d),wr(t,r.slice(l,u),!0),p===44&&(wr(e,o,t),t=Object.create(null),o=void 0),l=u=-1}else if(p===61&&l!==-1&&u===-1)c=r.slice(l,d),l=u=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(n){if(Vo[p]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1?l=d:i||(i=!0),n=!1}else if(s)if(Vo[p]===1)l===-1&&(l=d);else if(p===34&&l!==-1)s=!1,u=d;else if(p===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(p===34&&r.charCodeAt(d-1)===61)s=!0;else if(u===-1&&Vo[p]===1)l===-1&&(l=d);else if(l!==-1&&(p===32||p===9))u===-1&&(u=d);else if(p===59||p===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=r.slice(l,u);i&&(f=f.replace(/\\/g,""),i=!1),wr(t,c,f),p===44&&(wr(e,o,t),t=Object.create(null),o=void 0),c=void 0,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`)}if(l===-1||s)throw new SyntaxError("Unexpected end of input");u===-1&&(u=d);let h=r.slice(l,u);return o===void 0?wr(e,h,t):(c===void 0?wr(t,h,!0):i?wr(t,c,h.replace(/\\/g,"")):wr(t,c,h),wr(e,o,t)),e}function hD(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(i=>[e].concat(Object.keys(i).map(n=>{let s=i[n];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?n:`${n}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}oy.exports={format:hD,parse:dD}});var Hp=w((fU,_y)=>{"use strict";var pD=require("events"),fD=require("https"),mD=require("http"),ay=require("net"),_D=require("tls"),{randomBytes:gD,createHash:wD}=require("crypto"),{Readable:pU}=require("stream"),{URL:Np}=require("url"),ni=$o(),vD=Fp(),yD=Dp(),{BINARY_TYPES:cy,EMPTY_BUFFER:qp,GUID:bD,kStatusCode:xD,kWebSocket:yt,NOOP:ly}=cn(),{addEventListener:SD,removeEventListener:ED}=sy(),{format:CD,parse:kD}=Rp(),{toBuffer:PD}=Ho(),qr=["CONNECTING","OPEN","CLOSING","CLOSED"],Lp=[8,13],OD=30*1e3,we=class extends pD{constructor(e,t,i){super();this._binaryType=cy[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=we.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):typeof t=="object"&&t!==null&&(i=t,t=void 0),uy(this,e,t,i)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){!cy.includes(e)||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(e){}get onerror(){}set onerror(e){}get onopen(){}set onopen(e){}get onmessage(){}set onmessage(e){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,i){let n=new vD(this.binaryType,this._extensions,this._isServer,i);this._sender=new yD(e,this._extensions),this._receiver=n,this._socket=e,n[yt]=this,e[yt]=this,n.on("conclude",MD),n.on("drain",ID),n.on("error",FD),n.on("message",DD),n.on("ping",RD),n.on("pong",ND),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",py),e.on("data",Uc),e.on("end",fy),e.on("error",my),this._readyState=we.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=we.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[ni.extensionName]&&this._extensions[ni.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=we.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==we.CLOSED){if(this.readyState===we.CONNECTING){let i="WebSocket was closed before the connection was established";return Wt(this,this._req,i)}if(this.readyState===we.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=we.CLOSING,this._sender.close(e,t,!this._isServer,i=>{i||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),OD)}}ping(e,t,i){if(this.readyState===we.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=t=void 0):typeof t=="function"&&(i=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==we.OPEN){Bp(this,e,i);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||qp,t,i)}pong(e,t,i){if(this.readyState===we.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=t=void 0):typeof t=="function"&&(i=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==we.OPEN){Bp(this,e,i);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||qp,t,i)}send(e,t,i){if(this.readyState===we.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(i=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==we.OPEN){Bp(this,e,i);return}let n={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[ni.extensionName]||(n.compress=!1),this._sender.send(e||qp,n,i)}terminate(){if(this.readyState!==we.CLOSED){if(this.readyState===we.CONNECTING){let e="WebSocket was closed before the connection was established";return Wt(this,this._req,e)}this._socket&&(this._readyState=we.CLOSING,this._socket.destroy())}}};Object.defineProperty(we,"CONNECTING",{enumerable:!0,value:qr.indexOf("CONNECTING")});Object.defineProperty(we.prototype,"CONNECTING",{enumerable:!0,value:qr.indexOf("CONNECTING")});Object.defineProperty(we,"OPEN",{enumerable:!0,value:qr.indexOf("OPEN")});Object.defineProperty(we.prototype,"OPEN",{enumerable:!0,value:qr.indexOf("OPEN")});Object.defineProperty(we,"CLOSING",{enumerable:!0,value:qr.indexOf("CLOSING")});Object.defineProperty(we.prototype,"CLOSING",{enumerable:!0,value:qr.indexOf("CLOSING")});Object.defineProperty(we,"CLOSED",{enumerable:!0,value:qr.indexOf("CLOSED")});Object.defineProperty(we.prototype,"CLOSED",{enumerable:!0,value:qr.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(r=>{Object.defineProperty(we.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(we.prototype,`on${r}`,{enumerable:!0,get(){let e=this.listeners(r);for(let t=0;t<e.length;t++)if(e[t]._listener)return e[t]._listener},set(e){let t=this.listeners(r);for(let i=0;i<t.length;i++)t[i]._listener&&this.removeListener(r,t[i]);this.addEventListener(r,e)}})});we.prototype.addEventListener=SD;we.prototype.removeEventListener=ED;_y.exports=we;function uy(r,e,t,i){let n={protocolVersion:Lp[1],maxPayload:100*1024*1024,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!Lp.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${Lp.join(", ")})`);let s;e instanceof Np?(s=e,r._url=e.href):(s=new Np(e),r._url=e);let o=s.protocol==="ws+unix:";if(!s.host&&(!o||!s.pathname))throw new Error(`Invalid URL: ${r.url}`);let c=s.protocol==="wss:"||s.protocol==="https:",l=c?443:80,u=gD(16).toString("base64"),d=c?fD.get:mD.get,h;if(n.createConnection=c?AD:TD,n.defaultPort=n.defaultPort||l,n.port=s.port||l,n.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,n.headers={"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket",...n.headers},n.path=s.pathname+s.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(h=new ni(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=CD({[ni.extensionName]:h.offer()})),t&&(n.headers["Sec-WebSocket-Protocol"]=t),n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(s.username||s.password)&&(n.auth=`${s.username}:${s.password}`),o){let f=n.path.split(":");n.socketPath=f[0],n.path=f[1]}let p=r._req=d(n);n.timeout&&p.on("timeout",()=>{Wt(r,p,"Opening handshake has timed out")}),p.on("error",f=>{p===null||p.aborted||(p=r._req=null,r._readyState=we.CLOSING,r.emit("error",f),r.emitClose())}),p.on("response",f=>{let _=f.headers.location,m=f.statusCode;if(_&&n.followRedirects&&m>=300&&m<400){if(++r._redirects>n.maxRedirects){Wt(r,p,"Maximum redirects exceeded");return}p.abort();let g=new Np(_,e);uy(r,g,t,i)}else r.emit("unexpected-response",p,f)||Wt(r,p,`Unexpected server response: ${f.statusCode}`)}),p.on("upgrade",(f,_,m)=>{if(r.emit("upgrade",f),r.readyState!==we.CONNECTING)return;p=r._req=null;let g=wD("sha1").update(u+bD).digest("base64");if(f.headers["sec-websocket-accept"]!==g){Wt(r,_,"Invalid Sec-WebSocket-Accept header");return}let v=f.headers["sec-websocket-protocol"],x=(t||"").split(/, */),b;if(!t&&v?b="Server sent a subprotocol but none was requested":t&&!v?b="Server sent no subprotocol":v&&!x.includes(v)&&(b="Server sent an invalid subprotocol"),b){Wt(r,_,b);return}v&&(r._protocol=v);let T=f.headers["sec-websocket-extensions"];if(T!==void 0){if(!h){Wt(r,_,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let k;try{k=kD(T)}catch(y){Wt(r,_,"Invalid Sec-WebSocket-Extensions header");return}let F=Object.keys(k);if(F.length){if(F.length!==1||F[0]!==ni.extensionName){Wt(r,_,"Server indicated an extension that was not requested");return}try{h.accept(k[ni.extensionName])}catch(y){Wt(r,_,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[ni.extensionName]=h}}r.setSocket(_,m,n.maxPayload)})}function TD(r){return r.path=r.socketPath,ay.connect(r)}function AD(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=ay.isIP(r.host)?"":r.host),_D.connect(r)}function Wt(r,e,t){r._readyState=we.CLOSING;let i=new Error(t);Error.captureStackTrace(i,Wt),e.setHeader?(e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),e.once("abort",r.emitClose.bind(r)),r.emit("error",i)):(e.destroy(i),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function Bp(r,e,t){if(e){let i=PD(e).length;r._socket?r._sender._bufferedBytes+=i:r._bufferedAmount+=i}if(t){let i=new Error(`WebSocket is not open: readyState ${r.readyState} (${qr[r.readyState]})`);t(i)}}function MD(r,e){let t=this[yt];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[yt]!==void 0&&(t._socket.removeListener("data",Uc),process.nextTick(hy,t._socket),r===1005?t.close():t.close(r,e))}function ID(){this[yt]._socket.resume()}function FD(r){let e=this[yt];e._socket[yt]!==void 0&&(e._socket.removeListener("data",Uc),process.nextTick(hy,e._socket),e.close(r[xD])),e.emit("error",r)}function dy(){this[yt].emitClose()}function DD(r){this[yt].emit("message",r)}function RD(r){let e=this[yt];e.pong(r,!e._isServer,ly),e.emit("ping",r)}function ND(r){this[yt].emit("pong",r)}function hy(r){r.resume()}function py(){let r=this[yt];this.removeListener("close",py),this.removeListener("data",Uc),this.removeListener("end",fy),r._readyState=we.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[yt]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",dy),r._receiver.on("finish",dy))}function Uc(r){this[yt]._receiver.write(r)||this.pause()}function fy(){let r=this[yt];r._readyState=we.CLOSING,r._receiver.end(),this.end()}function my(){let r=this[yt];this.removeListener("error",my),this.on("error",ly),r&&(r._readyState=we.CLOSING,this.destroy())}});var yy=w((mU,vy)=>{"use strict";var{Duplex:qD}=require("stream");function gy(r){r.emit("close")}function LD(){!this.destroyed&&this._writableState.finished&&this.destroy()}function wy(r){this.removeListener("error",wy),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function BD(r,e){let t=!0,i=!0;function n(){t&&r._socket.resume()}r.readyState===r.CONNECTING?r.once("open",function(){r._receiver.removeAllListeners("drain"),r._receiver.on("drain",n)}):(r._receiver.removeAllListeners("drain"),r._receiver.on("drain",n));let s=new qD({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(c){s.push(c)||(t=!1,r._socket.pause())}),r.once("error",function(c){s.destroyed||(i=!1,s.destroy(c))}),r.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(o,c){if(r.readyState===r.CLOSED){c(o),process.nextTick(gy,s);return}let l=!1;r.once("error",function(d){l=!0,c(d)}),r.once("close",function(){l||c(o),process.nextTick(gy,s)}),i&&r.terminate()},s._final=function(o){if(r.readyState===r.CONNECTING){r.once("open",function(){s._final(o)});return}r._socket!==null&&(r._socket._writableState.finished?(o(),s._readableState.endEmitted&&s.destroy()):(r._socket.once("finish",function(){o()}),r.close()))},s._read=function(){r.readyState===r.OPEN&&!t&&(t=!0,r._receiver._writableState.needDrain||r._socket.resume())},s._write=function(o,c,l){if(r.readyState===r.CONNECTING){r.once("open",function(){s._write(o,c,l)});return}r.send(o,l)},s.on("end",LD),s.on("error",wy),s}vy.exports=BD});var ky=w((vU,Cy)=>{"use strict";var HD=require("events"),Vc=require("http"),_U=require("https"),gU=require("net"),wU=require("tls"),{createHash:jD}=require("crypto"),un=$o(),WD=Hp(),{format:$D,parse:zD}=Rp(),{GUID:UD,kWebSocket:VD}=cn(),GD=/^[+/0-9A-Za-z]{22}==$/,by=0,xy=1,Sy=2,Ey=class extends HD{constructor(e,t){super();if(e={maxPayload:100*1024*1024,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Vc.createServer((i,n)=>{let s=Vc.STATUS_CODES[426];n.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),n.end(s)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let i=this.emit.bind(this,"connection");this._removeListeners=KD(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,s,o)=>{this.handleUpgrade(n,s,o,i)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e,this._state=by}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this._state===Sy){process.nextTick(jp,this);return}if(this._state===xy)return;if(this._state=xy,this.clients)for(let i of this.clients)i.terminate();let t=this._server;if(t&&(this._removeListeners(),this._removeListeners=this._server=null,this.options.port!=null)){t.close(jp.bind(void 0,this));return}process.nextTick(jp,this)}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,i,n){t.on("error",Wp);let s=e.headers["sec-websocket-key"]!==void 0?e.headers["sec-websocket-key"].trim():!1,o=+e.headers["sec-websocket-version"],c={};if(e.method!=="GET"||e.headers.upgrade.toLowerCase()!=="websocket"||!s||!GD.test(s)||o!==8&&o!==13||!this.shouldHandle(e))return Go(t,400);if(this.options.perMessageDeflate){let l=new un(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let u=zD(e.headers["sec-websocket-extensions"]);u[un.extensionName]&&(l.accept(u[un.extensionName]),c[un.extensionName]=l)}catch(u){return Go(t,400)}}if(this.options.verifyClient){let l={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(l,(u,d,h,p)=>{if(!u)return Go(t,d||401,h,p);this.completeUpgrade(s,c,e,t,i,n)});return}if(!this.options.verifyClient(l))return Go(t,401)}this.completeUpgrade(s,c,e,t,i,n)}completeUpgrade(e,t,i,n,s,o){if(!n.readable||!n.writable)return n.destroy();if(n[VD])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>by)return Go(n,503);let c=jD("sha1").update(e+UD).digest("base64"),l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${c}`],u=new WD(null),d=i.headers["sec-websocket-protocol"];if(d&&(d=d.split(",").map(JD),this.options.handleProtocols?d=this.options.handleProtocols(d,i):d=d[0],d&&(l.push(`Sec-WebSocket-Protocol: ${d}`),u._protocol=d)),t[un.extensionName]){let h=t[un.extensionName].params,p=$D({[un.extensionName]:[h]});l.push(`Sec-WebSocket-Extensions: ${p}`),u._extensions=t}this.emit("headers",l,i),n.write(l.concat(`\r
`).join(`\r
`)),n.removeListener("error",Wp),u.setSocket(n,s,this.options.maxPayload),this.clients&&(this.clients.add(u),u.on("close",()=>this.clients.delete(u))),o(u,i)}};Cy.exports=Ey;function KD(r,e){for(let t of Object.keys(e))r.on(t,e[t]);return function(){for(let i of Object.keys(e))r.removeListener(i,e[i])}}function jp(r){r._state=Sy,r.emit("close")}function Wp(){this.destroy()}function Go(r,e,t,i){r.writable&&(t=t||Vc.STATUS_CODES[e],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t),...i},r.write(`HTTP/1.1 ${e} ${Vc.STATUS_CODES[e]}\r
`+Object.keys(i).map(n=>`${n}: ${i[n]}`).join(`\r
`)+`\r
\r
`+t)),r.removeListener("error",Wp),r.destroy()}function JD(r){return r.trim()}});var os=w((yU,Py)=>{"use strict";var Ko=Hp();Ko.createWebSocketStream=yy();Ko.Server=ky();Ko.Receiver=Fp();Ko.Sender=Dp();Py.exports=Ko});var $t=w(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.TimeoutSettings=as.DEFAULT_TIMEOUT=void 0;var XD=H(),Oy=3e4;as.DEFAULT_TIMEOUT=Oy;var $p=(0,XD.debugMode)()?0:Oy,Ty=class{constructor(e){this._parent=void 0,this._defaultTimeout=null,this._defaultNavigationTimeout=null,this._parent=e}setDefaultTimeout(e){this._defaultTimeout=e}setDefaultNavigationTimeout(e){this._defaultNavigationTimeout=e}navigationTimeout(e){return typeof e.timeout=="number"?e.timeout:this._defaultNavigationTimeout!==null?this._defaultNavigationTimeout:this._defaultTimeout!==null?this._defaultTimeout:this._parent?this._parent.navigationTimeout(e):$p}timeout(e){return typeof e.timeout=="number"?e.timeout:this._defaultTimeout!==null?this._defaultTimeout:this._parent?this._parent.timeout(e):$p}static timeout(e){return typeof e.timeout=="number"?e.timeout:$p}};as.TimeoutSettings=Ty});var ze=w(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.RecentLogsCollector=cs.debugLogger=void 0;var zp=Ay(Fr()),YD=Ay(require("fs"));function Ay(r){return r&&r.__esModule?r:{default:r}}var QD={api:45,protocol:34,install:34,browser:0,proxy:92,error:160,"channel:command":33,"channel:response":202,"channel:event":207},My=class{constructor(){if(this._debuggers=new Map,process.env.DEBUG_FILE){let e=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),"g"),t=YD.default.createWriteStream(process.env.DEBUG_FILE);zp.default.log=i=>{t.write(i.replace(e,"")),t.write(`
`)}}}log(e,t){let i=this._debuggers.get(e);i||(i=(0,zp.default)(`pw:${e}`),this._debuggers.set(e,i),i.color=QD[e]),i(t)}isEnabled(e){return zp.default.enabled(`pw:${e}`)}},ZD=new My;cs.debugLogger=ZD;var Gc=50,Iy=class{constructor(){this._logs=[]}log(e){this._logs.push(e),this._logs.length===Gc*2&&this._logs.splice(0,Gc)}recentLogs(){return this._logs.length>Gc?this._logs.slice(-Gc):this._logs}};cs.RecentLogsCollector=Iy});var dt=w(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.eventsHelper=void 0;var Fy=class{static addEventListener(e,t,i){return e.on(t,i),{emitter:e,eventName:t,handler:i}}static removeEventListeners(e){for(let t of e)t.emitter.removeListener(t.eventName,t.handler);e.splice(0,e.length)}},eR=Fy;Kc.eventsHelper=eR});var kt=w(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.helper=void 0;var Dy=ze(),Jc=dt(),Ry=class{static completeUserURL(e){return(e.startsWith("localhost")||e.startsWith("127.0.0.1"))&&(e="http://"+e),e}static enclosingIntRect(e){let t=Math.floor(e.x+.001),i=Math.floor(e.y+.001),n=Math.ceil(e.x+e.width-.001),s=Math.ceil(e.y+e.height-.001);return{x:t,y:i,width:n-t,height:s-i}}static enclosingIntSize(e){return{width:Math.floor(e.width+.001),height:Math.floor(e.height+.001)}}static getViewportSizeFromWindowFeatures(e){let t=e.find(o=>o.startsWith("width=")),i=e.find(o=>o.startsWith("height=")),n=t?parseInt(t.substring(6),10):NaN,s=i?parseInt(i.substring(7),10):NaN;return!Number.isNaN(n)&&!Number.isNaN(s)?{width:n,height:s}:null}static waitForEvent(e,t,i,n){let s=[],o=new Promise((l,u)=>{s.push(Jc.eventsHelper.addEventListener(t,i,d=>{try{if(n&&!n(d))return;Jc.eventsHelper.removeEventListeners(s),l(d)}catch(h){Jc.eventsHelper.removeEventListeners(s),u(h)}}))}),c=()=>Jc.eventsHelper.removeEventListeners(s);return e&&e.cleanupWhenAborted(c),{promise:o,dispose:c}}static secondsToRoundishMillis(e){return(e*1e6|0)/1e3}static millisToRoundishMillis(e){return(e*1e3|0)/1e3}static debugProtocolLogger(e){return(t,i)=>{e&&e(t,i),Dy.debugLogger.isEnabled("protocol")&&Dy.debugLogger.log("protocol",(t==="send"?"SEND \u25BA ":"\u25C0 RECV ")+JSON.stringify(i))}}static formatBrowserLogs(e){return e.length?`
`+"=".repeat(20)+" Browser output: "+"=".repeat(20)+`
`+e.join(`
`):""}},tR=Ry;Xc.helper=tR});var zt=w(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.raceAgainstDeadline=iR;dn.ManualPromise=dn.DeadlineRunner=void 0;var rR=H(),Ny,qy,Up=class{constructor(e,t){this._timer=void 0,this.result=new Vp,e.then(i=>{this._finish({result:i})}).catch(i=>{this._finish(void 0,i)}),this.updateDeadline(t)}_finish(e,t){this.result.isDone()||(this.updateDeadline(0),e?this.result.resolve(e):this.result.reject(t))}interrupt(){this.updateDeadline(-1)}updateDeadline(e){if(this._timer&&(clearTimeout(this._timer),this._timer=void 0),e===0)return;let t=e-(0,rR.monotonicTime)();t<=0?this._finish({timedOut:!0}):this._timer=setTimeout(()=>this._finish({timedOut:!0}),t)}};dn.DeadlineRunner=Up;async function iR(r,e){return new Up(r,e).result}Ny=Symbol.species;qy=Symbol.toStringTag;var Vp=class extends Promise{constructor(){let e,t;super((i,n)=>{e=i,t=n});this._resolve=void 0,this._reject=void 0,this._isDone=void 0,this._isDone=!1,this._resolve=e,this._reject=t}isDone(){return this._isDone}resolve(e){this._isDone=!0,this._resolve(e)}reject(e){this._isDone=!0,this._reject(e)}static get[Ny](){return Promise}get[qy](){return"ManualPromise"}};dn.ManualPromise=Vp});var Hy=w(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.MultipartFormData=void 0;var Ly=class{constructor(){this._boundary=void 0,this._chunks=[],this._boundary=nR()}contentTypeHeader(){return`multipart/form-data; boundary=${this._boundary}`}addField(e,t){this._beginMultiPartHeader(e),this._finishMultiPartHeader(),this._chunks.push(Buffer.from(t)),this._finishMultiPartField()}addFileField(e,t){this._beginMultiPartHeader(e),this._chunks.push(Buffer.from(`; filename="${t.name}"`)),this._chunks.push(Buffer.from(`\r
content-type: ${t.mimeType||"application/octet-stream"}`)),this._finishMultiPartHeader(),this._chunks.push(Buffer.from(t.buffer,"base64")),this._finishMultiPartField()}finish(){return this._addBoundary(!0),Buffer.concat(this._chunks)}_beginMultiPartHeader(e){this._addBoundary(),this._chunks.push(Buffer.from(`content-disposition: form-data; name="${e}"`))}_finishMultiPartHeader(){this._chunks.push(Buffer.from(`\r
\r
`))}_finishMultiPartField(){this._chunks.push(Buffer.from(`\r
`))}_addBoundary(e){this._chunks.push(Buffer.from("--"+this._boundary)),e&&this._chunks.push(Buffer.from("--")),this._chunks.push(Buffer.from(`\r
`))}};Yc.MultipartFormData=Ly;var By=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,65,66];function nR(){let r=[];for(let e=0;e<16;e++)r.push(By[Math.floor(Math.random()*By.length)]);return"----WebKitFormBoundary"+String.fromCharCode(...r)}});var Xo=w(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.GlobalFetchRequest=si.BrowserContextFetchRequest=si.FetchRequest=void 0;var sR=$y(require("http")),oR=$y(require("https")),aR=yp(),cR=require("stream"),lR=jy(require("url")),Jo=jy(require("zlib")),uR=$t(),Qc=H(),dR=ht(),hR=Hy(),pR=Qe();function jy(r){return r&&r.__esModule?r:{default:r}}function Wy(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Wy=function(i){return i?t:e})(r)}function $y(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Wy(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var ir=class extends pR.SdkObject{static findResponseBody(e){for(let t of ir.allInstances){let i=t.fetchResponses.get(e);if(i)return i}}constructor(e){super(e,"fetchRequest");this.fetchResponses=new Map,ir.allInstances.add(this)}_disposeImpl(){ir.allInstances.delete(this),this.fetchResponses.clear(),this.emit(ir.Events.Dispose)}_storeResponseBody(e){let t=(0,Qc.createGuid)();return this.fetchResponses.set(t,e),t}async fetch(e){try{var t;let i={},n=this._defaultOptions();if(i["user-agent"]=n.userAgent,i.accept="*/*",i["accept-encoding"]="gzip,deflate,br",n.extraHTTPHeaders)for(let{name:m,value:g}of n.extraHTTPHeaders)i[m.toLowerCase()]=g;if(e.headers)for(let[m,g]of Object.entries(e.headers))i[m.toLowerCase()]=g;let s=((t=e.method)===null||t===void 0?void 0:t.toUpperCase())||"GET",o=n.proxy,c;if(o){let m=lR.default.parse(o.server);o.username&&(m.auth=`${o.username}:${o.password||""}`),c=new aR.HttpsProxyAgent(m)}let l=n.timeoutSettings.timeout(e),u=l&&(0,Qc.monotonicTime)()+l,d={method:s,headers:i,agent:c,maxRedirects:20,timeout:l,deadline:u};n.ignoreHTTPSErrors&&(d.rejectUnauthorized=!1);let h=new URL(e.url,n.baseURL);if(e.params)for(let[m,g]of Object.entries(e.params))h.searchParams.set(m,g);let p;if(["POST","PUSH","PATCH"].includes(s))p=e.formData?wR(e.formData,i):e.postData;else if(e.postData||e.formData)throw new Error(`Method ${s} does not accept post data`);let f=await this._sendRequest(h,d,p),_=this._storeResponseBody(f.body);return e.failOnStatusCode&&(f.status<200||f.status>=400)?{error:`${f.status} ${f.statusText}`}:{fetchResponse:{...f,fetchUid:_}}}catch(i){return{error:String(i)}}}async _updateCookiesFromHeader(e,t){let i=new URL(e),n="/"+i.pathname.substr(1).split("/").slice(0,-1).join("/"),s=[];for(let o of t){let c=gR(o);!c||(c.domain||(c.domain=i.hostname),!!_R(c.domain,i.hostname)&&((!c.path||!c.path.startsWith("/"))&&(c.path=n),s.push(c)))}s.length&&await this._addCookies(s)}async _updateRequestCookieHeader(e,t){if(t.headers.cookie!==void 0)return;let i=await this._cookies(e.toString());if(i.length){let n=i.map(s=>`${s.name}=${s.value}`);t.headers.cookie=n.join("; ")}}async _sendRequest(e,t,i){return await this._updateRequestCookieHeader(e,t),new Promise((n,s)=>{let c=(e.protocol==="https:"?oR:sR).request(e,t,async l=>{if(l.headers["set-cookie"]&&await this._updateCookiesFromHeader(l.url||e.toString(),l.headers["set-cookie"]),mR.includes(l.statusCode)){if(!t.maxRedirects){s(new Error("Max redirect count exceeded")),c.abort();return}let f={...t.headers};delete f.cookie;let _=l.statusCode,m=t.method;((_===301||_===302)&&m==="POST"||_===303&&!["GET","HEAD"].includes(m))&&(m="GET",i=void 0,delete f["content-encoding"],delete f["content-language"],delete f["content-location"],delete f["content-type"]);let g={method:m,headers:f,agent:t.agent,maxRedirects:t.maxRedirects-1,timeout:t.timeout,deadline:t.deadline};if(l.headers.location){let v=new URL(l.headers.location,e);n(this._sendRequest(v,g,i)),c.abort();return}}if(l.statusCode===401&&!t.headers.authorization){let f=l.headers["www-authenticate"],_=this._defaultOptions().httpCredentials;if(f!=null&&f.trim().startsWith("Basic ")&&_){let{username:m,password:g}=_,v=Buffer.from(`${m||""}:${g||""}`).toString("base64");t.headers.authorization=`Basic ${v}`,n(this._sendRequest(e,t,i)),c.abort();return}}l.on("aborted",()=>s(new Error("aborted")));let u=l,d,h=l.headers["content-encoding"];h==="gzip"||h==="x-gzip"?d=Jo.default.createGunzip({flush:Jo.default.constants.Z_SYNC_FLUSH,finishFlush:Jo.default.constants.Z_SYNC_FLUSH}):h==="br"?d=Jo.default.createBrotliDecompress():h==="deflate"&&(d=Jo.default.createInflate()),d&&(u=(0,cR.pipeline)(l,d,f=>{f&&s(new Error(`failed to decompress '${h}' encoding: ${f}`))}));let p=[];u.on("data",f=>p.push(f)),u.on("end",()=>{let f=Buffer.concat(p);n({url:l.url||e.toString(),status:l.statusCode||0,statusText:l.statusMessage||"",headers:fR(l.rawHeaders),body:f})}),u.on("error",s)});if(c.on("error",s),t.deadline){let l=()=>{s(new Error(`Request timed out after ${t.timeout}ms`)),c.abort()},u=t.deadline-(0,Qc.monotonicTime)();if(u<=0){l();return}c.setTimeout(u,l)}i&&c.write(i),c.end()})}};si.FetchRequest=ir;ir.Events={Dispose:"dispose"};ir.allInstances=new Set;var zy=class extends ir{constructor(e){super(e);this._context=void 0,this._context=e,e.once(dR.BrowserContext.Events.Close,()=>this._disposeImpl())}dispose(){this.fetchResponses.clear()}_defaultOptions(){return{userAgent:this._context._options.userAgent||this._context._browser.userAgent(),extraHTTPHeaders:this._context._options.extraHTTPHeaders,httpCredentials:this._context._options.httpCredentials,proxy:this._context._options.proxy||this._context._browser.options.proxy,timeoutSettings:this._context._timeoutSettings,ignoreHTTPSErrors:this._context._options.ignoreHTTPSErrors,baseURL:this._context._options.baseURL}}async _addCookies(e){await this._context.addCookies(e)}async _cookies(e){return await this._context.cookies(e)}};si.BrowserContextFetchRequest=zy;var Uy=class extends ir{constructor(e,t){super(e);this._options=void 0;let i=new uR.TimeoutSettings;t.timeout!==void 0&&i.setDefaultTimeout(t.timeout);let n=t.proxy;if(n!=null&&n.server){let s=n==null?void 0:n.server.trim();/^\w+:\/\//.test(s)||(s="http://"+s),n.server=s}this._options={baseURL:t.baseURL,userAgent:t.userAgent||"",extraHTTPHeaders:t.extraHTTPHeaders,ignoreHTTPSErrors:!!t.ignoreHTTPSErrors,httpCredentials:t.httpCredentials,proxy:n,timeoutSettings:i}}dispose(){this._disposeImpl()}_defaultOptions(){return this._options}async _addCookies(e){}async _cookies(e){return[]}};si.GlobalFetchRequest=Uy;function fR(r){let e=[];for(let t=0;t<r.length;t+=2)e.push({name:r[t],value:r[t+1]});return e}var mR=[301,302,303,307,308];function _R(r,e){return e="."+e,r.startsWith(".")||(r="."+r),e.endsWith(r)}function gR(r){let e=r.split(";").filter(s=>s.trim().length>0).map(s=>s.split("=").map(o=>o.trim()));if(!e.length)return null;let[t,i]=e[0],n={name:t,value:i,domain:"",path:"",expires:-1,httpOnly:!1,secure:!1,sameSite:"Lax"};for(let s=1;s<e.length;s++){let[o,c]=e[s];switch(o.toLowerCase()){case"expires":let l=+new Date(c);isFinite(l)&&(n.expires=l/1e3);break;case"max-age":let u=parseInt(c,10);isFinite(u)&&(n.expires=Date.now()/1e3+u);break;case"domain":n.domain=c||"";break;case"path":n.path=c||"";break;case"secure":n.secure=!0;break;case"httponly":n.httpOnly=!0;break}}return n}function wR(r,e){let t=e["content-type"]||"application/json";if(t==="application/json"){var i,n;let s=JSON.stringify(r);return(n=e[i="content-type"])!==null&&n!==void 0||(e[i]=t),Buffer.from(s,"utf8")}else if(t==="application/x-www-form-urlencoded"){let s=new URLSearchParams;for(let[o,c]of Object.entries(r))s.append(o,String(c));return Buffer.from(s.toString(),"utf8")}else if(t==="multipart/form-data"){let s=new hR.MultipartFormData;for(let[o,c]of Object.entries(r))if((0,Qc.isFilePayload)(c)){let l=c;s.addFileField(o,l)}else c!==void 0&&s.addField(o,String(c));return e["content-type"]=s.contentTypeHeader(),s.finish()}else throw new Error(`Cannot serialize data using content type: ${t}`)}});var Dt=w(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.filterCookies=yR;Ge.rewriteCookies=bR;Ge.parsedURL=xR;Ge.stripFragmentFromUrl=Vy;Ge.singleHeader=ER;Ge.mergeHeaders=CR;Ge.STATUS_TEXTS=Ge.WebSocket=Ge.InterceptedResponse=Ge.Response=Ge.Route=Ge.Request=void 0;var Ft=H(),oi=zt(),Yo=Qe(),vR=Xo();function yR(r,e){let t=e.map(i=>new URL(i));return r.filter(i=>{if(!i.value)return!1;if(!t.length)return!0;for(let n of t){let s=i.domain;if(s.startsWith(".")||(s="."+s),!!("."+n.hostname).endsWith(s)&&!!n.pathname.startsWith(i.path)&&!(n.protocol!=="https:"&&i.secure))return!0}return!1})}function bR(r){return r.map(e=>{(0,Ft.assert)(e.name,"Cookie should have a name"),(0,Ft.assert)(e.value,"Cookie should have a value"),(0,Ft.assert)(e.url||e.domain&&e.path,"Cookie should have a url or a domain/path pair"),(0,Ft.assert)(!(e.url&&e.domain),"Cookie should have either url or domain"),(0,Ft.assert)(!(e.url&&e.path),"Cookie should have either url or path");let t={...e};if(t.url){(0,Ft.assert)(t.url!=="about:blank",`Blank page can not have cookie "${e.name}"`),(0,Ft.assert)(!t.url.startsWith("data:"),`Data URL page can not have cookie "${e.name}"`);let i=new URL(t.url);t.domain=i.hostname,t.path=i.pathname.substring(0,i.pathname.lastIndexOf("/")+1),t.secure=i.protocol==="https:"}return t})}function xR(r){try{return new URL(r)}catch(e){return null}}function Vy(r){return r.includes("#")?r.substring(0,r.indexOf("#")):r}var Gy=class extends Yo.SdkObject{constructor(e,t,i,n,s,o,c,l){super(e,"request");this._response=null,this._redirectedFrom=void 0,this._redirectedTo=null,this._documentId=void 0,this._isFavicon=void 0,this._failureText=null,this._url=void 0,this._resourceType=void 0,this._method=void 0,this._postData=void 0,this._headers=void 0,this._headersMap=new Map,this._rawRequestHeadersPromise=void 0,this._frame=void 0,this._waitForResponsePromise=new oi.ManualPromise,this._responseEndTiming=-1,this.responseSize={encodedBodySize:0,transferSize:0,responseHeadersSize:0},(0,Ft.assert)(!n.startsWith("data:"),"Data urls should not fire requests"),this._frame=e,this._redirectedFrom=t,t&&(t._redirectedTo=this),this._documentId=i,this._url=Vy(n),this._resourceType=s,this._method=o,this._postData=c,this._headers=l;for(let{name:u,value:d}of this._headers)this._headersMap.set(u.toLowerCase(),d);this._isFavicon=n.endsWith("/favicon.ico")||!!(t!=null&&t._isFavicon)}_setFailureText(e){this._failureText=e,this._waitForResponsePromise.resolve(null)}url(){return this._url}resourceType(){return this._resourceType}method(){return this._method}postDataBuffer(){return this._postData}headers(){return this._headers}headerValue(e){return this._headersMap.get(e)}setWillReceiveExtraHeaders(){this._rawRequestHeadersPromise||(this._rawRequestHeadersPromise=new oi.ManualPromise)}setRawRequestHeaders(e){this._rawRequestHeadersPromise||(this._rawRequestHeadersPromise=new oi.ManualPromise),this._rawRequestHeadersPromise.resolve(e)}async rawRequestHeaders(){return this._rawRequestHeadersPromise||Promise.resolve(this._headers)}rawRequestHeadersPromise(){return this._rawRequestHeadersPromise}response(){return this._waitForResponsePromise}_existingResponse(){return this._response}_setResponse(e){this._response=e,this._waitForResponsePromise.resolve(e)}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}frame(){return this._frame}isNavigationRequest(){return!!this._documentId}redirectedFrom(){return this._redirectedFrom}failure(){return this._failureText===null?null:{errorText:this._failureText}}bodySize(){var e;return((e=this.postDataBuffer())===null||e===void 0?void 0:e.length)||0}async requestHeadersSize(){let e=4;e+=this.method().length,e+=new URL(this.url()).pathname.length,e+=8;let t=this.rawRequestHeadersPromise()?await this.rawRequestHeadersPromise():this._headers;for(let i of t)e+=i.name.length+i.value.length+4;return e}};Ge.Request=Gy;var Ky=class extends Yo.SdkObject{constructor(e,t){super(e.frame(),"route");this._request=void 0,this._delegate=void 0,this._handled=!1,this._response=null,this._request=e,this._delegate=t}request(){return this._request}async abort(e="failed"){(0,Ft.assert)(!this._handled,"Route is already handled!"),this._handled=!0,await this._delegate.abort(e)}async fulfill(e){(0,Ft.assert)(!this._handled,"Route is already handled!"),this._handled=!0;let t=e.body,i=e.isBase64||!1;if(t===void 0)if(e.fetchResponseUid){let s=this._request.frame()._page._browserContext.fetchRequest.fetchResponses.get(e.fetchResponseUid)||vR.FetchRequest.findResponseBody(e.fetchResponseUid);(0,Ft.assert)(s,"Fetch response has been disposed"),t=s.toString("utf8"),i=!1}else this._response&&e.useInterceptedResponseBody?(t=(await this._delegate.responseBody()).toString("utf8"),i=!1):(t="",i=!1);await this._delegate.fulfill({status:e.status||200,headers:e.headers||[],body:t,isBase64:i})}async continue(e={}){if((0,Ft.assert)(!this._handled,"Route is already handled!"),(0,Ft.assert)(!this._response,"Cannot call continue after response interception!"),e.url){let t=new URL(e.url);if(new URL(this._request.url()).protocol!==t.protocol)throw new Error("New URL must have same protocol as overridden URL")}return this._response=await this._delegate.continue(this._request,e),this._response}async responseBody(){return(0,Ft.assert)(!this._handled,"Route is already handled!"),this._delegate.responseBody()}};Ge.Route=Ky;var Jy=class extends Yo.SdkObject{constructor(e,t,i,n,s,o,c){super(e.frame(),"response");this._request=void 0,this._contentPromise=null,this._finishedPromise=new oi.ManualPromise,this._status=void 0,this._statusText=void 0,this._url=void 0,this._headers=void 0,this._headersMap=new Map,this._getResponseBodyCallback=void 0,this._timing=void 0,this._serverAddrPromise=new oi.ManualPromise,this._securityDetailsPromise=new oi.ManualPromise,this._rawResponseHeadersPromise=void 0,this._httpVersion=void 0,this._request=e,this._timing=s,this._status=t,this._statusText=i,this._url=e.url(),this._headers=n;for(let{name:l,value:u}of this._headers)this._headersMap.set(l.toLowerCase(),u);this._getResponseBodyCallback=o,this._request._setResponse(this),this._httpVersion=c}_serverAddrFinished(e){this._serverAddrPromise.resolve(e)}_securityDetailsFinished(e){this._securityDetailsPromise.resolve(e)}_requestFinished(e){this._request._responseEndTiming=Math.max(e,this._timing.responseStart),this._finishedPromise.resolve()}_setHttpVersion(e){this._httpVersion=e}url(){return this._url}status(){return this._status}statusText(){return this._statusText}headers(){return this._headers}headerValue(e){return this._headersMap.get(e)}async rawResponseHeaders(){return this._rawResponseHeadersPromise||Promise.resolve(this._headers)}setWillReceiveExtraHeaders(){this._request.setWillReceiveExtraHeaders(),this._rawResponseHeadersPromise=new oi.ManualPromise}setRawResponseHeaders(e){this._rawResponseHeadersPromise||(this._rawResponseHeadersPromise=new oi.ManualPromise),this._rawResponseHeadersPromise.resolve(e)}timing(){return this._timing}async serverAddr(){return await this._serverAddrPromise||null}async securityDetails(){return await this._securityDetailsPromise||null}body(){return this._contentPromise||(this._contentPromise=this._finishedPromise.then(async()=>{if(this._status>=300&&this._status<=399)throw new Error("Response body is unavailable for redirect responses");return this._getResponseBodyCallback()})),this._contentPromise}request(){return this._request}frame(){return this._request.frame()}httpVersion(){return!this._httpVersion||this._httpVersion==="http/1.1"?"HTTP/1.1":this._httpVersion}async _responseHeadersSize(){if(this._request.responseSize.responseHeadersSize)return this._request.responseSize.responseHeadersSize;let e=4;e+=8,e+=3,e+=this.statusText().length;let t=await this._bestEffortResponseHeaders();for(let i of t)e+=i.name.length+i.value.length+4;return e+=2,e}async _bestEffortResponseHeaders(){return this._rawResponseHeadersPromise?await this._rawResponseHeadersPromise:this._headers}async sizes(){await this._finishedPromise;let e=await this._request.requestHeadersSize(),t=await this._responseHeadersSize(),{encodedBodySize:i}=this._request.responseSize;if(!i){var n;let o=(n=(await this._bestEffortResponseHeaders()).find(c=>c.name.toLowerCase()==="content-length"))===null||n===void 0?void 0:n.value;i=o?+o:0}return{requestBodySize:this._request.bodySize(),requestHeadersSize:e,responseBodySize:i,responseHeadersSize:t}}};Ge.Response=Jy;var Xy=class extends Yo.SdkObject{constructor(e,t,i,n){super(e.frame(),"interceptedResponse");this._request=void 0,this._status=void 0,this._statusText=void 0,this._headers=void 0,this._request=e._finalRequest(),this._status=t,this._statusText=i,this._headers=n}status(){return this._status}statusText(){return this._statusText}headers(){return this._headers}request(){return this._request}};Ge.InterceptedResponse=Xy;var ai=class extends Yo.SdkObject{constructor(e,t){super(e,"ws");this._url=void 0,this._url=t}url(){return this._url}frameSent(e,t){this.emit(ai.Events.FrameSent,{opcode:e,data:t})}frameReceived(e,t){this.emit(ai.Events.FrameReceived,{opcode:e,data:t})}error(e){this.emit(ai.Events.SocketError,e)}closed(){this.emit(ai.Events.Close)}};Ge.WebSocket=ai;ai.Events={Close:"close",SocketError:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"};var SR={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"Switch Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","510":"Not Extended","511":"Network Authentication Required"};Ge.STATUS_TEXTS=SR;function ER(r,e){return[{name:r,value:e}]}function CR(r){let e=new Map,t=new Map;for(let n of r)if(!!n)for(let{name:s,value:o}of n){let c=s.toLowerCase();t.set(c,s),e.set(c,o)}let i=[];for(let[n,s]of e)i.push({name:t.get(n),value:s});return i}});var Yy=w(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.source=void 0;var kR='var pwExport=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,r=0;const o={parts:[]},i=()=>{const t=e.substring(r,n).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&\'"\'===t[0]&&\'"\'===t[t.length-1]||t.length>1&&"\'"===t[0]&&"\'"===t[t.length-1]?(s="text",c=t):/^\\(*\\/\\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let a=!1;if("*"===s[0]&&(a=!0,s=s.substring(1)),o.parts.push({name:s,body:c}),a){if(void 0!==o.capture)throw new Error("Only one of the selectors can capture using * modifier");o.capture=o.parts.length-1}};if(!e.includes(">>"))return n=e.length,i(),o;for(;n<e.length;){const o=e[n];"\\\\"===o&&n+1<e.length?n+=2:o===t?(t=void 0,n++):t||\'"\'!==o&&"\'"!==o&&"`"!==o?t||">"!==o||">"!==e[n+1]?n++:(i(),n+=2,r=n):(t=o,n++)}return i(),o}(e),n=t.parts.map(e=>{if("css"===e.name||"css:light"===e.name){"css:light"===e.name&&(e.body=":light("+e.body+")");return{name:"css",body:(0,r.parseCSS)(e.body,o).selector}}return e});return{selector:e,capture:t.capture,parts:n}},t.customCSSNames=void 0;var r=n(2);const o=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=d,t.createStrictTextMatcher=m,t.createRegexTextMatcher=g,t.elementText=w,t.elementMatchesText=v,t.parentElementOrShadowHost=C,t.isVisible=O,t.SelectorEvaluatorImpl=void 0;var r=n(0);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set("not",c),this._engines.set("is",o),this._engines.set("where",o),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",a),this._engines.set("visible",u),this._engines.set("text",l),this._engines.set("text-is",p),this._engines.set("text-matches",h),this._engines.set("has-text",f),this._engines.set("right-of",k("right-of",b)),this._engines.set("left-of",k("left-of",E)),this._engines.set("above",k("above",_)),this._engines.set("below",k("below",S)),this._engines.set("near",k("near",T)),this._engines.set("nth-match",N);const t=[...this._engines.keys()];t.sort();const n=[...r.customCSSNames];if(n.sort(),t.join("|")!==n.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${n.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,r){e.has(t)||e.set(t,[]);const o=e.get(t),i=o.find(e=>n.every((t,n)=>e.rest[n]===t));if(i)return i.result;const s=r();return o.push({rest:n,result:s}),s}_checkSelector(e){if(!("object"==typeof e&&e&&(Array.isArray(e)||"simples"in e&&e.simples.length)))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,n){const r=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[r,n.scope,n.pierceShadow],()=>Array.isArray(r)?this._matchesEngine(o,e,r,n):!!this._matchesSimple(e,r.simples[r.simples.length-1].selector,n)&&this._matchesParents(e,r,r.simples.length-2,n))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],()=>{if(Array.isArray(n))return this._queryEngine(o,e,n);const t=this._scoreMap;this._scoreMap=new Map;let r=this._querySimple(e,n.simples[n.simples.length-1].selector);return r=r.filter(t=>this._matchesParents(t,n,n.simples.length-2,e)),this._scoreMap.size&&r.sort((e,t)=>{const n=this._scoreMap.get(e),r=this._scoreMap.get(t);return n===r?0:void 0===n?1:void 0===r?-1:n-r}),this._scoreMap=t,r})}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],()=>{if(!t.functions.some(e=>"scope"===e.name||"is"===e.name)&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const r of t.functions)if(!this._matchesEngine(this._getEngine(r.name),e,r.args,n))return!1;return!0})}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],()=>{let n=t.css;const r=t.functions;let o;"*"===n&&r.length&&(n=void 0);let i=-1;void 0!==n?o=this._queryCSS(e,n):(i=r.findIndex(e=>void 0!==this._getEngine(e.name).query),-1===i&&(i=0),o=this._queryEngine(this._getEngine(r[i].name),e,r[i].args));for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0!==n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0===n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}return o}):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,n,r){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,r.scope,r.pierceShadow],()=>{const{selector:o,combinator:i}=t.simples[n];if(">"===i){const i=x(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if("+"===i){const i=A(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(""===i){let i=x(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=x(i,r)}return!1}if("~"===i){let i=A(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if("~"===t.simples[n-1].combinator)break}i=A(i,r)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=x(i,r)}return!1}throw new Error(`Unsupported combinator "${i}"`)})}_matchesEngine(e,t,n,r){if(e.matches)return this._callMatches(e,t,n,r);if(e.query)return this._callQuery(e,n,r).includes(t);throw new Error(\'Selector engine should implement "matches" or "query"\')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,"*").filter(r=>this._callMatches(e,r,n,t));throw new Error(\'Selector engine should implement "matches" or "query"\')}_callMatches(e,t,n,r){return this._cached(this._cacheCallMatches,t,[e,r.scope,r.pierceShadow,...n],()=>e.matches(t,n,r,this))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],()=>e.query(n,t,this))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],()=>{let n=[];return function r(o){if(n=n.concat([...o.querySelectorAll(t)]),e.pierceShadow){o.shadowRoot&&r(o.shadowRoot);for(const e of o.querySelectorAll("*"))e.shadowRoot&&r(e.shadowRoot)}}(e.scope),n})}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const o={matches(e,t,n,r){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');return t.some(t=>r.matches(e,t,n))},query(e,t,n){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');let r=[];for(const o of t)r=r.concat(n.query(e,o));return 1===t.length?r:function(e){const t=new Map,n=[],r=[];return e.forEach(e=>(function e(r){let o=t.get(r);if(o)return o;const i=C(r);if(i){e(i).children.push(r)}else n.push(r);return o={children:[],taken:!1},t.set(r,o),o}(e)).taken=!0),n.forEach((function e(n){const o=t.get(n);o.taken&&r.push(n);if(o.children.length>1){const e=new Set(o.children);o.children=[];let t=n.firstElementChild;for(;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling}o.children.forEach(e)})),r}(r)}},i={matches(e,t,n,r){if(0===t.length)throw new Error(\'"has" engine expects non-empty selector list\');return r.query({...n,scope:e},t).length>0}},s={matches(e,t,n,r){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,r){if(0===t.length)throw new Error(\'"not" engine expects non-empty selector list\');return!r.matches(e,t,n)}},a={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,r)=>r.matches(e,t,{...n,pierceShadow:!1})},u={matches(e,t,n,r){if(t.length)throw new Error(\'"visible" engine expects no arguments\');return O(e)}},l={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text" engine expects a single string\');return"self"===v(r,e,d(t[0]))}},p={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text-is" engine expects a single string\');return"none"!==v(r,e,m(t[0]))}},h={matches(e,t,n,r){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error(\'"text-matches" engine expects a regexp body and optional regexp flags\');return"self"===v(r,e,g(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"has-text" engine expects a single string\');if(y(e))return!1;return d(t[0])(w(r,e))}};function d(e){return e=e.trim().replace(/\\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\\s+/g," ").toLowerCase().includes(e)}function m(e){return e=e.trim().replace(/\\s+/g," "),t=>t.immediate.some(t=>t.trim().replace(/\\s+/g," ")===e)}function g(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function y(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function w(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:"",immediate:[]},!y(t)){let r="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))n={full:t.value,immediate:[t.value]};else{for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?(n.full+=o.nodeValue||"",r+=o.nodeValue||""):(r&&n.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(n.full+=w(e,o).full));r&&n.immediate.push(r),t.shadowRoot&&(n.full+=w(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function v(e,t,n){if(y(t))return"none";if(!n(w(e,t)))return"none";for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType===Node.ELEMENT_NODE&&n(w(e,r)))return"selfAndChildren";return t.shadowRoot&&n(w(e,t.shadowRoot))?"selfAndChildren":"self"}function b(e,t,n){const r=e.left-t.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function E(e,t,n){const r=t.left-e.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function _(e,t,n){const r=t.top-e.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function S(e,t,n){const r=e.top-t.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function T(e,t,n){const r=void 0===n?50:n;let o=0;return e.left-t.right>=0&&(o+=e.left-t.right),t.left-e.right>=0&&(o+=t.left-e.right),t.top-e.bottom>=0&&(o+=t.top-e.bottom),e.top-t.bottom>=0&&(o+=e.top-t.bottom),o>r?void 0:o}function k(e,t){return{matches(n,r,o,i){const s=r.length&&"number"==typeof r[r.length-1]?r[r.length-1]:void 0,c=void 0===s?r:r.slice(0,r.length-1);if(r.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const a=n.getBoundingClientRect();let u;for(const e of i.query(o,c)){if(e===n)continue;const r=t(a,e.getBoundingClientRect(),s);void 0!==r&&((void 0===u||r<u)&&(u=r))}return void 0!==u&&(i._markScore(n,u),!0)}}}const N={query(e,t,n){let r=t[t.length-1];if(t.length<2)throw new Error(\'"nth-match" engine expects non-empty selector list and an index argument\');if("number"!=typeof r||r<1)throw new Error(\'"nth-match" engine expects a one-based index as the last argument\');const i=o.query(e,t.slice(0,t.length-1),n);return r--,r<i.length?[i[r]]:[]}};function C(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function x(e,t){if(e!==t.scope)return t.pierceShadow?C(e):e.parentElement||void 0}function A(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function O(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let n;try{n=r.tokenize(e),n[n.length-1]instanceof r.EOFToken||n.push(new r.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,r=(t.stack||"").indexOf(t.message);throw-1!==r&&(t.stack=t.stack.substring(0,r)+n+t.stack.substring(r+t.message.length)),t.message=n,t}const o=n.find(e=>e instanceof r.AtKeywordToken||e instanceof r.BadStringToken||e instanceof r.BadURLToken||e instanceof r.ColumnToken||e instanceof r.CDOToken||e instanceof r.CDCToken||e instanceof r.SemicolonToken||e instanceof r.OpenCurlyToken||e instanceof r.CloseCurlyToken||e instanceof r.URLToken||e instanceof r.PercentageToken);if(o)throw new Error(`Unsupported token "${o.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${n[i].toSource()}" while parsing selector "${e}"`)}function a(){for(;n[i]instanceof r.WhitespaceToken;)i++}function u(e=i){return n[e]instanceof r.IdentToken}function l(e=i){return n[e]instanceof r.CommaToken}function p(e=i){return n[e]instanceof r.CloseParenToken}function h(e=i){return n[e]instanceof r.DelimToken&&"*"===n[e].value}function f(e=i){return n[e]instanceof r.EOFToken}function d(e=i){return n[e]instanceof r.DelimToken&&[">","+","~"].includes(n[e].value)}function m(e=i){return l(e)||p(e)||f(e)||d(e)||n[e]instanceof r.WhitespaceToken}function g(){const e=[y()];for(;a(),l();)i++,e.push(y());return e}function y(){return a(),function(e=i){return n[e]instanceof r.NumberToken}()||function(e=i){return n[e]instanceof r.StringToken}()?n[i++].value:function(){a();const e={simples:[{selector:w(),combinator:""}]};for(;;){if(a(),d())e.simples[e.simples.length-1].combinator=n[i++].value,a();else if(m())break;e.simples.push({combinator:"",selector:w()})}return e}()}function w(){let e="";const o=[];for(;!m();)if(u()||h())e+=n[i++].toSource();else if(n[i]instanceof r.HashToken)e+=n[i++].toSource();else if(n[i]instanceof r.DelimToken&&"."===n[i].value){if(i++,!u())throw c();e+="."+n[i++].toSource()}else if(n[i]instanceof r.ColonToken)if(i++,u())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();o.push({name:e,args:[]}),s.add(e)}else e+=":"+n[i++].toSource();else{if(!(n[i]instanceof r.FunctionToken))throw c();{const r=n[i++].value.toLowerCase();if(t.has(r)?(o.push({name:r,args:g()}),s.add(r)):e+=`:${r}(${v()})`,a(),!p())throw c();i++}}else{if(!(n[i]instanceof r.OpenSquareToken))throw c();for(e+="[",i++;!(n[i]instanceof r.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof r.CloseSquareToken))throw c();e+="]",i++}if(!e&&!o.length)throw c();return{css:e||void 0,functions:o}}function v(){let e="";for(;!p()&&!f();)e+=n[i++].toSource();return e}const b=g();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(b.some(e=>"object"!=typeof e||!("simples"in e)))throw new Error(`Error while parsing selector "${e}"`);return{selector:b,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map(t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let r=t.css||"";return r+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(""),n&&(r+=" "+n),r}).join(" ")).join(", ")};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(3));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}},function(e,t,n){"use strict";var r,o,i;o=[t],void 0===(i="function"==typeof(r=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function r(e){return n(e)||t(e,65,70)||t(e,97,102)}function o(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return o(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function a(e){return 10==e}function u(e){return a(e)||9==e||32==e}var l=function(e){this.message=e};function p(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function h(){throw"Abstract Base Class"}function f(){return this}function d(){return this}function m(){return this}function g(){return this}function y(){return this}function w(){return this}function v(){return this}function b(){return this}function E(){throw"Abstract Base Class"}function _(){return this.value="{",this.mirror="}",this}function S(){return this.value="}",this.mirror="{",this}function T(){return this.value="[",this.mirror="]",this}function k(){return this.value="]",this.mirror="[",this}function N(){return this.value="(",this.mirror=")",this}function C(){return this.value=")",this.mirror="(",this}function x(){return this}function A(){return this}function O(){return this}function M(){return this}function $(){return this}function R(){return this}function j(){return this}function P(e){return this.value=p(e),this}function L(){throw"Abstract Base Class"}function q(e){this.value=e}function D(e){this.value=e,this.mirror=")"}function I(e){this.value=e}function U(e){this.value=e,this.type="unrestricted"}function W(e){this.value=e}function F(e){this.value=e}function B(){this.value=null,this.type="integer",this.repr=""}function V(){this.value=null,this.repr=""}function H(){this.value=null,this.type="integer",this.repr="",this.unit=""}function J(e){for(var n="",r=(e=""+e).charCodeAt(0),o=0;o<e.length;o++){var i=e.charCodeAt(o);if(0==i)throw new l("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==o&&t(i,48,57)||1==o&&t(i,48,57)&&45==r?n+="\\\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[o]:n+="\\\\"+e[o]}return n}function Q(e){e=""+e;for(var n="",r=0;r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");t(o,1,31)||127==o?n+="\\\\"+o.toString(16)+" ":n+=34==o||92==o?"\\\\"+e[r]:e[r]}return n}(l.prototype=new Error).name="InvalidCharacterError",h.prototype.toJSON=function(){return{token:this.tokenType}},h.prototype.toString=function(){return this.tokenType},h.prototype.toSource=function(){return""+this},f.prototype=Object.create(h.prototype),f.prototype.tokenType="BADSTRING",d.prototype=Object.create(h.prototype),d.prototype.tokenType="BADURL",m.prototype=Object.create(h.prototype),m.prototype.tokenType="WHITESPACE",m.prototype.toString=function(){return"WS"},m.prototype.toSource=function(){return" "},g.prototype=Object.create(h.prototype),g.prototype.tokenType="CDO",g.prototype.toSource=function(){return"\\x3c!--"},y.prototype=Object.create(h.prototype),y.prototype.tokenType="CDC",y.prototype.toSource=function(){return"--\\x3e"},w.prototype=Object.create(h.prototype),w.prototype.tokenType=":",v.prototype=Object.create(h.prototype),v.prototype.tokenType=";",b.prototype=Object.create(h.prototype),b.prototype.tokenType=",",E.prototype=Object.create(h.prototype),_.prototype=Object.create(E.prototype),_.prototype.tokenType="{",S.prototype=Object.create(E.prototype),S.prototype.tokenType="}",T.prototype=Object.create(E.prototype),T.prototype.tokenType="[",k.prototype=Object.create(E.prototype),k.prototype.tokenType="]",N.prototype=Object.create(E.prototype),N.prototype.tokenType="(",C.prototype=Object.create(E.prototype),C.prototype.tokenType=")",x.prototype=Object.create(h.prototype),x.prototype.tokenType="~=",A.prototype=Object.create(h.prototype),A.prototype.tokenType="|=",O.prototype=Object.create(h.prototype),O.prototype.tokenType="^=",M.prototype=Object.create(h.prototype),M.prototype.tokenType="$=",$.prototype=Object.create(h.prototype),$.prototype.tokenType="*=",R.prototype=Object.create(h.prototype),R.prototype.tokenType="||",j.prototype=Object.create(h.prototype),j.prototype.tokenType="EOF",j.prototype.toSource=function(){return""},P.prototype=Object.create(h.prototype),P.prototype.tokenType="DELIM",P.prototype.toString=function(){return"DELIM("+this.value+")"},P.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},P.prototype.toSource=function(){return"\\\\"==this.value?"\\\\\\n":this.value},L.prototype=Object.create(h.prototype),L.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},L.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},q.prototype=Object.create(L.prototype),q.prototype.tokenType="IDENT",q.prototype.toString=function(){return"IDENT("+this.value+")"},q.prototype.toSource=function(){return J(this.value)},D.prototype=Object.create(L.prototype),D.prototype.tokenType="FUNCTION",D.prototype.toString=function(){return"FUNCTION("+this.value+")"},D.prototype.toSource=function(){return J(this.value)+"("},I.prototype=Object.create(L.prototype),I.prototype.tokenType="AT-KEYWORD",I.prototype.toString=function(){return"AT("+this.value+")"},I.prototype.toSource=function(){return"@"+J(this.value)},U.prototype=Object.create(L.prototype),U.prototype.tokenType="HASH",U.prototype.toString=function(){return"HASH("+this.value+")"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},U.prototype.toSource=function(){return"id"==this.type?"#"+J(this.value):"#"+function(e){for(var n="",r=((e=""+e).charCodeAt(0),0);r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");o>=128||45==o||95==o||t(o,48,57)||t(o,65,90)||t(o,97,122)?n+=e[r]:n+="\\\\"+o.toString(16)+" "}return n}(this.value)},W.prototype=Object.create(L.prototype),W.prototype.tokenType="STRING",W.prototype.toString=function(){return\'"\'+Q(this.value)+\'"\'},F.prototype=Object.create(L.prototype),F.prototype.tokenType="URL",F.prototype.toString=function(){return"URL("+this.value+")"},F.prototype.toSource=function(){return\'url("\'+Q(this.value)+\'")\'},B.prototype=Object.create(h.prototype),B.prototype.tokenType="NUMBER",B.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},B.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},B.prototype.toSource=function(){return this.repr},V.prototype=Object.create(h.prototype),V.prototype.tokenType="PERCENTAGE",V.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},V.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},V.prototype.toSource=function(){return this.repr+"%"},H.prototype=Object.create(h.prototype),H.prototype.tokenType="DIMENSION",H.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},H.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},H.prototype.toSource=function(){var e=this.repr,n=J(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(13==o&&10==e.charCodeAt(r+1)&&(o=10,r++),13!=o&&12!=o||(o=10),0==o&&(o=65533),t(o,55296,56319)&&t(e.charCodeAt(r+1),56320,57343)){var i=o-55296,s=e.charCodeAt(r+1)-56320;o=Math.pow(2,16)+i*Math.pow(2,10)+s,r++}n.push(o)}return n}(e);for(var o,l=-1,h=[],E=0,L=0,J=0,Q={line:E,column:L},z=function(t){return t>=e.length?-1:e[t]},X=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return z(l+e)},G=function(e){return void 0===e&&(e=1),a(o=z(l+=e))?(E+=1,J=L,L=0):L+=e,!0},K=function(){return l-=1,a(o)?(E-=1,L=J):L-=1,Q.line=E,Q.column=L,!0},Z=function(e){return void 0===e&&(e=o),-1==e},Y=function(){return console.log("Parse error at index "+l+", processing codepoint 0x"+o.toString(16)+"."),!0},ee=function(){if(te(),G(),u(o)){for(;u(X());)G();return new m}if(34==o)return oe();if(35==o){if(s(X())||ce(X(1),X(2))){var e=new U;return ue(X(1),X(2),X(3))&&(e.type="id"),e.value=he(),e}return new P(o)}return 36==o?61==X()?(G(),new M):new P(o):39==o?oe():40==o?new N:41==o?new C:42==o?61==X()?(G(),new $):new P(o):43==o?pe()?(K(),ne()):new P(o):44==o?new b:45==o?pe()?(K(),ne()):45==X(1)&&62==X(2)?(G(2),new y):le()?(K(),re()):new P(o):46==o?pe()?(K(),ne()):new P(o):58==o?new w:59==o?new v:60==o?33==X(1)&&45==X(2)&&45==X(3)?(G(3),new g):new P(o):64==o?ue(X(1),X(2),X(3))?new I(he()):new P(o):91==o?new T:92==o?ae()?(K(),re()):(Y(),new P(o)):93==o?new k:94==o?61==X()?(G(),new O):new P(o):123==o?new _:124==o?61==X()?(G(),new A):124==X()?(G(),new R):new P(o):125==o?new S:126==o?61==X()?(G(),new x):new P(o):n(o)?(K(),ne()):i(o)?(K(),re()):Z()?new j:new P(o)},te=function(){for(;47==X(1)&&42==X(2);)for(G(2);;){if(G(),42==o&&47==X()){G();break}if(Z())return void Y()}},ne=function(){var e,t=fe();return ue(X(1),X(2),X(3))?((e=new H).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=he(),e):37==X()?(G(),(e=new V).value=t.value,e.repr=t.repr,e):((e=new B).value=t.value,e.repr=t.repr,e.type=t.type,e)},re=function(){var e=he();if("url"==e.toLowerCase()&&40==X()){for(G();u(X(1))&&u(X(2));)G();return 34==X()||39==X()?new D(e):!u(X())||34!=X(2)&&39!=X(2)?ie():new D(e)}return 40==X()?(G(),new D(e)):new q(e)},oe=function(e){void 0===e&&(e=o);for(var t="";G();){if(o==e||Z())return new W(t);if(a(o))return Y(),K(),new f;92==o?Z(X())||(a(X())?G():t+=p(se())):t+=p(o)}},ie=function(){for(var e=new F("");u(X());)G();if(Z(X()))return e;for(;G();){if(41==o||Z())return e;if(u(o)){for(;u(X());)G();return 41==X()||Z(X())?(G(),e):(me(),new d)}if(34==o||39==o||40==o||c(o))return Y(),me(),new d;if(92==o){if(!ae())return Y(),me(),new d;e.value+=p(se())}else e.value+=p(o)}},se=function(){if(G(),r(o)){for(var e=[o],t=0;t<5&&r(X());t++)G(),e.push(o);u(X())&&G();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return Z()?65533:o},ce=function(e,t){return 92==e&&!a(t)},ae=function(){return ce(o,X())},ue=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},le=function(){return ue(o,X(1),X(2))},pe=function(){return e=o,t=X(1),r=X(2),43==e||45==e?!!n(t)||!(46!=t||!n(r)):46==e?!!n(t):!!n(e);var e,t,r},he=function(){for(var e="";G();)if(s(o))e+=p(o);else{if(!ae())return K(),e;e+=p(se())}},fe=function(){var e=[],t="integer";for(43!=X()&&45!=X()||(G(),e+=p(o));n(X());)G(),e+=p(o);if(46==X(1)&&n(X(2)))for(G(),e+=p(o),G(),e+=p(o),t="number";n(X());)G(),e+=p(o);var r=X(1),i=X(2),s=X(3);if(69!=r&&101!=r||!n(i)){if((69==r||101==r)&&(43==i||45==i)&&n(s))for(G(),e+=p(o),G(),e+=p(o),G(),e+=p(o),t="number";n(X());)G(),e+=p(o)}else for(G(),e+=p(o),G(),e+=p(o),t="number";n(X());)G(),e+=p(o);return{type:t,value:de(e),repr:e}},de=function(e){return+e},me=function(){for(;G();){if(41==o||Z())return;ae()&&se()}},ge=0;!Z(X());)if(h.push(ee()),++ge>2*e.length)return"I\'m infinite-looping!";return h},e.IdentToken=q,e.FunctionToken=D,e.AtKeywordToken=I,e.HashToken=U,e.StringToken=W,e.BadStringToken=f,e.URLToken=F,e.BadURLToken=d,e.DelimToken=P,e.NumberToken=B,e.PercentageToken=V,e.DimensionToken=H,e.IncludeMatchToken=x,e.DashMatchToken=A,e.PrefixMatchToken=O,e.SuffixMatchToken=M,e.SubstringMatchToken=$,e.ColumnToken=R,e.WhitespaceToken=m,e.CDOToken=g,e.CDCToken=y,e.ColonToken=w,e.SemicolonToken=v,e.CommaToken=b,e.OpenParenToken=N,e.CloseParenToken=C,e.OpenSquareToken=T,e.CloseSquareToken=k,e.OpenCurlyToken=_,e.CloseCurlyToken=S,e.EOFToken=j,e.CSSParserToken=h,e.GroupingToken=E})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t,n){try{const r=e.parseSelector(t);return{selector:t,elements:e.querySelectorAll(r,n)}}catch(e){return{selector:t,elements:[]}}},t.generateSelector=function(e,t){e._evaluator.begin();try{t=t.closest("button,select,input,[role=button],[role=checkbox],[role=radio]")||t;const n=function(e,t){if(t.ownerDocument.documentElement===t)return[{engine:"css",selector:"html",score:1}];const n=(n,o)=>{const i=n===t;let p=o?function(e,t,n){if("SELECT"===t.nodeName)return[];const o=(0,r.elementText)(e._evaluator,t).full.trim().replace(/\\s+/g," ").substring(0,80);if(!o)return[];const i=[];let s=o;(o.includes(\'"\')||o.includes(">>")||"/"===o[0])&&(s=`/.*${function(e){return e.replace(/[.*+?^>${}()|[\\]\\\\]/g,"\\\\$&")}(o)}.*/`);if(i.push({engine:"text",selector:s,score:10}),n&&s===o){let e=t.nodeName.toLocaleLowerCase();t.hasAttribute("role")&&(e+=`[role=${l(t.getAttribute("role"))}]`),i.push({engine:"css",selector:`${e}:has-text("${o}")`,score:30})}return i}(e,n,n===t).map(e=>[e]):[];n!==t&&(p=s(p));const d=function(e,t){const n=[];for(const e of["data-testid","data-test-id","data-test"])t.hasAttribute(e)&&n.push({engine:"css",selector:`[${e}=${l(t.getAttribute(e))}]`,score:1});if("INPUT"===t.nodeName){const e=t;e.placeholder&&n.push({engine:"css",selector:`[placeholder=${l(e.placeholder)}]`,score:10})}t.hasAttribute("aria-label")&&n.push({engine:"css",selector:`[aria-label=${l(t.getAttribute("aria-label"))}]`,score:10});t.getAttribute("alt")&&["APPLET","AREA","IMG","INPUT"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[alt=${l(t.getAttribute("alt"))}]`,score:10});t.hasAttribute("role")&&n.push({engine:"css",selector:`${t.nodeName.toLocaleLowerCase()}[role=${l(t.getAttribute("role"))}]`,score:50});t.getAttribute("name")&&["BUTTON","FORM","FIELDSET","IFRAME","INPUT","KEYGEN","OBJECT","OUTPUT","SELECT","TEXTAREA","MAP","META","PARAM"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[name=${l(t.getAttribute("name"))}]`,score:50});["INPUT","TEXTAREA"].includes(t.nodeName)&&"hidden"!==t.getAttribute("type")&&t.getAttribute("type")&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[type=${l(t.getAttribute("type"))}]`,score:50});["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&n.push({engine:"css",selector:t.nodeName.toLowerCase(),score:50});const r=t.getAttribute("id");r&&!function(e){let t,n=0;for(let r=0;r<e.length;++r){const o=e[r];let i;"-"!==o&&"_"!==o&&(i=o>="a"&&o<="z"?"lower":o>="A"&&o<="Z"?"upper":o>="0"&&o<="9"?"digit":"other","lower"!==i||"upper"!==t?(t&&t!==i&&++n,t=i):t=i)}return n>=e.length/4}(r)&&n.push({engine:"css",selector:a(r),score:100});return n.push({engine:"css",selector:t.nodeName.toLocaleLowerCase(),score:200}),n}(0,n).map(e=>[e]);let m=f(e,t.ownerDocument,n,[...p,...d],i);p=s(p);const g=t=>{const r=o&&!t.length,s=[...t,...d].filter(e=>!m||h(e)<h(m));let a=s[0];if(a)for(let t=c(n);t;t=c(t)){const o=u(t,r);if(!o)continue;if(m&&h([...o,...a])>=h(m))continue;if(a=f(e,t,n,s,i),!a)return;const c=[...o,...a];(!m||h(c)<h(m))&&(m=c)}};return g(p),n===t&&p.length&&g([]),m},u=(e,t)=>{const r=t?o:i;let s=r.get(e);return void 0===s&&(s=n(e,t),r.set(e,s)),s};return u(t,!0)}(e,t),d=p(n||[u(e,t)]),m=e.parseSelector(d);return{selector:d,elements:e.querySelectorAll(m,t.ownerDocument)}}finally{o.clear(),i.clear(),e._evaluator.end()}};var r=n(1);const o=new Map,i=new Map;function s(e){return e.filter(e=>"/"!==e[0].selector[0])}function c(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:null}function a(e){return/^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(e)?"#"+e:`[id="${e}"]`}function u(e,t){const n=t.ownerDocument,r=[];function o(n){const o=r.slice();n&&o.unshift(n);const i=o.join(" "),s=e.parseSelector(i);return e.querySelector(s,t.ownerDocument,!1)===t?i:void 0}for(let e=t;e&&e!==n;e=c(e)){const t=e.nodeName.toLowerCase();let n="";if(e.id){const t=a(e.id),r=o(t);if(r)return{engine:"css",selector:r,score:1e7};n=t}const i=e.parentNode,s=[...e.classList];for(let e=0;e<s.length;++e){const t="."+s.slice(0,e+1).join("."),r=o(t);if(r)return{engine:"css",selector:r,score:1e7};if(!n&&i){1===i.querySelectorAll(t).length&&(n=t)}}if(i){const r=[...i.children],s=0===r.filter(e=>e.nodeName.toLowerCase()===t).indexOf(e)?t:`${t}:nth-child(${1+r.indexOf(e)})`,c=o(s);if(c)return{engine:"css",selector:c,score:1e7};n||(n=s)}else n||(n=t);r.unshift(n)}return{engine:"css",selector:o(),score:1e7}}function l(e){return`"${e.replace(/"/g,\'\\\\"\').replace(/\\n/g,"\\\\n")}"`}function p(e){const t=[];let n="";for(const{engine:r,selector:o}of e)t.length&&("css"!==n||"css"!==r||o.startsWith(":nth-match("))&&t.push(">>"),n=r,"css"===r?t.push(o):t.push(`${r}=${o}`);return t.join(" ")}function h(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].score*(e.length-n);return t}function f(e,t,n,r,o){const i=r.map(e=>({tokens:e,score:h(e)}));i.sort((e,t)=>e.score-t.score);let s=null;for(const{tokens:r}of i){const i=e.parseSelector(p(r)),c=e.querySelectorAll(i,t),a=c.indexOf(n);if(0===a)return r;if(!o||s||-1===a||c.length>5)continue;const u=r.map(e=>"text"!==e.engine?e:e.selector.startsWith("/")&&e.selector.endsWith("/")?{engine:"css",selector:`:text-matches("${e.selector.substring(1,e.selector.length-1)}")`,score:e.score}:{engine:"css",selector:`:text("${e.selector}")`,score:e.score});s=[{engine:"css",selector:`:nth-match(${p(u)}, ${a+1})`,score:h(u)+1e3}]}return s}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkComponentAttribute=function(e,t){for(const n of t.jsonPath)null!=e&&(e=e[n]);const n="string"!=typeof e||t.caseSensetive?e:e.toUpperCase(),r="string"!=typeof t.value||t.caseSensetive?t.value:t.value.toUpperCase();return"<truthy>"===t.op?!!n:"="===t.op?n===r:"string"==typeof n&&"string"==typeof r&&("*="===t.op?n.includes(r):"^="===t.op?n.startsWith(r):"$="===t.op?n.endsWith(r):"|="===t.op?n===r||n.startsWith(r+"-"):"~="===t.op&&n.split(" ").includes(r))},t.parseComponentSelector=function(e){let t=0,n=0===e.length;const r=()=>e[t]||"",o=()=>{const o=r();return++t,n=t>=e.length,o},i=o=>{if(n)throw new Error(`Unexpected end of selector while parsing selector \\`${e}\\``);throw new Error(`Error while parsing selector \\`${e}\\` - unexpected symbol "${r()}" at position ${t}`+(o?" during "+o:""))};function s(){for(;!n&&/\\s/.test(r());)o()}function c(){let e="";for(s();!n&&/[-$0-9A-Z_]/i.test(r());)e+=o();return e}function a(e){let t=o();for(t!==e&&i("parsing quoted string");!n&&r()!==e;)"\\\\"===r()&&o(),t+=o();return r()!==e&&i("parsing quoted string"),t+=o(),t}function u(){let e="";return s(),e="\'"===r()||\'"\'===r()?a(r()).slice(1,-1):c(),e||i("parsing property path"),e}function l(){o();const t=[];for(t.push(u()),s();"."===r();)o(),t.push(u()),s();if("]"===r())return o(),{jsonPath:t,op:"<truthy>",value:null,caseSensetive:!1};const c=function(){s();let e="";return n||(e+=o()),n||"="===e||(e+=o()),["=","*=","^=","$=","|=","~="].includes(e)||i("parsing operator"),e}();let l=void 0,p=!0;if(s(),"\'"===r()||\'"\'===r())l=a(r()).slice(1,-1),s(),"i"===r()||"I"===r()?(p=!1,o()):"s"!==r()&&"S"!==r()||(p=!0,o());else{for(l="";!n&&!/\\s/.test(r())&&"]"!==r();)l+=o();"true"===l?l=!0:"false"===l?l=!1:(l=+l,isNaN(l)&&i("parsing attribute value"))}if(s(),"]"!==r()&&i("parsing attribute value"),o(),"="!==c&&"string"!=typeof l)throw new Error(`Error while parsing selector \\`${e}\\` - cannot use ${c} in attribute with non-string matching value - ${l}`);return{jsonPath:t,op:c,value:l,caseSensetive:p}}const p={name:"",attributes:[]};p.name=c(),s();for(;"["===r();)p.attributes.push(l()),s();n||i(void 0);if(!p.name&&!p.attributes.length)throw new Error(`Error while parsing selector \\`${e}\\` - selector cannot be empty`);return p}},,,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InjectedScript=void 0;var r=n(10),o=n(11),i=n(12),s=n(0),c=n(1),a=n(4);class u{constructor(e,t,n){this._engines=void 0,this._evaluator=void 0,this._stableRafCount=void 0,this._replaceRafWithTimeout=void 0,this._evaluator=new c.SelectorEvaluatorImpl(new Map),this._engines=new Map,this._engines.set("xpath",r.XPathEngine),this._engines.set("xpath:light",r.XPathEngine),this._engines.set("_react",o.ReactEngine),this._engines.set("_vue",i.VueEngine),this._engines.set("text",this._createTextEngine(!0)),this._engines.set("text:light",this._createTextEngine(!1)),this._engines.set("id",this._createAttributeEngine("id",!0)),this._engines.set("id:light",this._createAttributeEngine("id",!1)),this._engines.set("data-testid",this._createAttributeEngine("data-testid",!0)),this._engines.set("data-testid:light",this._createAttributeEngine("data-testid",!1)),this._engines.set("data-test-id",this._createAttributeEngine("data-test-id",!0)),this._engines.set("data-test-id:light",this._createAttributeEngine("data-test-id",!1)),this._engines.set("data-test",this._createAttributeEngine("data-test",!0)),this._engines.set("data-test:light",this._createAttributeEngine("data-test",!1)),this._engines.set("css",this._createCSSEngine()),this._engines.set("nth",{queryAll:()=>[]}),this._engines.set("visible",{queryAll:()=>[]});for(const{name:e,engine:t}of n)this._engines.set(e,t);this._stableRafCount=e,this._replaceRafWithTimeout=t}parseSelector(e){const t=(0,s.parseSelector)(e);for(const n of t.parts)if(!this._engines.has(n.name))throw this.createStacklessError(`Unknown engine "${n.name}" while parsing selector ${e}`);return t}querySelector(e,t,n){if(!t.querySelector)throw this.createStacklessError("Node is not queryable.");this._evaluator.begin();try{var r,o;const i=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map);if(n&&i.length>1)throw this.strictModeViolationError(e,i.map(e=>e.element));return(null===(r=i[0])||void 0===r?void 0:r.capture)||(null===(o=i[0])||void 0===o?void 0:o.element)}finally{this._evaluator.end()}}_querySelectorRecursively(e,t,n,r){if(n===t.parts.length)return e;const o=t.parts[n];if("nth"===o.name){let i=[];if("0"===o.body)i=e.slice(0,1);else if("-1"===o.body)e.length&&(i=e.slice(e.length-1));else{if("number"==typeof t.capture)throw this.createStacklessError("Can\'t query n-th element in a request with the capture.");const n=+o.body,r=new Set;for(const t of e)r.add(t.element),n+1===r.size&&(i=[t])}return this._querySelectorRecursively(i,t,n+1,r)}if("visible"===o.name){const t=Boolean(o.body);return e.filter(e=>t===(0,c.isVisible)(e.element))}const i=[];for(const o of e){const e=n-1===t.capture?o.element:o.capture;let s=r.get(o.element);s||(s=[],r.set(o.element,s));let c=s[n];c||(c=this._queryEngineAll(t.parts[n],o.element),s[n]=c);for(const t of c){if(!("nodeName"in t))throw this.createStacklessError("Expected a Node but got "+Object.prototype.toString.call(t));i.push({element:t,capture:e})}}return this._querySelectorRecursively(i,t,n+1,r)}querySelectorAll(e,t){if(!t.querySelectorAll)throw this.createStacklessError("Node is not queryable.");this._evaluator.begin();try{const n=this._querySelectorRecursively([{element:t,capture:void 0}],e,0,new Map),r=new Set;for(const e of n)r.add(e.capture||e.element);return[...r]}finally{this._evaluator.end()}}_queryEngineAll(e,t){return this._engines.get(e.name).queryAll(t,e.body)}_createAttributeEngine(e,t){return{queryAll:(n,r)=>this._evaluator.query({scope:n,pierceShadow:t},(t=>[{simples:[{selector:{css:`[${e}=${JSON.stringify(t)}]`,functions:[]},combinator:""}]}])(r))}}_createCSSEngine(){const e=this._evaluator;return{queryAll:(t,n)=>e.query({scope:t,pierceShadow:!0},n)}}_createTextEngine(e){const t=(t,n)=>{const{matcher:r,kind:o}=function(e){if("/"===e[0]&&e.lastIndexOf("/")>0){const t=e.lastIndexOf("/");return{matcher:(0,c.createRegexTextMatcher)(e.substring(1,t),e.substring(t+1)),kind:"regex"}}let t=!1;e.length>1&&\'"\'===e[0]&&\'"\'===e[e.length-1]&&(e=d(e.substring(1,e.length-1)),t=!0);e.length>1&&"\'"===e[0]&&"\'"===e[e.length-1]&&(e=d(e.substring(1,e.length-1)),t=!0);return{matcher:t?(0,c.createStrictTextMatcher)(e):(0,c.createLaxTextMatcher)(e),kind:t?"strict":"lax"}}(n),i=[];let s=null;const a=e=>{if("lax"===o&&s&&s.contains(e))return!1;const t=(0,c.elementMatchesText)(this._evaluator,e,r);"none"===t&&(s=e),("self"===t||"selfAndChildren"===t&&"strict"===o)&&i.push(e)};t.nodeType===Node.ELEMENT_NODE&&a(t);const u=this._evaluator._queryCSS({scope:t,pierceShadow:e},"*");for(const e of u)a(e);return i};return{queryAll:(e,n)=>t(e,n)}}extend(t,n){return new(e.eval(`\\n    (() => {\\n      ${t}\\n      return pwExport;\\n    })()`))(this,n)}isVisible(e){return(0,c.isVisible)(e)}pollRaf(e){return this._runAbortableTask(t=>{let n,r;const o=new Promise((e,t)=>{n=e,r=t}),i=()=>{if(!t.aborted)try{const r=Symbol("continuePolling"),o=e(t,r);o!==r?n(o):requestAnimationFrame(i)}catch(e){t.log("  "+e.message),r(e)}};return i(),o})}pollInterval(e,t){return this._runAbortableTask(n=>{let r,o;const i=new Promise((e,t)=>{r=e,o=t}),s=()=>{if(!n.aborted)try{const o=Symbol("continuePolling"),i=t(n,o);i!==o?r(i):setTimeout(s,e)}catch(e){o(e)}};return s(),i})}_runAbortableTask(e){let t,n=[],r=!1;const o=()=>{t&&(t(n),n=[],t=void 0)};let i="";const s={aborted:!1,log:e=>{i=e,n.push(e),o()},logRepeating:e=>{e!==i&&s.log(e)}};return{takeNextLogs:()=>new Promise(e=>{t=e,(n.length||r)&&o()}),run:()=>{const t=e(s);return t.finally(()=>{r=!0,o()}),t},cancel:()=>{s.aborted=!0},takeLastLogs:()=>n}}getElementBorderWidth(e){if(e.nodeType!==Node.ELEMENT_NODE||!e.ownerDocument||!e.ownerDocument.defaultView)return{left:0,top:0};const t=e.ownerDocument.defaultView.getComputedStyle(e);return{left:parseInt(t.borderLeftWidth||"",10),top:parseInt(t.borderTopWidth||"",10)}}retarget(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;return n?(n.matches("input, textarea, select")||(n=n.closest("button, [role=button], [role=checkbox], [role=radio]")||n),"follow-label"===t&&(n.matches("input, textarea, button, select, [role=button], [role=checkbox], [role=radio]")||n.isContentEditable||(n=n.closest("label")||n),"LABEL"===n.nodeName&&(n=n.control||n)),n):null}waitForElementStatesAndPerformAction(e,t,n,r){let o,i=0,s=0,c=0;const a=(a,u)=>{if(n)return a.log("    forcing action"),r(e,a,u);for(const n of t){if("stable"!==n){const t=this.checkElementState(e,n);if("boolean"!=typeof t)return t;if(!t)return a.logRepeating(`    element is not ${n} - waiting...`),u;continue}const t=this.retarget(e,"no-follow-label");if(!t)return"error:notconnected";if(1==++i)return u;const r=performance.now();if(this._stableRafCount>1&&r-c<15)return u;c=r;const l=t.getBoundingClientRect(),p={x:l.top,y:l.left,width:l.width,height:l.height};o&&p.x===o.x&&p.y===o.y&&p.width===o.width&&p.height===o.height?++s:s=0;const h=s>=this._stableRafCount,f=h||!o;if(o=p,f||a.logRepeating("    element is not stable - waiting..."),!h)return u}return r(e,a,u)};return this._replaceRafWithTimeout?this.pollInterval(16,a):this.pollRaf(a)}checkElementState(e,t){const n=this.retarget(e,["stable","visible","hidden"].includes(t)?"no-follow-label":"follow-label");if(!n||!n.isConnected)return"hidden"===t||"error:notconnected";if("visible"===t)return this.isVisible(n);if("hidden"===t)return!this.isVisible(n);const r=["BUTTON","INPUT","SELECT","TEXTAREA"].includes(n.nodeName)&&n.hasAttribute("disabled");if("disabled"===t)return r;if("enabled"===t)return!r;const o=!(["INPUT","TEXTAREA","SELECT"].includes(n.nodeName)&&n.hasAttribute("readonly"));if("editable"===t)return!r&&o;if("checked"===t)return["checkbox","radio"].includes(n.getAttribute("role")||"")?"true"===n.getAttribute("aria-checked"):"INPUT"!==n.nodeName?"error:notcheckbox":["radio","checkbox"].includes(n.type.toLowerCase())?n.checked:"error:notcheckbox";throw this.createStacklessError(`Unexpected element state "${t}"`)}selectOptions(e,t,n,r){const o=this.retarget(t,"follow-label");if(!o)return"error:notconnected";if("select"!==o.nodeName.toLowerCase())return"error:notselect";const i=o,s=[...i.options],c=[];let a=e.slice();for(let e=0;e<s.length;e++){const t=s[e],n=n=>{if(n instanceof Node)return t===n;let r=!0;return void 0!==n.value&&(r=r&&n.value===t.value),void 0!==n.label&&(r=r&&n.label===t.label),void 0!==n.index&&(r=r&&n.index===e),r};if(a.some(n)){if(c.push(t),!i.multiple){a=[];break}a=a.filter(e=>!n(e))}}return a.length?(n.logRepeating("    did not find some options - waiting... "),r):(i.value=void 0,c.forEach(e=>e.selected=!0),n.log("    selected specified option(s)"),i.dispatchEvent(new Event("input",{bubbles:!0})),i.dispatchEvent(new Event("change",{bubbles:!0})),c.map(e=>e.value))}fill(e,t,n){const r=this.retarget(t,"follow-label");if(!r)return"error:notconnected";if("input"===r.nodeName.toLowerCase()){const t=r,o=t.type.toLowerCase(),i=new Set(["date","time","datetime","datetime-local","month","week"]);if(!new Set(["","email","number","password","search","tel","text","url"]).has(o)&&!i.has(o))return n.log(`    input of type "${o}" cannot be filled`),"error:notfillableinputtype";if("number"===o&&(e=e.trim(),isNaN(Number(e))))return"error:notfillablenumberinput";if(i.has(o))return e=e.trim(),t.focus(),t.value=e,t.value!==e?"error:notvaliddate":(r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0})),"done")}else if("textarea"===r.nodeName.toLowerCase());else if(!r.isContentEditable)return"error:notfillableelement";return this.selectText(r),"needsinput"}selectText(e){const t=this.retarget(e,"follow-label");if(!t)return"error:notconnected";if("input"===t.nodeName.toLowerCase()){const e=t;return e.select(),e.focus(),"done"}if("textarea"===t.nodeName.toLowerCase()){const e=t;return e.selectionStart=0,e.selectionEnd=e.value.length,e.focus(),"done"}const n=t.ownerDocument.createRange();n.selectNodeContents(t);const r=t.ownerDocument.defaultView.getSelection();return r&&(r.removeAllRanges(),r.addRange(n)),t.focus(),"done"}focusNode(e,t){if(!e.isConnected)return"error:notconnected";if(e.nodeType!==Node.ELEMENT_NODE)return"error:notelement";const n=e.getRootNode().activeElement===e&&e.ownerDocument&&e.ownerDocument.hasFocus();if(e.focus(),t&&!n&&"input"===e.nodeName.toLowerCase())try{e.setSelectionRange(0,0)}catch(e){}return"done"}setInputFiles(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return"Node is not of type HTMLElement";const n=e;if("INPUT"!==n.nodeName)return"Not an <input> element";const r=n;if("file"!==(r.getAttribute("type")||"").toLowerCase())return"Not an input[type=file] element";const o=t.map(e=>{const t=Uint8Array.from(atob(e.buffer),e=>e.charCodeAt(0));return new File([t],e.name,{type:e.mimeType})}),i=new DataTransfer;for(const e of o)i.items.add(e);r.files=i.files,r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0}))}checkHitTargetAt(e,t){let n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;if(!n||!n.isConnected)return"error:notconnected";n=n.closest("button, [role=button]")||n;let r=this.deepElementFromPoint(document,t.x,t.y);const o=[];for(;r&&r!==n;)o.push(r),r=(0,c.parentElementOrShadowHost)(r);if(r===n)return"done";const i=this.previewNode(o[0]);let s;for(;n;){const e=o.indexOf(n);if(-1!==e){e>1&&(s=this.previewNode(o[e-1]));break}n=(0,c.parentElementOrShadowHost)(n)}return s?{hitTargetDescription:`${i} from ${s} subtree`}:{hitTargetDescription:i}}dispatchEvent(e,t,n){let r;switch(n={bubbles:!0,cancelable:!0,composed:!0,...n},f.get(t)){case"mouse":r=new MouseEvent(t,n);break;case"keyboard":r=new KeyboardEvent(t,n);break;case"touch":r=new TouchEvent(t,n);break;case"pointer":r=new PointerEvent(t,n);break;case"focus":r=new FocusEvent(t,n);break;case"drag":r=new DragEvent(t,n);break;default:r=new Event(t,n)}e.dispatchEvent(r)}deepElementFromPoint(e,t,n){let r,o=e;for(;o;){const e=o.elementsFromPoint(t,n)[0];if(!e||r===e)break;r=e,o=r.shadowRoot}return r}previewNode(e){if(e.nodeType===Node.TEXT_NODE)return h("#text="+(e.nodeValue||""));if(e.nodeType!==Node.ELEMENT_NODE)return h(`<${e.nodeName.toLowerCase()} />`);const t=e,n=[];for(let e=0;e<t.attributes.length;e++){const{name:r,value:o}=t.attributes[e];"style"!==r&&(!o&&p.has(r)?n.push(" "+r):n.push(` ${r}="${o}"`))}n.sort((e,t)=>e.length-t.length);let r=n.join("");if(r.length>50&&(r=r.substring(0,49)+"\u2026"),l.has(t.nodeName))return h(`<${t.nodeName.toLowerCase()}${r}/>`);const o=t.childNodes;let i=!1;if(o.length<=5){i=!0;for(let e=0;e<o.length;e++)i=i&&o[e].nodeType===Node.TEXT_NODE}let s=i?t.textContent||"":o.length?"\u2026":"";return s.length>50&&(s=s.substring(0,49)+"\u2026"),h(`<${t.nodeName.toLowerCase()}${r}>${s}</${t.nodeName.toLowerCase()}>`)}strictModeViolationError(e,t){const n=t.slice(0,10).map(e=>({preview:this.previewNode(e),selector:(0,a.generateSelector)(this,e).selector})),r=n.map((e,t)=>`\\n    ${t+1}) ${e.preview} aka playwright.$("${e.selector}")`);return n.length<t.length&&r.push("\\n    ..."),this.createStacklessError(`strict mode violation: "${e.selector}" resolved to ${t.length} elements:${r.join("")}\\n`)}createStacklessError(e){const t=new Error(e);return delete t.stack,t}}t.InjectedScript=u;const l=new Set(["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR"]),p=new Set(["checked","selected","disabled","readonly","multiple"]);function h(e){return e.replace(/\\n/g,"\u21B5").replace(/\\t/g,"\u21C6")}const f=new Map([["auxclick","mouse"],["click","mouse"],["dblclick","mouse"],["mousedown","mouse"],["mouseeenter","mouse"],["mouseleave","mouse"],["mousemove","mouse"],["mouseout","mouse"],["mouseover","mouse"],["mouseup","mouse"],["mouseleave","mouse"],["mousewheel","mouse"],["keydown","keyboard"],["keyup","keyboard"],["keypress","keyboard"],["textInput","keyboard"],["touchstart","touch"],["touchmove","touch"],["touchend","touch"],["touchcancel","touch"],["pointerover","pointer"],["pointerout","pointer"],["pointerenter","pointer"],["pointerleave","pointer"],["pointerdown","pointer"],["pointerup","pointer"],["pointermove","pointer"],["pointercancel","pointer"],["gotpointercapture","pointer"],["lostpointercapture","pointer"],["focus","focus"],["blur","focus"],["drag","drag"],["dragstart","drag"],["dragend","drag"],["dragover","drag"],["dragenter","drag"],["dragleave","drag"],["dragexit","drag"],["drop","drag"]]);function d(e){if(!e.includes("\\\\"))return e;const t=[];let n=0;for(;n<e.length;)"\\\\"===e[n]&&n+1<e.length&&n++,t.push(e[n++]);return t.join("")}var m=u;t.default=m}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathEngine=void 0;const r={queryAll(e,t){t.startsWith("/")&&(t="."+t);const n=[],r=e instanceof Document?e:e.ownerDocument;if(!r)return n;const o=r.evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE);for(let e=o.iterateNext();e;e=o.iterateNext())e.nodeType===Node.ELEMENT_NODE&&n.push(e);return n}};t.XPathEngine=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactEngine=void 0;var r=n(6);function o(e){if("function"==typeof e.type)return e.type.displayName||e.type.name||"Anonymous";if("string"==typeof e.type)return e.type;if(e._currentElement){const t=e._currentElement.type;if("string"==typeof t)return t;if("function"==typeof t)return t.displayName||t.name||"Anonymous"}return""}function i(e){if(e.child){const t=[];for(let n=e.child;n;n=n.sibling)t.push(n);return t}if(!e._currentElement)return[];const t=e=>{var t;const n=null===(t=e._currentElement)||void 0===t?void 0:t.type;return"function"==typeof n||"string"==typeof n};if(e._renderedComponent){const n=e._renderedComponent;return t(n)?[n]:[]}return e._renderedChildren?[...Object.values(e._renderedChildren)].filter(t):[]}function s(e){var t;const n=e.memoizedProps||(null===(t=e._currentElement)||void 0===t?void 0:t.props);if(!n||"string"==typeof n)return n;const r={...n};return delete r.children,r}function c(e){var t;const n={name:o(e),children:i(e).map(c),rootElements:[],props:s(e)},r=e.stateNode||e._hostNode||(null===(t=e._renderedComponent)||void 0===t?void 0:t._hostNode);if(r instanceof Element)n.rootElements.push(r);else for(const e of n.children)n.rootElements.push(...e.rootElements);return n}const a={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=[],t=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT);for(;t.nextNode();){const n=t.currentNode;n.hasOwnProperty("_reactRootContainer")&&e.push(n._reactRootContainer._internalRoot.current)}for(const t of document.querySelectorAll("[data-reactroot]"))for(const n of Object.keys(t))(n.startsWith("__reactInternalInstance")||n.startsWith("__reactFiber"))&&e.push(t[n]);return e}().map(e=>c(e)).map(t=>function e(t,n,r=[]){n(t)&&r.push(t);for(const o of t.children)e(o,n,r);return r}(t,t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some(t=>!e.contains(t)))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0})).flat(),s=new Set;for(const e of i)for(const t of e.rootElements)s.add(t);return[...s]}};t.ReactEngine=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VueEngine=void 0;var r=n(6);function o(e,t){const n=e.replace(/^[a-zA-Z]:/,"").replace(/\\\\/g,"/");let r=n.substring(n.lastIndexOf("/")+1);return t&&r.endsWith(t)&&(r=r.substring(0,r.length-t.length)),r}function i(e,t){return t?t.toUpperCase():""}const s=/(?:^|[-_/])(\\w)/g,c=e=>e&&e.replace(s,i);function a(e){function t(e,t){return e.type.__playwright_guessedName=t,t}function n(e){const n=function(e){const t=e.name||e._componentTag||e.__playwright_guessedName;if(t)return t;const n=e.__file;return n?c(o(n,".vue")):void 0}(e.type||{});if(n)return n;if(e.root===e)return"Root";for(const n in null===(r=e.parent)||void 0===r||null===(i=r.type)||void 0===i?void 0:i.components){var r,i,s;if((null===(s=e.parent)||void 0===s?void 0:s.type.components[n])===e.type)return t(e,n)}for(const n in null===(a=e.appContext)||void 0===a?void 0:a.components){var a;if(e.appContext.components[n]===e.type)return t(e,n)}return"Anonymous Component"}function r(e){const t=[];return e.component&&t.push(e.component),e.suspense&&t.push(...r(e.suspense.activeBranch)),Array.isArray(e.children)&&e.children.forEach(e=>{e.component?t.push(e.component):t.push(...r(e))}),t.filter(e=>{var t;return!(function(e){return e._isBeingDestroyed||e.isUnmounted}(e)||null!==(t=e.type.devtools)&&void 0!==t&&t.hide)})}function i(e){return function(e){return"Symbol(Fragment)"===e.subTree.type.toString()}(e)?function(e){if(!e.children)return[];const t=[];for(let n=0,r=e.children.length;n<r;n++){const r=e.children[n];r.component?t.push(...i(r.component)):r.el&&t.push(r.el)}return t}(e.subTree):[e.subTree.el]}return function e(t){return{name:n(t),children:r(t.subTree).map(e),rootElements:i(t),props:t.props}}(e)}function u(e){function t(e){const t=function(e){const t=e.displayName||e.name||e._componentTag;if(t)return t;const n=e.__file;return n?c(o(n,".vue")):void 0}(e.$options||e.fnOptions||{});return t||(e.$root===e?"Root":"Anonymous Component")}function n(e){return e.$children?e.$children:Array.isArray(e.subTree.children)?e.subTree.children.filter(e=>!!e.component).map(e=>e.component):[]}return function e(r){return{name:t(r),children:n(r).map(e),rootElements:[r.$el],props:r._props}}(e)}const l={queryAll(e,t){const{name:n,attributes:o}=(0,r.parseComponentSelector)(t),i=function(){const e=[];for(const t of document.querySelectorAll("[data-v-app]"))t._vnode&&t._vnode.component&&e.push({root:t._vnode.component,version:3});const t=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),n=new Set;for(;t.nextNode();){const e=t.currentNode;e&&e.__vue__&&n.add(e.__vue__.$root)}for(const t of n)e.push({version:2,root:t});return e}().map(e=>3===e.version?a(e.root):u(e.root)).map(t=>function e(t,n,r=[]){n(t)&&r.push(t);for(const o of t.children)e(o,n,r);return r}(t,t=>{if(n&&t.name!==n)return!1;if(t.rootElements.some(t=>!e.contains(t)))return!1;for(const e of o)if(!(0,r.checkComponentAttribute)(t.props,e))return!1;return!0})).flat(),s=new Set;for(const e of i)for(const t of e.rootElements)s.add(t);return[...s]}};t.VueEngine=l}]).default;';Zc.source=kR});var Qy=w(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.source=void 0;var PR='var pwExport=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}({5:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},7:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(8);t.default=class{evaluate(t,r,o,i,...u){const f=u.slice(0,i),a=u.slice(i),c=f.map(e=>(0,n.parseEvaluationResultValue)(e,a));let l=e.eval(o);return!0===t?l=l(...c):!1===t?l=l:"function"==typeof l&&(l=l(...c)),r?this._promiseAwareJsonValueNoThrow(l):l}jsonValue(e,t){if(!Object.is(t,void 0))return(0,n.serializeAsCallArgument)(t,e=>({fallThrough:e}))}_promiseAwareJsonValueNoThrow(e){const t=e=>{try{return this.jsonValue(!0,e)}catch(e){return}};return e&&"object"==typeof e&&"function"==typeof e.then?(async()=>{const r=await e;return t(r)})():t(e)}}}).call(this,r(5))},8:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.parseEvaluationResultValue=function e(t,r=[]){if(Object.is(t,void 0))return;if("object"==typeof t&&t){if("v"in t){if("undefined"===t.v)return;return"null"===t.v?null:"NaN"===t.v?NaN:"Infinity"===t.v?1/0:"-Infinity"===t.v?-1/0:"-0"===t.v?-0:void 0}if("d"in t)return new Date(t.d);if("r"in t)return new RegExp(t.r.p,t.r.f);if("a"in t)return t.a.map(t=>e(t,r));if("o"in t){const n={};for(const{k:o,v:i}of t.o)n[o]=e(i,r);return n}if("h"in t)return r[t.h]}return t},t.serializeAsCallArgument=function(t,r){return function t(r,n,o){const i=n(r);if(!("fallThrough"in i))return i;r=i.fallThrough;if(o.has(r))throw new Error("Argument is a circular structure");if("symbol"==typeof r)return{v:"undefined"};if(Object.is(r,void 0))return{v:"undefined"};if(Object.is(r,null))return{v:"null"};if(Object.is(r,NaN))return{v:"NaN"};if(Object.is(r,1/0))return{v:"Infinity"};if(Object.is(r,-1/0))return{v:"-Infinity"};if(Object.is(r,-0))return{v:"-0"};if("boolean"==typeof r)return r;if("number"==typeof r)return r;if("string"==typeof r)return r;if(u=r,u instanceof Error||u&&u.__proto__&&"Error"===u.__proto__.name){const t=r;return"captureStackTrace"in e.Error?t.stack||"":`${t.name}: ${t.message}\\n${t.stack}`}var u;if(function(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}(r))return{d:r.toJSON()};if(function(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)}(r))return{r:{p:r.source,f:r.flags}};if(Array.isArray(r)){const e=[];o.add(r);for(let i=0;i<r.length;++i)e.push(t(r[i],n,o));return o.delete(r),{a:e}}if("object"==typeof r){const e=[];o.add(r);for(const i of Object.keys(r)){let u;try{u=r[i]}catch(e){continue}"toJSON"===i&&"function"==typeof u?e.push({k:i,v:{o:[]}}):e.push({k:i,v:t(u,n,o)})}return o.delete(r),{o:e}}}(t,r,new Set)}}).call(this,r(5))}}).default;';el.source=PR});var Qo=w(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.parseEvaluationResultValue=Gp;tl.serializeAsCallArgument=MR;function OR(r){return r instanceof RegExp||Object.prototype.toString.call(r)==="[object RegExp]"}function TR(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function AR(r){return r instanceof Error||r&&r.__proto__&&r.__proto__.name==="Error"}function Gp(r,e=[]){if(!Object.is(r,void 0)){if(typeof r=="object"&&r){if("v"in r)return r.v==="undefined"?void 0:r.v==="null"?null:r.v==="NaN"?NaN:r.v==="Infinity"?1/0:r.v==="-Infinity"?-1/0:r.v==="-0"?-0:void 0;if("d"in r)return new Date(r.d);if("r"in r)return new RegExp(r.r.p,r.r.f);if("a"in r)return r.a.map(t=>Gp(t,e));if("o"in r){let t={};for(let{k:i,v:n}of r.o)t[i]=Gp(n,e);return t}if("h"in r)return e[r.h]}return r}}function MR(r,e){return Kp(r,e,new Set)}function Kp(r,e,t){let i=e(r);if("fallThrough"in i)r=i.fallThrough;else return i;if(t.has(r))throw new Error("Argument is a circular structure");if(typeof r=="symbol")return{v:"undefined"};if(Object.is(r,void 0))return{v:"undefined"};if(Object.is(r,null))return{v:"null"};if(Object.is(r,NaN))return{v:"NaN"};if(Object.is(r,1/0))return{v:"Infinity"};if(Object.is(r,-1/0))return{v:"-Infinity"};if(Object.is(r,-0))return{v:"-0"};if(typeof r=="boolean"||typeof r=="number"||typeof r=="string")return r;if(AR(r)){let n=r;return"captureStackTrace"in global.Error?n.stack||"":`${n.name}: ${n.message}
${n.stack}`}if(TR(r))return{d:r.toJSON()};if(OR(r))return{r:{p:r.source,f:r.flags}};if(Array.isArray(r)){let n=[];t.add(r);for(let s=0;s<r.length;++s)n.push(Kp(r[s],e,t));return t.delete(r),{a:n}}if(typeof r=="object"){let n=[];t.add(r);for(let s of Object.keys(r)){let o;try{o=r[s]}catch(c){continue}s==="toJSON"&&typeof o=="function"?n.push({k:s,v:{o:[]}}):n.push({k:s,v:Kp(o,e,t)})}return t.delete(r),{o:n}}}});var ci=w(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.evaluate=Jp;Rt.evaluateExpression=Xp;Rt.evaluateExpressionAndWaitForSignals=r0;Rt.parseUnserializableValue=RR;Rt.normalizeEvaluationExpression=i0;Rt.isJavaScriptErrorInEvaluate=NR;Rt.JavaScriptErrorInEvaluate=Rt.JSHandle=Rt.ExecutionContext=void 0;var IR=DR(Qy()),FR=Qo(),Zy=Qe();function e0(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(e0=function(i){return i?t:e})(r)}function DR(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=e0(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var t0=class extends Zy.SdkObject{constructor(e,t){super(e,"execution-context");this._delegate=void 0,this._utilityScriptPromise=void 0,this._delegate=t}async waitForSignalsCreatedBy(e){return e()}adoptIfNeeded(e){return null}utilityScript(){if(!this._utilityScriptPromise){let e=`
      (() => {
        ${IR.source}
        return new pwExport();
      })();`;this._utilityScriptPromise=this._delegate.rawEvaluateHandle(e).then(t=>new rl(this,"object",void 0,t))}return this._utilityScriptPromise}createHandle(e){return this._delegate.createHandle(this,e)}async rawEvaluateJSON(e){return await this._delegate.rawEvaluateJSON(e)}async doSlowMo(){}};Rt.ExecutionContext=t0;var rl=class extends Zy.SdkObject{constructor(e,t,i,n,s){super(e,"handle");this._context=void 0,this._disposed=!1,this._objectId=void 0,this._value=void 0,this._objectType=void 0,this._preview=void 0,this._previewCallback=void 0,this._context=e,this._objectId=n,this._value=s,this._objectType=t,this._preview=this._objectId?i||`JSHandle@${this._objectType}`:String(s)}callFunctionNoReply(e,t){this._context._delegate.rawCallFunctionNoReply(e,this,t)}async evaluate(e,t){return Jp(this._context,!0,e,this,t)}async evaluateHandle(e,t){return Jp(this._context,!1,e,this,t)}async evaluateExpressionAndWaitForSignals(e,t,i,n){let s=await r0(this._context,i,e,t,this,n);return await this._context.doSlowMo(),s}async getProperty(e){let t=await this.evaluateHandle((s,o)=>{let c={__proto__:null};return c[o]=s[o],c},e),n=(await t.getProperties()).get(e);return t.dispose(),n}async getProperties(){return this._objectId?this._context._delegate.getProperties(this._context,this._objectId):new Map}rawValue(){return this._value}async jsonValue(){if(!this._objectId)return this._value;let e=await this._context.utilityScript(),t="(utilityScript, ...args) => utilityScript.jsonValue(...args)";return this._context._delegate.evaluateWithArguments(t,!0,e,[!0],[this._objectId])}asElement(){return null}dispose(){this._disposed||(this._disposed=!0,this._objectId&&this._context._delegate.releaseHandle(this._objectId).catch(e=>{}))}toString(){return this._preview}_setPreviewCallback(e){this._previewCallback=e}preview(){return this._preview}_setPreview(e){this._preview=e,this._previewCallback&&this._previewCallback(e)}};Rt.JSHandle=rl;async function Jp(r,e,t,...i){return Xp(r,e,String(t),typeof t=="function",...i)}async function Xp(r,e,t,i,...n){let s=await r.utilityScript();t=i0(t,i);let o=[],c=[],l=p=>(o.push(p),o.length-1);n=n.map(p=>(0,FR.serializeAsCallArgument)(p,f=>{if(f instanceof rl){if(!f._objectId)return{fallThrough:f._value};if(f._disposed)throw new Error("JSHandle is disposed!");let _=r.adoptIfNeeded(f);return _===null?{h:l(Promise.resolve(f))}:(c.push(_),{h:l(_)})}return{fallThrough:f}}));let u=[];for(let p of await Promise.all(o)){if(p._context!==r)throw new Error("JSHandles can be evaluated only in the context they were created!");u.push(p._objectId)}let d=[i,e,t,n.length,...n],h="(utilityScript, ...args) => utilityScript.evaluate(...args)";try{return await r._delegate.evaluateWithArguments(h,e,s,d,u)}finally{c.map(p=>p.then(f=>f.dispose()))}}async function r0(r,e,t,i,...n){return await r.waitForSignalsCreatedBy(()=>Xp(r,e,t,i,...n))}function RR(r){if(r==="NaN")return NaN;if(r==="Infinity")return 1/0;if(r==="-Infinity")return-1/0;if(r==="-0")return-0}function i0(r,e){if(r=r.trim(),e)try{new Function("("+r+")")}catch(t){r.startsWith("async ")?r="async function "+r.substring("async ".length):r="function "+r;try{new Function("("+r+")")}catch(i){throw new Error("Passed function is not well-serializable!")}}return/^(async)?\s*function(\s|\()/.test(r)&&(r="("+r+")"),r}var Yp=class extends Error{};Rt.JavaScriptErrorInEvaluate=Yp;function NR(r){return r instanceof Yp}});var s0=w((FU,n0)=>{"use strict";function il(){this._types=Object.create(null),this._extensions=Object.create(null);for(let r=0;r<arguments.length;r++)this.define(arguments[r]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}il.prototype.define=function(r,e){for(let t in r){let i=r[t].map(function(n){return n.toLowerCase()});t=t.toLowerCase();for(let n=0;n<i.length;n++){let s=i[n];if(s[0]!=="*"){if(!e&&s in this._types)throw new Error('Attempt to change mapping for "'+s+'" extension from "'+this._types[s]+'" to "'+t+'". Pass `force=true` to allow this, otherwise remove "'+s+'" from the list of extensions for "'+t+'".');this._types[s]=t}}if(e||!this._extensions[t]){let n=i[0];this._extensions[t]=n[0]!=="*"?n:n.substr(1)}}};il.prototype.getType=function(r){r=String(r);let e=r.replace(/^.*[/\\]/,"").toLowerCase(),t=e.replace(/^.*\./,"").toLowerCase(),i=e.length<r.length;return(t.length<e.length-1||!i)&&this._types[t]||null};il.prototype.getExtension=function(r){return r=/^\s*([^;\s]*)/.test(r)&&RegExp.$1,r&&this._extensions[r.toLowerCase()]||null};n0.exports=il});var a0=w((DU,o0)=>{o0.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/mrb-consumer+xml":["*xdf"],"application/mrb-publish+xml":["*xdf"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["*xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-error+xml":["xer"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var l0=w((RU,c0)=>{c0.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var li=w((NU,u0)=>{"use strict";var qR=s0();u0.exports=new qR(a0(),l0())});var vr=w(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.ProgressController=void 0;var LR=Mt(),Qp=H(),d0=class{constructor(e,t){this._forceAbort=()=>{},this._forceAbortPromise=void 0,this._cleanups=[],this._logName="api",this._state="before",this._deadline=0,this._timeout=0,this.metadata=void 0,this.instrumentation=void 0,this.sdkObject=void 0,this.metadata=e,this.sdkObject=t,this.instrumentation=t.instrumentation,this._forceAbortPromise=new Promise((i,n)=>this._forceAbort=n),this._forceAbortPromise.catch(i=>null)}setLogName(e){this._logName=e}async run(e,t){t&&(this._timeout=t,this._deadline=t?(0,Qp.monotonicTime)()+t:0),(0,Qp.assert)(this._state==="before"),this._state="running";let i={log:o=>{this._state==="running"&&this.metadata.log.push(o),this.instrumentation.onCallLog(this._logName,o,this.sdkObject,this.metadata)},timeUntilDeadline:()=>this._deadline?this._deadline-(0,Qp.monotonicTime)():2147483647,isRunning:()=>this._state==="running",cleanupWhenAborted:o=>{this._state==="running"?this._cleanups.push(o):h0(o)},throwIfAborted:()=>{if(this._state==="aborted")throw new p0},beforeInputAction:async o=>{await this.instrumentation.onBeforeInputAction(this.sdkObject,this.metadata,o)},metadata:this.metadata},n=new LR.TimeoutError(`Timeout ${this._timeout}ms exceeded.`),s=setTimeout(()=>this._forceAbort(n),i.timeUntilDeadline());try{let o=e(i),c=await Promise.race([o,this._forceAbortPromise]);return this._state="finished",c}catch(o){throw this._state="aborted",await Promise.all(this._cleanups.splice(0).map(h0)),o}finally{clearTimeout(s)}}};nl.ProgressController=d0;async function h0(r){try{await r()}catch(e){}}var p0=class extends Error{}});var Zo=w(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.throwFatalDOMError=et;Ue.throwRetargetableDOMError=He;Ue.assertDone=ft;Ue.waitForSelectorTask=_0;Ue.dispatchEventTask=$R;Ue.textContentTask=zR;Ue.innerTextTask=UR;Ue.innerHTMLTask=VR;Ue.getAttributeTask=GR;Ue.inputValueTask=KR;Ue.elementStateTask=JR;Ue.kUnableToAdoptErrorMessage=Ue.InjectedScriptPollHandler=Ue.ElementHandle=Ue.FrameExecutionContext=void 0;var BR=Zp(Yy()),hn=Zp(ci()),HR=Zp(li()),pt=vr();function f0(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(f0=function(i){return i?t:e})(r)}function Zp(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=f0(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var m0=class extends hn.ExecutionContext{constructor(e,t,i){super(t,e);this.frame=void 0,this._injectedScriptPromise=void 0,this.world=void 0,this.frame=t,this.world=i}async waitForSignalsCreatedBy(e){return this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,e)}adoptIfNeeded(e){return e instanceof sl&&e._context!==this?this.frame._page._delegate.adoptElementHandle(e,this):null}async evaluate(e,t){return hn.evaluate(this,!0,e,t)}async evaluateHandle(e,t){return hn.evaluate(this,!1,e,t)}async evaluateExpression(e,t,i){return hn.evaluateExpression(this,!0,e,t,i)}async evaluateAndWaitForSignals(e,t){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>this.evaluate(e,t))}async evaluateExpressionAndWaitForSignals(e,t,i){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>this.evaluateExpression(e,t,i))}async evaluateExpressionHandleAndWaitForSignals(e,t,i){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>hn.evaluateExpression(this,!1,e,t,i))}createHandle(e){return this.frame._page._delegate.isElementHandle(e)?new sl(this,e.objectId):super.createHandle(e)}injectedScript(){if(!this._injectedScriptPromise){let e=[];for(let[i,{source:n}]of this.frame._page.selectors._engines)e.push(`{ name: '${i}', engine: (${n}) }`);let t=`
        (() => {
        ${BR.source}
        return new pwExport(
          ${this.frame._page._delegate.rafCountForStablePosition()},
          ${!!process.env.PWTEST_USE_TIMEOUT_FOR_RAF},
          [${e.join(`,
`)}]
        );
        })();
      `;this._injectedScriptPromise=this._delegate.rawEvaluateHandle(t).then(i=>new hn.JSHandle(this,"object",void 0,i))}return this._injectedScriptPromise}async doSlowMo(){return this.frame._page._doSlowMo()}};Ue.FrameExecutionContext=m0;var sl=class extends hn.JSHandle{constructor(e,t){super(e,"node",void 0,t);this._page=void 0,this._page=e.frame._page,this._initializePreview().catch(i=>{})}async _initializePreview(){let e=await this._context.injectedScript();this._setPreview(await e.evaluate((t,i)=>"JSHandle@"+t.previewNode(i),this))}asElement(){return this}async _evaluateInMainAndWaitForSignals(e,t){let i=await this._context.frame._mainContext();return i.evaluateAndWaitForSignals(e,[await i.injectedScript(),this,t])}async evaluateInUtility(e,t){let i=await this._context.frame._utilityContext();return i.evaluate(e,[await i.injectedScript(),this,t])}async evaluateHandleInUtility(e,t){let i=await this._context.frame._utilityContext();return i.evaluateHandle(e,[await i.injectedScript(),this,t])}async ownerFrame(){let e=await this._page._delegate.getOwnerFrame(this);if(!e)return null;let t=this._page._frameManager.frame(e);if(t)return t;for(let i of this._page._browserContext.pages()){let n=i._frameManager.frame(e);if(n)return n}return null}async contentFrame(){return await this.evaluateInUtility(([t,i])=>i&&(i.nodeName==="IFRAME"||i.nodeName==="FRAME"),{})?this._page._delegate.getContentFrame(this):null}async getAttribute(e){return et(await this.evaluateInUtility(([t,i,n])=>i.nodeType!==Node.ELEMENT_NODE?"error:notelement":{value:i.getAttribute(n)},e)).value}async inputValue(){return et(await this.evaluateInUtility(([e,t])=>t.nodeType!==Node.ELEMENT_NODE||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"&&t.nodeName!=="SELECT"?"error:hasnovalue":{value:t.value},void 0)).value}async textContent(){return this.evaluateInUtility(([e,t])=>t.textContent,{})}async innerText(){return et(await this.evaluateInUtility(([e,t])=>t.nodeType!==Node.ELEMENT_NODE?"error:notelement":t.namespaceURI!=="http://www.w3.org/1999/xhtml"?"error:nothtmlelement":{value:t.innerText},{})).value}async innerHTML(){return et(await this.evaluateInUtility(([e,t])=>t.nodeType!==Node.ELEMENT_NODE?"error:notelement":{value:t.innerHTML},{})).value}async dispatchEvent(e,t={}){await this._evaluateInMainAndWaitForSignals(([i,n,{type:s,eventInit:o}])=>i.dispatchEvent(n,s,o),{type:e,eventInit:t}),await this._page._doSlowMo()}async _scrollRectIntoViewIfNeeded(e){return await this._page._delegate.scrollRectIntoViewIfNeeded(this,e)}async _waitAndScrollIntoViewIfNeeded(e){for(;e.isRunning();){ft(He(await this._waitForDisplayedAtStablePosition(e,!1,!1))),e.throwIfAborted();let t=He(await this._scrollRectIntoViewIfNeeded());if(t!=="error:notvisible"){ft(t);return}}}async scrollIntoViewIfNeeded(e,t={}){return new pt.ProgressController(e,this).run(n=>this._waitAndScrollIntoViewIfNeeded(n),this._page._timeoutSettings.timeout(t))}async _clickablePoint(){let e=c=>c.map(l=>({x:Math.min(Math.max(l.x,0),n.width),y:Math.min(Math.max(l.y,0),n.height)})),t=c=>{let l=0;for(let u=0;u<c.length;++u){let d=c[u],h=c[(u+1)%c.length];l+=(d.x*h.y-h.x*d.y)/2}return Math.abs(l)},[i,n]=await Promise.all([this._page._delegate.getContentQuads(this),this._page.mainFrame()._utilityContext().then(c=>c.evaluate(()=>({width:innerWidth,height:innerHeight})))]);if(!i||!i.length)return"error:notvisible";let s=i.map(c=>e(c)).filter(c=>t(c)>.99);if(!s.length)return"error:notinviewport";let o={x:0,y:0};for(let c of s[0])o.x+=c.x/4,o.y+=c.y/4;return WR(o),o}async _offsetPoint(e){let[t,i]=await Promise.all([this.boundingBox(),this.evaluateInUtility(([n,s])=>n.getElementBorderWidth(s),{}).catch(n=>{})]);return!t||!i?"error:notvisible":{x:t.x+i.left+e.x,y:t.y+i.top+e.y}}async _retryPointerAction(e,t,i,n,s){let o=0,c=[0,20,100,100,500],l=[void 0,{block:"end",inline:"end"},{block:"center",inline:"center"},{block:"start",inline:"start"}];for(;e.isRunning();){if(o){e.log(`retrying ${t} action${s.trial?" (trial run)":""}, attempt #${o}`);let h=c[Math.min(o-1,c.length-1)];h&&(e.log(`  waiting ${h}ms`),await this.evaluateInUtility(([p,f,_])=>new Promise(m=>setTimeout(m,_)),h))}else e.log(`attempting ${t} action${s.trial?" (trial run)":""}`);let u=l[o%l.length],d=await this._performPointerAction(e,t,i,n,u,s);if(++o,d==="error:notvisible"){if(s.force)throw new Error("Element is not visible");e.log("  element is not visible");continue}if(d==="error:notinviewport"){if(s.force)throw new Error("Element is outside of the viewport");e.log("  element is outside of the viewport");continue}if(typeof d=="object"&&"hitTargetDescription"in d){if(s.force)throw new Error(`Element does not receive pointer events, ${d.hitTargetDescription} intercepts them`);e.log(`  ${d.hitTargetDescription} intercepts pointer events`);continue}return d}return"done"}async _performPointerAction(e,t,i,n,s,o){let{force:c=!1,position:l}=o;o.__testHookBeforeStable&&await o.__testHookBeforeStable();let u=await this._waitForDisplayedAtStablePosition(e,c,i);if(u!=="done")return u;if(o.__testHookAfterStable&&await o.__testHookAfterStable(),e.log("  scrolling into view if needed"),e.throwIfAborted(),s)await this.evaluateInUtility(([p,f,_])=>{f.nodeType===1&&f.scrollIntoView(_)},s);else{let p=await this._scrollRectIntoViewIfNeeded(l?{x:l.x,y:l.y,width:0,height:0}:void 0);if(p!=="done")return p}e.log("  done scrolling");let d=l?await this._offsetPoint(l):await this._clickablePoint();if(typeof d=="string")return d;let h=jR(d);if(!c){o.__testHookBeforeHitTarget&&await o.__testHookBeforeHitTarget(),e.log(`  checking that element receives pointer events at (${h.x},${h.y})`);let p=await this._checkHitTargetAt(h);if(p!=="done")return p;e.log("  element does receive pointer events")}return e.metadata.point=h,o.trial?(e.log(`  trial ${t} has finished`),"done"):(await e.beforeInputAction(this),await this._page._frameManager.waitForSignalsCreatedBy(e,o.noWaitAfter,async()=>{o.__testHookBeforePointerAction&&await o.__testHookBeforePointerAction(),e.throwIfAborted();let p;o&&o.modifiers&&(p=await this._page.keyboard._ensureModifiers(o.modifiers)),e.log(`  performing ${t} action`),await n(h),e.log(`  ${t} action done`),e.log("  waiting for scheduled navigations to finish"),o.__testHookAfterPointerAction&&await o.__testHookAfterPointerAction(),p&&await this._page.keyboard._ensureModifiers(p)},"input"),e.log("  navigations have finished"),"done")}async hover(e,t){return new pt.ProgressController(e,this).run(async n=>{let s=await this._hover(n,t);return ft(He(s))},this._page._timeoutSettings.timeout(t))}_hover(e,t){return this._retryPointerAction(e,"hover",!1,i=>this._page.mouse.move(i.x,i.y),t)}async click(e,t={}){return new pt.ProgressController(e,this).run(async n=>{let s=await this._click(n,t);return ft(He(s))},this._page._timeoutSettings.timeout(t))}_click(e,t){return this._retryPointerAction(e,"click",!0,i=>this._page.mouse.click(i.x,i.y,t),t)}async dblclick(e,t){return new pt.ProgressController(e,this).run(async n=>{let s=await this._dblclick(n,t);return ft(He(s))},this._page._timeoutSettings.timeout(t))}_dblclick(e,t){return this._retryPointerAction(e,"dblclick",!0,i=>this._page.mouse.dblclick(i.x,i.y,t),t)}async tap(e,t={}){return new pt.ProgressController(e,this).run(async n=>{let s=await this._tap(n,t);return ft(He(s))},this._page._timeoutSettings.timeout(t))}_tap(e,t){return this._retryPointerAction(e,"tap",!0,i=>this._page.touchscreen.tap(i.x,i.y),t)}async selectOption(e,t,i,n){return new pt.ProgressController(e,this).run(async o=>{let c=await this._selectOption(o,t,i,n);return He(c)},this._page._timeoutSettings.timeout(n))}async _selectOption(e,t,i,n){let s=[...t,...i];return await e.beforeInputAction(this),this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{e.throwIfAborted(),e.log("  selecting specified option(s)");let o=await this.evaluateHandleInUtility(([u,d,{optionsToSelect:h,force:p}])=>u.waitForElementStatesAndPerformAction(d,["visible","enabled"],p,u.selectOptions.bind(u,h)),{optionsToSelect:s,force:n.force}),c=new ui(e,o),l=et(await c.finish());return await this._page._doSlowMo(),l})}async fill(e,t,i={}){return new pt.ProgressController(e,this).run(async s=>{let o=await this._fill(s,t,i);ft(He(o))},this._page._timeoutSettings.timeout(i))}async _fill(e,t,i){return e.log(`elementHandle.fill("${t}")`),await e.beforeInputAction(this),this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,async()=>{e.log("  waiting for element to be visible, enabled and editable");let n=await this.evaluateHandleInUtility(([c,l,{value:u,force:d}])=>c.waitForElementStatesAndPerformAction(l,["visible","enabled","editable"],d,c.fill.bind(c,u)),{value:t,force:i.force}),s=new ui(e,n),o=et(await s.finish());return e.throwIfAborted(),o==="error:notconnected"?o:(e.log("  element is visible, enabled and editable"),o==="needsinput"?(e.throwIfAborted(),t?await this._page.keyboard.insertText(t):await this._page.keyboard.press("Delete")):ft(o),"done")},"input")}async selectText(e,t={}){return new pt.ProgressController(e,this).run(async n=>{n.throwIfAborted();let s=await this.evaluateHandleInUtility(([l,u,d])=>l.waitForElementStatesAndPerformAction(u,["visible"],d,l.selectText.bind(l)),t.force),o=new ui(n,s),c=et(await o.finish());ft(He(c))},this._page._timeoutSettings.timeout(t))}async setInputFiles(e,t,i){return new pt.ProgressController(e,this).run(async s=>{let o=await this._setInputFiles(s,t,i);return ft(He(o))},this._page._timeoutSettings.timeout(i))}async _setInputFiles(e,t,i){for(let s of t)s.mimeType||(s.mimeType=HR.getType(s.name)||"application/octet-stream");let n=await this.evaluateHandleInUtility(([s,o,c])=>{let l=s.retarget(o,"follow-label");return l?l.tagName!=="INPUT"?"error:notinput":c&&!l.multiple?"error:notmultiplefileinput":l:"error:notconnected"},t.length>1);return n._objectId?(await e.beforeInputAction(this),await this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,async()=>{e.throwIfAborted(),await this._page._delegate.setInputFiles(n,t)}),await this._page._doSlowMo(),"done"):et(n.rawValue())}async focus(e){await new pt.ProgressController(e,this).run(async i=>{let n=await this._focus(i);return await this._page._doSlowMo(),ft(He(n))},0)}async _focus(e,t){e.throwIfAborted();let i=await this.evaluateInUtility(([n,s,o])=>n.focusNode(s,o),t);return et(i)}async type(e,t,i){return new pt.ProgressController(e,this).run(async s=>{let o=await this._type(s,t,i);return ft(He(o))},this._page._timeoutSettings.timeout(i))}async _type(e,t,i){return e.log(`elementHandle.type("${t}")`),await e.beforeInputAction(this),this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,async()=>{let n=await this._focus(e,!0);return n!=="done"?n:(e.throwIfAborted(),await this._page.keyboard.type(t,i),"done")},"input")}async press(e,t,i){return new pt.ProgressController(e,this).run(async s=>{let o=await this._press(s,t,i);return ft(He(o))},this._page._timeoutSettings.timeout(i))}async _press(e,t,i){return e.log(`elementHandle.press("${t}")`),await e.beforeInputAction(this),this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,async()=>{let n=await this._focus(e,!0);return n!=="done"?n:(e.throwIfAborted(),await this._page.keyboard.press(t,i),"done")},"input")}async check(e,t){return new pt.ProgressController(e,this).run(async n=>{let s=await this._setChecked(n,!0,t);return ft(He(s))},this._page._timeoutSettings.timeout(t))}async uncheck(e,t){return new pt.ProgressController(e,this).run(async n=>{let s=await this._setChecked(n,!1,t);return ft(He(s))},this._page._timeoutSettings.timeout(t))}async _setChecked(e,t,i){let n=async()=>{let o=await this.evaluateInUtility(([c,l])=>c.checkElementState(l,"checked"),{});return He(et(o))};if(await n()===t)return"done";let s=await this._click(e,i);if(s!=="done")return s;if(i.trial)return"done";if(await n()!==t)throw new Error("Clicking the checkbox did not change its state");return"done"}async boundingBox(){return this._page._delegate.getBoundingBox(this)}async screenshot(e,t={}){return new pt.ProgressController(e,this).run(n=>this._page._screenshotter.screenshotElement(n,this,t),this._page._timeoutSettings.timeout(t))}async querySelector(e,t){return this._page.selectors.query(this._context.frame,e,t,this)}async querySelectorAll(e){return this._page.selectors._queryAll(this._context.frame,e,this,!0)}async evalOnSelectorAndWaitForSignals(e,t,i,n,s){let o=await this._page.selectors.query(this._context.frame,e,{strict:t},this);if(!o)throw new Error(`Error: failed to find element matching selector "${e}"`);let c=await o.evaluateExpressionAndWaitForSignals(i,n,!0,s);return o.dispose(),c}async evalOnSelectorAllAndWaitForSignals(e,t,i,n){let s=await this._page.selectors._queryArray(this._context.frame,e,this),o=await s.evaluateExpressionAndWaitForSignals(t,i,!0,n);return s.dispose(),o}async isVisible(){let e=await this.evaluateInUtility(([t,i])=>t.checkElementState(i,"visible"),{});return e==="error:notconnected"?!1:et(e)}async isHidden(){let e=await this.evaluateInUtility(([t,i])=>t.checkElementState(i,"hidden"),{});return He(et(e))}async isEnabled(){let e=await this.evaluateInUtility(([t,i])=>t.checkElementState(i,"enabled"),{});return He(et(e))}async isDisabled(){let e=await this.evaluateInUtility(([t,i])=>t.checkElementState(i,"disabled"),{});return He(et(e))}async isEditable(){let e=await this.evaluateInUtility(([t,i])=>t.checkElementState(i,"editable"),{});return He(et(e))}async isChecked(){let e=await this.evaluateInUtility(([t,i])=>t.checkElementState(i,"checked"),{});return He(et(e))}async waitForElementState(e,t,i={}){return new pt.ProgressController(e,this).run(async s=>{s.log(`  waiting for element to be ${t}`);let o=await this.evaluateHandleInUtility(([l,u,d])=>l.waitForElementStatesAndPerformAction(u,[d],!1,()=>"done"),t),c=new ui(s,o);ft(He(et(await c.finish())))},this._page._timeoutSettings.timeout(i))}async waitForSelector(e,t,i={}){let{state:n="visible"}=i;if(!["attached","detached","visible","hidden"].includes(n))throw new Error("state: expected one of (attached|detached|visible|hidden)");let s=this._page.parseSelector(t,i),o=_0(s,n,this);return new pt.ProgressController(e,this).run(async l=>{l.log(`waiting for selector "${t}"${n==="attached"?"":" to be "+n}`);let d=await(await this._context.frame._context(s.world)).injectedScript(),p=await new ui(l,await o(d)).finishHandle();return p.asElement()?p.asElement()._adoptTo(await this._context.frame._mainContext()):(p.dispose(),null)},this._page._timeoutSettings.timeout(i))}async _adoptTo(e){if(this._context!==e){let t=await this._page._delegate.adoptElementHandle(this,e);return this.dispose(),t}return this}async _waitForDisplayedAtStablePosition(e,t,i){i?e.log("  waiting for element to be visible, enabled and stable"):e.log("  waiting for element to be visible and stable");let n=this.evaluateHandleInUtility(([c,l,{waitForEnabled:u,force:d}])=>c.waitForElementStatesAndPerformAction(l,u?["visible","stable","enabled"]:["visible","stable"],d,()=>"done"),{waitForEnabled:i,force:t}),o=await new ui(e,await n).finish();return i?e.log("  element is visible, enabled and stable"):e.log("  element is visible and stable"),et(o)}async _checkHitTargetAt(e){let t=await this.ownerFrame();if(t&&t.parentFrame()){let n=await(await t.frameElement()).boundingBox();if(!n)return"error:notconnected";e={x:e.x-n.x,y:e.y-n.y}}return this.evaluateInUtility(([i,n,s])=>i.checkHitTargetAt(n,s),e)}};Ue.ElementHandle=sl;var ui=class{constructor(e,t){this._progress=void 0,this._poll=void 0,this._progress=e,this._poll=t,this._progress.cleanupWhenAborted(()=>this.cancel()),this._streamLogs()}async _streamLogs(){for(;this._poll&&this._progress.isRunning();){let e=await this._poll.evaluate(t=>t.takeNextLogs()).catch(t=>[]);if(!this._poll||!this._progress.isRunning())return;for(let t of e)this._progress.log(t)}}async finishHandle(){try{let e=await this._poll.evaluateHandle(t=>t.run());return await this._finishInternal(),e}finally{await this.cancel()}}async finish(){try{let e=await this._poll.evaluate(t=>t.run());return await this._finishInternal(),e}finally{await this.cancel()}}async _finishInternal(){if(!this._poll)return;let e=await this._poll.evaluate(t=>t.takeLastLogs()).catch(t=>[]);for(let t of e)this._progress.log(t)}async cancel(){if(!this._poll)return;let e=this._poll;this._poll=null,await e.evaluate(t=>t.cancel()).catch(t=>{}),e.dispose()}};Ue.InjectedScriptPollHandler=ui;function et(r){if(r==="error:notelement")throw new Error("Node is not an element");if(r==="error:nothtmlelement")throw new Error("Not an HTMLElement");if(r==="error:notfillableelement")throw new Error("Element is not an <input>, <textarea> or [contenteditable] element");if(r==="error:notfillableinputtype")throw new Error("Input of this type cannot be filled");if(r==="error:notfillablenumberinput")throw new Error("Cannot type text into input[type=number]");if(r==="error:notvaliddate")throw new Error("Malformed value");if(r==="error:notinput")throw new Error("Node is not an HTMLInputElement");if(r==="error:hasnovalue")throw new Error("Node is not an HTMLInputElement or HTMLTextAreaElement or HTMLSelectElement");if(r==="error:notselect")throw new Error("Element is not a <select> element.");if(r==="error:notcheckbox")throw new Error("Not a checkbox or radio button");if(r==="error:notmultiplefileinput")throw new Error("Non-multiple file input can only accept single file");return r}function He(r){if(r==="error:notconnected")throw new Error("Element is not attached to the DOM");return r}function ft(r){}function jR(r){return{x:(r.x*100|0)/100,y:(r.y*100|0)/100}}function WR(r){let e=r.x-Math.floor(r.x);e>.49&&e<.51&&(r.x-=.02);let t=r.y-Math.floor(r.y);t>.49&&t<.51&&(r.y-=.02)}function _0(r,e,t){return i=>i.evaluateHandle((n,{parsed:s,strict:o,state:c,root:l})=>{let u;return n.pollRaf((d,h)=>{let p=n.querySelectorAll(s,l||document),f=p[0],_=f?n.isVisible(f):!1;if(u!==f)if(u=f,!f)d.log("  selector did not resolve to any element");else{if(p.length>1){if(o)throw n.strictModeViolationError(s,p);d.log(`  selector resolved to ${p.length} elements. Proceeding with the first one.`)}d.log(`  selector resolved to ${_?"visible":"hidden"} ${n.previewNode(f)}`)}switch(c){case"attached":return f||h;case"detached":return f?h:void 0;case"visible":return _?f:h;case"hidden":return _?h:void 0}})},{parsed:r.parsed,strict:r.strict,state:e,root:t})}function $R(r,e,t){return i=>i.evaluateHandle((n,{parsed:s,strict:o,type:c,eventInit:l})=>n.pollRaf((u,d)=>{let h=n.querySelector(s,document,o);if(!h)return d;u.log(`  selector resolved to ${n.previewNode(h)}`),n.dispatchEvent(h,c,l)}),{parsed:r.parsed,strict:r.strict,type:e,eventInit:t})}function zR(r){return e=>e.evaluateHandle((t,{parsed:i,strict:n})=>t.pollRaf((s,o)=>{let c=t.querySelector(i,document,n);return c?(s.log(`  selector resolved to ${t.previewNode(c)}`),s.log("  retrieving textContent"),c.textContent):o}),{parsed:r.parsed,strict:r.strict})}function UR(r){return e=>e.evaluateHandle((t,{parsed:i,strict:n})=>t.pollRaf((s,o)=>{let c=t.querySelector(i,document,n);return c?(s.log(`  selector resolved to ${t.previewNode(c)}`),c.namespaceURI!=="http://www.w3.org/1999/xhtml"?"error:nothtmlelement":{innerText:c.innerText}):o}),{parsed:r.parsed,strict:r.strict})}function VR(r){return e=>e.evaluateHandle((t,{parsed:i,strict:n})=>t.pollRaf((s,o)=>{let c=t.querySelector(i,document,n);return c?(s.log(`  selector resolved to ${t.previewNode(c)}`),c.innerHTML):o}),{parsed:r.parsed,strict:r.strict})}function GR(r,e){return t=>t.evaluateHandle((i,{parsed:n,strict:s,name:o})=>i.pollRaf((c,l)=>{let u=i.querySelector(n,document,s);return u?(c.log(`  selector resolved to ${i.previewNode(u)}`),u.getAttribute(o)):l}),{parsed:r.parsed,strict:r.strict,name:e})}function KR(r){return e=>e.evaluateHandle((t,{parsed:i,strict:n})=>t.pollRaf((s,o)=>{let c=t.querySelector(i,document,n);return c?(s.log(`  selector resolved to ${t.previewNode(c)}`),c.nodeName!=="INPUT"&&c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"?"error:hasnovalue":c.value):o}),{parsed:r.parsed,strict:r.strict})}function JR(r,e){return t=>t.evaluateHandle((i,{parsed:n,strict:s,state:o})=>i.pollRaf((c,l)=>{let u=i.querySelector(n,document,s);return u?(c.log(`  selector resolved to ${i.previewNode(u)}`),i.checkElementState(u,o)):l}),{parsed:r.parsed,strict:r.strict,state:e})}var XR="Unable to adopt element handle from a different document";Ue.kUnableToAdoptErrorMessage=XR});var ef=w(g0=>{"use strict";Object.defineProperty(g0,"__esModule",{value:!0})});var w0=w(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});Object.defineProperty(ot,"Size",{enumerable:!0,get:function(){return ls.Size}});Object.defineProperty(ot,"Point",{enumerable:!0,get:function(){return ls.Point}});Object.defineProperty(ot,"Rect",{enumerable:!0,get:function(){return ls.Rect}});Object.defineProperty(ot,"Quad",{enumerable:!0,get:function(){return ls.Quad}});Object.defineProperty(ot,"URLMatch",{enumerable:!0,get:function(){return ls.URLMatch}});Object.defineProperty(ot,"TimeoutOptions",{enumerable:!0,get:function(){return ls.TimeoutOptions}});ot.forcedColors=ot.reducedMotions=ot.colorSchemes=ot.mediaTypes=ot.kLifecycleEvents=void 0;var ls=ef(),YR=new Set(["load","domcontentloaded","networkidle"]);ot.kLifecycleEvents=YR;var QR=new Set(["screen","print"]);ot.mediaTypes=QR;var ZR=new Set(["dark","light","no-preference"]);ot.colorSchemes=ZR;var eN=new Set(["no-preference","reduce"]);ot.reducedMotions=eN;var tN=new Set(["active","none"]);ot.forcedColors=tN});var di=w(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.isSessionClosedError=rN;ea.ProtocolError=void 0;var tf=class extends Error{constructor(e,t){super(t);this.sessionClosed=void 0,this.sessionClosed=e||!1}};ea.ProtocolError=tf;function rN(r){return r instanceof tf&&r.sessionClosed}});var ta=w(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.Frame=hs.FrameManager=void 0;var Fe=cl(Zo()),hi=kt(),v0=dt(),rf=cl(ci()),iN=cl(Dt()),us=bt(),nN=cl(w0()),ol=ht(),Ne=vr(),ds=H(),sN=zt(),al=ze(),y0=Qe(),oN=di();function b0(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(b0=function(i){return i?t:e})(r)}function cl(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=b0(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var x0=class{constructor(e){this._page=void 0,this._frames=new Map,this._mainFrame=void 0,this._consoleMessageTags=new Map,this._signalBarriers=new Set,this._webSockets=new Map,this._dialogCounter=0,this._page=e,this._mainFrame=void 0}dispose(){for(let e of this._frames.values())e._stopNetworkIdleTimer()}mainFrame(){return this._mainFrame}frames(){let e=[];return t(this._mainFrame),e;function t(i){e.push(i);for(let n of i.childFrames())t(n)}}frame(e){return this._frames.get(e)||null}frameAttached(e,t){let i=t?this._frames.get(t):null;if(i){(0,ds.assert)(!this._frames.has(e));let n=new at(this._page,e,i);return this._frames.set(e,n),this._page.emit(us.Page.Events.FrameAttached,n),n}else return this._mainFrame?(this._frames.delete(this._mainFrame._id),this._mainFrame._id=e):((0,ds.assert)(!this._frames.has(e)),this._mainFrame=new at(this._page,e,i)),this._frames.set(e,this._mainFrame),this._mainFrame}async waitForSignalsCreatedBy(e,t,i,n){if(t)return i();let s=new S0(e);this._signalBarriers.add(s),e&&e.cleanupWhenAborted(()=>this._signalBarriers.delete(s));let o=await i();return n==="input"&&await this._page._delegate.inputActionEpilogue(),await s.waitFor(),this._signalBarriers.delete(s),await new Promise((0,ds.makeWaitForNextTask)()),o}frameWillPotentiallyRequestNavigation(){for(let e of this._signalBarriers)e.retain()}frameDidPotentiallyRequestNavigation(){for(let e of this._signalBarriers)e.release()}frameRequestedNavigation(e,t){let i=this._frames.get(e);if(!!i){for(let n of this._signalBarriers)n.addFrameNavigation(i);i.pendingDocument()&&i.pendingDocument().documentId===t||i.setPendingDocument({documentId:t,request:void 0})}}frameCommittedNewDocumentNavigation(e,t,i,n,s){let o=this._frames.get(e);this.removeChildFramesRecursively(o),this.clearWebSockets(o),o._url=t,o._name=i;let c,l=o.pendingDocument();l?(l.documentId===void 0&&(l.documentId=n),l.documentId===n?o._currentDocument=l:(c=l,o._currentDocument={documentId:n,request:void 0}),o.setPendingDocument(void 0)):o._currentDocument={documentId:n,request:void 0},o._onClearLifecycle();let u={url:t,name:i,newDocument:o._currentDocument};o.emit(at.Events.Navigation,u),s||(al.debugLogger.log("api",`  navigated to "${t}"`),this._page.frameNavigatedToNewDocument(o)),o.setPendingDocument(c)}frameCommittedSameDocumentNavigation(e,t){let i=this._frames.get(e);if(!i)return;i._url=t;let n={url:t,name:i._name};i.emit(at.Events.Navigation,n),al.debugLogger.log("api",`  navigated to "${t}"`)}frameAbortedNavigation(e,t,i){let n=this._frames.get(e);if(!n||!n.pendingDocument()||i!==void 0&&n.pendingDocument().documentId!==i)return;let s={url:n._url,name:n._name,newDocument:n.pendingDocument(),error:new Error(t)};n.setPendingDocument(void 0),n.emit(at.Events.Navigation,s)}frameDetached(e){let t=this._frames.get(e);t&&this._removeFramesRecursively(t)}frameStoppedLoading(e){this.frameLifecycleEvent(e,"domcontentloaded"),this.frameLifecycleEvent(e,"load")}frameLifecycleEvent(e,t){let i=this._frames.get(e);i&&i._onLifecycleEvent(t)}requestStarted(e,t){let i=e.frame();if(this._inflightRequestStarted(e),e._documentId&&i.setPendingDocument({documentId:e._documentId,request:e}),e._isFavicon){t&&t.continue(e,{});return}this._page._browserContext.emit(ol.BrowserContext.Events.Request,e),t&&this._page._requestStarted(e,t)}requestReceivedResponse(e){e.request()._isFavicon||this._page._browserContext.emit(ol.BrowserContext.Events.Response,e)}reportRequestFinished(e,t){this._inflightRequestFinished(e),!e._isFavicon&&this._page._browserContext.emit(ol.BrowserContext.Events.RequestFinished,{request:e,response:t})}requestFailed(e,t){let i=e.frame();if(this._inflightRequestFinished(e),i.pendingDocument()&&i.pendingDocument().request===e){let n=e.failure().errorText;t&&(n+="; maybe frame was detached?"),this.frameAbortedNavigation(i._id,n,i.pendingDocument().documentId)}e._isFavicon||this._page._browserContext.emit(ol.BrowserContext.Events.RequestFailed,e)}dialogDidOpen(){for(let e of this._frames.values())e._invalidateNonStallingEvaluations("JavaScript dialog interrupted evaluation");this._dialogCounter++}dialogWillClose(){this._dialogCounter--}removeChildFramesRecursively(e){for(let t of e.childFrames())this._removeFramesRecursively(t)}_removeFramesRecursively(e){this.removeChildFramesRecursively(e),e._onDetached(),this._frames.delete(e._id),this._page.isClosed()||this._page.emit(us.Page.Events.FrameDetached,e)}_inflightRequestFinished(e){let t=e.frame();e._isFavicon||!t._inflightRequests.has(e)||(t._inflightRequests.delete(e),t._inflightRequests.size===0&&t._startNetworkIdleTimer())}_inflightRequestStarted(e){let t=e.frame();e._isFavicon||(t._inflightRequests.add(e),t._inflightRequests.size===1&&t._stopNetworkIdleTimer())}interceptConsoleMessage(e){if(e.type()!=="debug")return!1;let t=e.text(),i=this._consoleMessageTags.get(t);return i?(this._consoleMessageTags.delete(t),i(),!0):!1}clearWebSockets(e){e.parentFrame()||this._webSockets.clear()}onWebSocketCreated(e,t){let i=new iN.WebSocket(this._page,t);this._webSockets.set(e,i)}onWebSocketRequest(e){let t=this._webSockets.get(e);t&&this._page.emit(us.Page.Events.WebSocket,t)}onWebSocketResponse(e,t,i){let n=this._webSockets.get(e);t<400||n&&n.error(`${i}: ${t}`)}onWebSocketFrameSent(e,t,i){let n=this._webSockets.get(e);n&&n.frameSent(t,i)}webSocketFrameReceived(e,t,i){let n=this._webSockets.get(e);n&&n.frameReceived(t,i)}webSocketClosed(e){let t=this._webSockets.get(e);t&&t.closed(),this._webSockets.delete(e)}webSocketError(e,t){let i=this._webSockets.get(e);i&&i.error(t)}};hs.FrameManager=x0;var at=class extends y0.SdkObject{constructor(e,t,i){super(e,"frame");this._id=void 0,this._firedLifecycleEvents=new Set,this._subtreeLifecycleEvents=new Set,this._currentDocument=void 0,this._pendingDocument=void 0,this._page=void 0,this._parentFrame=void 0,this._url="",this._detached=!1,this._contextData=new Map,this._childFrames=new Set,this._name="",this._inflightRequests=new Set,this._networkIdleTimer=void 0,this._setContentCounter=0,this._detachedPromise=void 0,this._detachedCallback=()=>{},this._nonStallingEvaluations=new Set,this.attribution.frame=this,this._id=t,this._page=e,this._parentFrame=i,this._currentDocument={documentId:void 0,request:void 0},this._detachedPromise=new Promise(n=>this._detachedCallback=n),this._contextData.set("main",{contextPromise:new Promise(()=>{}),contextResolveCallback:()=>{},context:null,rerunnableTasks:new Set}),this._contextData.set("utility",{contextPromise:new Promise(()=>{}),contextResolveCallback:()=>{},context:null,rerunnableTasks:new Set}),this._setContext("main",null),this._setContext("utility",null),this._parentFrame&&this._parentFrame._childFrames.add(this)}_onLifecycleEvent(e){this._firedLifecycleEvents.has(e)||(this._firedLifecycleEvents.add(e),this._page.mainFrame()._recalculateLifecycle())}_onClearLifecycle(){this._firedLifecycleEvents.clear(),this._page.mainFrame()._recalculateLifecycle(),this._inflightRequests=new Set(Array.from(this._inflightRequests).filter(e=>e===this._currentDocument.request)),this._stopNetworkIdleTimer(),this._inflightRequests.size===0&&this._startNetworkIdleTimer()}setPendingDocument(e){this._pendingDocument=e,e&&this._invalidateNonStallingEvaluations("Navigation interrupted the evaluation")}pendingDocument(){return this._pendingDocument}_invalidateNonStallingEvaluations(e){if(!this._nonStallingEvaluations)return;let t=new Error(e);for(let i of this._nonStallingEvaluations)i(t)}async nonStallingRawEvaluateInExistingMainContext(e){if(this._pendingDocument)throw new Error("Frame is currently attempting a navigation");if(this._page._frameManager._dialogCounter)throw new Error("Open JavaScript dialog prevents evaluation");let t=this._existingMainContext();if(!t)throw new Error("Frame does not yet have a main execution context");let i=()=>{},n=new Promise((s,o)=>i=o);this._nonStallingEvaluations.add(i);try{return await Promise.race([t.rawEvaluateJSON(e),n])}finally{this._nonStallingEvaluations.delete(i)}}async nonStallingEvaluateInExistingContext(e,t,i){var n;if(this._pendingDocument)throw new Error("Frame is currently attempting a navigation");let s=(n=this._contextData.get(i))===null||n===void 0?void 0:n.context;if(!s)throw new Error("Frame does not yet have the execution context");let o=()=>{},c=new Promise((l,u)=>o=u);this._nonStallingEvaluations.add(o);try{return await Promise.race([s.evaluateExpression(e,t),c])}finally{this._nonStallingEvaluations.delete(o)}}_recalculateLifecycle(){let e=new Set(this._firedLifecycleEvents);for(let i of this._childFrames){i._recalculateLifecycle();for(let n of e)i._subtreeLifecycleEvents.has(n)||e.delete(n)}let t=this._page.mainFrame();for(let i of e)this._subtreeLifecycleEvents.has(i)||(this.emit(at.Events.AddLifecycle,i),this===t&&this._url!=="about:blank"&&al.debugLogger.log("api",`  "${i}" event fired`),this===t&&i==="load"&&this._page.emit(us.Page.Events.Load),this===t&&i==="domcontentloaded"&&this._page.emit(us.Page.Events.DOMContentLoaded));for(let i of this._subtreeLifecycleEvents)e.has(i)||this.emit(at.Events.RemoveLifecycle,i);this._subtreeLifecycleEvents=e}async raceNavigationAction(e){return Promise.race([this._page._disconnectedPromise.then(()=>{throw new Error("Navigation failed because page was closed!")}),this._page._crashedPromise.then(()=>{throw new Error("Navigation failed because page crashed!")}),this._detachedPromise.then(()=>{throw new Error("Navigating frame was detached!")}),e()])}async goto(e,t,i={}){let n=(0,ds.constructURLBasedOnBaseURL)(this._page._browserContext._options.baseURL,t);return new Ne.ProgressController(e,this).run(o=>this._goto(o,n,i),this._page._timeoutSettings.navigationTimeout(i))}async _goto(e,t,i){return this.raceNavigationAction(async()=>{let n=sf("waitUntil",i.waitUntil===void 0?"load":i.waitUntil);e.log(`navigating to "${t}", waiting until "${n}"`);let o=(this._page._state.extraHTTPHeaders||[]).find(f=>f.name.toLowerCase()==="referer"),c=o?o.value:void 0;if(i.referer!==void 0){if(c!==void 0&&c!==i.referer)throw new Error('"referer" is already specified as extra HTTP header');c=i.referer}t=hi.helper.completeUserURL(t);let l=hi.helper.waitForEvent(e,this,at.Events.Navigation,f=>!f.newDocument),u=await this._page._delegate.navigateFrame(this,t,c),d;if(u.newDocumentId){if(l.dispose(),d=await hi.helper.waitForEvent(e,this,at.Events.Navigation,f=>f.newDocument&&(f.newDocument.documentId===u.newDocumentId||!f.error)).promise,d.newDocument.documentId!==u.newDocumentId)throw new Error("Navigation interrupted by another one");if(d.error)throw d.error}else d=await l.promise;this._subtreeLifecycleEvents.has(n)||await hi.helper.waitForEvent(e,this,at.Events.AddLifecycle,f=>f===n).promise;let h=d.newDocument?d.newDocument.request:void 0,p=h?h._finalRequest().response():null;return await this._page._doSlowMo(),p})}async _waitForNavigation(e,t){let i=sf("waitUntil",t.waitUntil===void 0?"load":t.waitUntil);e.log(`waiting for navigation until "${i}"`);let n=await hi.helper.waitForEvent(e,this,at.Events.Navigation,o=>(o.error||e.log(`  navigated to "${this._url}"`),!0)).promise;if(n.error)throw n.error;this._subtreeLifecycleEvents.has(i)||await hi.helper.waitForEvent(e,this,at.Events.AddLifecycle,o=>o===i).promise;let s=n.newDocument?n.newDocument.request:void 0;return s?s._finalRequest().response():null}async _waitForLoadState(e,t){let i=sf("state",t);this._subtreeLifecycleEvents.has(i)||await hi.helper.waitForEvent(e,this,at.Events.AddLifecycle,n=>n===i).promise}async frameElement(){return this._page._delegate.getFrameElement(this)}_context(e){if(this._detached)throw new Error(`Execution Context is not available in detached frame "${this.url()}" (are you trying to evaluate?)`);return this._contextData.get(e).contextPromise}_mainContext(){return this._context("main")}_existingMainContext(){var e;return((e=this._contextData.get("main"))===null||e===void 0?void 0:e.context)||null}_utilityContext(){return this._context("utility")}async evaluateExpressionHandleAndWaitForSignals(e,t,i,n="main"){let o=await(await this._context(n)).evaluateExpressionHandleAndWaitForSignals(e,t,i);return n==="main"&&await this._page._doSlowMo(),o}async evaluateExpression(e,t,i,n="main"){let o=await(await this._context(n)).evaluateExpression(e,t,i);return n==="main"&&await this._page._doSlowMo(),o}async evaluateExpressionAndWaitForSignals(e,t,i,n="main"){let o=await(await this._context(n)).evaluateExpressionAndWaitForSignals(e,t,i);return n==="main"&&await this._page._doSlowMo(),o}async querySelector(e,t){return al.debugLogger.log("api",`    finding element using the selector "${e}"`),this._page.selectors.query(this,e,t)}async waitForSelector(e,t,i={}){let n=new Ne.ProgressController(e,this);if(i.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(i.waitFor&&i.waitFor!=="visible")throw new Error("options.waitFor is not supported, did you mean options.state?");let{state:s="visible"}=i;if(!["attached","detached","visible","hidden"].includes(s))throw new Error("state: expected one of (attached|detached|visible|hidden)");let o=this._page.parseSelector(t,i),c=Fe.waitForSelectorTask(o,s);return n.run(async l=>{for(l.log(`waiting for selector "${t}"${s==="attached"?"":" to be "+s}`);l.isRunning();){let u=await this._scheduleRerunnableHandleTask(l,o.world,c);if(!u.asElement())return u.dispose(),null;i.__testHookBeforeAdoptNode&&await i.__testHookBeforeAdoptNode();try{return await u.asElement()._adoptTo(await this._mainContext())}catch(d){if(rf.isJavaScriptErrorInEvaluate(d))throw d;u.dispose()}}return null},this._page._timeoutSettings.timeout(i))}async dispatchEvent(e,t,i,n,s={}){let o=new Ne.ProgressController(e,this),c=this._page.parseSelector(t,s),l=Fe.dispatchEventTask(c,i,n||{});await o.run(async u=>{u.log(`Dispatching "${i}" event on selector "${t}"...`),await this._scheduleRerunnableTask(u,"main",l)},this._page._timeoutSettings.timeout(s)),await this._page._doSlowMo()}async evalOnSelectorAndWaitForSignals(e,t,i,n,s){let o=await this.querySelector(e,{strict:t});if(!o)throw new Error(`Error: failed to find element matching selector "${e}"`);let c=await o.evaluateExpressionAndWaitForSignals(i,n,!0,s);return o.dispose(),c}async evalOnSelectorAllAndWaitForSignals(e,t,i,n){let s=await this._page.selectors._queryArray(this,e),o=await s.evaluateExpressionAndWaitForSignals(t,i,!0,n);return s.dispose(),o}async querySelectorAll(e){return this._page.selectors._queryAll(this,e,void 0,!0)}async content(){return(await this._utilityContext()).evaluate(()=>{let t="";return document.doctype&&(t=new XMLSerializer().serializeToString(document.doctype)),document.documentElement&&(t+=document.documentElement.outerHTML),t})}async setContent(e,t,i={}){return new Ne.ProgressController(e,this).run(s=>this.raceNavigationAction(async()=>{let o=i.waitUntil===void 0?"load":i.waitUntil;s.log(`setting frame content, waiting until "${o}"`);let c=`--playwright--set--content--${this._id}--${++this._setContentCounter}--`,l=await this._utilityContext(),u=new Promise((h,p)=>{this._page._frameManager._consoleMessageTags.set(c,()=>{this._onClearLifecycle(),this._waitForLoadState(s,o).then(h).catch(p)})}),d=l.evaluate(({html:h,tag:p})=>{window.stop(),document.open(),console.debug(p),document.write(h),document.close()},{html:t,tag:c});await Promise.all([d,u]),await this._page._doSlowMo()}),this._page._timeoutSettings.navigationTimeout(i))}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}async addScriptTag(e){let{url:t=null,content:i=null,type:n=""}=e;if(!t&&!i)throw new Error("Provide an object with a `url`, `path` or `content` property");let s=await this._mainContext();return this._raceWithCSPError(async()=>{if(t!==null)return(await s.evaluateHandle(o,{url:t,type:n})).asElement();let l=(await s.evaluateHandle(c,{content:i,type:n})).asElement();return this._page._delegate.cspErrorsAsynchronousForInlineScipts&&await s.evaluate(()=>!0),l});async function o(l){let u=document.createElement("script");u.src=l.url,l.type&&(u.type=l.type);let d=new Promise((h,p)=>{u.onload=h,u.onerror=f=>p(typeof f=="string"?new Error(f):new Error(`Failed to load script at ${u.src}`))});return document.head.appendChild(u),await d,u}function c(l){let u=document.createElement("script");u.type=l.type||"text/javascript",u.text=l.content;let d=null;if(u.onerror=h=>d=h,document.head.appendChild(u),d)throw d;return u}}async addStyleTag(e){let{url:t=null,content:i=null}=e;if(!t&&!i)throw new Error("Provide an object with a `url`, `path` or `content` property");let n=await this._mainContext();return this._raceWithCSPError(async()=>t!==null?(await n.evaluateHandle(s,t)).asElement():(await n.evaluateHandle(o,i)).asElement());async function s(c){let l=document.createElement("link");l.rel="stylesheet",l.href=c;let u=new Promise((d,h)=>{l.onload=d,l.onerror=h});return document.head.appendChild(l),await u,l}async function o(c){let l=document.createElement("style");l.type="text/css",l.appendChild(document.createTextNode(c));let u=new Promise((d,h)=>{l.onload=d,l.onerror=h});return document.head.appendChild(l),await u,l}}async _raceWithCSPError(e){let t=[],i,n,s,o=e().then(l=>i=l).catch(l=>n=l),c=new Promise(l=>{t.push(v0.eventsHelper.addEventListener(this._page,us.Page.Events.Console,u=>{u.type()==="error"&&u.text().includes("Content Security Policy")&&(s=u,l())}))});if(await Promise.race([o,c]),v0.eventsHelper.removeEventListeners(t),s)throw new Error(s.text());if(n)throw n;return i}async _retryWithProgressIfNotConnected(e,t,i,n){let s=this._page.parseSelector(t,{strict:i});for(;e.isRunning();){e.log(`waiting for selector "${t}"`);let o=Fe.waitForSelectorTask(s,"attached"),l=(await this._scheduleRerunnableHandleTask(e,s.world,o)).asElement();e.cleanupWhenAborted(()=>{l.dispose()});let u=await n(l);if(l.dispose(),u==="error:notconnected"){e.log("element was detached from the DOM, retrying");continue}return u}}async _retryWithSelectorIfNotConnected(e,t,i,n){return e.run(async s=>this._retryWithProgressIfNotConnected(s,t,i.strict,o=>n(s,o)),this._page._timeoutSettings.timeout(i))}async click(e,t,i){return new Ne.ProgressController(e,this).run(async s=>Fe.assertDone(await this._retryWithProgressIfNotConnected(s,t,i.strict,o=>o._click(s,i))),this._page._timeoutSettings.timeout(i))}async dblclick(e,t,i={}){return new Ne.ProgressController(e,this).run(async s=>Fe.assertDone(await this._retryWithProgressIfNotConnected(s,t,i.strict,o=>o._dblclick(s,i))),this._page._timeoutSettings.timeout(i))}async dragAndDrop(e,t,i,n={}){await new Ne.ProgressController(e,this).run(async o=>{await Fe.assertDone(await this._retryWithProgressIfNotConnected(o,t,n.strict,async c=>c._retryPointerAction(o,"move and down",!1,async l=>{await this._page.mouse.move(l.x,l.y),await this._page.mouse.down()},{...n,position:n.sourcePosition,timeout:o.timeUntilDeadline()}))),await Fe.assertDone(await this._retryWithProgressIfNotConnected(o,i,n.strict,async c=>c._retryPointerAction(o,"move and up",!1,async l=>{await this._page.mouse.move(l.x,l.y),await this._page.mouse.up()},{...n,position:n.targetPosition,timeout:o.timeUntilDeadline()})))},this._page._timeoutSettings.timeout(n))}async tap(e,t,i){return new Ne.ProgressController(e,this).run(async s=>Fe.assertDone(await this._retryWithProgressIfNotConnected(s,t,i.strict,o=>o._tap(s,i))),this._page._timeoutSettings.timeout(i))}async fill(e,t,i,n){return new Ne.ProgressController(e,this).run(async o=>Fe.assertDone(await this._retryWithProgressIfNotConnected(o,t,n.strict,c=>c._fill(o,i,n))),this._page._timeoutSettings.timeout(n))}async focus(e,t,i={}){let n=new Ne.ProgressController(e,this);await this._retryWithSelectorIfNotConnected(n,t,i,(s,o)=>o._focus(s)),await this._page._doSlowMo()}async textContent(e,t,i={}){let n=new Ne.ProgressController(e,this),s=this._page.parseSelector(t,i),o=Fe.textContentTask(s);return n.run(async c=>(c.log(`  waiting for selector "${t}"\u2026`),this._scheduleRerunnableTask(c,s.world,o)),this._page._timeoutSettings.timeout(i))}async innerText(e,t,i={}){let n=new Ne.ProgressController(e,this),s=this._page.parseSelector(t,i),o=Fe.innerTextTask(s);return n.run(async c=>(c.log(`  retrieving innerText from "${t}"`),Fe.throwFatalDOMError(await this._scheduleRerunnableTask(c,s.world,o)).innerText),this._page._timeoutSettings.timeout(i))}async innerHTML(e,t,i={}){let n=new Ne.ProgressController(e,this),s=this._page.parseSelector(t,i),o=Fe.innerHTMLTask(s);return n.run(async c=>(c.log(`  retrieving innerHTML from "${t}"`),this._scheduleRerunnableTask(c,s.world,o)),this._page._timeoutSettings.timeout(i))}async getAttribute(e,t,i,n={}){let s=new Ne.ProgressController(e,this),o=this._page.parseSelector(t,n),c=Fe.getAttributeTask(o,i);return s.run(async l=>(l.log(`  retrieving attribute "${i}" from "${t}"`),this._scheduleRerunnableTask(l,o.world,c)),this._page._timeoutSettings.timeout(n))}async inputValue(e,t,i={}){let n=new Ne.ProgressController(e,this),s=this._page.parseSelector(t,i),o=Fe.inputValueTask(s);return n.run(async c=>(c.log(`  retrieving value from "${t}"`),Fe.throwFatalDOMError(await this._scheduleRerunnableTask(c,s.world,o))),this._page._timeoutSettings.timeout(i))}async _checkElementState(e,t,i,n={}){let s=new Ne.ProgressController(e,this),o=this._page.parseSelector(t,n),c=Fe.elementStateTask(o,i),l=await s.run(async u=>(u.log(`  checking "${i}" state of "${t}"`),this._scheduleRerunnableTask(u,o.world,c)),this._page._timeoutSettings.timeout(n));return Fe.throwFatalDOMError(Fe.throwRetargetableDOMError(l))}async isVisible(e,t,i={}){return new Ne.ProgressController(e,this).run(async s=>{s.log(`  checking visibility of "${t}"`);let o=await this.querySelector(t,i);return o?await o.isVisible():!1},this._page._timeoutSettings.timeout({}))}async isHidden(e,t,i={}){return!await this.isVisible(e,t,i)}async isDisabled(e,t,i={}){return this._checkElementState(e,t,"disabled",i)}async isEnabled(e,t,i={}){return this._checkElementState(e,t,"enabled",i)}async isEditable(e,t,i={}){return this._checkElementState(e,t,"editable",i)}async isChecked(e,t,i={}){return this._checkElementState(e,t,"checked",i)}async hover(e,t,i={}){return new Ne.ProgressController(e,this).run(async s=>Fe.assertDone(await this._retryWithProgressIfNotConnected(s,t,i.strict,o=>o._hover(s,i))),this._page._timeoutSettings.timeout(i))}async selectOption(e,t,i,n,s={}){return new Ne.ProgressController(e,this).run(async c=>await this._retryWithProgressIfNotConnected(c,t,s.strict,l=>l._selectOption(c,i,n,s)),this._page._timeoutSettings.timeout(s))}async setInputFiles(e,t,i,n={}){return new Ne.ProgressController(e,this).run(async o=>Fe.assertDone(await this._retryWithProgressIfNotConnected(o,t,n.strict,c=>c._setInputFiles(o,i,n))),this._page._timeoutSettings.timeout(n))}async type(e,t,i,n={}){return new Ne.ProgressController(e,this).run(async o=>Fe.assertDone(await this._retryWithProgressIfNotConnected(o,t,n.strict,c=>c._type(o,i,n))),this._page._timeoutSettings.timeout(n))}async press(e,t,i,n={}){return new Ne.ProgressController(e,this).run(async o=>Fe.assertDone(await this._retryWithProgressIfNotConnected(o,t,n.strict,c=>c._press(o,i,n))),this._page._timeoutSettings.timeout(n))}async check(e,t,i={}){return new Ne.ProgressController(e,this).run(async s=>Fe.assertDone(await this._retryWithProgressIfNotConnected(s,t,i.strict,o=>o._setChecked(s,!0,i))),this._page._timeoutSettings.timeout(i))}async uncheck(e,t,i={}){return new Ne.ProgressController(e,this).run(async s=>Fe.assertDone(await this._retryWithProgressIfNotConnected(s,t,i.strict,o=>o._setChecked(s,!1,i))),this._page._timeoutSettings.timeout(i))}async _waitForFunctionExpression(e,t,i,n,s,o="main"){let c=new Ne.ProgressController(e,this);typeof s.pollingInterval=="number"&&(0,ds.assert)(s.pollingInterval>0,"Cannot poll with non-positive interval: "+s.pollingInterval),t=rf.normalizeEvaluationExpression(t,i);let l=u=>u.evaluateHandle((d,{expression:h,isFunction:p,polling:f,arg:_})=>{let m=g=>{let v=self.eval(h);return p===!0?v=v(g):p===!1?v=v:typeof v=="function"&&(v=v(g)),v};return typeof f!="number"?d.pollRaf((g,v)=>m(_)||v):d.pollInterval(f,(g,v)=>m(_)||v)},{expression:t,isFunction:i,polling:s.pollingInterval,arg:n});return c.run(u=>this._scheduleRerunnableHandleTask(u,o,l),this._page._timeoutSettings.timeout(s))}async waitForFunctionValueInUtility(e,t){let i=`() => {
      const result = (${t})();
      if (!result)
        return result;
      return JSON.stringify(result);
    }`,n=await this._waitForFunctionExpression((0,y0.internalCallMetadata)(),i,!0,void 0,{timeout:e.timeUntilDeadline()},"utility");return JSON.parse(n.rawValue())}async title(){return(await this._utilityContext()).evaluate(()=>document.title)}_onDetached(){this._stopNetworkIdleTimer(),this._detached=!0,this._detachedCallback();for(let e of this._contextData.values())for(let t of e.rerunnableTasks)t.terminate(new Error("waitForFunction failed: frame got detached."));this._parentFrame&&this._parentFrame._childFrames.delete(this),this._parentFrame=null}_scheduleRerunnableTask(e,t,i){let n=this._contextData.get(t),s=new nf(n,e,i,!0);return this._detached&&s.terminate(new Error("waitForFunction failed: frame got detached.")),n.context&&s.rerun(n.context),s.promise}_scheduleRerunnableHandleTask(e,t,i){let n=this._contextData.get(t),s=new nf(n,e,i,!1);return this._detached&&s.terminate(new Error("waitForFunction failed: frame got detached.")),n.context&&s.rerun(n.context),s.promise}_setContext(e,t){let i=this._contextData.get(e);if(i.context=t,t){i.contextResolveCallback.call(null,t);for(let n of i.rerunnableTasks)n.rerun(t)}else i.contextPromise=new Promise(n=>{i.contextResolveCallback=n})}_contextCreated(e,t){this._contextData.get(e).context&&this._setContext(e,null),this._setContext(e,t)}_contextDestroyed(e){for(let[t,i]of this._contextData)i.context===e&&this._setContext(t,null)}_startNetworkIdleTimer(){(0,ds.assert)(!this._networkIdleTimer),!(this._firedLifecycleEvents.has("networkidle")||this._detached)&&(this._networkIdleTimer=setTimeout(()=>this._onLifecycleEvent("networkidle"),500))}_stopNetworkIdleTimer(){this._networkIdleTimer&&clearTimeout(this._networkIdleTimer),this._networkIdleTimer=void 0}async extendInjectedScript(e,t){return(await(await this._context("main")).injectedScript()).evaluateHandle((s,{source:o,arg:c})=>s.extend(o,c),{source:e,arg:t})}};hs.Frame=at;at.Events={Navigation:"navigation",AddLifecycle:"addlifecycle",RemoveLifecycle:"removelifecycle"};var nf=class{constructor(e,t,i,n){this.promise=void 0,this._task=void 0,this._resolve=()=>{},this._reject=()=>{},this._progress=void 0,this._returnByValue=void 0,this._contextData=void 0,this._task=i,this._progress=t,this._returnByValue=n,this._contextData=e,this._contextData.rerunnableTasks.add(this),this.promise=new Promise((s,o)=>{this._resolve=s,this._reject=o})}terminate(e){this._reject(e)}async rerun(e){try{let t=await e.injectedScript(),i=new Fe.InjectedScriptPollHandler(this._progress,await this._task(t)),n=this._returnByValue?await i.finish():await i.finishHandle();this._contextData.rerunnableTasks.delete(this),this._resolve(n)}catch(t){(rf.isJavaScriptErrorInEvaluate(t)||(0,oN.isSessionClosedError)(t))&&(this._contextData.rerunnableTasks.delete(this),this._reject(t))}}},S0=class{constructor(e){this._progress=void 0,this._protectCount=0,this._promise=new sN.ManualPromise,this._progress=e,this.retain()}waitFor(){return this.release(),this._promise}async addFrameNavigation(e){if(e.parentFrame())return;this.retain();let t=hi.helper.waitForEvent(null,e,at.Events.Navigation,i=>(!i.error&&this._progress&&this._progress.log(`  navigated to "${e._url}"`),!0));await Promise.race([e._page._disconnectedPromise,e._page._crashedPromise,e._detachedPromise,t.promise]).catch(i=>{}),t.dispose(),this.release()}retain(){++this._protectCount}release(){--this._protectCount,this._protectCount||this._promise.resolve()}};function sf(r,e){if(e==="networkidle0"&&(e="networkidle"),!nN.kLifecycleEvents.has(e))throw new Error(`${r}: expected one of (load|domcontentloaded|networkidle)`);return e}});var E0=w(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.USKeyboardLayout=ps.keypadLocation=void 0;var aN=3;ps.keypadLocation=aN;var cN={Escape:{keyCode:27,key:"Escape"},F1:{keyCode:112,key:"F1"},F2:{keyCode:113,key:"F2"},F3:{keyCode:114,key:"F3"},F4:{keyCode:115,key:"F4"},F5:{keyCode:116,key:"F5"},F6:{keyCode:117,key:"F6"},F7:{keyCode:118,key:"F7"},F8:{keyCode:119,key:"F8"},F9:{keyCode:120,key:"F9"},F10:{keyCode:121,key:"F10"},F11:{keyCode:122,key:"F11"},F12:{keyCode:123,key:"F12"},Backquote:{keyCode:192,shiftKey:"~",key:"`"},Digit1:{keyCode:49,shiftKey:"!",key:"1"},Digit2:{keyCode:50,shiftKey:"@",key:"2"},Digit3:{keyCode:51,shiftKey:"#",key:"3"},Digit4:{keyCode:52,shiftKey:"$",key:"4"},Digit5:{keyCode:53,shiftKey:"%",key:"5"},Digit6:{keyCode:54,shiftKey:"^",key:"6"},Digit7:{keyCode:55,shiftKey:"&",key:"7"},Digit8:{keyCode:56,shiftKey:"*",key:"8"},Digit9:{keyCode:57,shiftKey:"(",key:"9"},Digit0:{keyCode:48,shiftKey:")",key:"0"},Minus:{keyCode:189,shiftKey:"_",key:"-"},Equal:{keyCode:187,shiftKey:"+",key:"="},Backslash:{keyCode:220,shiftKey:"|",key:"\\"},Backspace:{keyCode:8,key:"Backspace"},Tab:{keyCode:9,key:"Tab"},KeyQ:{keyCode:81,shiftKey:"Q",key:"q"},KeyW:{keyCode:87,shiftKey:"W",key:"w"},KeyE:{keyCode:69,shiftKey:"E",key:"e"},KeyR:{keyCode:82,shiftKey:"R",key:"r"},KeyT:{keyCode:84,shiftKey:"T",key:"t"},KeyY:{keyCode:89,shiftKey:"Y",key:"y"},KeyU:{keyCode:85,shiftKey:"U",key:"u"},KeyI:{keyCode:73,shiftKey:"I",key:"i"},KeyO:{keyCode:79,shiftKey:"O",key:"o"},KeyP:{keyCode:80,shiftKey:"P",key:"p"},BracketLeft:{keyCode:219,shiftKey:"{",key:"["},BracketRight:{keyCode:221,shiftKey:"}",key:"]"},CapsLock:{keyCode:20,key:"CapsLock"},KeyA:{keyCode:65,shiftKey:"A",key:"a"},KeyS:{keyCode:83,shiftKey:"S",key:"s"},KeyD:{keyCode:68,shiftKey:"D",key:"d"},KeyF:{keyCode:70,shiftKey:"F",key:"f"},KeyG:{keyCode:71,shiftKey:"G",key:"g"},KeyH:{keyCode:72,shiftKey:"H",key:"h"},KeyJ:{keyCode:74,shiftKey:"J",key:"j"},KeyK:{keyCode:75,shiftKey:"K",key:"k"},KeyL:{keyCode:76,shiftKey:"L",key:"l"},Semicolon:{keyCode:186,shiftKey:":",key:";"},Quote:{keyCode:222,shiftKey:'"',key:"'"},Enter:{keyCode:13,key:"Enter",text:"\r"},ShiftLeft:{keyCode:160,keyCodeWithoutLocation:16,key:"Shift",location:1},KeyZ:{keyCode:90,shiftKey:"Z",key:"z"},KeyX:{keyCode:88,shiftKey:"X",key:"x"},KeyC:{keyCode:67,shiftKey:"C",key:"c"},KeyV:{keyCode:86,shiftKey:"V",key:"v"},KeyB:{keyCode:66,shiftKey:"B",key:"b"},KeyN:{keyCode:78,shiftKey:"N",key:"n"},KeyM:{keyCode:77,shiftKey:"M",key:"m"},Comma:{keyCode:188,shiftKey:"<",key:","},Period:{keyCode:190,shiftKey:">",key:"."},Slash:{keyCode:191,shiftKey:"?",key:"/"},ShiftRight:{keyCode:161,keyCodeWithoutLocation:16,key:"Shift",location:2},ControlLeft:{keyCode:162,keyCodeWithoutLocation:17,key:"Control",location:1},MetaLeft:{keyCode:91,key:"Meta",location:1},AltLeft:{keyCode:164,keyCodeWithoutLocation:18,key:"Alt",location:1},Space:{keyCode:32,key:" "},AltRight:{keyCode:165,keyCodeWithoutLocation:18,key:"Alt",location:2},AltGraph:{keyCode:225,key:"AltGraph"},MetaRight:{keyCode:92,key:"Meta",location:2},ContextMenu:{keyCode:93,key:"ContextMenu"},ControlRight:{keyCode:163,keyCodeWithoutLocation:17,key:"Control",location:2},PrintScreen:{keyCode:44,key:"PrintScreen"},ScrollLock:{keyCode:145,key:"ScrollLock"},Pause:{keyCode:19,key:"Pause"},PageUp:{keyCode:33,key:"PageUp"},PageDown:{keyCode:34,key:"PageDown"},Insert:{keyCode:45,key:"Insert"},Delete:{keyCode:46,key:"Delete"},Home:{keyCode:36,key:"Home"},End:{keyCode:35,key:"End"},ArrowLeft:{keyCode:37,key:"ArrowLeft"},ArrowUp:{keyCode:38,key:"ArrowUp"},ArrowRight:{keyCode:39,key:"ArrowRight"},ArrowDown:{keyCode:40,key:"ArrowDown"},NumLock:{keyCode:144,key:"NumLock"},NumpadDivide:{keyCode:111,key:"/",location:3},NumpadMultiply:{keyCode:106,key:"*",location:3},NumpadSubtract:{keyCode:109,key:"-",location:3},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",shiftKey:"7",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",shiftKey:"8",location:3},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",shiftKey:"9",location:3},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",shiftKey:"4",location:3},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",shiftKey:"5",location:3},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",shiftKey:"6",location:3},NumpadAdd:{keyCode:107,key:"+",location:3},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",shiftKey:"1",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",shiftKey:"2",location:3},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",shiftKey:"3",location:3},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",shiftKey:"0",location:3},NumpadDecimal:{keyCode:46,shiftKeyCode:110,key:"\0",shiftKey:".",location:3},NumpadEnter:{keyCode:13,key:"Enter",text:"\r",location:3}};ps.USKeyboardLayout=cN});var ul=w(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.Touchscreen=yr.Mouse=yr.Keyboard=yr.keypadLocation=void 0;var C0=H(),k0=lN(E0());function P0(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(P0=function(i){return i?t:e})(r)}function lN(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=P0(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var uN=k0.keypadLocation;yr.keypadLocation=uN;var ll=["Alt","Control","Meta","Shift"],O0=class{constructor(e,t){this._pressedModifiers=new Set,this._pressedKeys=new Set,this._raw=void 0,this._page=void 0,this._raw=e,this._page=t}async down(e){let t=this._keyDescriptionForString(e),i=this._pressedKeys.has(t.code);this._pressedKeys.add(t.code),ll.includes(t.key)&&this._pressedModifiers.add(t.key);let n=t.text;await this._raw.keydown(this._pressedModifiers,t.code,t.keyCode,t.keyCodeWithoutLocation,t.key,t.location,i,n),await this._page._doSlowMo()}_keyDescriptionForString(e){let t=M0.get(e);return(0,C0.assert)(t,`Unknown key: "${e}"`),t=this._pressedModifiers.has("Shift")&&t.shifted?t.shifted:t,this._pressedModifiers.size>1||!this._pressedModifiers.has("Shift")&&this._pressedModifiers.size===1?{...t,text:""}:t}async up(e){let t=this._keyDescriptionForString(e);ll.includes(t.key)&&this._pressedModifiers.delete(t.key),this._pressedKeys.delete(t.code),await this._raw.keyup(this._pressedModifiers,t.code,t.keyCode,t.keyCodeWithoutLocation,t.key,t.location),await this._page._doSlowMo()}async insertText(e){await this._raw.sendText(e),await this._page._doSlowMo()}async type(e,t){let i=t&&t.delay||void 0;for(let n of e)M0.has(n)?await this.press(n,{delay:i}):(i&&await new Promise(s=>setTimeout(s,i)),await this.insertText(n))}async press(e,t={}){function i(o){let c=[],l="";for(let u of o)u==="+"&&l?(c.push(l),l=""):l+=u;return c.push(l),c}let n=i(e),s=[];e=n[n.length-1];for(let o=0;o<n.length-1;++o)s.push(this.down(n[o]));s.push(this.down(e)),t.delay&&(await Promise.all(s),await new Promise(o=>setTimeout(o,t.delay))),s.push(this.up(e));for(let o=n.length-2;o>=0;--o)s.push(this.up(n[o]));await Promise.all(s)}async _ensureModifiers(e){for(let n of e)if(!ll.includes(n))throw new Error("Unknown modifier "+n);let t=Array.from(this._pressedModifiers),i=[];for(let n of ll){let s=e.includes(n),o=this._pressedModifiers.has(n);s&&!o?i.push(this.down(n)):!s&&o&&i.push(this.up(n))}return await Promise.all(i),t}_modifiers(){return this._pressedModifiers}};yr.Keyboard=O0;var T0=class{constructor(e,t){this._keyboard=void 0,this._x=0,this._y=0,this._lastButton="none",this._buttons=new Set,this._raw=void 0,this._page=void 0,this._raw=e,this._page=t,this._keyboard=this._page.keyboard}async move(e,t,i={}){let{steps:n=1}=i,s=this._x,o=this._y;this._x=e,this._y=t;for(let c=1;c<=n;c++){let l=s+(e-s)*(c/n),u=o+(t-o)*(c/n);await this._raw.move(l,u,this._lastButton,this._buttons,this._keyboard._modifiers()),await this._page._doSlowMo()}}async down(e={}){let{button:t="left",clickCount:i=1}=e;this._lastButton=t,this._buttons.add(t),await this._raw.down(this._x,this._y,this._lastButton,this._buttons,this._keyboard._modifiers(),i),await this._page._doSlowMo()}async up(e={}){let{button:t="left",clickCount:i=1}=e;this._lastButton="none",this._buttons.delete(t),await this._raw.up(this._x,this._y,t,this._buttons,this._keyboard._modifiers(),i),await this._page._doSlowMo()}async click(e,t,i={}){let{delay:n=null,clickCount:s=1}=i;if(n){this.move(e,t);for(let o=1;o<=s;++o)await this.down({...i,clickCount:o}),await new Promise(c=>setTimeout(c,n)),await this.up({...i,clickCount:o}),o<s&&await new Promise(c=>setTimeout(c,n))}else{let o=[];o.push(this.move(e,t));for(let c=1;c<=s;++c)o.push(this.down({...i,clickCount:c})),o.push(this.up({...i,clickCount:c}));await Promise.all(o)}}async dblclick(e,t,i={}){await this.click(e,t,{...i,clickCount:2})}async wheel(e,t){await this._raw.wheel(this._x,this._y,this._buttons,this._keyboard._modifiers(),e,t),await this._page._doSlowMo()}};yr.Mouse=T0;var A0=new Map([["ShiftLeft",["Shift"]],["ControlLeft",["Control"]],["AltLeft",["Alt"]],["MetaLeft",["Meta"]],["Enter",[`
`,"\r"]]]),M0=dN(k0.USKeyboardLayout);function dN(r){let e=new Map;for(let t in r){let i=r[t],n={key:i.key||"",keyCode:i.keyCode||0,keyCodeWithoutLocation:i.keyCodeWithoutLocation||i.keyCode||0,code:t,text:i.text||"",location:i.location||0};i.key.length===1&&(n.text=n.key);let s;if(i.shiftKey&&((0,C0.assert)(i.shiftKey.length===1),s={...n},s.key=i.shiftKey,s.text=i.shiftKey,i.shiftKeyCode&&(s.keyCode=i.shiftKeyCode)),e.set(t,{...n,shifted:s}),A0.has(t))for(let o of A0.get(t))e.set(o,n);i.location||(n.key.length===1&&e.set(n.key,n),s&&e.set(s.key,{...s,shifted:void 0}))}return e}var I0=class{constructor(e,t){this._raw=void 0,this._page=void 0,this._raw=e,this._page=t}async tap(e,t){if(!this._page._browserContext._options.hasTouch)throw new Error("hasTouch must be enabled on the browser context before using the touchscreen.");await this._raw.tap(e,t,this._page.keyboard._modifiers()),await this._page._doSlowMo()}};yr.Touchscreen=I0});var q0=w(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.Screenshotter=void 0;var F0=kt(),tt=H(),D0=class{constructor(e){this._queue=new of,this._page=void 0,this._page=e,this._queue=new of}async _originalViewportSize(e){let t=this._page.viewportSize(),i=t;return i||(i=await this._page.mainFrame().waitForFunctionValueInUtility(e,()=>({width:window.innerWidth,height:window.innerHeight}))),{viewportSize:i,originalViewportSize:t}}async _fullPageSize(e){return await this._page.mainFrame().waitForFunctionValueInUtility(e,()=>!document.body||!document.documentElement?null:{width:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)})}async screenshotPage(e,t){let i=N0(t);return this._queue.postTask(async()=>{let{viewportSize:n,originalViewportSize:s}=await this._originalViewportSize(e);if(t.fullPage){let c=await this._fullPageSize(e),l={x:0,y:0,width:c.width,height:c.height},u=null,d=c.width<=n.width&&c.height<=n.height;!this._page._delegate.canScreenshotOutsideViewport()&&!d&&(u=c,e.throwIfAborted(),await this._page.setViewportSize(u),e.cleanupWhenAborted(()=>this._restoreViewport(s))),t.clip&&(l=R0(t.clip,l));let h=await this._screenshot(e,i,l,void 0,t);return e.throwIfAborted(),u&&await this._restoreViewport(s),h}let o=t.clip?R0(t.clip,n):{x:0,y:0,...n};return await this._screenshot(e,i,void 0,o,t)})}async screenshotElement(e,t,i={}){let n=N0(i);return this._queue.postTask(async()=>{let{viewportSize:s,originalViewportSize:o}=await this._originalViewportSize(e);await t._waitAndScrollIntoViewIfNeeded(e),e.throwIfAborted();let c=await t.boundingBox();(0,tt.assert)(c,"Node is either not visible or not an HTMLElement"),(0,tt.assert)(c.width!==0,"Node has 0 width."),(0,tt.assert)(c.height!==0,"Node has 0 height.");let l=null,u=c.width<=s.width&&c.height<=s.height;!this._page._delegate.canScreenshotOutsideViewport()&&!u&&(l=F0.helper.enclosingIntSize({width:Math.max(s.width,c.width),height:Math.max(s.height,c.height)}),e.throwIfAborted(),await this._page.setViewportSize(l),e.cleanupWhenAborted(()=>this._restoreViewport(o)),e.throwIfAborted(),await t._waitAndScrollIntoViewIfNeeded(e),c=await t.boundingBox(),(0,tt.assert)(c,"Node is either not visible or not an HTMLElement"),(0,tt.assert)(c.width!==0,"Node has 0 width."),(0,tt.assert)(c.height!==0,"Node has 0 height.")),e.throwIfAborted();let d=await this._page.mainFrame().waitForFunctionValueInUtility(e,()=>({x:window.scrollX,y:window.scrollY})),h={...c};h.x+=d.x,h.y+=d.y;let p=await this._screenshot(e,n,F0.helper.enclosingIntRect(h),void 0,i);return e.throwIfAborted(),l&&await this._restoreViewport(o),p})}async _screenshot(e,t,i,n,s){s.__testHookBeforeScreenshot&&await s.__testHookBeforeScreenshot(),e.throwIfAborted();let o=s.omitBackground&&t==="png";o&&(await this._page._delegate.setBackgroundColor({r:0,g:0,b:0,a:0}),e.cleanupWhenAborted(()=>this._page._delegate.setBackgroundColor())),e.throwIfAborted();let c=await this._page._delegate.takeScreenshot(e,t,i,n,s.quality);return e.throwIfAborted(),o&&await this._page._delegate.setBackgroundColor(),e.throwIfAborted(),s.__testHookAfterScreenshot&&await s.__testHookAfterScreenshot(),c}async _restoreViewport(e){(0,tt.assert)(!this._page._delegate.canScreenshotOutsideViewport()),e?await this._page.setViewportSize(e):await this._page._delegate.resetViewport()}};dl.Screenshotter=D0;var of=class{constructor(){this._chain=void 0,this._chain=Promise.resolve()}postTask(e){let t=this._chain.then(e);return this._chain=t.catch(()=>{}),t}};function R0(r,e){let t={x:Math.max(0,Math.min(r.x,e.width)),y:Math.max(0,Math.min(r.y,e.height))},i={x:Math.max(0,Math.min(r.x+r.width,e.width)),y:Math.max(0,Math.min(r.y+r.height,e.height))},n={x:t.x,y:t.y,width:i.x-t.x,height:i.y-t.y};return(0,tt.assert)(n.width&&n.height,"Clipped area is either empty or outside the resulting image"),n}function N0(r){let e=null;return r.type&&((0,tt.assert)(r.type==="png"||r.type==="jpeg","Unknown options.type value: "+r.type),e=r.type),e||(e="png"),r.quality!==void 0&&((0,tt.assert)(e==="jpeg","options.quality is unsupported for the "+e+" screenshots"),(0,tt.assert)(typeof r.quality=="number","Expected options.quality to be a number but found "+typeof r.quality),(0,tt.assert)(Number.isInteger(r.quality),"Expected options.quality to be an integer"),(0,tt.assert)(r.quality>=0&&r.quality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+r.quality)),r.clip&&((0,tt.assert)(typeof r.clip.x=="number","Expected options.clip.x to be a number but found "+typeof r.clip.x),(0,tt.assert)(typeof r.clip.y=="number","Expected options.clip.y to be a number but found "+typeof r.clip.y),(0,tt.assert)(typeof r.clip.width=="number","Expected options.clip.width to be a number but found "+typeof r.clip.width),(0,tt.assert)(typeof r.clip.height=="number","Expected options.clip.height to be a number but found "+typeof r.clip.height),(0,tt.assert)(r.clip.width!==0,"Expected options.clip.width not to be 0."),(0,tt.assert)(r.clip.height!==0,"Expected options.clip.height not to be 0.")),e}});var B0=w(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.ConsoleMessage=void 0;var hN=Qe(),L0=class extends hN.SdkObject{constructor(e,t,i,n,s){super(e,"console-message");this._type=void 0,this._text=void 0,this._args=void 0,this._location=void 0,this._type=t,this._text=i,this._args=n,this._location=s||{url:"",lineNumber:0,columnNumber:0}}type(){return this._type}text(){return this._text===void 0&&(this._text=this._args.map(e=>e.preview()).join(" ")),this._text}args(){return this._args}location(){return this._location}};hl.ConsoleMessage=L0});var W0=w(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.Accessibility=void 0;var H0=class{constructor(e){this._getAXTree=void 0,this._getAXTree=e}async snapshot(e={}){let{interestingOnly:t=!0,root:i=null}=e,{tree:n,needle:s}=await this._getAXTree(i||void 0);if(!t)return i?s&&pl(s)[0]:pl(n)[0];let o=new Set;return j0(o,n,!1),i&&(!s||!o.has(s))?null:pl(s||n,o)[0]}};fl.Accessibility=H0;function j0(r,e,t){if(e.isInteresting(t)&&r.add(e),!e.isLeafNode()){t=t||e.isControl();for(let i of e.children())j0(r,i,t)}}function pl(r,e){let t=[];for(let n of r.children())t.push(...pl(n,e));if(e&&!e.has(r))return t;let i=r.serialize();return t.length&&(i.children=t),[i]}});var z0=w(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.FileChooser=void 0;var $0=class{constructor(e,t,i){this._page=void 0,this._elementHandle=void 0,this._isMultiple=void 0,this._page=e,this._elementHandle=t,this._isMultiple=i}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}};ml.FileChooser=$0});var bt=w(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.PageBinding=pi.Worker=pi.Page=void 0;var pN=na(ta()),af=na(ul()),cf=na(ci()),U0=na(Dt()),fN=q0(),mN=$t(),_N=ht(),gN=B0(),wN=na(W0()),vN=z0(),_l=vr(),ra=H(),lf=zt(),ia=ze(),V0=Qe();function G0(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(G0=function(i){return i?t:e})(r)}function na(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=G0(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Pt=class extends V0.SdkObject{constructor(e,t){super(t,"page");this._closedState="open",this._closedPromise=new lf.ManualPromise,this._disconnected=!1,this._initialized=!1,this._disconnectedPromise=new lf.ManualPromise,this._crashedPromise=new lf.ManualPromise,this._browserContext=void 0,this.keyboard=void 0,this.mouse=void 0,this.touchscreen=void 0,this._timeoutSettings=void 0,this._delegate=void 0,this._state=void 0,this._pageBindings=new Map,this._evaluateOnNewDocumentSources=[],this._screenshotter=void 0,this._frameManager=void 0,this.accessibility=void 0,this._workers=new Map,this.pdf=void 0,this.coverage=void 0,this._clientRequestInterceptor=void 0,this._serverRequestInterceptor=void 0,this._ownedContext=void 0,this.selectors=void 0,this._pageIsError=void 0,this._video=null,this._opener=void 0,this.attribution.page=this,this._delegate=e,this._browserContext=t,this._state={emulatedSize:t._options.viewport?{viewport:t._options.viewport,screen:t._options.screen||t._options.viewport}:null,mediaType:null,colorScheme:t._options.colorScheme!==void 0?t._options.colorScheme:"light",reducedMotion:t._options.reducedMotion!==void 0?t._options.reducedMotion:"no-preference",forcedColors:t._options.forcedColors!==void 0?t._options.forcedColors:"none",extraHTTPHeaders:null},this.accessibility=new wN.Accessibility(e.getAccessibilityTree.bind(e)),this.keyboard=new af.Keyboard(e.rawKeyboard,this),this.mouse=new af.Mouse(e.rawMouse,this),this.touchscreen=new af.Touchscreen(e.rawTouchscreen,this),this._timeoutSettings=new mN.TimeoutSettings(t._timeoutSettings),this._screenshotter=new fN.Screenshotter(this),this._frameManager=new pN.FrameManager(this),e.pdf&&(this.pdf=e.pdf.bind(e)),this.coverage=e.coverage?e.coverage():null,this.selectors=t.selectors()}async initOpener(e){if(!e)return;let t=await e.pageOrError();t instanceof Pt&&!t.isClosed()&&(this._opener=t)}reportAsNew(e){if(e){if(this._browserContext.isClosingOrClosed())return;this._setIsError(e)}this._initialized=!0,this._browserContext.emit(_N.BrowserContext.Events.Page,this),this.isClosed()&&this.emit(Pt.Events.Close)}initializedOrUndefined(){return this._initialized?this:void 0}async _doSlowMo(){let e=this._browserContext._browser.options.slowMo;!e||await new Promise(t=>setTimeout(t,e))}_didClose(){this._frameManager.dispose(),(0,ra.assert)(this._closedState!=="closed","Page closed twice"),this._closedState="closed",this.emit(Pt.Events.Close),this._closedPromise.resolve()}_didCrash(){this._frameManager.dispose(),this.emit(Pt.Events.Crash),this._crashedPromise.resolve(new Error("Page crashed"))}_didDisconnect(){this._frameManager.dispose(),(0,ra.assert)(!this._disconnected,"Page disconnected twice"),this._disconnected=!0,this._disconnectedPromise.resolve(new Error("Page closed"))}async _onFileChooserOpened(e){let t;try{t=await e.evaluate(n=>!!n.multiple)}catch(n){return}if(!this.listenerCount(Pt.Events.FileChooser)){e.dispose();return}let i=new vN.FileChooser(this,e,t);this.emit(Pt.Events.FileChooser,i)}context(){return this._browserContext}opener(){return this._opener}mainFrame(){return this._frameManager.mainFrame()}frames(){return this._frameManager.frames()}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async exposeBinding(e,t,i){if(this._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered`);if(this._browserContext._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered in the browser context`);let n=new gl(e,i,t);this._pageBindings.set(e,n),await this._delegate.exposeBinding(n)}setExtraHTTPHeaders(e){return this._state.extraHTTPHeaders=e,this._delegate.updateExtraHTTPHeaders()}async _onBindingCalled(e,t){this._disconnected||this._closedState==="closed"||await gl.dispatch(this,e,t)}_addConsoleMessage(e,t,i,n){let s=new gN.ConsoleMessage(this,e,n,t,i);this._frameManager.interceptConsoleMessage(s)||!this.listenerCount(Pt.Events.Console)?t.forEach(c=>c.dispose()):this.emit(Pt.Events.Console,s)}async reload(e,t){return new _l.ProgressController(e,this).run(n=>this.mainFrame().raceNavigationAction(async()=>{let[s]=await Promise.all([this.mainFrame()._waitForNavigation(n,t),this._delegate.reload()]);return await this._doSlowMo(),s}),this._timeoutSettings.navigationTimeout(t))}async goBack(e,t){return new _l.ProgressController(e,this).run(n=>this.mainFrame().raceNavigationAction(async()=>{let s,o=this.mainFrame()._waitForNavigation(n,t).catch(u=>(s=u,null));if(!await this._delegate.goBack())return null;let l=await o;if(s)throw s;return await this._doSlowMo(),l}),this._timeoutSettings.navigationTimeout(t))}async goForward(e,t){return new _l.ProgressController(e,this).run(n=>this.mainFrame().raceNavigationAction(async()=>{let s,o=this.mainFrame()._waitForNavigation(n,t).catch(u=>(s=u,null));if(!await this._delegate.goForward())return null;let l=await o;if(s)throw s;return await this._doSlowMo(),l}),this._timeoutSettings.navigationTimeout(t))}async emulateMedia(e){e.media!==void 0&&(this._state.mediaType=e.media),e.colorScheme!==void 0&&(this._state.colorScheme=e.colorScheme),e.reducedMotion!==void 0&&(this._state.reducedMotion=e.reducedMotion),e.forcedColors!==void 0&&(this._state.forcedColors=e.forcedColors),await this._delegate.updateEmulateMedia(),await this._doSlowMo()}async setViewportSize(e){this._state.emulatedSize={viewport:{...e},screen:{...e}},await this._delegate.setEmulatedSize(this._state.emulatedSize),await this._doSlowMo()}viewportSize(){var e;return((e=this._state.emulatedSize)===null||e===void 0?void 0:e.viewport)||null}async bringToFront(){await this._delegate.bringToFront()}async _addInitScriptExpression(e){this._evaluateOnNewDocumentSources.push(e),await this._delegate.evaluateOnNewDocument(e)}_needsRequestInterception(){return!!this._clientRequestInterceptor||!!this._serverRequestInterceptor||!!this._browserContext._requestInterceptor}async _setClientRequestInterceptor(e){this._clientRequestInterceptor=e,await this._delegate.updateRequestInterception()}async _setServerRequestInterceptor(e){this._serverRequestInterceptor=e,await this._delegate.updateRequestInterception()}_requestStarted(e,t){let i=new U0.Route(e,t);if(this._serverRequestInterceptor){this._serverRequestInterceptor(i,e);return}if(this._clientRequestInterceptor){this._clientRequestInterceptor(i,e);return}if(this._browserContext._requestInterceptor){this._browserContext._requestInterceptor(i,e);return}i.continue()}async screenshot(e,t={}){return new _l.ProgressController(e,this).run(n=>this._screenshotter.screenshotPage(n,t),this._timeoutSettings.timeout(t))}async close(e,t){if(this._closedState==="closed")return;let i=!!t&&!!t.runBeforeUnload;this._closedState!=="closing"&&(this._closedState="closing",(0,ra.assert)(!this._disconnected,"Target closed"),await this._delegate.closePage(i).catch(n=>ia.debugLogger.log("error",n))),i||await this._closedPromise,this._ownedContext&&await this._ownedContext.close(e)}_setIsError(e){this._pageIsError=e,this._frameManager.mainFrame()||this._frameManager.frameAttached("<dummy>",null)}isClosed(){return this._closedState==="closed"}_addWorker(e,t){this._workers.set(e,t),this.emit(Pt.Events.Worker,t)}_removeWorker(e){let t=this._workers.get(e);!t||(t.emit(sa.Events.Close,t),this._workers.delete(e))}_clearWorkers(){for(let[e,t]of this._workers)t.emit(sa.Events.Close,t),this._workers.delete(e)}async _setFileChooserIntercepted(e){await this._delegate.setFileChooserIntercepted(e)}frameNavigatedToNewDocument(e){this.emit(Pt.Events.InternalFrameNavigatedToNewDocument,e);let t=e.url();if(!t.startsWith("http"))return;let i=U0.parsedURL(t);i&&this._browserContext.addVisitedOrigin(i.origin)}allBindings(){return[...this._browserContext._pageBindings.values(),...this._pageBindings.values()]}getBinding(e){return this._pageBindings.get(e)||this._browserContext._pageBindings.get(e)}setScreencastOptions(e){this._delegate.setScreencastOptions(e).catch(t=>ia.debugLogger.log("error",t))}firePageError(e){this.emit(Pt.Events.PageError,e)}parseSelector(e,t){let i=typeof(t==null?void 0:t.strict)=="boolean"?t.strict:!!this.context()._options.strictSelectors;return this.selectors.parseSelector(e,i)}};pi.Page=Pt;Pt.Events={Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",FrameAttached:"frameattached",FrameDetached:"framedetached",InternalFrameNavigatedToNewDocument:"internalframenavigatedtonewdocument",Load:"load",ScreencastFrame:"screencastframe",Video:"video",WebSocket:"websocket",Worker:"worker"};var sa=class extends V0.SdkObject{constructor(e,t){super(e,"worker");this._url=void 0,this._executionContextPromise=void 0,this._executionContextCallback=void 0,this._existingExecutionContext=null,this._url=t,this._executionContextCallback=()=>{},this._executionContextPromise=new Promise(i=>this._executionContextCallback=i)}_createExecutionContext(e){this._existingExecutionContext=new cf.ExecutionContext(this,e),this._executionContextCallback(this._existingExecutionContext)}url(){return this._url}async evaluateExpression(e,t,i){return cf.evaluateExpression(await this._executionContextPromise,!0,e,t,i)}async evaluateExpressionHandle(e,t,i){return cf.evaluateExpression(await this._executionContextPromise,!1,e,t,i)}};pi.Worker=sa;sa.Events={Close:"close"};var gl=class{constructor(e,t,i){this.name=void 0,this.playwrightFunction=void 0,this.source=void 0,this.needsHandle=void 0,this.name=e,this.playwrightFunction=t,this.source=`(${yN.toString()})(${JSON.stringify(e)}, ${i})`,this.needsHandle=i}static async dispatch(e,t,i){let{name:n,seq:s,args:o}=JSON.parse(t);try{(0,ra.assert)(i.world);let h=e.getBinding(n),p;if(h.needsHandle){let f=await i.evaluateHandle(c,{name:n,seq:s}).catch(_=>null);p=await h.playwrightFunction({frame:i.frame,page:e,context:e._browserContext},f)}else p=await h.playwrightFunction({frame:i.frame,page:e,context:e._browserContext},...o);i.evaluate(l,{name:n,seq:s,result:p}).catch(f=>ia.debugLogger.log("error",f))}catch(h){(0,ra.isError)(h)?i.evaluate(u,{name:n,seq:s,message:h.message,stack:h.stack}).catch(p=>ia.debugLogger.log("error",p)):i.evaluate(d,{name:n,seq:s,error:h}).catch(p=>ia.debugLogger.log("error",p))}function c(h){let p=globalThis[h.name].handles.get(h.seq);return globalThis[h.name].handles.delete(h.seq),p}function l(h){globalThis[h.name].callbacks.get(h.seq).resolve(h.result),globalThis[h.name].callbacks.delete(h.seq)}function u(h){let p=new Error(h.message);p.stack=h.stack,globalThis[h.name].callbacks.get(h.seq).reject(p),globalThis[h.name].callbacks.delete(h.seq)}function d(h){globalThis[h.name].callbacks.get(h.seq).reject(h.error),globalThis[h.name].callbacks.delete(h.seq)}}};pi.PageBinding=gl;function yN(r,e){let t=globalThis[r];t.__installed||(globalThis[r]=(...i)=>{let n=globalThis[r];if(e&&i.slice(1).some(u=>u!==void 0))throw new Error(`exposeBindingHandle supports a single argument, ${i.length} received`);let s=n.callbacks;s||(s=new Map,n.callbacks=s);let o=(n.lastSeq||0)+1;n.lastSeq=o;let c=n.handles;c||(c=new Map,n.handles=c);let l=new Promise((u,d)=>s.set(o,{resolve:u,reject:d}));return e?(c.set(o,i[0]),t(JSON.stringify({name:r,seq:o}))):t(JSON.stringify({name:r,seq:o,args:i})),l},globalThis[r].__installed=!0)}});var uf=w(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.pausesBeforeInputActions=fs.commandsWithTracingSnapshots=void 0;var bN=new Set(["EventTarget.waitForEventInfo","BrowserContext.waitForEventInfo","Page.waitForEventInfo","WebSocket.waitForEventInfo","ElectronApplication.waitForEventInfo","AndroidDevice.waitForEventInfo","Page.goBack","Page.goForward","Page.reload","Page.setViewportSize","Page.keyboardDown","Page.keyboardUp","Page.keyboardInsertText","Page.keyboardType","Page.keyboardPress","Page.mouseMove","Page.mouseDown","Page.mouseUp","Page.mouseClick","Page.mouseWheel","Page.touchscreenTap","Frame.evalOnSelector","Frame.evalOnSelectorAll","Frame.addScriptTag","Frame.addStyleTag","Frame.check","Frame.click","Frame.dragAndDrop","Frame.dblclick","Frame.dispatchEvent","Frame.evaluateExpression","Frame.evaluateExpressionHandle","Frame.fill","Frame.focus","Frame.getAttribute","Frame.goto","Frame.hover","Frame.innerHTML","Frame.innerText","Frame.inputValue","Frame.isChecked","Frame.isDisabled","Frame.isEnabled","Frame.isHidden","Frame.isVisible","Frame.isEditable","Frame.press","Frame.selectOption","Frame.setContent","Frame.setInputFiles","Frame.tap","Frame.textContent","Frame.type","Frame.uncheck","Frame.waitForFunction","Frame.waitForSelector","JSHandle.evaluateExpression","ElementHandle.evaluateExpression","JSHandle.evaluateExpressionHandle","ElementHandle.evaluateExpressionHandle","ElementHandle.evalOnSelector","ElementHandle.evalOnSelectorAll","ElementHandle.check","ElementHandle.click","ElementHandle.dblclick","ElementHandle.dispatchEvent","ElementHandle.fill","ElementHandle.hover","ElementHandle.innerHTML","ElementHandle.innerText","ElementHandle.inputValue","ElementHandle.isChecked","ElementHandle.isDisabled","ElementHandle.isEditable","ElementHandle.isEnabled","ElementHandle.isHidden","ElementHandle.isVisible","ElementHandle.press","ElementHandle.scrollIntoViewIfNeeded","ElementHandle.selectOption","ElementHandle.selectText","ElementHandle.setInputFiles","ElementHandle.tap","ElementHandle.textContent","ElementHandle.type","ElementHandle.uncheck","ElementHandle.waitForElementState","ElementHandle.waitForSelector"]);fs.commandsWithTracingSnapshots=bN;var xN=new Set(["Frame.check","Frame.click","Frame.dragAndDrop","Frame.dblclick","Frame.fill","Frame.hover","Frame.press","Frame.selectOption","Frame.setInputFiles","Frame.tap","Frame.type","Frame.uncheck","ElementHandle.check","ElementHandle.click","ElementHandle.dblclick","ElementHandle.fill","ElementHandle.hover","ElementHandle.press","ElementHandle.selectOption","ElementHandle.setInputFiles","ElementHandle.tap","ElementHandle.type","ElementHandle.uncheck"]);fs.pausesBeforeInputActions=xN});var df=w(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.Debugger=void 0;var SN=require("events"),wl=H(),EN=ze(),K0=uf(),J0=Symbol("Debugger"),ms=class extends SN.EventEmitter{constructor(e){super();this._pauseOnNextStatement=!1,this._pausedCallsMetadata=new Map,this._enabled=void 0,this._context=void 0,this._muted=!1,this._context=e,this._context[J0]=this,this._enabled=(0,wl.debugMode)()==="inspector",this._enabled&&this.pauseOnNextStatement()}static lookup(e){if(!!e)return e[J0]}async setMuted(e){this._muted=e}async onBeforeCall(e,t){this._muted||(CN(e,t)||this._pauseOnNextStatement&&kN(t))&&await this.pause(e,t)}async onBeforeInputAction(e,t){this._muted||this._enabled&&this._pauseOnNextStatement&&await this.pause(e,t)}async onCallLog(e,t,i,n){EN.debugLogger.log(e,t)}async pause(e,t){if(this._muted)return;this._enabled=!0,t.pauseStartTime=(0,wl.monotonicTime)();let i=new Promise(n=>{this._pausedCallsMetadata.set(t,{resolve:n,sdkObject:e})});return this.emit(ms.Events.PausedStateChanged),i}resume(e){this._pauseOnNextStatement=e;let t=(0,wl.monotonicTime)();for(let[i,{resolve:n}]of this._pausedCallsMetadata)i.pauseEndTime=t,n();this._pausedCallsMetadata.clear(),this.emit(ms.Events.PausedStateChanged)}pauseOnNextStatement(){this._pauseOnNextStatement=!0}isPaused(e){return e?this._pausedCallsMetadata.has(e):!!this._pausedCallsMetadata.size}pausedDetails(){let e=[];for(let[t,{sdkObject:i}]of this._pausedCallsMetadata)e.push({metadata:t,sdkObject:i});return e}};vl.Debugger=ms;ms.Events={PausedStateChanged:"pausedstatechanged"};function CN(r,e){var t;return!((t=r.attribution.browser)!==null&&t!==void 0&&t.options.headful)&&!(0,wl.isUnderTest)()?!1:e.method==="pause"}function kN(r){if(r.method==="close")return!0;if(r.method==="waitForSelector"||r.method==="waitForEventInfo")return!1;let e=r.type+"."+r.method;return K0.commandsWithTracingSnapshots.has(e)&&!K0.pausesBeforeInputActions.has(r.type+"."+r.method)}});var mf=w((QU,Y0)=>{var fi=require("buffer").Buffer,hf=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array!="undefined"&&(hf=new Int32Array(hf));function X0(r){if(fi.isBuffer(r))return r;var e=typeof fi.alloc=="function"&&typeof fi.from=="function";if(typeof r=="number")return e?fi.alloc(r):new fi(r);if(typeof r=="string")return e?fi.from(r):new fi(r);throw new Error("input must be buffer, number, or string, received "+typeof r)}function PN(r){var e=X0(4);return e.writeInt32BE(r,0),e}function pf(r,e){r=X0(r),fi.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,i=0;i<r.length;i++)t=hf[(t^r[i])&255]^t>>>8;return t^-1}function ff(){return PN(pf.apply(null,arguments))}ff.signed=function(){return pf.apply(null,arguments)};ff.unsigned=function(){return pf.apply(null,arguments)>>>0};Y0.exports=ff});var pb=w(bf=>{var Q0=require("fs"),yl=require("stream").Transform,Z0=require("stream").PassThrough,eb=require("zlib"),_f=require("util"),ON=require("events").EventEmitter,tb=mf();bf.ZipFile=pn;bf.dateToDosDateTime=hb;_f.inherits(pn,ON);function pn(){this.outputStream=new Z0,this.entries=[],this.outputStreamCursor=0,this.ended=!1,this.allDone=!1,this.forceZip64Eocd=!1}pn.prototype.addFile=function(r,e,t){var i=this;e=Sl(e,!1),t==null&&(t={});var n=new Ie(e,!1,t);i.entries.push(n),Q0.stat(r,function(s,o){if(s)return i.emit("error",s);if(!o.isFile())return i.emit("error",new Error("not a file: "+r));n.uncompressedSize=o.size,t.mtime==null&&n.setLastModDate(o.mtime),t.mode==null&&n.setFileAttributesMode(o.mode),n.setFileDataPumpFunction(function(){var c=Q0.createReadStream(r);n.state=Ie.FILE_DATA_IN_PROGRESS,c.on("error",function(l){i.emit("error",l)}),rb(i,n,c)}),mi(i)})};pn.prototype.addReadStream=function(r,e,t){var i=this;e=Sl(e,!1),t==null&&(t={});var n=new Ie(e,!1,t);i.entries.push(n),n.setFileDataPumpFunction(function(){n.state=Ie.FILE_DATA_IN_PROGRESS,rb(i,n,r)}),mi(i)};pn.prototype.addBuffer=function(r,e,t){var i=this;if(e=Sl(e,!1),r.length>1073741823)throw new Error("buffer too large: "+r.length+" > "+1073741823);if(t==null&&(t={}),t.size!=null)throw new Error("options.size not allowed");var n=new Ie(e,!1,t);n.uncompressedSize=r.length,n.crc32=tb.unsigned(r),n.crcAndFileSizeKnown=!0,i.entries.push(n),n.compress?eb.deflateRaw(r,function(o,c){s(c)}):s(r);function s(o){n.compressedSize=o.length,n.setFileDataPumpFunction(function(){fn(i,o),fn(i,n.getDataDescriptor()),n.state=Ie.FILE_DATA_DONE,setImmediate(function(){mi(i)})}),mi(i)}};pn.prototype.addEmptyDirectory=function(r,e){var t=this;if(r=Sl(r,!0),e==null&&(e={}),e.size!=null)throw new Error("options.size not allowed");if(e.compress!=null)throw new Error("options.compress not allowed");var i=new Ie(r,!0,e);t.entries.push(i),i.setFileDataPumpFunction(function(){fn(t,i.getDataDescriptor()),i.state=Ie.FILE_DATA_DONE,mi(t)}),mi(t)};var TN=_i([80,75,5,6]);pn.prototype.end=function(r,e){if(typeof r=="function"&&(e=r,r=null),r==null&&(r={}),!this.ended){if(this.ended=!0,this.finalSizeCallback=e,this.forceZip64Eocd=!!r.forceZip64Format,r.comment){if(typeof r.comment=="string"?this.comment=IN(r.comment):this.comment=r.comment,this.comment.length>65535)throw new Error("comment is too large");if(oa(this.comment,TN))throw new Error("comment contains end of central directory record signature")}else this.comment=El;mi(this)}};function fn(r,e){r.outputStream.write(e),r.outputStreamCursor+=e.length}function rb(r,e,t){var i=new vf,n=new Cl,s=e.compress?new eb.DeflateRaw:new Z0,o=new Cl;t.pipe(i).pipe(n).pipe(s).pipe(o).pipe(r.outputStream,{end:!1}),o.on("end",function(){if(e.crc32=i.crc32,e.uncompressedSize==null)e.uncompressedSize=n.byteCount;else if(e.uncompressedSize!==n.byteCount)return r.emit("error",new Error("file data stream has unexpected number of bytes"));e.compressedSize=o.byteCount,r.outputStreamCursor+=e.compressedSize,fn(r,e.getDataDescriptor()),e.state=Ie.FILE_DATA_DONE,mi(r)})}function mi(r){if(r.allDone)return;if(r.ended&&r.finalSizeCallback!=null){var e=AN(r);e!=null&&(r.finalSizeCallback(e),r.finalSizeCallback=null)}var t=i();function i(){for(var s=0;s<r.entries.length;s++){var o=r.entries[s];if(o.state<Ie.FILE_DATA_DONE)return o}return null}if(t!=null){if(t.state<Ie.READY_TO_PUMP_FILE_DATA||t.state===Ie.FILE_DATA_IN_PROGRESS)return;t.relativeOffsetOfLocalHeader=r.outputStreamCursor;var n=t.getLocalFileHeader();fn(r,n),t.doFileDataPump()}else r.ended&&(r.offsetOfStartOfCentralDirectory=r.outputStreamCursor,r.entries.forEach(function(s){var o=s.getCentralDirectoryRecord();fn(r,o)}),fn(r,MN(r)),r.outputStream.end(),r.allDone=!0)}function AN(r){for(var e=0,t=0,i=0;i<r.entries.length;i++){var n=r.entries[i];if(n.compress)return-1;if(n.state>=Ie.READY_TO_PUMP_FILE_DATA){if(n.uncompressedSize==null)return-1}else if(n.uncompressedSize==null)return null;n.relativeOffsetOfLocalHeader=e;var s=n.useZip64Format();e+=ib+n.utf8FileName.length,e+=n.uncompressedSize,n.crcAndFileSizeKnown||(s?e+=ub:e+=lb),t+=db+n.utf8FileName.length+n.fileComment.length,s&&(t+=wf)}var o=0;return(r.forceZip64Eocd||r.entries.length>=65535||t>=65535||e>=4294967295)&&(o+=bl+gf),o+=xl+r.comment.length,e+t+o}var bl=56,gf=20,xl=22;function MN(r,e){var t=!1,i=r.entries.length;(r.forceZip64Eocd||r.entries.length>=65535)&&(i=65535,t=!0);var n=r.outputStreamCursor-r.offsetOfStartOfCentralDirectory,s=n;(r.forceZip64Eocd||n>=4294967295)&&(s=4294967295,t=!0);var o=r.offsetOfStartOfCentralDirectory;if((r.forceZip64Eocd||r.offsetOfStartOfCentralDirectory>=4294967295)&&(o=4294967295,t=!0),e)return t?bl+gf+xl:xl;var c=Nt(xl+r.comment.length);if(c.writeUInt32LE(101010256,0),c.writeUInt16LE(0,4),c.writeUInt16LE(0,6),c.writeUInt16LE(i,8),c.writeUInt16LE(i,10),c.writeUInt32LE(s,12),c.writeUInt32LE(o,16),c.writeUInt16LE(r.comment.length,20),r.comment.copy(c,22),!t)return c;var l=Nt(bl);l.writeUInt32LE(101075792,0),nr(l,bl-12,4),l.writeUInt16LE(ob,12),l.writeUInt16LE(sb,14),l.writeUInt32LE(0,16),l.writeUInt32LE(0,20),nr(l,r.entries.length,24),nr(l,r.entries.length,32),nr(l,n,40),nr(l,r.offsetOfStartOfCentralDirectory,48);var u=Nt(gf);return u.writeUInt32LE(117853008,0),u.writeUInt32LE(0,4),nr(u,r.outputStreamCursor,8),u.writeUInt32LE(1,16),Buffer.concat([l,u,c])}function Sl(r,e){if(r==="")throw new Error("empty metadataPath");if(r=r.replace(/\\/g,"/"),/^[a-zA-Z]:/.test(r)||/^\//.test(r))throw new Error("absolute path: "+r);if(r.split("/").indexOf("..")!==-1)throw new Error("invalid relative path: "+r);var t=/\/$/.test(r);if(e)t||(r+="/");else if(t)throw new Error("file path cannot end with '/': "+r);return r}var El=Nt(0);function Ie(r,e,t){if(this.utf8FileName=_i(r),this.utf8FileName.length>65535)throw new Error("utf8 file name too long. "+utf8FileName.length+" > "+65535);if(this.isDirectory=e,this.state=Ie.WAITING_FOR_METADATA,this.setLastModDate(t.mtime!=null?t.mtime:new Date),t.mode!=null?this.setFileAttributesMode(t.mode):this.setFileAttributesMode(e?16893:33204),e?(this.crcAndFileSizeKnown=!0,this.crc32=0,this.uncompressedSize=0,this.compressedSize=0):(this.crcAndFileSizeKnown=!1,this.crc32=null,this.uncompressedSize=null,this.compressedSize=null,t.size!=null&&(this.uncompressedSize=t.size)),e?this.compress=!1:(this.compress=!0,t.compress!=null&&(this.compress=!!t.compress)),this.forceZip64Format=!!t.forceZip64Format,t.fileComment){if(typeof t.fileComment=="string"?this.fileComment=_i(t.fileComment,"utf-8"):this.fileComment=t.fileComment,this.fileComment.length>65535)throw new Error("fileComment is too large")}else this.fileComment=El}Ie.WAITING_FOR_METADATA=0;Ie.READY_TO_PUMP_FILE_DATA=1;Ie.FILE_DATA_IN_PROGRESS=2;Ie.FILE_DATA_DONE=3;Ie.prototype.setLastModDate=function(r){var e=hb(r);this.lastModFileTime=e.time,this.lastModFileDate=e.date};Ie.prototype.setFileAttributesMode=function(r){if((r&65535)!==r)throw new Error("invalid mode. expected: 0 <= "+r+" <= "+65535);this.externalFileAttributes=r<<16>>>0};Ie.prototype.setFileDataPumpFunction=function(r){this.doFileDataPump=r,this.state=Ie.READY_TO_PUMP_FILE_DATA};Ie.prototype.useZip64Format=function(){return this.forceZip64Format||this.uncompressedSize!=null&&this.uncompressedSize>4294967294||this.compressedSize!=null&&this.compressedSize>4294967294||this.relativeOffsetOfLocalHeader!=null&&this.relativeOffsetOfLocalHeader>4294967294};var ib=30,nb=20,sb=45,ob=3<<8|63,ab=1<<11,cb=1<<3;Ie.prototype.getLocalFileHeader=function(){var r=0,e=0,t=0;this.crcAndFileSizeKnown&&(r=this.crc32,e=this.compressedSize,t=this.uncompressedSize);var i=Nt(ib),n=ab;return this.crcAndFileSizeKnown||(n|=cb),i.writeUInt32LE(67324752,0),i.writeUInt16LE(nb,4),i.writeUInt16LE(n,6),i.writeUInt16LE(this.getCompressionMethod(),8),i.writeUInt16LE(this.lastModFileTime,10),i.writeUInt16LE(this.lastModFileDate,12),i.writeUInt32LE(r,14),i.writeUInt32LE(e,18),i.writeUInt32LE(t,22),i.writeUInt16LE(this.utf8FileName.length,26),i.writeUInt16LE(0,28),Buffer.concat([i,this.utf8FileName])};var lb=16,ub=24;Ie.prototype.getDataDescriptor=function(){if(this.crcAndFileSizeKnown)return El;if(this.useZip64Format()){var r=Nt(ub);return r.writeUInt32LE(134695760,0),r.writeUInt32LE(this.crc32,4),nr(r,this.compressedSize,8),nr(r,this.uncompressedSize,16),r}else{var r=Nt(lb);return r.writeUInt32LE(134695760,0),r.writeUInt32LE(this.crc32,4),r.writeUInt32LE(this.compressedSize,8),r.writeUInt32LE(this.uncompressedSize,12),r}};var db=46,wf=28;Ie.prototype.getCentralDirectoryRecord=function(){var r=Nt(db),e=ab;this.crcAndFileSizeKnown||(e|=cb);var t=this.compressedSize,i=this.uncompressedSize,n=this.relativeOffsetOfLocalHeader,s,o;return this.useZip64Format()?(t=4294967295,i=4294967295,n=4294967295,s=sb,o=Nt(wf),o.writeUInt16LE(1,0),o.writeUInt16LE(wf-4,2),nr(o,this.uncompressedSize,4),nr(o,this.compressedSize,12),nr(o,this.relativeOffsetOfLocalHeader,20)):(s=nb,o=El),r.writeUInt32LE(33639248,0),r.writeUInt16LE(ob,4),r.writeUInt16LE(s,6),r.writeUInt16LE(e,8),r.writeUInt16LE(this.getCompressionMethod(),10),r.writeUInt16LE(this.lastModFileTime,12),r.writeUInt16LE(this.lastModFileDate,14),r.writeUInt32LE(this.crc32,16),r.writeUInt32LE(t,20),r.writeUInt32LE(i,24),r.writeUInt16LE(this.utf8FileName.length,28),r.writeUInt16LE(o.length,30),r.writeUInt16LE(this.fileComment.length,32),r.writeUInt16LE(0,34),r.writeUInt16LE(0,36),r.writeUInt32LE(this.externalFileAttributes,38),r.writeUInt32LE(n,42),Buffer.concat([r,this.utf8FileName,o,this.fileComment])};Ie.prototype.getCompressionMethod=function(){var r=0,e=8;return this.compress?e:r};function hb(r){var e=0;e|=r.getDate()&31,e|=(r.getMonth()+1&15)<<5,e|=(r.getFullYear()-1980&127)<<9;var t=0;return t|=Math.floor(r.getSeconds()/2),t|=(r.getMinutes()&63)<<5,t|=(r.getHours()&31)<<11,{date:e,time:t}}function nr(r,e,t){var i=Math.floor(e/4294967296),n=e%4294967296;r.writeUInt32LE(n,t),r.writeUInt32LE(i,t+4)}_f.inherits(Cl,yl);function Cl(r){yl.call(this,r),this.byteCount=0}Cl.prototype._transform=function(r,e,t){this.byteCount+=r.length,t(null,r)};_f.inherits(vf,yl);function vf(r){yl.call(this,r),this.crc32=0}vf.prototype._transform=function(r,e,t){this.crc32=tb.unsigned(r,this.crc32),t(null,r)};var yf="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";if(yf.length!==256)throw new Error("assertion failure");var kl=null;function IN(r){if(/^[\x20-\x7e]*$/.test(r))return _i(r,"utf-8");if(kl==null){kl={};for(var e=0;e<yf.length;e++)kl[yf[e]]=e}for(var t=Nt(r.length),e=0;e<r.length;e++){var i=kl[r[e]];if(i==null)throw new Error("character not encodable in CP437: "+JSON.stringify(r[e]));t[e]=i}return t}function Nt(r){Nt=e;try{return Nt(r)}catch(i){return Nt=t,Nt(r)}function e(i){return Buffer.allocUnsafe(i)}function t(i){return new Buffer(i)}}function _i(r,e){_i=t;try{return _i(r,e)}catch(n){return _i=i,_i(r,e)}function t(n,s){return Buffer.from(n,s)}function i(n,s){return new Buffer(n,s)}}function oa(r,e){oa=t;try{return oa(r,e)}catch(n){return oa=i,oa(r,e)}function t(n,s){return n.includes(s)}function i(n,s){for(var o=0;o<=n.length-s.length;o++)for(var c=0;;c++){if(c===s.length)return!0;if(n[o+c]!==s[c])break}return!1}}});var aa=w(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.Artifact=void 0;var fb=NN(require("fs")),FN=H(),DN=zt(),RN=Qe();function NN(r){return r&&r.__esModule?r:{default:r}}var mb=class extends RN.SdkObject{constructor(e,t,i,n){super(e,"artifact");this._localPath=void 0,this._unaccessibleErrorMessage=void 0,this._cancelCallback=void 0,this._finishedPromise=new DN.ManualPromise,this._saveCallbacks=[],this._finished=!1,this._deleted=!1,this._failureError=null,this._localPath=t,this._unaccessibleErrorMessage=i,this._cancelCallback=n}finishedPromise(){return this._finishedPromise}localPath(){return this._localPath}async localPathAfterFinished(){if(this._unaccessibleErrorMessage)throw new Error(this._unaccessibleErrorMessage);return await this._finishedPromise,this._failureError?null:this._localPath}saveAs(e){if(this._unaccessibleErrorMessage)throw new Error(this._unaccessibleErrorMessage);if(this._deleted)throw new Error("File already deleted. Save before deleting.");if(this._failureError)throw new Error("File not found on disk. Check download.failure() for details.");if(this._finished){e(this._localPath).catch(t=>{});return}this._saveCallbacks.push(e)}async failureError(){return this._unaccessibleErrorMessage?this._unaccessibleErrorMessage:(await this._finishedPromise,this._failureError)}async cancel(){return(0,FN.assert)(this._cancelCallback!==void 0),this._cancelCallback()}async delete(){if(this._unaccessibleErrorMessage)return;let e=await this.localPathAfterFinished();this._deleted||(this._deleted=!0,e&&await fb.default.promises.unlink(e).catch(t=>{}))}async deleteOnContextClose(){this._deleted||(this._deleted=!0,this._unaccessibleErrorMessage||await fb.default.promises.unlink(this._localPath).catch(e=>{}),await this.reportFinished("File deleted upon browser context closure."))}async reportFinished(e){if(!this._finished){if(this._finished=!0,this._failureError=e||null,e)for(let t of this._saveCallbacks)await t("",e);else for(let t of this._saveCallbacks)await t(this._localPath);this._saveCallbacks=[],this._finishedPromise.resolve()}}};Pl.Artifact=mb});var _b=w(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.frameSnapshotStreamer=qN;function qN(r){if(window[r])return;let e="__playwright_shadow_root_",t="__playwright_scroll_top_",i="__playwright_scroll_left_",n="__playwright_style_sheet_",s="http://playwright.bloburl/#",o=Symbol("__playwright_snapshot_frameid_"),c=Symbol("__playwright_snapshot_cache_"),l=Symbol("__playwright_end_of_list_");function u(f){delete f[c]}function d(f){return f[c]||(f[c]={}),f[c]}function h(f){try{let _=new URL(f);return _.hash="",_.toString()}catch(_){return f}}class p{constructor(){this._removeNoScript=!0,this._lastSnapshotNumber=0,this._staleStyleSheets=new Set,this._readingStyleSheet=!1,this._fakeBase=void 0,this._observer=void 0,this._interceptNativeMethod(window.CSSStyleSheet.prototype,"insertRule",m=>this._invalidateStyleSheet(m)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"deleteRule",m=>this._invalidateStyleSheet(m)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"addRule",m=>this._invalidateStyleSheet(m)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"removeRule",m=>this._invalidateStyleSheet(m)),this._interceptNativeGetter(window.CSSStyleSheet.prototype,"rules",m=>this._invalidateStyleSheet(m)),this._interceptNativeGetter(window.CSSStyleSheet.prototype,"cssRules",m=>this._invalidateStyleSheet(m)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"replaceSync",m=>this._invalidateStyleSheet(m)),this._interceptNativeAsyncMethod(window.CSSStyleSheet.prototype,"replace",m=>this._invalidateStyleSheet(m)),this._fakeBase=document.createElement("base"),this._observer=new MutationObserver(m=>this._handleMutations(m));let _={attributes:!0,subtree:!0};this._observer.observe(document,_)}_interceptNativeMethod(_,m,g){let v=_[m];!v||(_[m]=function(...x){let b=v.call(this,...x);return g(this,b),b})}_interceptNativeAsyncMethod(_,m,g){let v=_[m];!v||(_[m]=async function(...x){let b=await v.call(this,...x);return g(this,b),b})}_interceptNativeGetter(_,m,g){let v=Object.getOwnPropertyDescriptor(_,m);Object.defineProperty(_,m,{...v,get:function(){let x=v.get.call(this);return g(this,x),x}})}_handleMutations(_){for(let m of _)d(m.target).attributesCached=void 0}_invalidateStyleSheet(_){this._readingStyleSheet||this._staleStyleSheets.add(_)}_updateStyleElementStyleSheetTextIfNeeded(_){let m=d(_);if(this._staleStyleSheets.has(_)){this._staleStyleSheets.delete(_);try{m.cssText=this._getSheetText(_)}catch(g){}}return m.cssText}_updateLinkStyleSheetTextIfNeeded(_,m){let g=d(_);if(this._staleStyleSheets.has(_)){this._staleStyleSheets.delete(_);try{return g.cssText=this._getSheetText(_),g.cssRef=m,g.cssText}catch(v){}}return g.cssRef===void 0?void 0:m-g.cssRef}markIframe(_,m){_[o]=m}reset(){this._staleStyleSheets.clear();let _=m=>{if(u(m),m.nodeType===Node.ELEMENT_NODE){let g=m;g.shadowRoot&&_(g.shadowRoot)}for(let g=m.firstChild;g;g=g.nextSibling)_(g)};_(document.documentElement),_(this._fakeBase)}_sanitizeUrl(_){return _.startsWith("javascript:")?"":_.startsWith("blob:")?s+_:_}_sanitizeSrcSet(_){return _.split(",").map(m=>{m=m.trim();let g=m.lastIndexOf(" ");return g===-1?this._sanitizeUrl(m):this._sanitizeUrl(m.substring(0,g).trim())+m.substring(g)}).join(", ")}_resolveUrl(_,m){if(m==="")return"";try{return new URL(m,_).href}catch(g){return m}}_getSheetBase(_){let m=_;for(;m.parentStyleSheet;)m=m.parentStyleSheet;return m.ownerNode?m.ownerNode.baseURI:document.baseURI}_getSheetText(_){this._readingStyleSheet=!0;try{let m=[];for(let g of _.cssRules)m.push(g.cssText);return m.join(`
`)}finally{this._readingStyleSheet=!1}}captureSnapshot(){let _=performance.now(),m=++this._lastSnapshotNumber,g=0,v=0;this._handleMutations(this._observer.takeRecords());let x=F=>{let y=F.nodeType,C=y===Node.DOCUMENT_FRAGMENT_NODE?"template":F.nodeName;if(y!==Node.ELEMENT_NODE&&y!==Node.DOCUMENT_FRAGMENT_NODE&&y!==Node.TEXT_NODE||C==="SCRIPT"||this._removeNoScript&&C==="NOSCRIPT"||C==="META"&&F.httpEquiv.toLowerCase()==="content-security-policy")return;let A=d(F),D=[],W=!!A.cached,V=0,M=R=>{W=W&&A.cached[D.length]===R,D.push(R)},K=R=>(A.attributesCached=!0,W?{equals:!0,n:[[m-A.ref[0],A.ref[1]]]}:(g+=V,A.ref=[m,g++],A.cached=D,{equals:!1,n:R}));if(y===Node.TEXT_NODE){let R=F.nodeValue||"";return M(R),K(R)}if(C==="STYLE"){let R=F.sheet,J;return R&&(J=this._updateStyleElementStyleSheetTextIfNeeded(R)),J=J||F.textContent||"",M(J),V++,K(["style",{},J])}let N={},L=[C,N],ae=R=>{let J=x(R);J&&(L.push(J.n),M(R),W=W&&J.equals)},Q=R=>{let J=b(R);J&&(L.push(J.n),M(R),W=W&&J.equals)};if(y===Node.DOCUMENT_FRAGMENT_NODE&&(N[e]="open"),y===Node.ELEMENT_NODE){let R=F;if(C==="INPUT"){let J=R.value;M("value"),M(J),N.value=J,R.checked&&(M("checked"),N.checked="")}R.scrollTop&&(M(t),M(R.scrollTop),N[t]=""+R.scrollTop),R.scrollLeft&&(M(i),M(R.scrollLeft),N[i]=""+R.scrollLeft),R.shadowRoot&&(++v,ae(R.shadowRoot),--v)}if(C==="TEXTAREA"){let R=F.value;M(R),V++,L.push(R)}else{C==="HEAD"&&(this._fakeBase.setAttribute("href",document.baseURI),ae(this._fakeBase));for(let J=F.firstChild;J;J=J.nextSibling)ae(J);M(l);let R=null;if(F.ownerDocument.documentElement===F?R=F.ownerDocument:F.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(R=F),R){for(let J of R.adoptedStyleSheets||[])Q(J);M(l)}}if(C==="IFRAME"||C==="FRAME"){let J=F[o],re="src",Y=J?`/snapshot/${J}`:"";M(re),M(Y),N[re]=Y}if(W&&A.attributesCached&&!v)return K(L);if(y===Node.ELEMENT_NODE){let R=F;for(let J=0;J<R.attributes.length;J++){let re=R.attributes[J].name;if(re==="value"&&(C==="INPUT"||C==="TEXTAREA")||C==="LINK"&&re==="integrity"||C==="IFRAME"&&re==="src")continue;let Y=R.attributes[J].value;re==="src"&&C==="IMG"?Y=this._sanitizeUrl(Y):re==="srcset"&&C==="IMG"?Y=this._sanitizeSrcSet(Y):re==="srcset"&&C==="SOURCE"?Y=this._sanitizeSrcSet(Y):re==="href"&&C==="LINK"?Y=this._sanitizeUrl(Y):re.startsWith("on")&&(Y=""),M(re),M(Y),N[re]=Y}M(l)}return L.length===2&&!Object.keys(N).length&&L.pop(),K(L)},b=F=>{let y=d(F),C=y.cssText,A=this._updateStyleElementStyleSheetTextIfNeeded(F)||"";return A===C?{equals:!0,n:[[m-y.ref[0],y.ref[1]]]}:(y.ref=[m,g++],{equals:!1,n:["template",{[n]:A}]})},T;if(document.documentElement){let{n:F}=x(document.documentElement);T=F}else T=["html"];let k={html:T,doctype:document.doctype?document.doctype.name:void 0,resourceOverrides:[],viewport:{width:window.innerWidth,height:window.innerHeight},url:location.href,timestamp:_,collectionTime:0};for(let F of this._staleStyleSheets){if(F.href===null)continue;let y=this._updateLinkStyleSheetTextIfNeeded(F,m);if(y===void 0)continue;let C=this._getSheetBase(F),A=h(this._resolveUrl(C,F.href));k.resourceOverrides.push({url:A,content:y,contentType:"text/css"})}return k.collectionTime=performance.now()-k.timestamp,k}}window[r]=new p}});var yb=w(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.Snapshotter=void 0;var LN=ht(),BN=bt(),Sf=dt(),gb=ze(),HN=_b(),Ef=H(),jN=WN(li());function wb(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(wb=function(i){return i?t:e})(r)}function WN(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=wb(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var vb=class{constructor(e,t){this._context=void 0,this._delegate=void 0,this._eventListeners=[],this._snapshotStreamer=void 0,this._initialized=!1,this._started=!1,this._context=e,this._delegate=t;let i=(0,Ef.createGuid)();this._snapshotStreamer="__playwright_snapshot_streamer_"+i}started(){return this._started}async start(){this._started=!0,this._initialized||(this._initialized=!0,await this._initialize()),await this.reset()}async reset(){this._started&&await this._runInAllFrames(`window["${this._snapshotStreamer}"].reset()`)}async stop(){this._started=!1}async _initialize(){for(let t of this._context.pages())this._onPage(t);this._eventListeners=[Sf.eventsHelper.addEventListener(this._context,LN.BrowserContext.Events.Page,this._onPage.bind(this))];let e=`(${HN.frameSnapshotStreamer})("${this._snapshotStreamer}")`;await this._context._doAddInitScript(e),await this._runInAllFrames(e)}async _runInAllFrames(e){let t=[];for(let i of this._context.pages())t.push(...i.frames());await Promise.all(t.map(i=>i.nonStallingRawEvaluateInExistingMainContext(e).catch(n=>gb.debugLogger.log("error",n))))}dispose(){Sf.eventsHelper.removeEventListeners(this._eventListeners)}async captureSnapshot(e,t,i){let n=`window["${this._snapshotStreamer}"].captureSnapshot(${JSON.stringify(t)})`;i==null||i.callFunctionNoReply((o,c)=>{o.setAttribute("__playwright_target__",c)},t);let s=e.frames().map(async o=>{let c=await o.nonStallingRawEvaluateInExistingMainContext(n).catch(u=>gb.debugLogger.log("error",u));if(!c||!this._started)return;let l={snapshotName:t,pageId:e.guid,frameId:o.guid,frameUrl:c.url,doctype:c.doctype,html:c.html,viewport:c.viewport,timestamp:(0,Ef.monotonicTime)(),collectionTime:c.collectionTime,resourceOverrides:[],isMainFrame:e.mainFrame()===o};for(let{url:u,content:d,contentType:h}of c.resourceOverrides)if(typeof d=="string"){let p=Buffer.from(d),f=(0,Ef.calculateSha1)(p)+"."+(jN.getExtension(h)||"dat");this._delegate.onSnapshotterBlob({sha1:f,buffer:p}),l.resourceOverrides.push({url:u,sha1:f})}else l.resourceOverrides.push({url:u,ref:d});this._delegate.onFrameSnapshot(l)});await Promise.all(s)}_onPage(e){for(let t of e.frames())this._annotateFrameHierarchy(t);this._eventListeners.push(Sf.eventsHelper.addEventListener(e,BN.Page.Events.FrameAttached,t=>this._annotateFrameHierarchy(t)))}async _annotateFrameHierarchy(e){try{let t=await e.frameElement(),i=e.parentFrame();if(!i)return;let n=await i._mainContext();await(n==null?void 0:n.evaluate(({snapshotStreamer:s,frameElement:o,frameId:c})=>{window[s].markIframe(o,c)},{snapshotStreamer:this._snapshotStreamer,frameElement:t,frameId:e.guid})),t.dispose()}catch(t){}}};Ol.Snapshotter=vb});var kf=w(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.HarTracer=void 0;var Tl=ht(),ca=kt(),$N=Eb(Dt()),bb=bt(),Cf=H(),la=dt(),xb=Eb(li()),zN=zt();function Sb(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Sb=function(i){return i?t:e})(r)}function Eb(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Sb(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Cb="HTTP/1.1",kb=class{constructor(e,t,i){this._context=void 0,this._barrierPromises=new Set,this._delegate=void 0,this._options=void 0,this._pageEntries=new Map,this._eventListeners=[],this._started=!1,this._entrySymbol=void 0,this._context=e,this._delegate=t,this._options=i,this._entrySymbol=Symbol("requestHarEntry")}start(){this._started||(this._started=!0,this._eventListeners=[la.eventsHelper.addEventListener(this._context,Tl.BrowserContext.Events.Page,e=>this._ensurePageEntry(e)),la.eventsHelper.addEventListener(this._context,Tl.BrowserContext.Events.Request,e=>this._onRequest(e)),la.eventsHelper.addEventListener(this._context,Tl.BrowserContext.Events.RequestFinished,({request:e,response:t})=>this._onRequestFinished(e,t).catch(()=>{})),la.eventsHelper.addEventListener(this._context,Tl.BrowserContext.Events.Response,e=>this._onResponse(e))])}_entryForRequest(e){return e[this._entrySymbol]}_ensurePageEntry(e){let t=this._pageEntries.get(e);return t||(e.on(bb.Page.Events.DOMContentLoaded,()=>this._onDOMContentLoaded(e)),e.on(bb.Page.Events.Load,()=>this._onLoad(e)),t={startedDateTime:new Date,id:e.guid,title:"",pageTimings:{onContentLoad:-1,onLoad:-1}},this._pageEntries.set(e,t)),t}_onDOMContentLoaded(e){let t=this._ensurePageEntry(e),i=e.mainFrame().evaluateExpression(String(()=>({title:document.title,domContentLoaded:performance.timing.domContentLoadedEventStart})),!0,void 0,"utility").then(n=>{t.title=n.title,t.pageTimings.onContentLoad=n.domContentLoaded}).catch(()=>{});this._addBarrier(e,i)}_onLoad(e){let t=this._ensurePageEntry(e),i=e.mainFrame().evaluateExpression(String(()=>({title:document.title,loaded:performance.timing.loadEventStart})),!0,void 0,"utility").then(n=>{t.title=n.title,t.pageTimings.onLoad=n.loaded}).catch(()=>{});this._addBarrier(e,i)}_addBarrier(e,t){if(!this._options.waitForContentOnStop)return;let i=Promise.race([new Promise(n=>e.on("close",()=>{this._barrierPromises.delete(i),n()})),t]);this._barrierPromises.add(i)}_onRequest(e){let t=e.frame()._page,i=$N.parsedURL(e.url());if(!i)return;let s={pageref:this._ensurePageEntry(t).id,_requestref:e.guid,_frameref:e.frame().guid,_monotonicTime:(0,Cf.monotonicTime)(),startedDateTime:new Date,time:-1,request:{method:e.method(),url:e.url(),httpVersion:Cb,cookies:[],headers:[],queryString:[...i.searchParams].map(o=>({name:o[0],value:o[1]})),postData:Pb(e,this._options.content),headersSize:-1,bodySize:e.bodySize()},response:{status:-1,statusText:"",httpVersion:Cb,cookies:[],headers:[],content:{size:-1,mimeType:e.headerValue("content-type")||"x-unknown"},headersSize:-1,bodySize:-1,redirectURL:"",_transferSize:-1},cache:{beforeRequest:null,afterRequest:null},timings:{send:-1,wait:-1,receive:-1}};if(e.redirectedFrom()){let o=this._entryForRequest(e.redirectedFrom());o&&(o.response.redirectURL=e.url())}e[this._entrySymbol]=s,this._started&&this._delegate.onEntryStarted(s)}async _onRequestFinished(e,t){if(!t)return;let i=e.frame()._page,n=this._entryForRequest(e);if(!n)return;let s=t.httpVersion();n.request.httpVersion=s,n.response.httpVersion=s;let o={_encodedBodySize:-1,_decodedBodySize:-1,barrier:new zN.ManualPromise,_check:function(){this._encodedBodySize!==-1&&this._decodedBodySize!==-1&&(n.response.content.compression=Math.max(0,this._decodedBodySize-this._encodedBodySize),this.barrier.resolve())},setEncodedBodySize:function(l){this._encodedBodySize=l,this._check()},setDecodedBodySize:function(l){this._decodedBodySize=l,this._check()}};this._addBarrier(i,o.barrier);let c=t.body().then(l=>{if(this._options.skipScripts&&e.resourceType()==="script"){o.setDecodedBodySize(0);return}let u=n.response.content;u.size=l.length,o.setDecodedBodySize(l.length),l&&l.length>0&&(this._options.content==="embedded"?(u.text=l.toString("base64"),u.encoding="base64"):this._options.content==="sha1"&&(u._sha1=(0,Cf.calculateSha1)(l)+"."+(xb.getExtension(u.mimeType)||"dat"),this._started&&this._delegate.onContentBlob(u._sha1,l)))}).catch(()=>{o.setDecodedBodySize(0)}).then(()=>{let l=t.request().postDataBuffer();l&&n.request.postData&&this._options.content==="sha1"&&(n.request.postData._sha1=(0,Cf.calculateSha1)(l)+"."+(xb.getExtension(n.request.postData.mimeType)||"dat"),this._started&&this._delegate.onContentBlob(n.request.postData._sha1,l)),this._started&&this._delegate.onEntryFinished(n)});this._addBarrier(i,c),this._addBarrier(i,t.sizes().then(l=>{n.response.bodySize=l.responseBodySize,n.response.headersSize=l.responseHeadersSize,n.response._transferSize=t.request().responseSize.transferSize||l.responseHeadersSize+l.responseBodySize,n.request.headersSize=l.requestHeadersSize,o.setEncodedBodySize(l.responseBodySize)}))}_onResponse(e){let t=e.frame()._page,i=this._ensurePageEntry(t),n=this._entryForRequest(e.request());if(!n)return;let s=e.request();n.request.postData=Pb(s,this._options.content),n.response={status:e.status(),statusText:e.statusText(),httpVersion:e.httpVersion(),cookies:[],headers:[],content:{size:-1,mimeType:"x-unknown"},headersSize:-1,bodySize:-1,redirectURL:"",_transferSize:-1};let o=e.timing();i.startedDateTime.valueOf()>o.startTime&&(i.startedDateTime=new Date(o.startTime));let c=o.domainLookupEnd!==-1?ca.helper.millisToRoundishMillis(o.domainLookupEnd-o.domainLookupStart):-1,l=o.connectEnd!==-1?ca.helper.millisToRoundishMillis(o.connectEnd-o.connectStart):-1,u=o.connectEnd!==-1?ca.helper.millisToRoundishMillis(o.connectEnd-o.secureConnectionStart):-1,d=o.responseStart!==-1?ca.helper.millisToRoundishMillis(o.responseStart-o.requestStart):-1,h=e.request()._responseEndTiming!==-1?ca.helper.millisToRoundishMillis(e.request()._responseEndTiming-o.responseStart):-1;n.timings={dns:c,connect:l,ssl:u,send:0,wait:d,receive:h},n.time=[c,l,u,d,h].reduce((p,f)=>f>0?f+p:p,0),this._addBarrier(t,e.serverAddr().then(p=>{p!=null&&p.ipAddress&&(n.serverIPAddress=p.ipAddress),p!=null&&p.port&&(n._serverPort=p.port)})),this._addBarrier(t,e.securityDetails().then(p=>{p&&(n._securityDetails=p)})),this._addBarrier(t,s.rawRequestHeaders().then(p=>{for(let f of p.filter(_=>_.name.toLowerCase()==="cookie"))n.request.cookies.push(...f.value.split(";").map(Ob));n.request.headers=p})),this._addBarrier(t,e.rawResponseHeaders().then(p=>{for(let _ of p.filter(m=>m.name.toLowerCase()==="set-cookie"))n.response.cookies.push(Ob(_.value));n.response.headers=p;let f=p.find(_=>_.name.toLowerCase()==="content-type");f&&(n.response.content.mimeType=f.value)}))}async flush(){await Promise.all(this._barrierPromises)}stop(){this._started=!1,la.eventsHelper.removeEventListeners(this._eventListeners),this._barrierPromises.clear();let e={version:"1.2",creator:{name:"Playwright",version:bp().version},browser:{name:this._context._browser.options.name,version:this._context._browser.version()},pages:Array.from(this._pageEntries.values()),entries:[]};for(let t of e.pages)t.pageTimings.onContentLoad>=0?t.pageTimings.onContentLoad-=t.startedDateTime.valueOf():t.pageTimings.onContentLoad=-1,t.pageTimings.onLoad>=0?t.pageTimings.onLoad-=t.startedDateTime.valueOf():t.pageTimings.onLoad=-1;return this._pageEntries.clear(),e}};Al.HarTracer=kb;function Pb(r,e){let t=r.postDataBuffer();if(!t)return;let i=r.headerValue("content-type")||"application/octet-stream",n={mimeType:i,text:"",params:[]};if(e==="embedded"&&i!=="application/octet-stream"&&(n.text=t.toString()),i==="application/x-www-form-urlencoded"){let s=new URLSearchParams(t.toString());for(let[o,c]of s.entries())n.params.push({name:o,value:c})}return n}function Ob(r){let e={name:"",value:""},t=!0;for(let i of r.split(/; */)){let n=i.indexOf("="),s=n!==-1?i.substr(0,n).trim():i.trim(),o=n!==-1?i.substr(n+1,i.length).trim():"";if(t){t=!1,e.name=s,e.value=o;continue}s==="Domain"&&(e.domain=o),s==="Expires"&&(e.expires=new Date(o)),s==="HttpOnly"&&(e.httpOnly=!0),s==="Max-Age"&&(e.expires=new Date(Date.now()+ +o*1e3)),s==="Path"&&(e.path=o),s==="SameSite"&&(e.sameSite=o),s==="Secure"&&(e.secure=!0)}return e}});var Mb=w(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.shouldCaptureSnapshot=Af;_n.Tracing=_n.VERSION=void 0;var gi=Tf(require("fs")),mn=Tf(require("path")),UN=Tf(pb()),Pf=H(),VN=aa(),GN=ht(),Of=dt(),KN=bt(),JN=uf(),XN=yb(),YN=kf();function Tf(r){return r&&r.__esModule?r:{default:r}}var Tb=3;_n.VERSION=Tb;var QN={width:800,height:600,quality:90},Ab=class{constructor(e){this._writeChain=Promise.resolve(),this._snapshotter=void 0,this._harTracer=void 0,this._screencastListeners=[],this._pendingCalls=new Map,this._context=void 0,this._resourcesDir=void 0,this._state=void 0,this._isStopping=!1,this._tracesDir=void 0,this._allResources=new Set,this._contextCreatedEvent=void 0,this._context=e,this._tracesDir=e._browser.options.tracesDir,this._resourcesDir=mn.default.join(this._tracesDir,"resources"),this._snapshotter=new XN.Snapshotter(e,this),this._harTracer=new YN.HarTracer(e,this,{content:"sha1",waitForContentOnStop:!1,skipScripts:!0}),this._contextCreatedEvent={version:Tb,type:"context-options",browserName:this._context._browser.options.name,options:this._context._options}}start(e){if(this._isStopping)throw new Error("Cannot start tracing while stopping");if(this._state){let s=this._state.options;if(s.name!==e.name||!s.screenshots!=!e.screenshots||!s.snapshots!=!e.snapshots)throw new Error("Tracing has been already started with different options");return}let t=e.name||(0,Pf.createGuid)(),i=mn.default.join(this._tracesDir,t+".trace"),n=mn.default.join(this._tracesDir,t+".network");this._state={options:e,traceName:t,traceFile:i,networkFile:n,filesCount:0,sha1s:new Set,recording:!1},this._writeChain=gi.default.promises.mkdir(this._resourcesDir,{recursive:!0}).then(()=>gi.default.promises.writeFile(n,"")),e.snapshots&&this._harTracer.start()}async startChunk(){if(this._state&&this._state.recording&&await this.stopChunk(!1),!this._state)throw new Error("Must start tracing before starting a new chunk");if(this._isStopping)throw new Error("Cannot start a trace chunk while stopping");let e=this._state,t=e.filesCount?`-${e.filesCount}`:"";e.filesCount++,e.traceFile=mn.default.join(this._tracesDir,`${e.traceName}${t}.trace`),e.recording=!0,this._appendTraceOperation(async()=>{await(0,Pf.mkdirIfNeeded)(e.traceFile),await gi.default.promises.appendFile(e.traceFile,JSON.stringify(this._contextCreatedEvent)+`
`)}),this._context.instrumentation.addListener(this),e.options.screenshots&&this._startScreencast(),e.options.snapshots&&await this._snapshotter.start()}_startScreencast(){for(let e of this._context.pages())this._startScreencastInPage(e);this._screencastListeners.push(Of.eventsHelper.addEventListener(this._context,GN.BrowserContext.Events.Page,this._startScreencastInPage.bind(this)))}_stopScreencast(){Of.eventsHelper.removeEventListeners(this._screencastListeners);for(let e of this._context.pages())e.setScreencastOptions(null)}async stop(){if(!!this._state){if(this._isStopping)throw new Error("Tracing is already stopping");if(this._state.recording)throw new Error("Must stop trace file before stopping tracing");this._harTracer.stop(),await this._writeChain,this._state=void 0}}async dispose(){this._snapshotter.dispose(),await this._writeChain}async stopChunk(e){if(this._isStopping)throw new Error("Tracing is already stopping");this._isStopping=!0;for(let{sdkObject:i,metadata:n,beforeSnapshot:s,actionSnapshot:o,afterSnapshot:c}of this._pendingCalls.values()){await Promise.all([s,o,c]);let l=n;c||(l={...n,error:{error:{name:"Error",message:"Action was interrupted"}}}),await this.onAfterCall(i,l)}if(!this._state||!this._state.recording){if(this._isStopping=!1,e)throw new Error("Must start tracing before stopping");return null}let t=this._state;return this._context.instrumentation.removeListener(this),t.options.screenshots&&this._stopScreencast(),t.options.snapshots&&await this._snapshotter.stop(),await this._appendTraceOperation(async()=>(e?this._export(t):Promise.resolve(null)).finally(async()=>{this._isStopping=!1,t.recording=!1}))}async _export(e){let t=new UN.default.ZipFile,i=new Promise((s,o)=>t.on("error",o)),n=new Promise(s=>{t.addFile(e.traceFile,"trace.trace"),t.addFile(e.networkFile,"trace.network");let o=e.traceFile+".zip";for(let c of e.sha1s)t.addFile(mn.default.join(this._resourcesDir,c),mn.default.join("resources",c));t.end(),t.outputStream.pipe(gi.default.createWriteStream(o)).on("close",()=>{let c=new VN.Artifact(this._context,o);c.reportFinished(),s(c)})});return Promise.race([i,n])}async _captureSnapshot(e,t,i,n){if(!t.attribution.page||!this._snapshotter.started()||!Af(i))return;let s=`${e}@${i.id}`;i.snapshots.push({title:e,snapshotName:s}),await this._snapshotter.captureSnapshot(t.attribution.page,s,n).catch(()=>{})}async onBeforeCall(e,t){let i=this._captureSnapshot("before",e,t);this._pendingCalls.set(t.id,{sdkObject:e,metadata:t,beforeSnapshot:i}),await i}async onBeforeInputAction(e,t,i){let n=this._captureSnapshot("action",e,t,i);this._pendingCalls.get(t.id).actionSnapshot=n,await n}async onAfterCall(e,t){let i=this._pendingCalls.get(t.id);if(!i||i.afterSnapshot)return;if(!e.attribution.page){this._pendingCalls.delete(t.id);return}i.afterSnapshot=this._captureSnapshot("after",e,t),await i.afterSnapshot;let n={type:"action",metadata:t,hasSnapshot:Af(t)};this._appendTraceEvent(n),this._pendingCalls.delete(t.id)}onEvent(e,t){if(!e.attribution.page)return;let i={type:"event",metadata:t,hasSnapshot:!1};this._appendTraceEvent(i)}onEntryStarted(e){}onEntryFinished(e){let t={type:"resource-snapshot",snapshot:e};this._appendTraceOperation(async()=>{Ml(t,this._state.sha1s),await gi.default.promises.appendFile(this._state.networkFile,JSON.stringify(t)+`
`)})}onContentBlob(e,t){this._appendResource(e,t)}onSnapshotterBlob(e){this._appendResource(e.sha1,e.buffer)}onFrameSnapshot(e){this._appendTraceEvent({type:"frame-snapshot",snapshot:e})}_startScreencastInPage(e){e.setScreencastOptions(QN);let t=e.guid,i=0;this._screencastListeners.push(Of.eventsHelper.addEventListener(e,KN.Page.Events.ScreencastFrame,n=>{let s=String(++i).padStart(10,"0"),o=`${t}-${s}.jpeg`,c={type:"screencast-frame",pageId:e.guid,sha1:o,width:n.width,height:n.height,timestamp:(0,Pf.monotonicTime)()};this._appendResource(o,n.buffer),this._appendTraceEvent(c)}))}_appendTraceEvent(e){this._appendTraceOperation(async()=>{Ml(e,this._state.sha1s),await gi.default.promises.appendFile(this._state.traceFile,JSON.stringify(e)+`
`)})}_appendResource(e,t){this._allResources.has(e)||(this._allResources.add(e),this._appendTraceOperation(async()=>{let i=mn.default.join(this._resourcesDir,e);try{await gi.default.promises.access(i)}catch(n){await gi.default.promises.writeFile(i,t).catch(()=>{})}}))}async _appendTraceOperation(e){let t,i;if(this._writeChain=this._writeChain.then(async()=>{try{i=await e()}catch(n){t=n}}),await this._writeChain,t)throw t;return i}};_n.Tracing=Ab;function Ml(r,e){if(Array.isArray(r)){r.forEach(t=>Ml(t,e));return}if(typeof r=="object"){for(let t in r){if(t==="sha1"||t==="_sha1"||t.endsWith("Sha1")){let i=r[t];i&&e.add(i)}Ml(r[t],e)}return}}function Af(r){return JN.commandsWithTracingSnapshots.has(r.type+"."+r.method)}});var Fb=w(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.HarRecorder=void 0;var ZN=rq(require("fs")),eq=aa(),tq=kf();function rq(r){return r&&r.__esModule?r:{default:r}}var Ib=class{constructor(e,t){this._artifact=void 0,this._isFlushed=!1,this._options=void 0,this._tracer=void 0,this._entries=[],this._artifact=new eq.Artifact(e,t.path),this._options=t,this._tracer=new tq.HarTracer(e,this,{content:t.omitContent?"omit":"embedded",waitForContentOnStop:!0,skipScripts:!1}),this._tracer.start()}onEntryStarted(e){this._entries.push(e)}onEntryFinished(e){}onContentBlob(e,t){}async flush(){if(this._isFlushed)return;this._isFlushed=!0,await this._tracer.flush();let e=this._tracer.stop();e.entries=this._entries,await ZN.default.promises.writeFile(this._options.path,JSON.stringify({log:e},void 0,2))}async export(){return await this.flush(),this._artifact.reportFinished(),this._artifact}};Il.HarRecorder=Ib});var gn=w(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.toClickOptions=iq;_s.toModifiers=Db;_s.describeFrame=nq;_s.escapeWithQuotes=sq;function iq(r){let e="click";r.clickCount===2&&(e="dblclick");let t=Db(r.modifiers),i={};return r.button!=="left"&&(i.button=r.button),t.length&&(i.modifiers=t),r.clickCount>2&&(i.clickCount=r.clickCount),{method:e,options:i}}function Db(r){let e=[];return r&1&&e.push("Alt"),r&2&&e.push("Control"),r&4&&e.push("Meta"),r&8&&e.push("Shift"),e}function nq(r){let e=r._page;if(e.mainFrame()===r)return{isMainFrame:!0,frameUrl:r.url()};let t=e.frames().filter(i=>i.name()===r.name());return t.length===1&&t[0]===r?{isMainFrame:!1,frameUrl:r.url(),frameName:r.name()}:{isMainFrame:!1,frameUrl:r.url()}}function sq(r,e="'"){let t=JSON.stringify(r),i=t.substring(1,t.length-1).replace(/\\"/g,'"');if(e==="'")return e+i.replace(/[']/g,"\\'")+e;if(e==='"')return e+i.replace(/["]/g,'\\"')+e;if(e==="`")return e+i.replace(/[`]/g,"`")+e;throw new Error("Invalid escape char")}});var Nb=w(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.CodeGenerator=void 0;var oq=require("events"),aq=gn(),Rb=class extends oq.EventEmitter{constructor(e,t,i,n,s,o){super();this._currentAction=null,this._lastAction=null,this._actions=[],this._enabled=void 0,this._options=void 0,i={headless:!1,...i},n={...n},this._enabled=t,this._options={browserName:e,generateHeaders:t,launchOptions:i,contextOptions:n,deviceName:s,saveStorage:o},this.restart()}restart(){this._currentAction=null,this._lastAction=null,this._actions=[],this.emit("change")}setEnabled(e){this._enabled=e}addAction(e){!this._enabled||(this.willPerformAction(e),this.didPerformAction(e))}willPerformAction(e){!this._enabled||(this._currentAction=e)}performedActionFailed(e){!this._enabled||this._currentAction===e&&(this._currentAction=null)}didPerformAction(e){if(!this._enabled)return;let{action:t,pageAlias:i}=e,n=!1;if(this._lastAction&&this._lastAction.pageAlias===i){let{action:s}=this._lastAction;if(this._lastAction&&t.name==="fill"&&s.name==="fill"&&t.selector===s.selector&&(n=!0),s&&t.name==="click"&&s.name==="click"&&t.selector===s.selector&&t.clickCount>s.clickCount&&(n=!0),s&&t.name==="navigate"&&s.name==="navigate"&&t.url===s.url){this._currentAction=null;return}s&&(t.name==="check"||t.name==="uncheck")&&s.name==="click"&&t.selector===s.selector&&(n=!0)}this._lastAction=e,this._currentAction=null,n&&this._actions.pop(),this._actions.push(e),this.emit("change")}commitLastAction(){if(!this._enabled)return;let e=this._lastAction;e&&(e.committed=!0)}signal(e,t,i){if(!!this._enabled){if(i.name==="download"&&(this._options.contextOptions.acceptDownloads=!0),this._currentAction){this._currentAction.action.signals.push(i);return}if(this._lastAction&&!this._lastAction.committed){let n=this._lastAction.action.signals;if(i.name==="navigation"&&n.length&&n[n.length-1].name==="download")return;i.name==="download"&&n.length&&n[n.length-1].name==="navigation"&&(n.length=n.length-1),i.isAsync=!0,this._lastAction.action.signals.push(i),this.emit("change");return}i.name==="navigation"&&this.addAction({pageAlias:e,...(0,aq.describeFrame)(t),committed:!0,action:{name:"navigate",url:t.url(),signals:[]}})}}generateText(e){let t=[];this._options.generateHeaders&&t.push(e.generateHeader(this._options));for(let i of this._actions){let n=e.generateAction(i);n&&t.push(n)}return this._options.generateHeaders&&t.push(e.generateFooter(this._options.saveStorage)),t.join(`
`)}};Fl.CodeGenerator=Rb});var ua=w(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.sanitizeDeviceOptions=cq;Dl.toSignalMap=lq;function cq(r,e){let t={};for(let i in e)JSON.stringify(r[i])!==JSON.stringify(e[i])&&(t[i]=e[i]);return t}function lq(r){let e,t,i,n,s;for(let o of r.signals)o.name==="navigation"&&o.isAsync?e=o:o.name==="navigation"&&!o.isAsync?t=o:o.name==="popup"?i=o:o.name==="download"?n=o:o.name==="dialog"&&(s=o);return{waitForNavigation:e,assertNavigation:t,popup:i,download:n,dialog:s}}});var da=w(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.actionTitle=uq;function uq(r){switch(r.name){case"openPage":return"Open new page";case"closePage":return"Close page";case"check":return`Check ${r.selector}`;case"uncheck":return`Uncheck ${r.selector}`;case"click":return r.clickCount===1?`Click ${r.selector}`:r.clickCount===2?`Double click ${r.selector}`:r.clickCount===3?`Triple click ${r.selector}`:`${r.clickCount}\xD7 click`;case"fill":return`Fill ${r.selector}`;case"setInputFiles":return r.files.length===0?"Clear selected files":`Upload ${r.files.join(", ")}`;case"navigate":return`Go to ${r.url}`;case"press":return`Press ${r.key}`+(r.modifiers?" with modifiers":"");case"select":return`Select ${r.options.join(", ")}`}}});var qb=w((u8,dq)=>{dq.exports={"Blackberry PlayBook":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/15.0 Safari/536.2+",viewport:{width:600,height:1024},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Blackberry PlayBook landscape":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/15.0 Safari/536.2+",viewport:{width:1024,height:600},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/15.0 Mobile Safari/537.10+",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30 landscape":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/15.0 Mobile Safari/537.10+",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/15.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S5":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S8":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:360,height:740},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S8 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:740,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S9+":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:320,height:658},deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S9+ landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:658,height:320},deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy Tab S4":{userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36",viewport:{width:712,height:1138},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy Tab S4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36",viewport:{width:1138,height:712},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"iPad (gen 6)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 6) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11 landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/15.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/15.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/15.0 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:414,height:715},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:800,height:364},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:375,height:635},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:724,height:325},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:414,height:715},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:808,height:364},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:340},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:340},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:428,height:746},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:832,height:378},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"JioPhone 2":{userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:89.0 Gecko/48.0 Firefox/92.0 KAIOS/2.5",viewport:{width:240,height:320},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"firefox"},"JioPhone 2 landscape":{userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:89.0 Gecko/48.0 Firefox/92.0 KAIOS/2.5",viewport:{width:320,height:240},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"firefox"},"Kindle Fire HDX":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Kindle Fire HDX landscape":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"LG Optimus L70":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"LG Optimus L70 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36",viewport:{width:600,height:960},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36",viewport:{width:960,height:600},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520 landscape":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia N9":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Nokia N9 landscape":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Pixel 2":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:411,height:731},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:731,height:411},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:411,height:823},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:823,height:411},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 3":{userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:393,height:786},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 3 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:786,height:393},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4":{userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:353,height:745},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:745,height:353},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4a (5G)":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",screen:{width:412,height:892},viewport:{width:412,height:765},deviceScaleFactor:2.63,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4a (5G) landscape":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",screen:{height:892,width:412},viewport:{width:840,height:312},deviceScaleFactor:2.63,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 5":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",screen:{width:393,height:851},viewport:{width:393,height:727},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",screen:{width:851,height:393},viewport:{width:802,height:293},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Moto G4":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Moto G4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Desktop Chrome HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Edge HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36 Edg/96.0.4641.0",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Firefox HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:90.0 Gecko/20100101 Firefox/92.0",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"firefox"},"Desktop Safari":{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"webkit"},"Desktop Chrome":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Edge":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4641.0 Safari/537.36 Edg/96.0.4641.0",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Firefox":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:90.0 Gecko/20100101 Firefox/92.0",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"firefox"}}});var gs=w((d8,Lb)=>{Lb.exports=qb()});var Df=w(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.JavaScriptFormatter=ws.JavaScriptLanguageGenerator=void 0;var Bb=ua(),hq=da(),If=gn(),pq=fq(gs());function fq(r){return r&&r.__esModule?r:{default:r}}var Hb=class{constructor(e){this.id=void 0,this.fileName=void 0,this.highlighter="javascript",this._isTest=void 0,this.id=e?"test":"javascript",this.fileName=e?"Playwright Test":"JavaScript",this._isTest=e}generateAction(e){let{action:t,pageAlias:i}=e,n=new ha(2);if(n.newLine(),n.add("// "+(0,hq.actionTitle)(t)),t.name==="openPage")return this._isTest?"":(n.add(`const ${i} = await context.newPage();`),t.url&&t.url!=="about:blank"&&t.url!=="chrome://newtab/"&&n.add(`await ${i}.goto(${mt(t.url)});`),n.format());let s=e.isMainFrame?i:e.frameName?`${i}.frame(${wi({name:e.frameName})})`:`${i}.frame(${wi({url:e.frameUrl})})`,o=(0,Bb.toSignalMap)(t);o.dialog&&n.add(`  ${i}.once('dialog', dialog => {
    console.log(\`Dialog message: \${dialog.message()}\`);
    dialog.dismiss().catch(() => {});
  });`);let c=o.waitForNavigation||o.popup||o.download;if(c){let h="";o.popup?h=`const [${o.popup.popupAlias}] = `:o.download&&(h="const [download] = "),n.add(`${h}await Promise.all([`)}o.popup&&n.add(`${i}.waitForEvent('popup'),`),o.waitForNavigation&&n.add(`${i}.waitForNavigation(/*{ url: ${mt(o.waitForNavigation.url)} }*/),`),o.download&&n.add(`${i}.waitForEvent('download'),`);let l=o.popup||o.waitForNavigation||o.download?"":"await ",u=this._generateActionCall(t),d=o.waitForNavigation||c?"":";";return n.add(`${l}${s}.${u}${d}`),c?n.add("]);"):o.assertNavigation&&(this._isTest?n.add(`  await expect(${i}).toHaveURL(${mt(o.assertNavigation.url)});`):n.add(`  // assert.equal(${i}.url(), ${mt(o.assertNavigation.url)});`)),n.format()}_generateActionCall(e){switch(e.name){case"openPage":throw Error("Not reached");case"closePage":return"close()";case"click":{let t="click";e.clickCount===2&&(t="dblclick");let i=(0,If.toModifiers)(e.modifiers),n={};e.button!=="left"&&(n.button=e.button),i.length&&(n.modifiers=i),e.clickCount>2&&(n.clickCount=e.clickCount);let s=mq(n);return`${t}(${mt(e.selector)}${s})`}case"check":return`check(${mt(e.selector)})`;case"uncheck":return`uncheck(${mt(e.selector)})`;case"fill":return`fill(${mt(e.selector)}, ${mt(e.text)})`;case"setInputFiles":return`setInputFiles(${mt(e.selector)}, ${wi(e.files.length===1?e.files[0]:e.files)})`;case"press":{let i=[...(0,If.toModifiers)(e.modifiers),e.key].join("+");return`press(${mt(e.selector)}, ${mt(i)})`}case"navigate":return`goto(${mt(e.url)})`;case"select":return`selectOption(${mt(e.selector)}, ${wi(e.options.length>1?e.options:e.options[0])})`}}generateHeader(e){return this._isTest?this.generateTestHeader(e):this.generateStandaloneHeader(e)}generateFooter(e){return this._isTest?this.generateTestFooter(e):this.generateStandaloneFooter(e)}generateTestHeader(e){let t=new ha,i=jb(e.contextOptions,e.deviceName);return t.add(`
      const { test, expect${e.deviceName?", devices":""} } = require('@playwright/test');
${i?`
test.use(`+i+`);
`:""}
      test('test', async ({ page }) => {`),t.format()}generateTestFooter(e){return`
});`}generateStandaloneHeader(e){let t=new ha;return t.add(`
      const { ${e.browserName}${e.deviceName?", devices":""} } = require('playwright');

      (async () => {
        const browser = await ${e.browserName}.launch(${Ff(e.launchOptions)});
        const context = await browser.newContext(${jb(e.contextOptions,e.deviceName)});`),t.format()}generateStandaloneFooter(e){return`
  // ---------------------${e?`
  await context.storageState({ path: ${mt(e)} });`:""}
  await context.close();
  await browser.close();
})();`}};ws.JavaScriptLanguageGenerator=Hb;function mq(r){return Object.keys(r).length?", "+wi(r):""}function wi(r,e="  "){if(typeof r=="string")return mt(r);if(Array.isArray(r))return`[${r.map(t=>wi(t)).join(", ")}]`;if(typeof r=="object"){let t=Object.keys(r);if(!t.length)return"{}";let i=[];for(let n of t)i.push(`${n}: ${wi(r[n])}`);return`{
${e}${i.join(`,
${e}`)}
}`}return String(r)}function Ff(r,e="  "){let t=wi(r,e);return t==="{}"?"":t}function jb(r,e){let t=e&&pq.default[e];if(!t)return Ff(r);let i=Ff((0,Bb.sanitizeDeviceOptions)(t,r));i||(i=`{
}`);let n=i.split(`
`);return n.splice(1,0,`...devices[${mt(e)}],`),n.join(`
`)}var ha=class{constructor(e=0){this._baseIndent=void 0,this._baseOffset=void 0,this._lines=[],this._baseIndent=" ".repeat(2),this._baseOffset=" ".repeat(e)}prepend(e){this._lines=e.trim().split(`
`).map(t=>t.trim()).concat(this._lines)}add(e){this._lines.push(...e.trim().split(`
`).map(t=>t.trim()))}newLine(){this._lines.push("")}format(){let e="",t="";return this._lines.map(i=>{if(i==="")return i;(i.startsWith("}")||i.startsWith("]"))&&(e=e.substring(this._baseIndent.length));let n=/^(for|while|if|try).*\(.*\)$/.test(t)?this._baseIndent:"";t=i;let s=i.startsWith(".set");return i=e+n+(s?this._baseIndent:"")+i,(i.endsWith("{")||i.endsWith("["))&&(e+=this._baseIndent),this._baseOffset+i}).join(`
`)}};ws.JavaScriptFormatter=ha;function mt(r){return(0,If.escapeWithQuotes)(r,"'")}});var zb=w(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.JavaLanguageGenerator=void 0;var _q=ua(),gq=da(),Rf=gn(),wq=vq(gs()),Wb=Df();function vq(r){return r&&r.__esModule?r:{default:r}}var $b=class{constructor(){this.id="java",this.fileName="Java",this.highlighter="java"}generateAction(e){let{action:t,pageAlias:i}=e,n=new Wb.JavaScriptFormatter(6);if(n.newLine(),n.add("// "+(0,gq.actionTitle)(t)),t.name==="openPage")return n.add(`Page ${i} = context.newPage();`),t.url&&t.url!=="about:blank"&&t.url!=="chrome://newtab/"&&n.add(`${i}.navigate(${De(t.url)});`),n.format();let s=e.isMainFrame?i:e.frameName?`${i}.frame(${De(e.frameName)})`:`${i}.frameByUrl(${De(e.frameUrl)})`,o=(0,_q.toSignalMap)(t);o.dialog&&n.add(`  ${i}.onceDialog(dialog -> {
        System.out.println(String.format("Dialog message: %s", dialog.message()));
        dialog.dismiss();
      });`);let c=this._generateActionCall(t,e.isMainFrame),l=`${s}.${c};`;return o.popup&&(l=`Page ${o.popup.popupAlias} = ${i}.waitForPopup(() -> {
        ${l}
      });`),o.download&&(l=`Download download = ${i}.waitForDownload(() -> {
        ${l}
      });`),o.waitForNavigation&&(l=`
      // ${i}.waitForNavigation(new Page.WaitForNavigationOptions().setUrl(${De(o.waitForNavigation.url)}), () ->
      ${i}.waitForNavigation(() -> {
        ${l}
      });`),n.add(l),o.assertNavigation&&n.add(`// assert ${i}.url().equals(${De(o.assertNavigation.url)});`),n.format()}_generateActionCall(e,t){switch(e.name){case"openPage":throw Error("Not reached");case"closePage":return"close()";case"click":{let i="click";e.clickCount===2&&(i="dblclick");let n=(0,Rf.toModifiers)(e.modifiers),s={};e.button!=="left"&&(s.button=e.button),n.length&&(s.modifiers=n),e.clickCount>2&&(s.clickCount=e.clickCount);let o=Eq(s,t);return`${i}(${De(e.selector)}${o?", ":""}${o})`}case"check":return`check(${De(e.selector)})`;case"uncheck":return`uncheck(${De(e.selector)})`;case"fill":return`fill(${De(e.selector)}, ${De(e.text)})`;case"setInputFiles":return`setInputFiles(${De(e.selector)}, ${yq(e.files.length===1?e.files[0]:e.files)})`;case"press":{let n=[...(0,Rf.toModifiers)(e.modifiers),e.key].join("+");return`press(${De(e.selector)}, ${De(n)})`}case"navigate":return`navigate(${De(e.url)})`;case"select":return`selectOption(${De(e.selector)}, ${bq(e.options.length>1?e.options:e.options[0])})`}}generateHeader(e){let t=new Wb.JavaScriptFormatter;return t.add(`
    import com.microsoft.playwright.*;
    import com.microsoft.playwright.options.*;
    import java.util.*;

    public class Example {
      public static void main(String[] args) {
        try (Playwright playwright = Playwright.create()) {
          Browser browser = playwright.${e.browserName}().launch(${xq(e.launchOptions)});
          BrowserContext context = browser.newContext(${Sq(e.contextOptions,e.deviceName)});`),t.format()}generateFooter(e){return`${e?`
      context.storageState(new BrowserContext.StorageStateOptions().setPath(${De(e)}));
`:""}    }
  }
}`}};Rl.JavaLanguageGenerator=$b;function yq(r){return Array.isArray(r)?r.length===0?"new Path[0]":`new Path[] {${r.map(e=>"Paths.get("+De(e)+")").join(", ")}}`:`Paths.get(${De(r)})`}function bq(r){return Array.isArray(r)?r.length===0?"new String[0]":`new String[] {${r.map(e=>De(e)).join(", ")}}`:De(r)}function xq(r){let e=[];return Object.keys(r).length?(e.push("new BrowserType.LaunchOptions()"),typeof r.headless=="boolean"&&e.push("  .setHeadless(false)"),r.channel&&e.push(`  .setChannel(${De(r.channel)})`),e.join(`
`)):""}function Sq(r,e){let t=[];if(!Object.keys(r).length&&!e)return"";let n={...e?wq.default[e]:{},...r};return t.push("new Browser.NewContextOptions()"),n.acceptDownloads&&t.push("  .setAcceptDownloads(true)"),n.bypassCSP&&t.push("  .setBypassCSP(true)"),n.colorScheme&&t.push(`  .setColorScheme(ColorScheme.${n.colorScheme.toUpperCase()})`),n.deviceScaleFactor&&t.push(`  .setDeviceScaleFactor(${n.deviceScaleFactor})`),n.geolocation&&t.push(`  .setGeolocation(${n.geolocation.latitude}, ${n.geolocation.longitude})`),n.hasTouch&&t.push(`  .setHasTouch(${n.hasTouch})`),n.isMobile&&t.push(`  .setIsMobile(${n.isMobile})`),n.locale&&t.push(`  .setLocale(${De(n.locale)})`),n.proxy&&t.push(`  .setProxy(new Proxy(${De(n.proxy.server)}))`),n.storageState&&t.push(`  .setStorageStatePath(Paths.get(${De(n.storageState)}))`),n.timezoneId&&t.push(`  .setTimezoneId(${De(n.timezoneId)})`),n.userAgent&&t.push(`  .setUserAgent(${De(n.userAgent)})`),n.viewport&&t.push(`  .setViewportSize(${n.viewport.width}, ${n.viewport.height})`),t.join(`
`)}function Eq(r,e){let t=[];return r.button&&t.push(`  .setButton(MouseButton.${r.button.toUpperCase()})`),r.modifiers&&t.push(`  .setModifiers(Arrays.asList(${r.modifiers.map(i=>`KeyboardModifier.${i.toUpperCase()}`).join(", ")}))`),r.clickCount&&t.push(`  .setClickCount(${r.clickCount})`),t.length?(t.unshift(`new ${e?"Page":"Frame"}.ClickOptions()`),t.join(`
`)):""}function De(r){return(0,Rf.escapeWithQuotes)(r,'"')}});var Gb=w(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.CSharpLanguageGenerator=void 0;var Ub=ua(),Cq=da(),Nf=gn(),kq=Pq(gs());function Pq(r){return r&&r.__esModule?r:{default:r}}var Vb=class{constructor(){this.id="csharp",this.fileName="C#",this.highlighter="csharp"}generateAction(e){let{action:t,pageAlias:i}=e,n=new Lf(8);if(n.newLine(),n.add("// "+(0,Cq.actionTitle)(t)),t.name==="openPage")return n.add(`var ${i} = await context.NewPageAsync();`),t.url&&t.url!=="about:blank"&&t.url!=="chrome://newtab/"&&n.add(`await ${i}.GotoAsync(${Ke(t.url)});`),n.format();let s=e.isMainFrame?i:e.frameName?`${i}.Frame(${Ke(e.frameName)})`:`${i}.FrameByUrl(${Ke(e.frameUrl)})`,o=(0,Ub.toSignalMap)(t);o.dialog&&n.add(`    void ${i}_Dialog${o.dialog.dialogAlias}_EventHandler(object sender, IDialog dialog)
      {
          Console.WriteLine($"Dialog message: {dialog.Message}");
          dialog.DismissAsync();
          ${i}.Dialog -= ${i}_Dialog${o.dialog.dialogAlias}_EventHandler;
      }
      ${i}.Dialog += ${i}_Dialog${o.dialog.dialogAlias}_EventHandler;`);let c=[],l=this._generateActionCall(t,e.isMainFrame);o.waitForNavigation?(c.push(`await ${i}.RunAndWaitForNavigationAsync(async () =>`),c.push("{"),c.push(`    await ${s}.${l};`),c.push(`}/*, new ${e.isMainFrame?"Page":"Frame"}WaitForNavigationOptions`),c.push("{"),c.push(`    UrlString = ${Ke(o.waitForNavigation.url)}`),c.push("}*/);")):c.push(`await ${s}.${l};`),o.download&&(c.unshift(`var download${o.download.downloadAlias} = await ${i}.RunAndWaitForDownloadAsync(async () =>
{`),c.push("});")),o.popup&&(c.unshift(`var ${o.popup.popupAlias} = await ${i}.RunAndWaitForPopupAsync(async () =>
{`),c.push("});"));for(let u of c)n.add(u);return o.assertNavigation&&n.add(`  // Assert.AreEqual(${Ke(o.assertNavigation.url)}, ${i}.Url);`),n.format()}_generateActionCall(e,t){switch(e.name){case"openPage":throw Error("Not reached");case"closePage":return"CloseAsync()";case"click":{let i="Click";e.clickCount===2&&(i="DblClick");let n=(0,Nf.toModifiers)(e.modifiers),s={};if(e.button!=="left"&&(s.button=e.button),n.length&&(s.modifiers=n),e.clickCount>2&&(s.clickCount=e.clickCount),!Object.entries(s).length)return`${i}Async(${Ke(e.selector)})`;let o=vi(s,"    ",(t?"Page":"Frame")+i+"Options");return`${i}Async(${Ke(e.selector)}, ${o})`}case"check":return`CheckAsync(${Ke(e.selector)})`;case"uncheck":return`UncheckAsync(${Ke(e.selector)})`;case"fill":return`FillAsync(${Ke(e.selector)}, ${Ke(e.text)})`;case"setInputFiles":return`SetInputFilesAsync(${Ke(e.selector)}, ${vi(e.files)})`;case"press":{let n=[...(0,Nf.toModifiers)(e.modifiers),e.key].join("+");return`PressAsync(${Ke(e.selector)}, ${Ke(n)})`}case"navigate":return`GotoAsync(${Ke(e.url)})`;case"select":return`SelectOptionAsync(${Ke(e.selector)}, ${vi(e.options)})`}}generateHeader(e){let t=new Lf(0);return t.add(`
      using Microsoft.Playwright;
      using System;
      using System.Threading.Tasks;

      class Program
      {
          public static async Task Main()
          {
              using var playwright = await Playwright.CreateAsync();
              await using var browser = await playwright.${Nl(e.browserName)}.LaunchAsync(${vi(e.launchOptions,"    ","BrowserTypeLaunchOptions")});
              var context = await browser.NewContextAsync(${Tq(e.contextOptions,e.deviceName)});`),t.format()}generateFooter(e){return`${e?`
        await context.StorageStateAsync(new BrowserContextStorageStateOptions
        {
            Path = ${Ke(e)}
        });
`:""}    }
}
`}};ql.CSharpLanguageGenerator=Vb;function vi(r,e="    ",t=""){if(typeof r=="string")return["permissions","colorScheme","modifiers","button"].includes(t)?`${qf(t)}.${Nl(r)}`:Ke(r);if(Array.isArray(r))return`new[] { ${r.map(i=>vi(i,e,t)).join(", ")} }`;if(typeof r=="object"){let i=Object.keys(r);if(!i.length)return t?`new ${qf(t)}`:"";let n=[];for(let s of i){let o=Oq(s);n.push(`${o} = ${vi(r[s],e,s)},`)}return t?`new ${qf(t)}
{
${e}${n.join(`
${e}`)}
${e}}`:`{
${e}${n.join(`
${e}`)}
${e}}`}return t==="latitude"||t==="longitude"?String(r)+"m":String(r)}function qf(r){switch(r){case"viewport":return"ViewportSize";case"proxy":return"ProxySettings";case"permissions":return"ContextPermission";case"modifiers":return"KeyboardModifier";case"button":return"MouseButton";default:return Nl(r)}}function Oq(r){switch(r){case"storageState":return"StorageStatePath";case"viewport":return"ViewportSize";default:return Nl(r)}}function Nl(r){return r[0].toUpperCase()+r.slice(1)}function Tq(r,e){let t=e&&kq.default[e];return t?(r=(0,Ub.sanitizeDeviceOptions)(t,r),Object.entries(r).length?vi(r,"    ",`BrowserNewContextOptions(playwright.Devices[${Ke(e)}])`):`playwright.Devices[${Ke(e)}]`):Object.entries(r).length?vi(r,"    ","BrowserNewContextOptions"):""}var Lf=class{constructor(e=0){this._baseIndent=void 0,this._baseOffset=void 0,this._lines=[],this._baseIndent=" ".repeat(4),this._baseOffset=" ".repeat(e)}prepend(e){this._lines=e.trim().split(`
`).map(t=>t.trim()).concat(this._lines)}add(e){this._lines.push(...e.trim().split(`
`).map(t=>t.trim()))}newLine(){this._lines.push("")}format(){let e="",t="";return this._lines.map(i=>{if(i==="")return i;(i.startsWith("}")||i.startsWith("]")||i.includes("});")||i===");")&&(e=e.substring(this._baseIndent.length));let n=/^(for|while|if).*\(.*\)$/.test(t)?this._baseIndent:"";return t=i,i=e+n+i,(i.endsWith("{")||i.endsWith("[")||i.endsWith("("))&&(e+=this._baseIndent),i.endsWith("));")&&(e=e.substring(this._baseIndent.length)),this._baseOffset+i}).join(`
`)}};function Ke(r){return(0,Nf.escapeWithQuotes)(r,'"')}});var Yb=w(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.PythonLanguageGenerator=void 0;var Kb=ua(),Aq=da(),Bf=gn(),Mq=Iq(gs());function Iq(r){return r&&r.__esModule?r:{default:r}}var Jb=class{constructor(e){this.id="python",this.fileName="Python",this.highlighter="python",this._awaitPrefix=void 0,this._asyncPrefix=void 0,this._isAsync=void 0,this.id=e?"python-async":"python",this.fileName=e?"Python Async":"Python",this._isAsync=e,this._awaitPrefix=e?"await ":"",this._asyncPrefix=e?"async ":""}generateAction(e){let{action:t,pageAlias:i}=e,n=new Hf(4);if(n.newLine(),n.add("# "+(0,Aq.actionTitle)(t)),t.name==="openPage")return n.add(`${i} = ${this._awaitPrefix}context.new_page()`),t.url&&t.url!=="about:blank"&&t.url!=="chrome://newtab/"&&n.add(`${this._awaitPrefix}${i}.goto(${_t(t.url)})`),n.format();let s=e.isMainFrame?i:e.frameName?`${i}.frame(${wn({name:e.frameName},!1)})`:`${i}.frame(${wn({url:e.frameUrl},!1)})`,o=(0,Kb.toSignalMap)(t);o.dialog&&n.add(`  ${i}.once("dialog", lambda dialog: dialog.dismiss())`);let c=this._generateActionCall(t),l=`${this._awaitPrefix}${s}.${c}`;return o.popup&&(l=`${this._asyncPrefix}with ${i}.expect_popup() as popup_info {
        ${l}
      }
      ${o.popup.popupAlias} = ${this._awaitPrefix}popup_info.value`),o.download&&(l=`${this._asyncPrefix}with ${i}.expect_download() as download_info {
        ${l}
      }
      download = ${this._awaitPrefix}download_info.value`),o.waitForNavigation&&(l=`
      # ${this._asyncPrefix}with ${i}.expect_navigation(url=${_t(o.waitForNavigation.url)}):
      ${this._asyncPrefix}with ${i}.expect_navigation() {
        ${l}
      }`),n.add(l),o.assertNavigation&&n.add(`  # assert ${i}.url == ${_t(o.assertNavigation.url)}`),n.format()}_generateActionCall(e){switch(e.name){case"openPage":throw Error("Not reached");case"closePage":return"close()";case"click":{let t="click";e.clickCount===2&&(t="dblclick");let i=(0,Bf.toModifiers)(e.modifiers),n={};e.button!=="left"&&(n.button=e.button),i.length&&(n.modifiers=i),e.clickCount>2&&(n.clickCount=e.clickCount);let s=wn(n,!0);return`${t}(${_t(e.selector)}${s})`}case"check":return`check(${_t(e.selector)})`;case"uncheck":return`uncheck(${_t(e.selector)})`;case"fill":return`fill(${_t(e.selector)}, ${_t(e.text)})`;case"setInputFiles":return`set_input_files(${_t(e.selector)}, ${Ll(e.files.length===1?e.files[0]:e.files)})`;case"press":{let i=[...(0,Bf.toModifiers)(e.modifiers),e.key].join("+");return`press(${_t(e.selector)}, ${_t(i)})`}case"navigate":return`goto(${_t(e.url)})`;case"select":return`select_option(${_t(e.selector)}, ${Ll(e.options.length===1?e.options[0]:e.options)})`}}generateHeader(e){let t=new Hf;return this._isAsync?t.add(`
import asyncio

from playwright.async_api import Playwright, async_playwright


async def run(playwright: Playwright) -> None {
    browser = await playwright.${e.browserName}.launch(${wn(e.launchOptions,!1)})
    context = await browser.new_context(${Xb(e.contextOptions,e.deviceName)})`):t.add(`
from playwright.sync_api import Playwright, sync_playwright


def run(playwright: Playwright) -> None {
    browser = playwright.${e.browserName}.launch(${wn(e.launchOptions,!1)})
    context = browser.new_context(${Xb(e.contextOptions,e.deviceName)})`),t.format()}generateFooter(e){return this._isAsync?`
    # ---------------------${e?`
    await context.storage_state(path=${_t(e)})`:""}
    await context.close()
    await browser.close()


async def main() -> None:
    async with async_playwright() as playwright:
        await run(playwright)


asyncio.run(main())
`:`
    # ---------------------${e?`
    context.storage_state(path=${_t(e)})`:""}
    context.close()
    browser.close()


with sync_playwright() as playwright:
    run(playwright)
`}};Bl.PythonLanguageGenerator=Jb;function Ll(r){return r===!1?"False":r===!0?"True":r===void 0?"None":Array.isArray(r)?`[${r.map(Ll).join(", ")}]`:typeof r=="string"?_t(r):String(r)}function Fq(r){let e=/((?<=[a-z0-9])[A-Z]|(?!^)[A-Z](?=[a-z]))/g;return r.replace(e,"_$1").toLowerCase()}function wn(r,e){let t=Object.keys(r);return t.length?(e?", ":"")+t.map(i=>`${Fq(i)}=${Ll(r[i])}`).join(", "):""}function Xb(r,e){let t=e&&Mq.default[e];return t?`**playwright.devices[${_t(e)}]`+wn((0,Kb.sanitizeDeviceOptions)(t,r),!0):wn(r,!1)}var Hf=class{constructor(e=0){this._baseIndent=void 0,this._baseOffset=void 0,this._lines=[],this._baseIndent=" ".repeat(4),this._baseOffset=" ".repeat(e)}prepend(e){this._lines=e.trim().split(`
`).map(t=>t.trim()).concat(this._lines)}add(e){this._lines.push(...e.trim().split(`
`).map(t=>t.trim()))}newLine(){this._lines.push("")}format(){let e="",t=[];return this._lines.forEach(i=>{if(i==="")return t.push(i);if(i==="}"){e=e.substring(this._baseIndent.length);return}return i=e+i,i.endsWith("{")&&(e+=this._baseIndent,i=i.substring(0,i.length-1).trimEnd()+":"),t.push(this._baseOffset+i)}),t.join(`
`)}};function _t(r){return(0,Bf.escapeWithQuotes)(r,'"')}});var Qb=w(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.source=void 0;var Dq='var pwExport=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,o=0;const r={parts:[]},i=()=>{const t=e.substring(o,n).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&\'"\'===t[0]&&\'"\'===t[t.length-1]||t.length>1&&"\'"===t[0]&&"\'"===t[t.length-1]?(s="text",c=t):/^\\(*\\/\\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let l=!1;if("*"===s[0]&&(l=!0,s=s.substring(1)),r.parts.push({name:s,body:c}),l){if(void 0!==r.capture)throw new Error("Only one of the selectors can capture using * modifier");r.capture=r.parts.length-1}};if(!e.includes(">>"))return n=e.length,i(),r;for(;n<e.length;){const r=e[n];"\\\\"===r&&n+1<e.length?n+=2:r===t?(t=void 0,n++):t||\'"\'!==r&&"\'"!==r&&"`"!==r?t||">"!==r||">"!==e[n+1]?n++:(i(),n+=2,o=n):(t=r,n++)}return i(),r}(e),n=t.parts.map(e=>{if("css"===e.name||"css:light"===e.name){"css:light"===e.name&&(e.body=":light("+e.body+")");return{name:"css",body:(0,o.parseCSS)(e.body,r).selector}}return e});return{selector:e,capture:t.capture,parts:n}},t.customCSSNames=void 0;var o=n(2);const r=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=d,t.createStrictTextMatcher=m,t.createRegexTextMatcher=g,t.elementText=_,t.elementMatchesText=v,t.parentElementOrShadowHost=x,t.isVisible=O,t.SelectorEvaluatorImpl=void 0;var o=n(0);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set("not",c),this._engines.set("is",r),this._engines.set("where",r),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",l),this._engines.set("visible",a),this._engines.set("text",h),this._engines.set("text-is",u),this._engines.set("text-matches",p),this._engines.set("has-text",f),this._engines.set("right-of",M("right-of",w)),this._engines.set("left-of",M("left-of",E)),this._engines.set("above",M("above",S)),this._engines.set("below",M("below",T)),this._engines.set("near",M("near",b)),this._engines.set("nth-match",k);const t=[...this._engines.keys()];t.sort();const n=[...o.customCSSNames];if(n.sort(),t.join("|")!==n.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${n.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,o){e.has(t)||e.set(t,[]);const r=e.get(t),i=r.find(e=>n.every((t,n)=>e.rest[n]===t));if(i)return i.result;const s=o();return r.push({rest:n,result:s}),s}_checkSelector(e){if(!("object"==typeof e&&e&&(Array.isArray(e)||"simples"in e&&e.simples.length)))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,n){const o=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[o,n.scope,n.pierceShadow],()=>Array.isArray(o)?this._matchesEngine(r,e,o,n):!!this._matchesSimple(e,o.simples[o.simples.length-1].selector,n)&&this._matchesParents(e,o,o.simples.length-2,n))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],()=>{if(Array.isArray(n))return this._queryEngine(r,e,n);const t=this._scoreMap;this._scoreMap=new Map;let o=this._querySimple(e,n.simples[n.simples.length-1].selector);return o=o.filter(t=>this._matchesParents(t,n,n.simples.length-2,e)),this._scoreMap.size&&o.sort((e,t)=>{const n=this._scoreMap.get(e),o=this._scoreMap.get(t);return n===o?0:void 0===n?1:void 0===o?-1:n-o}),this._scoreMap=t,o})}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],()=>{if(!t.functions.some(e=>"scope"===e.name||"is"===e.name)&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const o of t.functions)if(!this._matchesEngine(this._getEngine(o.name),e,o.args,n))return!1;return!0})}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],()=>{let n=t.css;const o=t.functions;let r;"*"===n&&o.length&&(n=void 0);let i=-1;void 0!==n?r=this._queryCSS(e,n):(i=o.findIndex(e=>void 0!==this._getEngine(e.name).query),-1===i&&(i=0),r=this._queryEngine(this._getEngine(o[i].name),e,o[i].args));for(let t=0;t<o.length;t++){if(t===i)continue;const n=this._getEngine(o[t].name);void 0!==n.matches&&(r=r.filter(r=>this._matchesEngine(n,r,o[t].args,e)))}for(let t=0;t<o.length;t++){if(t===i)continue;const n=this._getEngine(o[t].name);void 0===n.matches&&(r=r.filter(r=>this._matchesEngine(n,r,o[t].args,e)))}return r}):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,n,o){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,o.scope,o.pierceShadow],()=>{const{selector:r,combinator:i}=t.simples[n];if(">"===i){const i=C(e,o);return!(!i||!this._matchesSimple(i,r,o))&&this._matchesParents(i,t,n-1,o)}if("+"===i){const i=P(e,o);return!(!i||!this._matchesSimple(i,r,o))&&this._matchesParents(i,t,n-1,o)}if(""===i){let i=C(e,o);for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if(""===t.simples[n-1].combinator)break}i=C(i,o)}return!1}if("~"===i){let i=P(e,o);for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if("~"===t.simples[n-1].combinator)break}i=P(i,o)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,r,o)){if(this._matchesParents(i,t,n-1,o))return!0;if(""===t.simples[n-1].combinator)break}i=C(i,o)}return!1}throw new Error(`Unsupported combinator "${i}"`)})}_matchesEngine(e,t,n,o){if(e.matches)return this._callMatches(e,t,n,o);if(e.query)return this._callQuery(e,n,o).includes(t);throw new Error(\'Selector engine should implement "matches" or "query"\')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,"*").filter(o=>this._callMatches(e,o,n,t));throw new Error(\'Selector engine should implement "matches" or "query"\')}_callMatches(e,t,n,o){return this._cached(this._cacheCallMatches,t,[e,o.scope,o.pierceShadow,...n],()=>e.matches(t,n,o,this))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],()=>e.query(n,t,this))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],()=>{let n=[];return function o(r){if(n=n.concat([...r.querySelectorAll(t)]),e.pierceShadow){r.shadowRoot&&o(r.shadowRoot);for(const e of r.querySelectorAll("*"))e.shadowRoot&&o(e.shadowRoot)}}(e.scope),n})}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const r={matches(e,t,n,o){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');return t.some(t=>o.matches(e,t,n))},query(e,t,n){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');let o=[];for(const r of t)o=o.concat(n.query(e,r));return 1===t.length?o:function(e){const t=new Map,n=[],o=[];return e.forEach(e=>(function e(o){let r=t.get(o);if(r)return r;const i=x(o);if(i){e(i).children.push(o)}else n.push(o);return r={children:[],taken:!1},t.set(o,r),r}(e)).taken=!0),n.forEach((function e(n){const r=t.get(n);r.taken&&o.push(n);if(r.children.length>1){const e=new Set(r.children);r.children=[];let t=n.firstElementChild;for(;t&&r.children.length<e.size;)e.has(t)&&r.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&r.children.length<e.size;)e.has(t)&&r.children.push(t),t=t.nextElementSibling}r.children.forEach(e)})),o}(o)}},i={matches(e,t,n,o){if(0===t.length)throw new Error(\'"has" engine expects non-empty selector list\');return o.query({...n,scope:e},t).length>0}},s={matches(e,t,n,o){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,o){if(0===t.length)throw new Error(\'"not" engine expects non-empty selector list\');return!o.matches(e,t,n)}},l={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,o)=>o.matches(e,t,{...n,pierceShadow:!1})},a={matches(e,t,n,o){if(t.length)throw new Error(\'"visible" engine expects no arguments\');return O(e)}},h={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text" engine expects a single string\');return"self"===v(o,e,d(t[0]))}},u={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text-is" engine expects a single string\');return"none"!==v(o,e,m(t[0]))}},p={matches(e,t,n,o){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error(\'"text-matches" engine expects a regexp body and optional regexp flags\');return"self"===v(o,e,g(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,o){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"has-text" engine expects a single string\');if(y(e))return!1;return d(t[0])(_(o,e))}};function d(e){return e=e.trim().replace(/\\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\\s+/g," ").toLowerCase().includes(e)}function m(e){return e=e.trim().replace(/\\s+/g," "),t=>t.immediate.some(t=>t.trim().replace(/\\s+/g," ")===e)}function g(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function y(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function _(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:"",immediate:[]},!y(t)){let o="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))n={full:t.value,immediate:[t.value]};else{for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType===Node.TEXT_NODE?(n.full+=r.nodeValue||"",o+=r.nodeValue||""):(o&&n.immediate.push(o),o="",r.nodeType===Node.ELEMENT_NODE&&(n.full+=_(e,r).full));o&&n.immediate.push(o),t.shadowRoot&&(n.full+=_(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function v(e,t,n){if(y(t))return"none";if(!n(_(e,t)))return"none";for(let o=t.firstChild;o;o=o.nextSibling)if(o.nodeType===Node.ELEMENT_NODE&&n(_(e,o)))return"selfAndChildren";return t.shadowRoot&&n(_(e,t.shadowRoot))?"selfAndChildren":"self"}function w(e,t,n){const o=e.left-t.right;if(!(o<0||void 0!==n&&o>n))return o+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function E(e,t,n){const o=t.left-e.right;if(!(o<0||void 0!==n&&o>n))return o+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function S(e,t,n){const o=t.top-e.bottom;if(!(o<0||void 0!==n&&o>n))return o+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function T(e,t,n){const o=e.top-t.bottom;if(!(o<0||void 0!==n&&o>n))return o+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function b(e,t,n){const o=void 0===n?50:n;let r=0;return e.left-t.right>=0&&(r+=e.left-t.right),t.left-e.right>=0&&(r+=t.left-e.right),t.top-e.bottom>=0&&(r+=t.top-e.bottom),e.top-t.bottom>=0&&(r+=e.top-t.bottom),r>o?void 0:r}function M(e,t){return{matches(n,o,r,i){const s=o.length&&"number"==typeof o[o.length-1]?o[o.length-1]:void 0,c=void 0===s?o:o.slice(0,o.length-1);if(o.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const l=n.getBoundingClientRect();let a;for(const e of i.query(r,c)){if(e===n)continue;const o=t(l,e.getBoundingClientRect(),s);void 0!==o&&((void 0===a||o<a)&&(a=o))}return void 0!==a&&(i._markScore(n,a),!0)}}}const k={query(e,t,n){let o=t[t.length-1];if(t.length<2)throw new Error(\'"nth-match" engine expects non-empty selector list and an index argument\');if("number"!=typeof o||o<1)throw new Error(\'"nth-match" engine expects a one-based index as the last argument\');const i=r.query(e,t.slice(0,t.length-1),n);return o--,o<i.length?[i[o]]:[]}};function x(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function C(e,t){if(e!==t.scope)return t.pierceShadow?x(e):e.parentElement||void 0}function P(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function O(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let n;try{n=o.tokenize(e),n[n.length-1]instanceof o.EOFToken||n.push(new o.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,o=(t.stack||"").indexOf(t.message);throw-1!==o&&(t.stack=t.stack.substring(0,o)+n+t.stack.substring(o+t.message.length)),t.message=n,t}const r=n.find(e=>e instanceof o.AtKeywordToken||e instanceof o.BadStringToken||e instanceof o.BadURLToken||e instanceof o.ColumnToken||e instanceof o.CDOToken||e instanceof o.CDCToken||e instanceof o.SemicolonToken||e instanceof o.OpenCurlyToken||e instanceof o.CloseCurlyToken||e instanceof o.URLToken||e instanceof o.PercentageToken);if(r)throw new Error(`Unsupported token "${r.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${n[i].toSource()}" while parsing selector "${e}"`)}function l(){for(;n[i]instanceof o.WhitespaceToken;)i++}function a(e=i){return n[e]instanceof o.IdentToken}function h(e=i){return n[e]instanceof o.CommaToken}function u(e=i){return n[e]instanceof o.CloseParenToken}function p(e=i){return n[e]instanceof o.DelimToken&&"*"===n[e].value}function f(e=i){return n[e]instanceof o.EOFToken}function d(e=i){return n[e]instanceof o.DelimToken&&[">","+","~"].includes(n[e].value)}function m(e=i){return h(e)||u(e)||f(e)||d(e)||n[e]instanceof o.WhitespaceToken}function g(){const e=[y()];for(;l(),h();)i++,e.push(y());return e}function y(){return l(),function(e=i){return n[e]instanceof o.NumberToken}()||function(e=i){return n[e]instanceof o.StringToken}()?n[i++].value:function(){l();const e={simples:[{selector:_(),combinator:""}]};for(;;){if(l(),d())e.simples[e.simples.length-1].combinator=n[i++].value,l();else if(m())break;e.simples.push({combinator:"",selector:_()})}return e}()}function _(){let e="";const r=[];for(;!m();)if(a()||p())e+=n[i++].toSource();else if(n[i]instanceof o.HashToken)e+=n[i++].toSource();else if(n[i]instanceof o.DelimToken&&"."===n[i].value){if(i++,!a())throw c();e+="."+n[i++].toSource()}else if(n[i]instanceof o.ColonToken)if(i++,a())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();r.push({name:e,args:[]}),s.add(e)}else e+=":"+n[i++].toSource();else{if(!(n[i]instanceof o.FunctionToken))throw c();{const o=n[i++].value.toLowerCase();if(t.has(o)?(r.push({name:o,args:g()}),s.add(o)):e+=`:${o}(${v()})`,l(),!u())throw c();i++}}else{if(!(n[i]instanceof o.OpenSquareToken))throw c();for(e+="[",i++;!(n[i]instanceof o.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof o.CloseSquareToken))throw c();e+="]",i++}if(!e&&!r.length)throw c();return{css:e||void 0,functions:r}}function v(){let e="";for(;!u()&&!f();)e+=n[i++].toSource();return e}const w=g();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(w.some(e=>"object"!=typeof e||!("simples"in e)))throw new Error(`Error while parsing selector "${e}"`);return{selector:w,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map(t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let o=t.css||"";return o+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(""),n&&(o+=" "+n),o}).join(" ")).join(", ")};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}o.default=e,n&&n.set(e,o);return o}(n(3));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}},function(e,t,n){"use strict";var o,r,i;r=[t],void 0===(i="function"==typeof(o=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function o(e){return n(e)||t(e,65,70)||t(e,97,102)}function r(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return r(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function l(e){return 10==e}function a(e){return l(e)||9==e||32==e}var h=function(e){this.message=e};function u(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function p(){throw"Abstract Base Class"}function f(){return this}function d(){return this}function m(){return this}function g(){return this}function y(){return this}function _(){return this}function v(){return this}function w(){return this}function E(){throw"Abstract Base Class"}function S(){return this.value="{",this.mirror="}",this}function T(){return this.value="}",this.mirror="{",this}function b(){return this.value="[",this.mirror="]",this}function M(){return this.value="]",this.mirror="[",this}function k(){return this.value="(",this.mirror=")",this}function x(){return this.value=")",this.mirror="(",this}function C(){return this}function P(){return this}function O(){return this}function A(){return this}function N(){return this}function j(){return this}function R(){return this}function I(e){return this.value=u(e),this}function D(){throw"Abstract Base Class"}function L(e){this.value=e}function $(e){this.value=e,this.mirror=")"}function U(e){this.value=e}function q(e){this.value=e,this.type="unrestricted"}function G(e){this.value=e}function F(e){this.value=e}function H(){this.value=null,this.type="integer",this.repr=""}function K(){this.value=null,this.repr=""}function B(){this.value=null,this.type="integer",this.repr="",this.unit=""}function W(e){for(var n="",o=(e=""+e).charCodeAt(0),r=0;r<e.length;r++){var i=e.charCodeAt(r);if(0==i)throw new h("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==r&&t(i,48,57)||1==r&&t(i,48,57)&&45==o?n+="\\\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[r]:n+="\\\\"+e[r]}return n}function J(e){e=""+e;for(var n="",o=0;o<e.length;o++){var r=e.charCodeAt(o);if(0==r)throw new h("Invalid character: the input contains U+0000.");t(r,1,31)||127==r?n+="\\\\"+r.toString(16)+" ":n+=34==r||92==r?"\\\\"+e[o]:e[o]}return n}(h.prototype=new Error).name="InvalidCharacterError",p.prototype.toJSON=function(){return{token:this.tokenType}},p.prototype.toString=function(){return this.tokenType},p.prototype.toSource=function(){return""+this},f.prototype=Object.create(p.prototype),f.prototype.tokenType="BADSTRING",d.prototype=Object.create(p.prototype),d.prototype.tokenType="BADURL",m.prototype=Object.create(p.prototype),m.prototype.tokenType="WHITESPACE",m.prototype.toString=function(){return"WS"},m.prototype.toSource=function(){return" "},g.prototype=Object.create(p.prototype),g.prototype.tokenType="CDO",g.prototype.toSource=function(){return"\\x3c!--"},y.prototype=Object.create(p.prototype),y.prototype.tokenType="CDC",y.prototype.toSource=function(){return"--\\x3e"},_.prototype=Object.create(p.prototype),_.prototype.tokenType=":",v.prototype=Object.create(p.prototype),v.prototype.tokenType=";",w.prototype=Object.create(p.prototype),w.prototype.tokenType=",",E.prototype=Object.create(p.prototype),S.prototype=Object.create(E.prototype),S.prototype.tokenType="{",T.prototype=Object.create(E.prototype),T.prototype.tokenType="}",b.prototype=Object.create(E.prototype),b.prototype.tokenType="[",M.prototype=Object.create(E.prototype),M.prototype.tokenType="]",k.prototype=Object.create(E.prototype),k.prototype.tokenType="(",x.prototype=Object.create(E.prototype),x.prototype.tokenType=")",C.prototype=Object.create(p.prototype),C.prototype.tokenType="~=",P.prototype=Object.create(p.prototype),P.prototype.tokenType="|=",O.prototype=Object.create(p.prototype),O.prototype.tokenType="^=",A.prototype=Object.create(p.prototype),A.prototype.tokenType="$=",N.prototype=Object.create(p.prototype),N.prototype.tokenType="*=",j.prototype=Object.create(p.prototype),j.prototype.tokenType="||",R.prototype=Object.create(p.prototype),R.prototype.tokenType="EOF",R.prototype.toSource=function(){return""},I.prototype=Object.create(p.prototype),I.prototype.tokenType="DELIM",I.prototype.toString=function(){return"DELIM("+this.value+")"},I.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},I.prototype.toSource=function(){return"\\\\"==this.value?"\\\\\\n":this.value},D.prototype=Object.create(p.prototype),D.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},D.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},L.prototype=Object.create(D.prototype),L.prototype.tokenType="IDENT",L.prototype.toString=function(){return"IDENT("+this.value+")"},L.prototype.toSource=function(){return W(this.value)},$.prototype=Object.create(D.prototype),$.prototype.tokenType="FUNCTION",$.prototype.toString=function(){return"FUNCTION("+this.value+")"},$.prototype.toSource=function(){return W(this.value)+"("},U.prototype=Object.create(D.prototype),U.prototype.tokenType="AT-KEYWORD",U.prototype.toString=function(){return"AT("+this.value+")"},U.prototype.toSource=function(){return"@"+W(this.value)},q.prototype=Object.create(D.prototype),q.prototype.tokenType="HASH",q.prototype.toString=function(){return"HASH("+this.value+")"},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},q.prototype.toSource=function(){return"id"==this.type?"#"+W(this.value):"#"+function(e){for(var n="",o=((e=""+e).charCodeAt(0),0);o<e.length;o++){var r=e.charCodeAt(o);if(0==r)throw new h("Invalid character: the input contains U+0000.");r>=128||45==r||95==r||t(r,48,57)||t(r,65,90)||t(r,97,122)?n+=e[o]:n+="\\\\"+r.toString(16)+" "}return n}(this.value)},G.prototype=Object.create(D.prototype),G.prototype.tokenType="STRING",G.prototype.toString=function(){return\'"\'+J(this.value)+\'"\'},F.prototype=Object.create(D.prototype),F.prototype.tokenType="URL",F.prototype.toString=function(){return"URL("+this.value+")"},F.prototype.toSource=function(){return\'url("\'+J(this.value)+\'")\'},H.prototype=Object.create(p.prototype),H.prototype.tokenType="NUMBER",H.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},H.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},H.prototype.toSource=function(){return this.repr},K.prototype=Object.create(p.prototype),K.prototype.tokenType="PERCENTAGE",K.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},K.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},K.prototype.toSource=function(){return this.repr+"%"},B.prototype=Object.create(p.prototype),B.prototype.tokenType="DIMENSION",B.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},B.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},B.prototype.toSource=function(){var e=this.repr,n=W(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],o=0;o<e.length;o++){var r=e.charCodeAt(o);if(13==r&&10==e.charCodeAt(o+1)&&(r=10,o++),13!=r&&12!=r||(r=10),0==r&&(r=65533),t(r,55296,56319)&&t(e.charCodeAt(o+1),56320,57343)){var i=r-55296,s=e.charCodeAt(o+1)-56320;r=Math.pow(2,16)+i*Math.pow(2,10)+s,o++}n.push(r)}return n}(e);for(var r,h=-1,p=[],E=0,D=0,W=0,J={line:E,column:D},Q=function(t){return t>=e.length?-1:e[t]},z=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return Q(h+e)},V=function(e){return void 0===e&&(e=1),l(r=Q(h+=e))?(E+=1,W=D,D=0):D+=e,!0},X=function(){return h-=1,l(r)?(E-=1,D=W):D-=1,J.line=E,J.column=D,!0},Z=function(e){return void 0===e&&(e=r),-1==e},Y=function(){return console.log("Parse error at index "+h+", processing codepoint 0x"+r.toString(16)+"."),!0},ee=function(){if(te(),V(),a(r)){for(;a(z());)V();return new m}if(34==r)return re();if(35==r){if(s(z())||ce(z(1),z(2))){var e=new q;return ae(z(1),z(2),z(3))&&(e.type="id"),e.value=pe(),e}return new I(r)}return 36==r?61==z()?(V(),new A):new I(r):39==r?re():40==r?new k:41==r?new x:42==r?61==z()?(V(),new N):new I(r):43==r?ue()?(X(),ne()):new I(r):44==r?new w:45==r?ue()?(X(),ne()):45==z(1)&&62==z(2)?(V(2),new y):he()?(X(),oe()):new I(r):46==r?ue()?(X(),ne()):new I(r):58==r?new _:59==r?new v:60==r?33==z(1)&&45==z(2)&&45==z(3)?(V(3),new g):new I(r):64==r?ae(z(1),z(2),z(3))?new U(pe()):new I(r):91==r?new b:92==r?le()?(X(),oe()):(Y(),new I(r)):93==r?new M:94==r?61==z()?(V(),new O):new I(r):123==r?new S:124==r?61==z()?(V(),new P):124==z()?(V(),new j):new I(r):125==r?new T:126==r?61==z()?(V(),new C):new I(r):n(r)?(X(),ne()):i(r)?(X(),oe()):Z()?new R:new I(r)},te=function(){for(;47==z(1)&&42==z(2);)for(V(2);;){if(V(),42==r&&47==z()){V();break}if(Z())return void Y()}},ne=function(){var e,t=fe();return ae(z(1),z(2),z(3))?((e=new B).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=pe(),e):37==z()?(V(),(e=new K).value=t.value,e.repr=t.repr,e):((e=new H).value=t.value,e.repr=t.repr,e.type=t.type,e)},oe=function(){var e=pe();if("url"==e.toLowerCase()&&40==z()){for(V();a(z(1))&&a(z(2));)V();return 34==z()||39==z()?new $(e):!a(z())||34!=z(2)&&39!=z(2)?ie():new $(e)}return 40==z()?(V(),new $(e)):new L(e)},re=function(e){void 0===e&&(e=r);for(var t="";V();){if(r==e||Z())return new G(t);if(l(r))return Y(),X(),new f;92==r?Z(z())||(l(z())?V():t+=u(se())):t+=u(r)}},ie=function(){for(var e=new F("");a(z());)V();if(Z(z()))return e;for(;V();){if(41==r||Z())return e;if(a(r)){for(;a(z());)V();return 41==z()||Z(z())?(V(),e):(me(),new d)}if(34==r||39==r||40==r||c(r))return Y(),me(),new d;if(92==r){if(!le())return Y(),me(),new d;e.value+=u(se())}else e.value+=u(r)}},se=function(){if(V(),o(r)){for(var e=[r],t=0;t<5&&o(z());t++)V(),e.push(r);a(z())&&V();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return Z()?65533:r},ce=function(e,t){return 92==e&&!l(t)},le=function(){return ce(r,z())},ae=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},he=function(){return ae(r,z(1),z(2))},ue=function(){return e=r,t=z(1),o=z(2),43==e||45==e?!!n(t)||!(46!=t||!n(o)):46==e?!!n(t):!!n(e);var e,t,o},pe=function(){for(var e="";V();)if(s(r))e+=u(r);else{if(!le())return X(),e;e+=u(se())}},fe=function(){var e=[],t="integer";for(43!=z()&&45!=z()||(V(),e+=u(r));n(z());)V(),e+=u(r);if(46==z(1)&&n(z(2)))for(V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r);var o=z(1),i=z(2),s=z(3);if(69!=o&&101!=o||!n(i)){if((69==o||101==o)&&(43==i||45==i)&&n(s))for(V(),e+=u(r),V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r)}else for(V(),e+=u(r),V(),e+=u(r),t="number";n(z());)V(),e+=u(r);return{type:t,value:de(e),repr:e}},de=function(e){return+e},me=function(){for(;V();){if(41==r||Z())return;le()&&se()}},ge=0;!Z(z());)if(p.push(ee()),++ge>2*e.length)return"I\'m infinite-looping!";return p},e.IdentToken=L,e.FunctionToken=$,e.AtKeywordToken=U,e.HashToken=q,e.StringToken=G,e.BadStringToken=f,e.URLToken=F,e.BadURLToken=d,e.DelimToken=I,e.NumberToken=H,e.PercentageToken=K,e.DimensionToken=B,e.IncludeMatchToken=C,e.DashMatchToken=P,e.PrefixMatchToken=O,e.SuffixMatchToken=A,e.SubstringMatchToken=N,e.ColumnToken=j,e.WhitespaceToken=m,e.CDOToken=g,e.CDCToken=y,e.ColonToken=_,e.SemicolonToken=v,e.CommaToken=w,e.OpenParenToken=k,e.CloseParenToken=x,e.OpenSquareToken=b,e.CloseSquareToken=M,e.OpenCurlyToken=S,e.CloseCurlyToken=T,e.EOFToken=R,e.CSSParserToken=p,e.GroupingToken=E})?o.apply(t,r):o)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t,n){try{const o=e.parseSelector(t);return{selector:t,elements:e.querySelectorAll(o,n)}}catch(e){return{selector:t,elements:[]}}},t.generateSelector=function(e,t){e._evaluator.begin();try{t=t.closest("button,select,input,[role=button],[role=checkbox],[role=radio]")||t;const n=function(e,t){if(t.ownerDocument.documentElement===t)return[{engine:"css",selector:"html",score:1}];const n=(n,r)=>{const i=n===t;let u=r?function(e,t,n){if("SELECT"===t.nodeName)return[];const r=(0,o.elementText)(e._evaluator,t).full.trim().replace(/\\s+/g," ").substring(0,80);if(!r)return[];const i=[];let s=r;(r.includes(\'"\')||r.includes(">>")||"/"===r[0])&&(s=`/.*${function(e){return e.replace(/[.*+?^>${}()|[\\]\\\\]/g,"\\\\$&")}(r)}.*/`);if(i.push({engine:"text",selector:s,score:10}),n&&s===r){let e=t.nodeName.toLocaleLowerCase();t.hasAttribute("role")&&(e+=`[role=${h(t.getAttribute("role"))}]`),i.push({engine:"css",selector:`${e}:has-text("${r}")`,score:30})}return i}(e,n,n===t).map(e=>[e]):[];n!==t&&(u=s(u));const d=function(e,t){const n=[];for(const e of["data-testid","data-test-id","data-test"])t.hasAttribute(e)&&n.push({engine:"css",selector:`[${e}=${h(t.getAttribute(e))}]`,score:1});if("INPUT"===t.nodeName){const e=t;e.placeholder&&n.push({engine:"css",selector:`[placeholder=${h(e.placeholder)}]`,score:10})}t.hasAttribute("aria-label")&&n.push({engine:"css",selector:`[aria-label=${h(t.getAttribute("aria-label"))}]`,score:10});t.getAttribute("alt")&&["APPLET","AREA","IMG","INPUT"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[alt=${h(t.getAttribute("alt"))}]`,score:10});t.hasAttribute("role")&&n.push({engine:"css",selector:`${t.nodeName.toLocaleLowerCase()}[role=${h(t.getAttribute("role"))}]`,score:50});t.getAttribute("name")&&["BUTTON","FORM","FIELDSET","IFRAME","INPUT","KEYGEN","OBJECT","OUTPUT","SELECT","TEXTAREA","MAP","META","PARAM"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[name=${h(t.getAttribute("name"))}]`,score:50});["INPUT","TEXTAREA"].includes(t.nodeName)&&"hidden"!==t.getAttribute("type")&&t.getAttribute("type")&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[type=${h(t.getAttribute("type"))}]`,score:50});["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&n.push({engine:"css",selector:t.nodeName.toLowerCase(),score:50});const o=t.getAttribute("id");o&&!function(e){let t,n=0;for(let o=0;o<e.length;++o){const r=e[o];let i;"-"!==r&&"_"!==r&&(i=r>="a"&&r<="z"?"lower":r>="A"&&r<="Z"?"upper":r>="0"&&r<="9"?"digit":"other","lower"!==i||"upper"!==t?(t&&t!==i&&++n,t=i):t=i)}return n>=e.length/4}(o)&&n.push({engine:"css",selector:l(o),score:100});return n.push({engine:"css",selector:t.nodeName.toLocaleLowerCase(),score:200}),n}(0,n).map(e=>[e]);let m=f(e,t.ownerDocument,n,[...u,...d],i);u=s(u);const g=t=>{const o=r&&!t.length,s=[...t,...d].filter(e=>!m||p(e)<p(m));let l=s[0];if(l)for(let t=c(n);t;t=c(t)){const r=a(t,o);if(!r)continue;if(m&&p([...r,...l])>=p(m))continue;if(l=f(e,t,n,s,i),!l)return;const c=[...r,...l];(!m||p(c)<p(m))&&(m=c)}};return g(u),n===t&&u.length&&g([]),m},a=(e,t)=>{const o=t?r:i;let s=o.get(e);return void 0===s&&(s=n(e,t),o.set(e,s)),s};return a(t,!0)}(e,t),d=u(n||[a(e,t)]),m=e.parseSelector(d);return{selector:d,elements:e.querySelectorAll(m,t.ownerDocument)}}finally{r.clear(),i.clear(),e._evaluator.end()}};var o=n(1);const r=new Map,i=new Map;function s(e){return e.filter(e=>"/"!==e[0].selector[0])}function c(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:null}function l(e){return/^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(e)?"#"+e:`[id="${e}"]`}function a(e,t){const n=t.ownerDocument,o=[];function r(n){const r=o.slice();n&&r.unshift(n);const i=r.join(" "),s=e.parseSelector(i);return e.querySelector(s,t.ownerDocument,!1)===t?i:void 0}for(let e=t;e&&e!==n;e=c(e)){const t=e.nodeName.toLowerCase();let n="";if(e.id){const t=l(e.id),o=r(t);if(o)return{engine:"css",selector:o,score:1e7};n=t}const i=e.parentNode,s=[...e.classList];for(let e=0;e<s.length;++e){const t="."+s.slice(0,e+1).join("."),o=r(t);if(o)return{engine:"css",selector:o,score:1e7};if(!n&&i){1===i.querySelectorAll(t).length&&(n=t)}}if(i){const o=[...i.children],s=0===o.filter(e=>e.nodeName.toLowerCase()===t).indexOf(e)?t:`${t}:nth-child(${1+o.indexOf(e)})`,c=r(s);if(c)return{engine:"css",selector:c,score:1e7};n||(n=s)}else n||(n=t);o.unshift(n)}return{engine:"css",selector:r(),score:1e7}}function h(e){return`"${e.replace(/"/g,\'\\\\"\').replace(/\\n/g,"\\\\n")}"`}function u(e){const t=[];let n="";for(const{engine:o,selector:r}of e)t.length&&("css"!==n||"css"!==o||r.startsWith(":nth-match("))&&t.push(">>"),n=o,"css"===o?t.push(r):t.push(`${o}=${r}`);return t.join(" ")}function p(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].score*(e.length-n);return t}function f(e,t,n,o,r){const i=o.map(e=>({tokens:e,score:p(e)}));i.sort((e,t)=>e.score-t.score);let s=null;for(const{tokens:o}of i){const i=e.parseSelector(u(o)),c=e.querySelectorAll(i,t),l=c.indexOf(n);if(0===l)return o;if(!r||s||-1===l||c.length>5)continue;const a=o.map(e=>"text"!==e.engine?e:e.selector.startsWith("/")&&e.selector.endsWith("/")?{engine:"css",selector:`:text-matches("${e.selector.substring(1,e.selector.length-1)}")`,score:e.score}:{engine:"css",selector:`:text("${e.selector}")`,score:e.score});s=[{engine:"css",selector:`:nth-match(${u(a)}, ${l+1})`,score:p(a)+1e3}]}return s}},,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Recorder=void 0;var o=n(4);class r{constructor(e,t){this._injectedScript=void 0,this._performingAction=!1,this._outerGlassPaneElement=void 0,this._glassPaneShadow=void 0,this._innerGlassPaneElement=void 0,this._highlightElements=[],this._tooltipElement=void 0,this._listeners=[],this._hoveredModel=null,this._hoveredElement=null,this._activeModel=null,this._expectProgrammaticKeyUp=!1,this._pollRecorderModeTimer=void 0,this._mode="none",this._actionPointElement=void 0,this._actionPoint=void 0,this._actionSelector=void 0,this._params=void 0,this._params=t,this._injectedScript=e,this._outerGlassPaneElement=document.createElement("x-pw-glass"),this._outerGlassPaneElement.style.position="fixed",this._outerGlassPaneElement.style.top="0",this._outerGlassPaneElement.style.right="0",this._outerGlassPaneElement.style.bottom="0",this._outerGlassPaneElement.style.left="0",this._outerGlassPaneElement.style.zIndex="2147483647",this._outerGlassPaneElement.style.pointerEvents="none",this._outerGlassPaneElement.style.display="flex",this._tooltipElement=document.createElement("x-pw-tooltip"),this._actionPointElement=document.createElement("x-pw-action-point"),this._actionPointElement.setAttribute("hidden","true"),this._innerGlassPaneElement=document.createElement("x-pw-glass-inner"),this._innerGlassPaneElement.style.flex="auto",this._innerGlassPaneElement.appendChild(this._tooltipElement),this._glassPaneShadow=this._outerGlassPaneElement.attachShadow({mode:this._params.isUnderTest?"open":"closed"}),this._glassPaneShadow.appendChild(this._innerGlassPaneElement),this._glassPaneShadow.appendChild(this._actionPointElement);const n=document.createElement("style");n.textContent="\\n        x-pw-tooltip {\\n          align-items: center;\\n          backdrop-filter: blur(5px);\\n          background-color: rgba(0, 0, 0, 0.7);\\n          border-radius: 2px;\\n          box-shadow: rgba(0, 0, 0, 0.1) 0px 3.6px 3.7px,\\n                      rgba(0, 0, 0, 0.15) 0px 12.1px 12.3px,\\n                      rgba(0, 0, 0, 0.1) 0px -2px 4px,\\n                      rgba(0, 0, 0, 0.15) 0px -12.1px 24px,\\n                      rgba(0, 0, 0, 0.25) 0px 54px 55px;\\n          color: rgb(204, 204, 204);\\n          display: none;\\n          font-family: \'Dank Mono\', \'Operator Mono\', Inconsolata, \'Fira Mono\',\\n                       \'SF Mono\', Monaco, \'Droid Sans Mono\', \'Source Code Pro\', monospace;\\n          font-size: 12.8px;\\n          font-weight: normal;\\n          left: 0;\\n          line-height: 1.5;\\n          max-width: 600px;\\n          padding: 3.2px 5.12px 3.2px;\\n          position: absolute;\\n          top: 0;\\n        }\\n        x-pw-action-point {\\n          position: absolute;\\n          width: 20px;\\n          height: 20px;\\n          background: red;\\n          border-radius: 10px;\\n          pointer-events: none;\\n          margin: -10px 0 0 -10px;\\n          z-index: 2;\\n        }\\n        *[hidden] {\\n          display: none !important;\\n        }\\n    ",this._glassPaneShadow.appendChild(n),this._refreshListenersIfNeeded(),setInterval(()=>{this._refreshListenersIfNeeded(),t.isUnderTest&&!this._reportedReadyForTest&&(this._reportedReadyForTest=!0,console.error("Recorder script ready for test"))},500),globalThis._playwrightRefreshOverlay=()=>{this._pollRecorderMode().catch(e=>console.log(e))},globalThis._playwrightRefreshOverlay()}_refreshListenersIfNeeded(){(this._outerGlassPaneElement.parentElement!==document.documentElement||this._outerGlassPaneElement.nextElementSibling)&&(!function(e){for(const t of e)t();e.splice(0,e.length)}(this._listeners),this._listeners=[a(document,"click",e=>this._onClick(e),!0),a(document,"auxclick",e=>this._onClick(e),!0),a(document,"input",e=>this._onInput(e),!0),a(document,"keydown",e=>this._onKeyDown(e),!0),a(document,"keyup",e=>this._onKeyUp(e),!0),a(document,"mousedown",e=>this._onMouseDown(e),!0),a(document,"mouseup",e=>this._onMouseUp(e),!0),a(document,"mousemove",e=>this._onMouseMove(e),!0),a(document,"mouseleave",e=>this._onMouseLeave(e),!0),a(document,"focus",()=>this._onFocus(),!0),a(document,"scroll",()=>{this._hoveredModel=null,this._actionPointElement.hidden=!0,this._updateHighlight()},!0)],document.documentElement.appendChild(this._outerGlassPaneElement))}async _pollRecorderMode(){var e;this._pollRecorderModeTimer&&clearTimeout(this._pollRecorderModeTimer);const t=await globalThis._playwrightRecorderState().catch(e=>null);if(!t)return void(this._pollRecorderModeTimer=setTimeout(()=>this._pollRecorderMode(),1e3));const{mode:n,actionPoint:r,actionSelector:i}=t;n!==this._mode&&(this._mode=n,this._clearHighlight()),r&&this._actionPoint&&r.x===this._actionPoint.x&&r.y===this._actionPoint.y||(r||this._actionPoint)&&(r?(this._actionPointElement.style.top=r.y+"px",this._actionPointElement.style.left=r.x+"px",this._actionPointElement.hidden=!1):this._actionPointElement.hidden=!0,this._actionPoint=r),!this._actionSelector||null!==(e=this._hoveredModel)&&void 0!==e&&e.elements.length||(this._actionSelector=void 0),i!==this._actionSelector&&(this._hoveredModel=i?(0,o.querySelector)(this._injectedScript,i,document):null,this._updateHighlight(),this._actionSelector=i),this._pollRecorderModeTimer=setTimeout(()=>this._pollRecorderMode(),1e3)}_clearHighlight(){this._hoveredModel=null,this._activeModel=null,this._updateHighlight()}_actionInProgress(e){return!!this._performingAction||(c(e),!1)}_consumedDueToNoModel(e,t){return!t&&(c(e),!0)}_consumedDueWrongTarget(e){return(!this._activeModel||this._activeModel.elements[0]!==this._deepEventTarget(e))&&(c(e),!0)}_onClick(e){if("inspecting"===this._mode&&globalThis._playwrightRecorderSetSelector(this._hoveredModel?this._hoveredModel.selector:""),this._shouldIgnoreMouseEvent(e))return;if(this._actionInProgress(e))return;if(this._consumedDueToNoModel(e,this._hoveredModel))return;const t=l(this._deepEventTarget(e));t?this._performAction({name:t.checked?"check":"uncheck",selector:this._hoveredModel.selector,signals:[]}):this._performAction({name:"click",selector:this._hoveredModel.selector,signals:[],button:s(e),modifiers:i(e),clickCount:e.detail})}_shouldIgnoreMouseEvent(e){const t=this._deepEventTarget(e);if("none"===this._mode)return!0;if("inspecting"===this._mode)return c(e),!0;const n=t.nodeName;return"SELECT"===n||!("INPUT"!==n||!["date"].includes(t.type))}_onMouseDown(e){this._shouldIgnoreMouseEvent(e)||(this._performingAction||c(e),this._activeModel=this._hoveredModel)}_onMouseUp(e){this._shouldIgnoreMouseEvent(e)||this._performingAction||c(e)}_onMouseMove(e){if("none"===this._mode)return;const t=this._deepEventTarget(e);this._hoveredElement!==t&&(this._hoveredElement=t,this._updateModelForHoveredElement())}_onMouseLeave(e){this._deepEventTarget(e).nodeType===Node.DOCUMENT_NODE&&(this._hoveredElement=null,this._updateModelForHoveredElement())}_onFocus(){const e=this._deepActiveElement(document),t=e?(0,o.generateSelector)(this._injectedScript,e):null;this._activeModel=t&&t.selector?t:null,this._params.isUnderTest&&console.error("Highlight updated for test: "+(t?t.selector:null))}_updateModelForHoveredElement(){if(!this._hoveredElement)return this._hoveredModel=null,void this._updateHighlight();const e=this._hoveredElement,{selector:t,elements:n}=(0,o.generateSelector)(this._injectedScript,e);this._hoveredModel&&this._hoveredModel.selector===t||this._hoveredElement!==e||(this._hoveredModel=t?{selector:t,elements:n}:null,this._updateHighlight(),this._params.isUnderTest&&console.error("Highlight updated for test: "+t))}_updateHighlight(){const e=this._hoveredModel?this._hoveredModel.elements:[];this._tooltipElement.textContent=this._hoveredModel?this._hoveredModel.selector:"",this._tooltipElement.style.top="0",this._tooltipElement.style.left="0",this._tooltipElement.style.display="flex";const t=e.map(e=>e.getBoundingClientRect()),n=this._tooltipElement.offsetWidth,o=this._tooltipElement.offsetHeight,r=this._innerGlassPaneElement.offsetWidth,i=this._innerGlassPaneElement.offsetHeight;if(t.length){const e=t[0];let s=e.left;s+n>r-5&&(s=r-n-5);let c=e.bottom+5;c+o>i-5&&(c=e.top>o+5?e.top-o-5:i-5-o),this._tooltipElement.style.top=c+"px",this._tooltipElement.style.left=s+"px"}else this._tooltipElement.style.display="none";const s=this._highlightElements;this._highlightElements=[];for(const e of t){const t=s.length?s.shift():this._createHighlightElement(),n="recording"===this._mode?"#dc6f6f7f":"#6fa8dc7f";t.style.backgroundColor=this._highlightElements.length?"#f6b26b7f":n,t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.display="block",this._highlightElements.push(t)}for(const e of s)e.style.display="none",this._highlightElements.push(e)}_createHighlightElement(){const e=document.createElement("x-pw-highlight");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="0",e.style.height="0",e.style.boxSizing="border-box",this._glassPaneShadow.appendChild(e),e}_onInput(e){if("recording"!==this._mode)return!0;const t=this._deepEventTarget(e);if(["INPUT","TEXTAREA"].includes(t.nodeName)){const n=t,o=(n.type||"").toLowerCase();if("checkbox"===o)return;if("file"===o)return void globalThis._playwrightRecorderRecordAction({name:"setInputFiles",selector:this._activeModel.selector,signals:[],files:[...n.files||[]].map(e=>e.name)});if(this._consumedDueWrongTarget(e))return;globalThis._playwrightRecorderRecordAction({name:"fill",selector:this._activeModel.selector,signals:[],text:n.value})}if("SELECT"===t.nodeName){const n=t;if(this._actionInProgress(e))return;this._performAction({name:"select",selector:this._hoveredModel.selector,options:[...n.selectedOptions].map(e=>e.value),signals:[]})}}_shouldGenerateKeyPressFor(e){if(["Backspace","Delete","AltGraph"].includes(e.key))return!1;if("@"===e.key&&"KeyL"===e.code)return!1;if(navigator.platform.includes("Mac")){if("v"===e.key&&e.metaKey)return!1}else{if("v"===e.key&&e.ctrlKey)return!1;if("Insert"===e.key&&e.shiftKey)return!1}if(["Shift","Control","Meta","Alt"].includes(e.key))return!1;const t=e.ctrlKey||e.altKey||e.metaKey;return!(1===e.key.length&&!t)||!!l(this._deepEventTarget(e))}_onKeyDown(e){if("inspecting"!==this._mode){if("recording"!==this._mode)return!0;if(this._shouldGenerateKeyPressFor(e))if(this._actionInProgress(e))this._expectProgrammaticKeyUp=!0;else if(!this._consumedDueWrongTarget(e)){if(" "===e.key){const t=l(this._deepEventTarget(e));if(t)return void this._performAction({name:t.checked?"uncheck":"check",selector:this._activeModel.selector,signals:[]})}this._performAction({name:"press",selector:this._activeModel.selector,signals:[],key:e.key,modifiers:i(e)})}}else c(e)}_onKeyUp(e){this._shouldGenerateKeyPressFor(e)&&(this._expectProgrammaticKeyUp?this._expectProgrammaticKeyUp=!1:c(e))}async _performAction(e){this._performingAction=!0,await globalThis._playwrightRecorderPerformAction(e).catch(()=>{}),this._performingAction=!1,this._updateModelForHoveredElement(),this._onFocus(),this._params.isUnderTest&&console.error("Action performed for test: "+JSON.stringify({hovered:this._hoveredModel?this._hoveredModel.selector:null,active:this._activeModel?this._activeModel.selector:null}))}_deepEventTarget(e){return e.composedPath()[0]}_deepActiveElement(e){let t=e.activeElement;for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}}function i(e){return(e.altKey?1:0)|(e.ctrlKey?2:0)|(e.metaKey?4:0)|(e.shiftKey?8:0)}function s(e){switch(e.which){case 1:return"left";case 2:return"middle";case 3:return"right"}return"left"}function c(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}function l(e){if(!e||"INPUT"!==e.nodeName)return null;const t=e;return"checkbox"===t.type?t:null}function a(e,t,n,o){e.addEventListener(t,n,o);return()=>{e.removeEventListener(t,n,o)}}t.Recorder=r;var h=r;t.default=h}]).default;';Hl.source=Dq});var jf=w(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.source=void 0;var Rq='var pwExport=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=function(e){const t=function(e){let t,n=0,r=0;const o={parts:[]},i=()=>{const t=e.substring(r,n).trim(),i=t.indexOf("=");let s,c;-1!==i&&t.substring(0,i).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(s=t.substring(0,i).trim(),c=t.substring(i+1)):t.length>1&&\'"\'===t[0]&&\'"\'===t[t.length-1]||t.length>1&&"\'"===t[0]&&"\'"===t[t.length-1]?(s="text",c=t):/^\\(*\\/\\//.test(t)||t.startsWith("..")?(s="xpath",c=t):(s="css",c=t);let u=!1;if("*"===s[0]&&(u=!0,s=s.substring(1)),o.parts.push({name:s,body:c}),u){if(void 0!==o.capture)throw new Error("Only one of the selectors can capture using * modifier");o.capture=o.parts.length-1}};if(!e.includes(">>"))return n=e.length,i(),o;for(;n<e.length;){const o=e[n];"\\\\"===o&&n+1<e.length?n+=2:o===t?(t=void 0,n++):t||\'"\'!==o&&"\'"!==o&&"`"!==o?t||">"!==o||">"!==e[n+1]?n++:(i(),n+=2,r=n):(t=o,n++)}return i(),o}(e),n=t.parts.map(e=>{if("css"===e.name||"css:light"===e.name){"css:light"===e.name&&(e.body=":light("+e.body+")");return{name:"css",body:(0,r.parseCSS)(e.body,o).selector}}return e});return{selector:e,capture:t.capture,parts:n}},t.customCSSNames=void 0;var r=n(2);const o=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);t.customCSSNames=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLaxTextMatcher=y,t.createStrictTextMatcher=g,t.createRegexTextMatcher=m,t.elementText=w,t.elementMatchesText=S,t.parentElementOrShadowHost=O,t.isVisible=N,t.SelectorEvaluatorImpl=void 0;var r=n(0);t.SelectorEvaluatorImpl=class{constructor(e){this._engines=new Map,this._cacheQueryCSS=new Map,this._cacheMatches=new Map,this._cacheQuery=new Map,this._cacheMatchesSimple=new Map,this._cacheMatchesParents=new Map,this._cacheCallMatches=new Map,this._cacheCallQuery=new Map,this._cacheQuerySimple=new Map,this._cacheText=new Map,this._scoreMap=void 0,this._retainCacheCounter=0;for(const[t,n]of e)this._engines.set(t,n);this._engines.set("not",c),this._engines.set("is",o),this._engines.set("where",o),this._engines.set("has",i),this._engines.set("scope",s),this._engines.set("light",u),this._engines.set("visible",a),this._engines.set("text",l),this._engines.set("text-is",p),this._engines.set("text-matches",h),this._engines.set("has-text",f),this._engines.set("right-of",k("right-of",v)),this._engines.set("left-of",k("left-of",_)),this._engines.set("above",k("above",T)),this._engines.set("below",k("below",b)),this._engines.set("near",k("near",E)),this._engines.set("nth-match",C);const t=[...this._engines.keys()];t.sort();const n=[...r.customCSSNames];if(n.sort(),t.join("|")!==n.join("|"))throw new Error(`Please keep customCSSNames in sync with evaluator engines: ${t.join("|")} vs ${n.join("|")}`)}begin(){++this._retainCacheCounter}end(){--this._retainCacheCounter,this._retainCacheCounter||(this._cacheQueryCSS.clear(),this._cacheMatches.clear(),this._cacheQuery.clear(),this._cacheMatchesSimple.clear(),this._cacheMatchesParents.clear(),this._cacheCallMatches.clear(),this._cacheCallQuery.clear(),this._cacheQuerySimple.clear(),this._cacheText.clear())}_cached(e,t,n,r){e.has(t)||e.set(t,[]);const o=e.get(t),i=o.find(e=>n.every((t,n)=>e.rest[n]===t));if(i)return i.result;const s=r();return o.push({rest:n,result:s}),s}_checkSelector(e){if(!("object"==typeof e&&e&&(Array.isArray(e)||"simples"in e&&e.simples.length)))throw new Error(`Malformed selector "${e}"`);return e}matches(e,t,n){const r=this._checkSelector(t);this.begin();try{return this._cached(this._cacheMatches,e,[r,n.scope,n.pierceShadow],()=>Array.isArray(r)?this._matchesEngine(o,e,r,n):!!this._matchesSimple(e,r.simples[r.simples.length-1].selector,n)&&this._matchesParents(e,r,r.simples.length-2,n))}finally{this.end()}}query(e,t){const n=this._checkSelector(t);this.begin();try{return this._cached(this._cacheQuery,n,[e.scope,e.pierceShadow],()=>{if(Array.isArray(n))return this._queryEngine(o,e,n);const t=this._scoreMap;this._scoreMap=new Map;let r=this._querySimple(e,n.simples[n.simples.length-1].selector);return r=r.filter(t=>this._matchesParents(t,n,n.simples.length-2,e)),this._scoreMap.size&&r.sort((e,t)=>{const n=this._scoreMap.get(e),r=this._scoreMap.get(t);return n===r?0:void 0===n?1:void 0===r?-1:n-r}),this._scoreMap=t,r})}finally{this.end()}}_markScore(e,t){this._scoreMap&&this._scoreMap.set(e,t)}_matchesSimple(e,t,n){return this._cached(this._cacheMatchesSimple,e,[t,n.scope,n.pierceShadow],()=>{if(!t.functions.some(e=>"scope"===e.name||"is"===e.name)&&e===n.scope)return!1;if(t.css&&!this._matchesCSS(e,t.css))return!1;for(const r of t.functions)if(!this._matchesEngine(this._getEngine(r.name),e,r.args,n))return!1;return!0})}_querySimple(e,t){return t.functions.length?this._cached(this._cacheQuerySimple,t,[e.scope,e.pierceShadow],()=>{let n=t.css;const r=t.functions;let o;"*"===n&&r.length&&(n=void 0);let i=-1;void 0!==n?o=this._queryCSS(e,n):(i=r.findIndex(e=>void 0!==this._getEngine(e.name).query),-1===i&&(i=0),o=this._queryEngine(this._getEngine(r[i].name),e,r[i].args));for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0!==n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}for(let t=0;t<r.length;t++){if(t===i)continue;const n=this._getEngine(r[t].name);void 0===n.matches&&(o=o.filter(o=>this._matchesEngine(n,o,r[t].args,e)))}return o}):this._queryCSS(e,t.css||"*")}_matchesParents(e,t,n,r){return n<0||this._cached(this._cacheMatchesParents,e,[t,n,r.scope,r.pierceShadow],()=>{const{selector:o,combinator:i}=t.simples[n];if(">"===i){const i=M(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if("+"===i){const i=x(e,r);return!(!i||!this._matchesSimple(i,o,r))&&this._matchesParents(i,t,n-1,r)}if(""===i){let i=M(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=M(i,r)}return!1}if("~"===i){let i=x(e,r);for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if("~"===t.simples[n-1].combinator)break}i=x(i,r)}return!1}if(">="===i){let i=e;for(;i;){if(this._matchesSimple(i,o,r)){if(this._matchesParents(i,t,n-1,r))return!0;if(""===t.simples[n-1].combinator)break}i=M(i,r)}return!1}throw new Error(`Unsupported combinator "${i}"`)})}_matchesEngine(e,t,n,r){if(e.matches)return this._callMatches(e,t,n,r);if(e.query)return this._callQuery(e,n,r).includes(t);throw new Error(\'Selector engine should implement "matches" or "query"\')}_queryEngine(e,t,n){if(e.query)return this._callQuery(e,n,t);if(e.matches)return this._queryCSS(t,"*").filter(r=>this._callMatches(e,r,n,t));throw new Error(\'Selector engine should implement "matches" or "query"\')}_callMatches(e,t,n,r){return this._cached(this._cacheCallMatches,t,[e,r.scope,r.pierceShadow,...n],()=>e.matches(t,n,r,this))}_callQuery(e,t,n){return this._cached(this._cacheCallQuery,e,[n.scope,n.pierceShadow,...t],()=>e.query(n,t,this))}_matchesCSS(e,t){return e.matches(t)}_queryCSS(e,t){return this._cached(this._cacheQueryCSS,t,[e.scope,e.pierceShadow],()=>{let n=[];return function r(o){if(n=n.concat([...o.querySelectorAll(t)]),e.pierceShadow){o.shadowRoot&&r(o.shadowRoot);for(const e of o.querySelectorAll("*"))e.shadowRoot&&r(e.shadowRoot)}}(e.scope),n})}_getEngine(e){const t=this._engines.get(e);if(!t)throw new Error(`Unknown selector engine "${e}"`);return t}};const o={matches(e,t,n,r){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');return t.some(t=>r.matches(e,t,n))},query(e,t,n){if(0===t.length)throw new Error(\'"is" engine expects non-empty selector list\');let r=[];for(const o of t)r=r.concat(n.query(e,o));return 1===t.length?r:function(e){const t=new Map,n=[],r=[];return e.forEach(e=>(function e(r){let o=t.get(r);if(o)return o;const i=O(r);if(i){e(i).children.push(r)}else n.push(r);return o={children:[],taken:!1},t.set(r,o),o}(e)).taken=!0),n.forEach((function e(n){const o=t.get(n);o.taken&&r.push(n);if(o.children.length>1){const e=new Set(o.children);o.children=[];let t=n.firstElementChild;for(;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling;for(t=n.shadowRoot?n.shadowRoot.firstElementChild:null;t&&o.children.length<e.size;)e.has(t)&&o.children.push(t),t=t.nextElementSibling}o.children.forEach(e)})),r}(r)}},i={matches(e,t,n,r){if(0===t.length)throw new Error(\'"has" engine expects non-empty selector list\');return r.query({...n,scope:e},t).length>0}},s={matches(e,t,n,r){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');return 9===n.scope.nodeType?e===n.scope.documentElement:e===n.scope},query(e,t,n){if(0!==t.length)throw new Error(\'"scope" engine expects no arguments\');if(9===e.scope.nodeType){const t=e.scope.documentElement;return t?[t]:[]}return 1===e.scope.nodeType?[e.scope]:[]}},c={matches(e,t,n,r){if(0===t.length)throw new Error(\'"not" engine expects non-empty selector list\');return!r.matches(e,t,n)}},u={query:(e,t,n)=>n.query({...e,pierceShadow:!1},t),matches:(e,t,n,r)=>r.matches(e,t,{...n,pierceShadow:!1})},a={matches(e,t,n,r){if(t.length)throw new Error(\'"visible" engine expects no arguments\');return N(e)}},l={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text" engine expects a single string\');return"self"===S(r,e,y(t[0]))}},p={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"text-is" engine expects a single string\');return"none"!==S(r,e,g(t[0]))}},h={matches(e,t,n,r){if(0===t.length||"string"!=typeof t[0]||t.length>2||2===t.length&&"string"!=typeof t[1])throw new Error(\'"text-matches" engine expects a regexp body and optional regexp flags\');return"self"===S(r,e,m(t[0],2===t.length?t[1]:void 0))}},f={matches(e,t,n,r){if(1!==t.length||"string"!=typeof t[0])throw new Error(\'"has-text" engine expects a single string\');if(d(e))return!1;return y(t[0])(w(r,e))}};function y(e){return e=e.trim().replace(/\\s+/g," ").toLowerCase(),t=>t.full.trim().replace(/\\s+/g," ").toLowerCase().includes(e)}function g(e){return e=e.trim().replace(/\\s+/g," "),t=>t.immediate.some(t=>t.trim().replace(/\\s+/g," ")===e)}function m(e,t){const n=new RegExp(e,t);return e=>n.test(e.full)}function d(e){return"SCRIPT"===e.nodeName||"STYLE"===e.nodeName||document.head&&document.head.contains(e)}function w(e,t){let n=e._cacheText.get(t);if(void 0===n){if(n={full:"",immediate:[]},!d(t)){let r="";if(t instanceof HTMLInputElement&&("submit"===t.type||"button"===t.type))n={full:t.value,immediate:[t.value]};else{for(let o=t.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?(n.full+=o.nodeValue||"",r+=o.nodeValue||""):(r&&n.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(n.full+=w(e,o).full));r&&n.immediate.push(r),t.shadowRoot&&(n.full+=w(e,t.shadowRoot).full)}}e._cacheText.set(t,n)}return n}function S(e,t,n){if(d(t))return"none";if(!n(w(e,t)))return"none";for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType===Node.ELEMENT_NODE&&n(w(e,r)))return"selfAndChildren";return t.shadowRoot&&n(w(e,t.shadowRoot))?"selfAndChildren":"self"}function v(e,t,n){const r=e.left-t.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function _(e,t,n){const r=t.left-e.right;if(!(r<0||void 0!==n&&r>n))return r+Math.max(t.bottom-e.bottom,0)+Math.max(e.top-t.top,0)}function T(e,t,n){const r=t.top-e.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function b(e,t,n){const r=e.top-t.bottom;if(!(r<0||void 0!==n&&r>n))return r+Math.max(e.left-t.left,0)+Math.max(t.right-e.right,0)}function E(e,t,n){const r=void 0===n?50:n;let o=0;return e.left-t.right>=0&&(o+=e.left-t.right),t.left-e.right>=0&&(o+=t.left-e.right),t.top-e.bottom>=0&&(o+=t.top-e.bottom),e.top-t.bottom>=0&&(o+=e.top-t.bottom),o>r?void 0:o}function k(e,t){return{matches(n,r,o,i){const s=r.length&&"number"==typeof r[r.length-1]?r[r.length-1]:void 0,c=void 0===s?r:r.slice(0,r.length-1);if(r.length<1+(void 0===s?0:1))throw new Error(`"${e}" engine expects a selector list and optional maximum distance in pixels`);const u=n.getBoundingClientRect();let a;for(const e of i.query(o,c)){if(e===n)continue;const r=t(u,e.getBoundingClientRect(),s);void 0!==r&&((void 0===a||r<a)&&(a=r))}return void 0!==a&&(i._markScore(n,a),!0)}}}const C={query(e,t,n){let r=t[t.length-1];if(t.length<2)throw new Error(\'"nth-match" engine expects non-empty selector list and an index argument\');if("number"!=typeof r||r<1)throw new Error(\'"nth-match" engine expects a one-based index as the last argument\');const i=o.query(e,t.slice(0,t.length-1),n);return r--,r<i.length?[i[r]]:[]}};function O(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:void 0}function M(e,t){if(e!==t.scope)return t.pierceShadow?O(e):e.parentElement||void 0}function x(e,t){if(e!==t.scope)return e.previousElementSibling||void 0}function N(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return!0;const t=e.ownerDocument.defaultView.getComputedStyle(e);if(!t||"hidden"===t.visibility)return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCSS=function(e,t){let n;try{n=r.tokenize(e),n[n.length-1]instanceof r.EOFToken||n.push(new r.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,r=(t.stack||"").indexOf(t.message);throw-1!==r&&(t.stack=t.stack.substring(0,r)+n+t.stack.substring(r+t.message.length)),t.message=n,t}const o=n.find(e=>e instanceof r.AtKeywordToken||e instanceof r.BadStringToken||e instanceof r.BadURLToken||e instanceof r.ColumnToken||e instanceof r.CDOToken||e instanceof r.CDCToken||e instanceof r.SemicolonToken||e instanceof r.OpenCurlyToken||e instanceof r.CloseCurlyToken||e instanceof r.URLToken||e instanceof r.PercentageToken);if(o)throw new Error(`Unsupported token "${o.toSource()}" while parsing selector "${e}"`);let i=0;const s=new Set;function c(){return new Error(`Unexpected token "${n[i].toSource()}" while parsing selector "${e}"`)}function u(){for(;n[i]instanceof r.WhitespaceToken;)i++}function a(e=i){return n[e]instanceof r.IdentToken}function l(e=i){return n[e]instanceof r.CommaToken}function p(e=i){return n[e]instanceof r.CloseParenToken}function h(e=i){return n[e]instanceof r.DelimToken&&"*"===n[e].value}function f(e=i){return n[e]instanceof r.EOFToken}function y(e=i){return n[e]instanceof r.DelimToken&&[">","+","~"].includes(n[e].value)}function g(e=i){return l(e)||p(e)||f(e)||y(e)||n[e]instanceof r.WhitespaceToken}function m(){const e=[d()];for(;u(),l();)i++,e.push(d());return e}function d(){return u(),function(e=i){return n[e]instanceof r.NumberToken}()||function(e=i){return n[e]instanceof r.StringToken}()?n[i++].value:function(){u();const e={simples:[{selector:w(),combinator:""}]};for(;;){if(u(),y())e.simples[e.simples.length-1].combinator=n[i++].value,u();else if(g())break;e.simples.push({combinator:"",selector:w()})}return e}()}function w(){let e="";const o=[];for(;!g();)if(a()||h())e+=n[i++].toSource();else if(n[i]instanceof r.HashToken)e+=n[i++].toSource();else if(n[i]instanceof r.DelimToken&&"."===n[i].value){if(i++,!a())throw c();e+="."+n[i++].toSource()}else if(n[i]instanceof r.ColonToken)if(i++,a())if(t.has(n[i].value.toLowerCase())){const e=n[i++].value.toLowerCase();o.push({name:e,args:[]}),s.add(e)}else e+=":"+n[i++].toSource();else{if(!(n[i]instanceof r.FunctionToken))throw c();{const r=n[i++].value.toLowerCase();if(t.has(r)?(o.push({name:r,args:m()}),s.add(r)):e+=`:${r}(${S()})`,u(),!p())throw c();i++}}else{if(!(n[i]instanceof r.OpenSquareToken))throw c();for(e+="[",i++;!(n[i]instanceof r.CloseSquareToken||f());)e+=n[i++].toSource();if(!(n[i]instanceof r.CloseSquareToken))throw c();e+="]",i++}if(!e&&!o.length)throw c();return{css:e||void 0,functions:o}}function S(){let e="";for(;!p()&&!f();)e+=n[i++].toSource();return e}const v=m();if(!f())throw new Error(`Error while parsing selector "${e}"`);if(v.some(e=>"object"!=typeof e||!("simples"in e)))throw new Error(`Error while parsing selector "${e}"`);return{selector:v,names:Array.from(s)}},t.serializeSelector=function e(t){return t.map(t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let r=t.css||"";return r+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(""),n&&(r+=" "+n),r}).join(" ")).join(", ")};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(3));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}},function(e,t,n){"use strict";var r,o,i;o=[t],void 0===(i="function"==typeof(r=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function r(e){return n(e)||t(e,65,70)||t(e,97,102)}function o(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function i(e){return o(e)||function(e){return e>=128}(e)||95==e}function s(e){return i(e)||n(e)||45==e}function c(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function u(e){return 10==e}function a(e){return u(e)||9==e||32==e}var l=function(e){this.message=e};function p(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function h(){throw"Abstract Base Class"}function f(){return this}function y(){return this}function g(){return this}function m(){return this}function d(){return this}function w(){return this}function S(){return this}function v(){return this}function _(){throw"Abstract Base Class"}function T(){return this.value="{",this.mirror="}",this}function b(){return this.value="}",this.mirror="{",this}function E(){return this.value="[",this.mirror="]",this}function k(){return this.value="]",this.mirror="[",this}function C(){return this.value="(",this.mirror=")",this}function O(){return this.value=")",this.mirror="(",this}function M(){return this}function x(){return this}function N(){return this}function A(){return this}function j(){return this}function P(){return this}function $(){return this}function q(e){return this.value=p(e),this}function L(){throw"Abstract Base Class"}function R(e){this.value=e}function D(e){this.value=e,this.mirror=")"}function I(e){this.value=e}function U(e){this.value=e,this.type="unrestricted"}function B(e){this.value=e}function Q(e){this.value=e}function F(){this.value=null,this.type="integer",this.repr=""}function J(){this.value=null,this.repr=""}function W(){this.value=null,this.type="integer",this.repr="",this.unit=""}function z(e){for(var n="",r=(e=""+e).charCodeAt(0),o=0;o<e.length;o++){var i=e.charCodeAt(o);if(0==i)throw new l("Invalid character: the input contains U+0000.");t(i,1,31)||127==i||0==o&&t(i,48,57)||1==o&&t(i,48,57)&&45==r?n+="\\\\"+i.toString(16)+" ":i>=128||45==i||95==i||t(i,48,57)||t(i,65,90)||t(i,97,122)?n+=e[o]:n+="\\\\"+e[o]}return n}function G(e){e=""+e;for(var n="",r=0;r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");t(o,1,31)||127==o?n+="\\\\"+o.toString(16)+" ":n+=34==o||92==o?"\\\\"+e[r]:e[r]}return n}(l.prototype=new Error).name="InvalidCharacterError",h.prototype.toJSON=function(){return{token:this.tokenType}},h.prototype.toString=function(){return this.tokenType},h.prototype.toSource=function(){return""+this},f.prototype=Object.create(h.prototype),f.prototype.tokenType="BADSTRING",y.prototype=Object.create(h.prototype),y.prototype.tokenType="BADURL",g.prototype=Object.create(h.prototype),g.prototype.tokenType="WHITESPACE",g.prototype.toString=function(){return"WS"},g.prototype.toSource=function(){return" "},m.prototype=Object.create(h.prototype),m.prototype.tokenType="CDO",m.prototype.toSource=function(){return"\\x3c!--"},d.prototype=Object.create(h.prototype),d.prototype.tokenType="CDC",d.prototype.toSource=function(){return"--\\x3e"},w.prototype=Object.create(h.prototype),w.prototype.tokenType=":",S.prototype=Object.create(h.prototype),S.prototype.tokenType=";",v.prototype=Object.create(h.prototype),v.prototype.tokenType=",",_.prototype=Object.create(h.prototype),T.prototype=Object.create(_.prototype),T.prototype.tokenType="{",b.prototype=Object.create(_.prototype),b.prototype.tokenType="}",E.prototype=Object.create(_.prototype),E.prototype.tokenType="[",k.prototype=Object.create(_.prototype),k.prototype.tokenType="]",C.prototype=Object.create(_.prototype),C.prototype.tokenType="(",O.prototype=Object.create(_.prototype),O.prototype.tokenType=")",M.prototype=Object.create(h.prototype),M.prototype.tokenType="~=",x.prototype=Object.create(h.prototype),x.prototype.tokenType="|=",N.prototype=Object.create(h.prototype),N.prototype.tokenType="^=",A.prototype=Object.create(h.prototype),A.prototype.tokenType="$=",j.prototype=Object.create(h.prototype),j.prototype.tokenType="*=",P.prototype=Object.create(h.prototype),P.prototype.tokenType="||",$.prototype=Object.create(h.prototype),$.prototype.tokenType="EOF",$.prototype.toSource=function(){return""},q.prototype=Object.create(h.prototype),q.prototype.tokenType="DELIM",q.prototype.toString=function(){return"DELIM("+this.value+")"},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},q.prototype.toSource=function(){return"\\\\"==this.value?"\\\\\\n":this.value},L.prototype=Object.create(h.prototype),L.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},L.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},R.prototype=Object.create(L.prototype),R.prototype.tokenType="IDENT",R.prototype.toString=function(){return"IDENT("+this.value+")"},R.prototype.toSource=function(){return z(this.value)},D.prototype=Object.create(L.prototype),D.prototype.tokenType="FUNCTION",D.prototype.toString=function(){return"FUNCTION("+this.value+")"},D.prototype.toSource=function(){return z(this.value)+"("},I.prototype=Object.create(L.prototype),I.prototype.tokenType="AT-KEYWORD",I.prototype.toString=function(){return"AT("+this.value+")"},I.prototype.toSource=function(){return"@"+z(this.value)},U.prototype=Object.create(L.prototype),U.prototype.tokenType="HASH",U.prototype.toString=function(){return"HASH("+this.value+")"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},U.prototype.toSource=function(){return"id"==this.type?"#"+z(this.value):"#"+function(e){for(var n="",r=((e=""+e).charCodeAt(0),0);r<e.length;r++){var o=e.charCodeAt(r);if(0==o)throw new l("Invalid character: the input contains U+0000.");o>=128||45==o||95==o||t(o,48,57)||t(o,65,90)||t(o,97,122)?n+=e[r]:n+="\\\\"+o.toString(16)+" "}return n}(this.value)},B.prototype=Object.create(L.prototype),B.prototype.tokenType="STRING",B.prototype.toString=function(){return\'"\'+G(this.value)+\'"\'},Q.prototype=Object.create(L.prototype),Q.prototype.tokenType="URL",Q.prototype.toString=function(){return"URL("+this.value+")"},Q.prototype.toSource=function(){return\'url("\'+G(this.value)+\'")\'},F.prototype=Object.create(h.prototype),F.prototype.tokenType="NUMBER",F.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},F.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},F.prototype.toSource=function(){return this.repr},J.prototype=Object.create(h.prototype),J.prototype.tokenType="PERCENTAGE",J.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},J.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},J.prototype.toSource=function(){return this.repr+"%"},W.prototype=Object.create(h.prototype),W.prototype.tokenType="DIMENSION",W.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},W.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},W.prototype.toSource=function(){var e=this.repr,n=z(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(13==o&&10==e.charCodeAt(r+1)&&(o=10,r++),13!=o&&12!=o||(o=10),0==o&&(o=65533),t(o,55296,56319)&&t(e.charCodeAt(r+1),56320,57343)){var i=o-55296,s=e.charCodeAt(r+1)-56320;o=Math.pow(2,16)+i*Math.pow(2,10)+s,r++}n.push(o)}return n}(e);for(var o,l=-1,h=[],_=0,L=0,z=0,G={line:_,column:L},H=function(t){return t>=e.length?-1:e[t]},V=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return H(l+e)},K=function(e){return void 0===e&&(e=1),u(o=H(l+=e))?(_+=1,z=L,L=0):L+=e,!0},X=function(){return l-=1,u(o)?(_-=1,L=z):L-=1,G.line=_,G.column=L,!0},Z=function(e){return void 0===e&&(e=o),-1==e},Y=function(){return console.log("Parse error at index "+l+", processing codepoint 0x"+o.toString(16)+"."),!0},ee=function(){if(te(),K(),a(o)){for(;a(V());)K();return new g}if(34==o)return oe();if(35==o){if(s(V())||ce(V(1),V(2))){var e=new U;return ae(V(1),V(2),V(3))&&(e.type="id"),e.value=he(),e}return new q(o)}return 36==o?61==V()?(K(),new A):new q(o):39==o?oe():40==o?new C:41==o?new O:42==o?61==V()?(K(),new j):new q(o):43==o?pe()?(X(),ne()):new q(o):44==o?new v:45==o?pe()?(X(),ne()):45==V(1)&&62==V(2)?(K(2),new d):le()?(X(),re()):new q(o):46==o?pe()?(X(),ne()):new q(o):58==o?new w:59==o?new S:60==o?33==V(1)&&45==V(2)&&45==V(3)?(K(3),new m):new q(o):64==o?ae(V(1),V(2),V(3))?new I(he()):new q(o):91==o?new E:92==o?ue()?(X(),re()):(Y(),new q(o)):93==o?new k:94==o?61==V()?(K(),new N):new q(o):123==o?new T:124==o?61==V()?(K(),new x):124==V()?(K(),new P):new q(o):125==o?new b:126==o?61==V()?(K(),new M):new q(o):n(o)?(X(),ne()):i(o)?(X(),re()):Z()?new $:new q(o)},te=function(){for(;47==V(1)&&42==V(2);)for(K(2);;){if(K(),42==o&&47==V()){K();break}if(Z())return void Y()}},ne=function(){var e,t=fe();return ae(V(1),V(2),V(3))?((e=new W).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=he(),e):37==V()?(K(),(e=new J).value=t.value,e.repr=t.repr,e):((e=new F).value=t.value,e.repr=t.repr,e.type=t.type,e)},re=function(){var e=he();if("url"==e.toLowerCase()&&40==V()){for(K();a(V(1))&&a(V(2));)K();return 34==V()||39==V()?new D(e):!a(V())||34!=V(2)&&39!=V(2)?ie():new D(e)}return 40==V()?(K(),new D(e)):new R(e)},oe=function(e){void 0===e&&(e=o);for(var t="";K();){if(o==e||Z())return new B(t);if(u(o))return Y(),X(),new f;92==o?Z(V())||(u(V())?K():t+=p(se())):t+=p(o)}},ie=function(){for(var e=new Q("");a(V());)K();if(Z(V()))return e;for(;K();){if(41==o||Z())return e;if(a(o)){for(;a(V());)K();return 41==V()||Z(V())?(K(),e):(ge(),new y)}if(34==o||39==o||40==o||c(o))return Y(),ge(),new y;if(92==o){if(!ue())return Y(),ge(),new y;e.value+=p(se())}else e.value+=p(o)}},se=function(){if(K(),r(o)){for(var e=[o],t=0;t<5&&r(V());t++)K(),e.push(o);a(V())&&K();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return Z()?65533:o},ce=function(e,t){return 92==e&&!u(t)},ue=function(){return ce(o,V())},ae=function(e,t,n){return 45==e?i(t)||45==t||ce(t,n):!!i(e)||92==e&&ce(e,t)},le=function(){return ae(o,V(1),V(2))},pe=function(){return e=o,t=V(1),r=V(2),43==e||45==e?!!n(t)||!(46!=t||!n(r)):46==e?!!n(t):!!n(e);var e,t,r},he=function(){for(var e="";K();)if(s(o))e+=p(o);else{if(!ue())return X(),e;e+=p(se())}},fe=function(){var e=[],t="integer";for(43!=V()&&45!=V()||(K(),e+=p(o));n(V());)K(),e+=p(o);if(46==V(1)&&n(V(2)))for(K(),e+=p(o),K(),e+=p(o),t="number";n(V());)K(),e+=p(o);var r=V(1),i=V(2),s=V(3);if(69!=r&&101!=r||!n(i)){if((69==r||101==r)&&(43==i||45==i)&&n(s))for(K(),e+=p(o),K(),e+=p(o),K(),e+=p(o),t="number";n(V());)K(),e+=p(o)}else for(K(),e+=p(o),K(),e+=p(o),t="number";n(V());)K(),e+=p(o);return{type:t,value:ye(e),repr:e}},ye=function(e){return+e},ge=function(){for(;K();){if(41==o||Z())return;ue()&&se()}},me=0;!Z(V());)if(h.push(ee()),++me>2*e.length)return"I\'m infinite-looping!";return h},e.IdentToken=R,e.FunctionToken=D,e.AtKeywordToken=I,e.HashToken=U,e.StringToken=B,e.BadStringToken=f,e.URLToken=Q,e.BadURLToken=y,e.DelimToken=q,e.NumberToken=F,e.PercentageToken=J,e.DimensionToken=W,e.IncludeMatchToken=M,e.DashMatchToken=x,e.PrefixMatchToken=N,e.SuffixMatchToken=A,e.SubstringMatchToken=j,e.ColumnToken=P,e.WhitespaceToken=g,e.CDOToken=m,e.CDCToken=d,e.ColonToken=w,e.SemicolonToken=S,e.CommaToken=v,e.OpenParenToken=C,e.CloseParenToken=O,e.OpenSquareToken=E,e.CloseSquareToken=k,e.OpenCurlyToken=T,e.CloseCurlyToken=b,e.EOFToken=$,e.CSSParserToken=h,e.GroupingToken=_})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t,n){try{const r=e.parseSelector(t);return{selector:t,elements:e.querySelectorAll(r,n)}}catch(e){return{selector:t,elements:[]}}},t.generateSelector=function(e,t){e._evaluator.begin();try{t=t.closest("button,select,input,[role=button],[role=checkbox],[role=radio]")||t;const n=function(e,t){if(t.ownerDocument.documentElement===t)return[{engine:"css",selector:"html",score:1}];const n=(n,o)=>{const i=n===t;let p=o?function(e,t,n){if("SELECT"===t.nodeName)return[];const o=(0,r.elementText)(e._evaluator,t).full.trim().replace(/\\s+/g," ").substring(0,80);if(!o)return[];const i=[];let s=o;(o.includes(\'"\')||o.includes(">>")||"/"===o[0])&&(s=`/.*${function(e){return e.replace(/[.*+?^>${}()|[\\]\\\\]/g,"\\\\$&")}(o)}.*/`);if(i.push({engine:"text",selector:s,score:10}),n&&s===o){let e=t.nodeName.toLocaleLowerCase();t.hasAttribute("role")&&(e+=`[role=${l(t.getAttribute("role"))}]`),i.push({engine:"css",selector:`${e}:has-text("${o}")`,score:30})}return i}(e,n,n===t).map(e=>[e]):[];n!==t&&(p=s(p));const y=function(e,t){const n=[];for(const e of["data-testid","data-test-id","data-test"])t.hasAttribute(e)&&n.push({engine:"css",selector:`[${e}=${l(t.getAttribute(e))}]`,score:1});if("INPUT"===t.nodeName){const e=t;e.placeholder&&n.push({engine:"css",selector:`[placeholder=${l(e.placeholder)}]`,score:10})}t.hasAttribute("aria-label")&&n.push({engine:"css",selector:`[aria-label=${l(t.getAttribute("aria-label"))}]`,score:10});t.getAttribute("alt")&&["APPLET","AREA","IMG","INPUT"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[alt=${l(t.getAttribute("alt"))}]`,score:10});t.hasAttribute("role")&&n.push({engine:"css",selector:`${t.nodeName.toLocaleLowerCase()}[role=${l(t.getAttribute("role"))}]`,score:50});t.getAttribute("name")&&["BUTTON","FORM","FIELDSET","IFRAME","INPUT","KEYGEN","OBJECT","OUTPUT","SELECT","TEXTAREA","MAP","META","PARAM"].includes(t.nodeName)&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[name=${l(t.getAttribute("name"))}]`,score:50});["INPUT","TEXTAREA"].includes(t.nodeName)&&"hidden"!==t.getAttribute("type")&&t.getAttribute("type")&&n.push({engine:"css",selector:`${t.nodeName.toLowerCase()}[type=${l(t.getAttribute("type"))}]`,score:50});["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&n.push({engine:"css",selector:t.nodeName.toLowerCase(),score:50});const r=t.getAttribute("id");r&&!function(e){let t,n=0;for(let r=0;r<e.length;++r){const o=e[r];let i;"-"!==o&&"_"!==o&&(i=o>="a"&&o<="z"?"lower":o>="A"&&o<="Z"?"upper":o>="0"&&o<="9"?"digit":"other","lower"!==i||"upper"!==t?(t&&t!==i&&++n,t=i):t=i)}return n>=e.length/4}(r)&&n.push({engine:"css",selector:u(r),score:100});return n.push({engine:"css",selector:t.nodeName.toLocaleLowerCase(),score:200}),n}(0,n).map(e=>[e]);let g=f(e,t.ownerDocument,n,[...p,...y],i);p=s(p);const m=t=>{const r=o&&!t.length,s=[...t,...y].filter(e=>!g||h(e)<h(g));let u=s[0];if(u)for(let t=c(n);t;t=c(t)){const o=a(t,r);if(!o)continue;if(g&&h([...o,...u])>=h(g))continue;if(u=f(e,t,n,s,i),!u)return;const c=[...o,...u];(!g||h(c)<h(g))&&(g=c)}};return m(p),n===t&&p.length&&m([]),g},a=(e,t)=>{const r=t?o:i;let s=r.get(e);return void 0===s&&(s=n(e,t),r.set(e,s)),s};return a(t,!0)}(e,t),y=p(n||[a(e,t)]),g=e.parseSelector(y);return{selector:y,elements:e.querySelectorAll(g,t.ownerDocument)}}finally{o.clear(),i.clear(),e._evaluator.end()}};var r=n(1);const o=new Map,i=new Map;function s(e){return e.filter(e=>"/"!==e[0].selector[0])}function c(e){return e.parentElement?e.parentElement:e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.parentNode.host?e.parentNode.host:null}function u(e){return/^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(e)?"#"+e:`[id="${e}"]`}function a(e,t){const n=t.ownerDocument,r=[];function o(n){const o=r.slice();n&&o.unshift(n);const i=o.join(" "),s=e.parseSelector(i);return e.querySelector(s,t.ownerDocument,!1)===t?i:void 0}for(let e=t;e&&e!==n;e=c(e)){const t=e.nodeName.toLowerCase();let n="";if(e.id){const t=u(e.id),r=o(t);if(r)return{engine:"css",selector:r,score:1e7};n=t}const i=e.parentNode,s=[...e.classList];for(let e=0;e<s.length;++e){const t="."+s.slice(0,e+1).join("."),r=o(t);if(r)return{engine:"css",selector:r,score:1e7};if(!n&&i){1===i.querySelectorAll(t).length&&(n=t)}}if(i){const r=[...i.children],s=0===r.filter(e=>e.nodeName.toLowerCase()===t).indexOf(e)?t:`${t}:nth-child(${1+r.indexOf(e)})`,c=o(s);if(c)return{engine:"css",selector:c,score:1e7};n||(n=s)}else n||(n=t);r.unshift(n)}return{engine:"css",selector:o(),score:1e7}}function l(e){return`"${e.replace(/"/g,\'\\\\"\').replace(/\\n/g,"\\\\n")}"`}function p(e){const t=[];let n="";for(const{engine:r,selector:o}of e)t.length&&("css"!==n||"css"!==r||o.startsWith(":nth-match("))&&t.push(">>"),n=r,"css"===r?t.push(o):t.push(`${r}=${o}`);return t.join(" ")}function h(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n].score*(e.length-n);return t}function f(e,t,n,r,o){const i=r.map(e=>({tokens:e,score:h(e)}));i.sort((e,t)=>e.score-t.score);let s=null;for(const{tokens:r}of i){const i=e.parseSelector(p(r)),c=e.querySelectorAll(i,t),u=c.indexOf(n);if(0===u)return r;if(!o||s||-1===u||c.length>5)continue;const a=r.map(e=>"text"!==e.engine?e:e.selector.startsWith("/")&&e.selector.endsWith("/")?{engine:"css",selector:`:text-matches("${e.selector.substring(1,e.selector.length-1)}")`,score:e.score}:{engine:"css",selector:`:text("${e.selector}")`,score:e.score});s=[{engine:"css",selector:`:nth-match(${p(a)}, ${u+1})`,score:h(a)+1e3}]}return s}},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ConsoleAPI=void 0;var r=n(4);class o{constructor(e){this._injectedScript=void 0,this._injectedScript=e,window.playwright||(window.playwright={$:(e,t)=>this._querySelector(e,!!t),$$:e=>this._querySelectorAll(e),inspect:e=>this._inspect(e),selector:e=>this._selector(e),resume:()=>this._resume()})}_querySelector(e,t){if("string"!=typeof e)throw new Error("Usage: playwright.query(\'Playwright >> selector\').");const n=this._injectedScript.parseSelector(e);return this._injectedScript.querySelector(n,document,t)}_querySelectorAll(e){if("string"!=typeof e)throw new Error("Usage: playwright.$$(\'Playwright >> selector\').");const t=this._injectedScript.parseSelector(e);return this._injectedScript.querySelectorAll(t,document)}_inspect(e){if("string"!=typeof e)throw new Error("Usage: playwright.inspect(\'Playwright >> selector\').");window.inspect(this._querySelector(e,!1))}_selector(e){if(!(e instanceof Element))throw new Error("Usage: playwright.selector(element).");return(0,r.generateSelector)(this._injectedScript,e).selector}_resume(){window._playwrightResume().catch(()=>{})}}t.ConsoleAPI=o;var i=o;t.default=i}]).default;';jl.source=Rq});var Zb=w(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.installAppIcon=Lq;var Nq=qq(require("fs"));function qq(r){return r&&r.__esModule?r:{default:r}}async function Lq(r){let e=await Nq.default.promises.readFile(require.resolve("./appIcon.png"));await r._delegate._mainFrameSession._client.send("Browser.setDockTile",{image:e.toString("base64")})}});var rx=w($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.RecorderApp=void 0;var Bq=tx(require("fs")),Hq=tx(require("path")),jq=vr(),Wq=require("events"),pa=Qe(),$q=H(),zq=Vq(li()),Uq=Zb();function ex(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(ex=function(i){return i?t:e})(r)}function Vq(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=ex(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function tx(r){return r&&r.__esModule?r:{default:r}}var Wl=class extends Wq.EventEmitter{constructor(e,t){super();this._page=void 0,this.wsEndpoint=void 0,this.setMaxListeners(0),this._page=e,this.wsEndpoint=t}async close(){await this._page.context().close((0,pa.internalCallMetadata)())}async _init(){await(0,Uq.installAppIcon)(this._page),await this._page._setServerRequestInterceptor(async t=>{if(t.request().url().startsWith("https://playwright/")){let i=t.request().url().substring("https://playwright/".length),n=require.resolve("../../../web/recorder/"+i),s=await Bq.default.promises.readFile(n);await t.fulfill({status:200,headers:[{name:"Content-Type",value:zq.getType(Hq.default.extname(n))||"application/octet-stream"}],body:s.toString("base64"),isBase64:!0});return}await t.continue()}),await this._page.exposeBinding("dispatch",!1,(t,i)=>this.emit("event",i)),this._page.once("close",()=>{this.emit("close"),this._page.context().close((0,pa.internalCallMetadata)()).catch(t=>console.error(t))}),await this._page.mainFrame().goto((0,pa.internalCallMetadata)(),"https://playwright/index.html")}static async open(e){let t=fa().createPlaywright("javascript",!0),i=["--app=data:text/html,","--window-size=600,600","--window-position=1280,10"];process.env.PWTEST_RECORDER_PORT&&i.push(`--remote-debugging-port=${process.env.PWTEST_RECORDER_PORT}`);let n,s;e._browser.options.isChromium&&(n=e._browser.options.channel,n||(s=e._browser.options.customExecutablePath));let o=await t.chromium.launchPersistentContext((0,pa.internalCallMetadata)(),"",{channel:n,executablePath:s,args:i,noDefaultViewport:!0,headless:!!process.env.PWTEST_CLI_HEADLESS||(0,$q.isUnderTest)()&&!e._browser.options.headful,useWebSocket:!!process.env.PWTEST_RECORDER_PORT});await new jq.ProgressController((0,pa.internalCallMetadata)(),o._browser).run(async d=>{await o._browser._defaultContext._loadDefaultContextAsIs(d)});let[l]=o.pages(),u=new Wl(l,o._browser.options.wsEndpoint);return await u._init(),u}async setMode(e){await this._page.mainFrame().evaluateExpression((t=>{window.playwrightSetMode(t)}).toString(),!0,e,"main").catch(()=>{})}async setFile(e){await this._page.mainFrame().evaluateExpression((t=>{window.playwrightSetFile(t)}).toString(),!0,e,"main").catch(()=>{})}async setPaused(e){await this._page.mainFrame().evaluateExpression((t=>{window.playwrightSetPaused(t)}).toString(),!0,e,"main").catch(()=>{})}async setSources(e){await this._page.mainFrame().evaluateExpression((t=>{window.playwrightSetSources(t)}).toString(),!0,e,"main").catch(()=>{}),process.env.PWTEST_CLI_EXIT&&e.length&&(process.stdout.write(`
-------------8<-------------
`),process.stdout.write(e[0].text),process.stdout.write(`
-------------8<-------------
`))}async setSelector(e,t){await this._page.mainFrame().evaluateExpression((i=>{window.playwrightSetSelector(i.selector,i.focus)}).toString(),!0,{selector:e,focus:t},"main").catch(()=>{})}async updateCallLogs(e){await this._page.mainFrame().evaluateExpression((t=>{window.playwrightUpdateLogs(t)}).toString(),!0,e,"main").catch(()=>{})}async bringToFront(){await this._page.bringToFront()}};$l.RecorderApp=Wl});var ix=w($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.metadataToCallLog=Gq;function Gq(r,e){var t,i;let n=r.apiName||r.method;r.method==="waitForEventInfo"&&(n+=`(${r.params.info.event})`),n=n.replace("object.expect","expect"),r.error&&(e="error");let s={url:(t=r.params)===null||t===void 0?void 0:t.url,selector:(i=r.params)===null||i===void 0?void 0:i.selector},o=r.endTime?r.endTime-r.startTime:void 0;return typeof o=="number"&&r.pauseStartTime&&r.pauseEndTime&&(o-=r.pauseEndTime-r.pauseStartTime,o=Math.max(o,0)),{id:r.id,messages:r.log,title:n,status:e,error:r.error,params:s,duration:o}}});var Kf=w(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.RecorderSupplement=void 0;var zf=Gf(require("fs")),Kq=Nb(),vs=gn(),nx=bt(),Jq=ta(),Uf=ht(),Xq=zb(),sx=Df(),Yq=Gb(),ox=Yb(),Qq=Gf(Qb()),Zq=Gf(jf()),eL=rx(),ma=H(),tL=ix(),Vf=df();function ax(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(ax=function(i){return i?t:e})(r)}function Gf(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=ax(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var cx=Symbol("RecorderSupplement"),_a=class{static showInspector(e){_a.show(e,{}).catch(()=>{})}static show(e,t={}){let i=e[cx];if(!i){let n=new _a(e,t);i=n.install().then(()=>n),e[cx]=i}return i}constructor(e,t){this._generator=void 0,this._pageAliases=new Map,this._lastPopupOrdinal=0,this._lastDialogOrdinal=0,this._lastDownloadOrdinal=0,this._timers=new Set,this._context=void 0,this._mode=void 0,this._highlightedSelector="",this._recorderApp=null,this._params=void 0,this._currentCallsMetadata=new Map,this._recorderSources=void 0,this._userSources=new Map,this._allMetadatas=new Map,this._debugger=void 0,this._context=e,this._debugger=Vf.Debugger.lookup(e),e.instrumentation.addListener(this),this._params=t,this._mode=t.startRecording?"recording":"none";let i=t.language||e._browser.options.sdkLanguage,n=new Set([new Xq.JavaLanguageGenerator,new sx.JavaScriptLanguageGenerator(!1),new sx.JavaScriptLanguageGenerator(!0),new ox.PythonLanguageGenerator(!1),new ox.PythonLanguageGenerator(!0),new Yq.CSharpLanguageGenerator]),s=[...n].find(u=>u.id===i);if(!s)throw new Error(`
===============================
Unsupported language: '${i}'
===============================
`);n.delete(s);let o=[s,...n];this._recorderSources=[];let c=new Kq.CodeGenerator(e._browser.options.name,!!t.startRecording,t.launchOptions||{},t.contextOptions||{},t.device,t.saveStorage),l="";c.on("change",()=>{var u;this._recorderSources=[];for(let d of o){let h={file:d.fileName,text:c.generateText(d),language:d.highlighter,highlight:[]};h.revealLine=h.text.split(`
`).length-1,this._recorderSources.push(h),d===o[0]&&(l=h.text)}this._pushAllSources(),(u=this._recorderApp)===null||u===void 0||u.setFile(s.fileName)}),t.outputFile&&(e.on(Uf.BrowserContext.Events.BeforeClose,()=>{zf.writeFileSync(t.outputFile,l),l=""}),process.on("exit",()=>{l&&zf.writeFileSync(t.outputFile,l)})),this._generator=c}async install(){let e=await eL.RecorderApp.open(this._context);this._recorderApp=e,e.once("close",()=>{this._debugger.resume(!1),this._recorderApp=null}),e.on("event",t=>{if(t.event==="setMode"){this._setMode(t.params.mode),this._refreshOverlay();return}if(t.event==="selectorUpdated"){this._highlightedSelector=t.params.selector,this._refreshOverlay();return}if(t.event==="step"){this._debugger.resume(!0);return}if(t.event==="resume"){this._debugger.resume(!1);return}if(t.event==="pause"){this._debugger.pauseOnNextStatement();return}if(t.event==="clear"){this._clearScript();return}}),await Promise.all([e.setMode(this._mode),e.setPaused(this._debugger.isPaused()),this._pushAllSources()]),this._context.on(Uf.BrowserContext.Events.Page,t=>this._onPage(t));for(let t of this._context.pages())this._onPage(t);this._context.once(Uf.BrowserContext.Events.Close,()=>{for(let t of this._timers)clearTimeout(t);this._timers.clear(),e.close().catch(()=>{})}),await this._context.exposeBinding("_playwrightRecorderPerformAction",!1,(t,i)=>this._performAction(t.frame,i)),await this._context.exposeBinding("_playwrightRecorderRecordAction",!1,(t,i)=>this._recordAction(t.frame,i)),await this._context.exposeBinding("_playwrightRecorderState",!1,t=>{let i=this._highlightedSelector,n;for(let[o,c]of this._currentCallsMetadata)t.page===c.attribution.page&&(n=o.point||n,i=i||o.params.selector);return{mode:this._mode,actionPoint:n,actionSelector:i}}),await this._context.exposeBinding("_playwrightRecorderSetSelector",!1,async(t,i)=>{var n,s;this._setMode("none"),await((n=this._recorderApp)===null||n===void 0?void 0:n.setSelector(i,!0)),await((s=this._recorderApp)===null||s===void 0?void 0:s.bringToFront())}),await this._context.exposeBinding("_playwrightResume",!1,()=>{this._debugger.resume(!1)}),await this._context.extendInjectedScript(Qq.source,{isUnderTest:(0,ma.isUnderTest)()}),await this._context.extendInjectedScript(Zq.source),this._debugger.isPaused()&&this._pausedStateChanged(),this._debugger.on(Vf.Debugger.Events.PausedStateChanged,()=>this._pausedStateChanged()),this._context.recorderAppForTest=e}_pausedStateChanged(){var e;for(let{metadata:t,sdkObject:i}of this._debugger.pausedDetails())this._currentCallsMetadata.has(t)||this.onBeforeCall(i,t);(e=this._recorderApp)===null||e===void 0||e.setPaused(this._debugger.isPaused()),this._updateUserSources(),this.updateCallLog([...this._currentCallsMetadata.keys()])}_setMode(e){var t;this._mode=e,(t=this._recorderApp)===null||t===void 0||t.setMode(this._mode),this._generator.setEnabled(this._mode==="recording"),Vf.Debugger.lookup(this._context).setMuted(this._mode==="recording"),this._mode!=="none"&&this._context.pages()[0].bringToFront().catch(()=>{})}_refreshOverlay(){for(let e of this._context.pages())e.mainFrame().evaluateExpression("window._playwrightRefreshOverlay()",!1,void 0,"main").catch(()=>{})}async _onPage(e){let t=e.mainFrame();e.on("close",()=>{this._pageAliases.delete(e),this._generator.addAction({pageAlias:n,...(0,vs.describeFrame)(e.mainFrame()),committed:!0,action:{name:"closePage",signals:[]}})}),t.on(Jq.Frame.Events.Navigation,()=>this._onFrameNavigated(t,e)),e.on(nx.Page.Events.Download,()=>this._onDownload(e)),e.on(nx.Page.Events.Dialog,()=>this._onDialog(e));let i=this._pageAliases.size?String(++this._lastPopupOrdinal):"",n="page"+i;this._pageAliases.set(e,n),e.opener()?this._onPopup(e.opener(),e):this._generator.addAction({pageAlias:n,...(0,vs.describeFrame)(e.mainFrame()),committed:!0,action:{name:"openPage",url:e.mainFrame().url(),signals:[]}})}_clearScript(){if(this._generator.restart(),this._params.startRecording)for(let e of this._context.pages())this._onFrameNavigated(e.mainFrame(),e)}async _performAction(e,t){this._generator.commitLastAction();let i=e._page,n={pageAlias:this._pageAliases.get(i),...(0,vs.describeFrame)(e),action:t},s=async(c,l,u)=>{let d={id:`call@${(0,ma.createGuid)()}`,apiName:"frame."+c,objectId:e.guid,pageId:e._page.guid,frameId:e.guid,startTime:(0,ma.monotonicTime)(),endTime:0,type:"Frame",method:c,params:l,log:[],snapshots:[]};this._generator.willPerformAction(n);try{await e.instrumentation.onBeforeCall(e,d),await u(d)}catch(p){d.endTime=(0,ma.monotonicTime)(),await e.instrumentation.onAfterCall(e,d),this._generator.performedActionFailed(n);return}d.endTime=(0,ma.monotonicTime)(),await e.instrumentation.onAfterCall(e,d);let h=setTimeout(()=>{n.committed=!0,this._timers.delete(h)},5e3);this._generator.didPerformAction(n),this._timers.add(h)},o=5e3;if(t.name==="click"){let{options:c}=(0,vs.toClickOptions)(t);await s("click",{selector:t.selector},l=>e.click(l,t.selector,{...c,timeout:o}))}if(t.name==="press"){let l=[...(0,vs.toModifiers)(t.modifiers),t.key].join("+");await s("press",{selector:t.selector,key:l},u=>e.press(u,t.selector,l,{timeout:o}))}if(t.name==="check"&&await s("check",{selector:t.selector},c=>e.check(c,t.selector,{timeout:o})),t.name==="uncheck"&&await s("uncheck",{selector:t.selector},c=>e.uncheck(c,t.selector,{timeout:o})),t.name==="select"){let c=t.options.map(l=>({value:l}));await s("selectOption",{selector:t.selector,values:c},l=>e.selectOption(l,t.selector,[],c,{timeout:o}))}}async _recordAction(e,t){this._generator.commitLastAction(),this._generator.addAction({pageAlias:this._pageAliases.get(e._page),...(0,vs.describeFrame)(e),action:t})}_onFrameNavigated(e,t){let i=this._pageAliases.get(t);this._generator.signal(i,e,{name:"navigation",url:e.url()})}_onPopup(e,t){let i=this._pageAliases.get(e),n=this._pageAliases.get(t);this._generator.signal(i,e.mainFrame(),{name:"popup",popupAlias:n})}_onDownload(e){let t=this._pageAliases.get(e);this._generator.signal(t,e.mainFrame(),{name:"download",downloadAlias:String(++this._lastDownloadOrdinal)})}_onDialog(e){let t=this._pageAliases.get(e);this._generator.signal(t,e.mainFrame(),{name:"dialog",dialogAlias:String(++this._lastDialogOrdinal)})}async onBeforeCall(e,t){if(this._mode!=="recording"&&(this._currentCallsMetadata.set(t,e),this._allMetadatas.set(t.id,t),this._updateUserSources(),this.updateCallLog([t]),t.params&&t.params.selector)){var i;this._highlightedSelector=t.params.selector,(i=this._recorderApp)===null||i===void 0||i.setSelector(this._highlightedSelector).catch(()=>{})}}async onAfterCall(e,t){this._mode!=="recording"&&(t.error||this._currentCallsMetadata.delete(t),this._updateUserSources(),this.updateCallLog([t]))}_updateUserSources(){var e;for(let i of this._userSources.values())i.highlight=[],i.revealLine=void 0;let t;for(let i of this._currentCallsMetadata.keys()){if(!i.stack||!i.stack[0])continue;let{file:n,line:s}=i.stack[0],o=this._userSources.get(n);if(o||(o={file:n,text:this._readSource(n),highlight:[],language:rL(n)},this._userSources.set(n,o)),s){let c=this._debugger.isPaused(i);o.highlight.push({line:s,type:i.error?"error":c?"paused":"running"}),o.revealLine=s,t=o.file}}this._pushAllSources(),t&&((e=this._recorderApp)===null||e===void 0||e.setFile(t))}_pushAllSources(){var e;(e=this._recorderApp)===null||e===void 0||e.setSources([...this._recorderSources,...this._userSources.values()])}async onBeforeInputAction(e,t){}async onCallLog(e,t,i,n){this.updateCallLog([n])}updateCallLog(e){var t;if(this._mode==="recording")return;let i=[];for(let n of e){if(!n.method)continue;let s="done";this._currentCallsMetadata.has(n)&&(s="in-progress"),this._debugger.isPaused(n)&&(s="paused"),i.push((0,tL.metadataToCallLog)(n,s))}(t=this._recorderApp)===null||t===void 0||t.updateCallLogs(i)}_readSource(e){try{return zf.readFileSync(e,"utf-8")}catch(t){return"// No source available"}}};zl.RecorderSupplement=_a;function rL(r){return r.endsWith(".py")?"python":r.endsWith(".java")?"java":r.endsWith(".cs")?"csharp":"javascript"}});var ht=w(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.assertBrowserContextIsNotOwned=dL;bi.validateBrowserContextOptions=hL;bi.verifyGeolocation=px;bi.normalizeProxySettings=fx;bi.BrowserContext=void 0;var iL=Yf(require("os")),nL=$t(),ys=H(),sL=kt(),lx=Yf(Dt()),Jf=bt(),ux=uL(require("path")),Ul=Qe(),dx=df(),oL=Mb(),aL=Fb(),Xf=Kf(),cL=Yf(jf()),lL=Xo();function uL(r){return r&&r.__esModule?r:{default:r}}function hx(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(hx=function(i){return i?t:e})(r)}function Yf(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=hx(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var yi=class extends Ul.SdkObject{constructor(e,t,i){super(e,"browser-context");this._timeoutSettings=new nL.TimeoutSettings,this._pageBindings=new Map,this._options=void 0,this._requestInterceptor=void 0,this._isPersistentContext=void 0,this._closedStatus="open",this._closePromise=void 0,this._closePromiseFulfill=void 0,this._permissions=new Map,this._downloads=new Set,this._browser=void 0,this._browserContextId=void 0,this._selectors=void 0,this._origins=new Set,this._harRecorder=void 0,this.tracing=void 0,this.fetchRequest=void 0,this.attribution.context=this,this._browser=e,this._options=t,this._browserContextId=i,this._isPersistentContext=!i,this._closePromise=new Promise(n=>this._closePromiseFulfill=n),this._options.recordHar&&(this._harRecorder=new aL.HarRecorder(this,{...this._options.recordHar,path:ux.default.join(this._browser.options.artifactsDir,`${(0,ys.createGuid)()}.har`)})),this.tracing=new oL.Tracing(this),this.fetchRequest=new lL.BrowserContextFetchRequest(this)}_setSelectors(e){this._selectors=e}selectors(){return this._selectors||this._browser.options.selectors}async _initialize(){if(this.attribution.isInternal)return;this.instrumentation=(0,Ul.createInstrumentation)();let e=new dx.Debugger(this);this.instrumentation.addListener(e),(0,ys.debugMode)()==="inspector"&&await Xf.RecorderSupplement.show(this,{pauseOnNextStatement:!0}),e.isPaused()&&Xf.RecorderSupplement.showInspector(this),e.on(dx.Debugger.Events.PausedStateChanged,()=>{Xf.RecorderSupplement.showInspector(this)}),(0,ys.debugMode)()==="console"&&await this.extendInjectedScript(cL.source)}async _ensureVideosPath(){this._options.recordVideo&&await(0,ys.mkdirIfNeeded)(ux.default.join(this._options.recordVideo.dir,"dummy"))}_browserClosed(){for(let e of this.pages())e._didClose();this._didCloseInternal()}_didCloseInternal(){this._closedStatus!=="closed"&&(this._closedStatus="closed",this._deleteAllDownloads(),this._downloads.clear(),this._isPersistentContext&&this._onClosePersistent(),this._closePromiseFulfill(new Error("Context closed")),this.emit(yi.Events.Close))}async cookies(e=[]){return e&&!Array.isArray(e)&&(e=[e]),await this._doCookies(e)}setHTTPCredentials(e){return this._doSetHTTPCredentials(e)}async exposeBinding(e,t,i){if(this._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered`);for(let s of this.pages())if(s.getBinding(e))throw new Error(`Function "${e}" has been already registered in one of the pages`);let n=new Jf.PageBinding(e,i,t);this._pageBindings.set(e,n),await this._doExposeBinding(n)}async grantPermissions(e,t){let i="*";t&&(i=new URL(t).origin);let n=new Set(this._permissions.get(i)||[]);e.forEach(o=>n.add(o));let s=[...n.values()];this._permissions.set(i,s),await this._doGrantPermissions(i,s)}async clearPermissions(){this._permissions.clear(),await this._doClearPermissions()}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async _loadDefaultContextAsIs(e){if(!this.pages().length){let i=sL.helper.waitForEvent(e,this,yi.Events.Page);e.cleanupWhenAborted(()=>i.dispose);let n=await i.promise;if(n._pageIsError)throw n._pageIsError}let t=this.pages();if(t[0]._pageIsError)throw t[0]._pageIsError;return await t[0].mainFrame()._waitForLoadState(e,"load"),t}async _loadDefaultContext(e){let t=await this._loadDefaultContextAsIs(e);if(this._options.isMobile||this._options.locale){let i=t[0];await this.newPage(e.metadata),await i.close(e.metadata)}}_authenticateProxyViaHeader(){let e=this._options.proxy||this._browser.options.proxy||{username:void 0,password:void 0},{username:t,password:i}=e;if(t){this._options.httpCredentials={username:t,password:i};let n=Buffer.from(`${t}:${i}`).toString("base64");this._options.extraHTTPHeaders=lx.mergeHeaders([this._options.extraHTTPHeaders,lx.singleHeader("Proxy-Authorization",`Basic ${n}`)])}}_authenticateProxyViaCredentials(){let e=this._options.proxy||this._browser.options.proxy;if(!e)return;let{username:t,password:i}=e;t&&(this._options.httpCredentials={username:t,password:i||""})}async _setRequestInterceptor(e){this._requestInterceptor=e,await this._doUpdateRequestInterception()}isClosingOrClosed(){return this._closedStatus!=="open"}async _deleteAllDownloads(){await Promise.all(Array.from(this._downloads).map(e=>e.artifact.deleteOnContextClose()))}async close(e){if(this._closedStatus==="open"){var t;this.emit(yi.Events.BeforeClose),this._closedStatus="closing",await((t=this._harRecorder)===null||t===void 0?void 0:t.flush()),await this.tracing.dispose();let i=[];for(let{context:n,artifact:s}of this._browser._idToVideo.values())n===this&&i.push(s.finishedPromise());this._isPersistentContext?await Promise.all(this.pages().map(n=>n.close(e))):await this._doClose(),i.push(this._deleteAllDownloads()),await Promise.all(i),this._isPersistentContext&&await this._browser.close(),this._didCloseInternal()}await this._closePromise}async newPage(e){let i=await(await this.newPageDelegate()).pageOrError();if(i instanceof Jf.Page){if(i.isClosed())throw new Error("Page has been closed.");return i}throw i}addVisitedOrigin(e){this._origins.add(e)}async storageState(e){let t={cookies:(await this.cookies()).filter(i=>i.value!==""),origins:[]};if(this._origins.size){let i=(0,Ul.internalCallMetadata)(),n=await this.newPage(i);await n._setServerRequestInterceptor(s=>{s.fulfill({body:"<html></html>"}).catch(()=>{})});for(let s of this._origins){let o={origin:s,localStorage:[]},c=n.mainFrame();await c.goto(i,s);let l=await c.evaluateExpression(`({
          localStorage: Object.keys(localStorage).map(name => ({ name, value: localStorage.getItem(name) })),
        })`,!1,void 0,"utility");o.localStorage=l.localStorage,l.localStorage.length&&t.origins.push(o)}await n.close(i)}return t}async setStorageState(e,t){if(t.cookies&&await this.addCookies(t.cookies),t.origins&&t.origins.length){let i=(0,Ul.internalCallMetadata)(),n=await this.newPage(i);await n._setServerRequestInterceptor(s=>{s.fulfill({body:"<html></html>"}).catch(()=>{})});for(let s of t.origins){let o=n.mainFrame();await o.goto(e,s.origin),await o.evaluateExpression(`
          originState => {
            for (const { name, value } of (originState.localStorage || []))
              localStorage.setItem(name, value);
          }`,!0,s,"utility")}await n.close(i)}}async extendInjectedScript(e,t){let i=s=>s.extendInjectedScript(e,t).catch(()=>{}),n=s=>(s.on(Jf.Page.Events.InternalFrameNavigatedToNewDocument,i),Promise.all(s.frames().map(i)));return this.on(yi.Events.Page,n),Promise.all(this.pages().map(n))}};bi.BrowserContext=yi;yi.Events={Close:"close",Page:"page",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",BeforeClose:"beforeclose",VideoStarted:"videostarted"};function dL(r){for(let e of r.pages())if(e._ownedContext)throw new Error("Please use browser.newContext() for multi-page scripts that share the context.")}function hL(r,e){if(r.noDefaultViewport&&r.deviceScaleFactor!==void 0)throw new Error('"deviceScaleFactor" option is not supported with null "viewport"');if(r.noDefaultViewport&&r.isMobile!==void 0)throw new Error('"isMobile" option is not supported with null "viewport"');if(!r.viewport&&!r.noDefaultViewport&&(r.viewport={width:1280,height:720}),r.recordVideo){if(!r.recordVideo.size)if(r.noDefaultViewport)r.recordVideo.size={width:800,height:600};else{let t=r.viewport,i=Math.min(1,800/Math.max(t.width,t.height));r.recordVideo.size={width:Math.floor(t.width*i),height:Math.floor(t.height*i)}}r.recordVideo.size.width&=~1,r.recordVideo.size.height&=~1}if(r.proxy){if(!e.proxy&&e.isChromium&&iL.platform()==="win32")throw new Error(`Browser needs to be launched with the global proxy. If all contexts override the proxy, global proxy will be never used and can be any string, for example "launch({ proxy: { server: 'http://per-context' } })"`);r.proxy=fx(r.proxy)}(0,ys.debugMode)()==="inspector"&&(r.bypassCSP=!0),px(r.geolocation),r._debugName||(r._debugName=(0,ys.createGuid)())}function px(r){if(!r)return;r.accuracy=r.accuracy||0;let{longitude:e,latitude:t,accuracy:i}=r;if(e<-180||e>180)throw new Error("geolocation.longitude: precondition -180 <= LONGITUDE <= 180 failed.");if(t<-90||t>90)throw new Error("geolocation.latitude: precondition -90 <= LATITUDE <= 90 failed.");if(i<0)throw new Error("geolocation.accuracy: precondition 0 <= ACCURACY failed.")}function fx(r){let{server:e,bypass:t}=r,i;try{i=new URL(e),(!i.host||!i.protocol)&&(i=new URL("http://"+e))}catch(n){i=new URL("http://"+e)}if(i.protocol==="socks4:"&&(r.username||r.password))throw new Error("Socks4 proxy protocol does not support authentication");if(i.protocol==="socks5:"&&(r.username||r.password))throw new Error("Browser does not support socks5 proxy authentication");return e=i.protocol+"//"+i.host,t&&(t=t.split(",").map(n=>n.trim()).join(",")),{...r,server:e,bypass:t}}});var gx=w(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.Download=void 0;var pL=_L(require("path")),mx=bt(),fL=H(),mL=aa();function _L(r){return r&&r.__esModule?r:{default:r}}var _x=class{constructor(e,t,i,n,s){this.artifact=void 0,this.url=void 0,this._page=void 0,this._suggestedFilename=void 0;let o=e._browserContext._options.acceptDownloads?void 0:"Pass { acceptDownloads: true } when you are creating your browser context.";this.artifact=new mL.Artifact(e,pL.default.join(t,i),o,()=>this._page._browserContext._doCancelDownload(i)),this._page=e,this.url=n,this._suggestedFilename=s,e._browserContext._downloads.add(this),s!==void 0&&this._page.emit(mx.Page.Events.Download,this)}_filenameSuggested(e){(0,fL.assert)(this._suggestedFilename===void 0),this._suggestedFilename=e,this._page.emit(mx.Page.Events.Download,this)}suggestedFilename(){return this._suggestedFilename}};Vl.Download=_x});var xs=w(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.Browser=void 0;var gL=ht(),wx=bt(),wL=gx(),vL=Qe(),yL=aa(),bs=class extends vL.SdkObject{constructor(e){super(e.rootSdkObject,"browser");this.options=void 0,this._downloads=new Map,this._defaultContext=null,this._startedClosing=!1,this._idToVideo=new Map,this.attribution.browser=this,this.options=e}_downloadCreated(e,t,i,n){let s=new wL.Download(e,this.options.downloadsPath||"",t,i,n);this._downloads.set(t,s)}_downloadFilenameSuggested(e,t){let i=this._downloads.get(e);!i||i._filenameSuggested(t)}_downloadFinished(e,t){let i=this._downloads.get(e);!i||(i.artifact.reportFinished(t),this._downloads.delete(e))}_videoStarted(e,t,i,n){let s=new yL.Artifact(e,i);this._idToVideo.set(t,{context:e,artifact:s}),e.emit(gL.BrowserContext.Events.VideoStarted,s),n.then(o=>{o instanceof wx.Page&&(o._video=s,o.emit(wx.Page.Events.Video,s))})}_takeVideo(e){let t=this._idToVideo.get(e);return this._idToVideo.delete(e),t==null?void 0:t.artifact}_didClose(){for(let e of this.contexts())e._browserClosed();this._defaultContext&&this._defaultContext._browserClosed(),this.emit(bs.Events.Disconnected)}async close(){this._startedClosing||(this._startedClosing=!0,await this.options.browserProcess.close()),this.isConnected()&&await new Promise(e=>this.once(bs.Events.Disconnected,e))}async killForTests(){await this.options.browserProcess.kill()}};Gl.Browser=bs;bs.Events={Disconnected:"disconnected"}});var Ss=w(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.CRSession=Ut.CRSessionEvents=Ut.CRConnection=Ut.kBrowserCloseMessageId=Ut.ConnectionEvents=void 0;var bL=H(),vx=require("events"),yx=It(),xL=ze(),SL=kt(),Kl=di(),bx={Disconnected:Symbol("ConnectionEvents.Disconnected")};Ut.ConnectionEvents=bx;var xx=-9999;Ut.kBrowserCloseMessageId=xx;var Sx=class extends vx.EventEmitter{constructor(e,t,i){super();this._lastId=0,this._transport=void 0,this._sessions=new Map,this._protocolLogger=void 0,this._browserLogsCollector=void 0,this.rootSession=void 0,this._closed=!1,this.setMaxListeners(0),this._transport=e,this._protocolLogger=t,this._browserLogsCollector=i,this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this.rootSession=new Jl(this,"","browser",""),this._sessions.set("",this.rootSession)}static fromSession(e){return e._connection}session(e){return this._sessions.get(e)||null}_rawSend(e,t,i){let n=++this._lastId,s={id:n,method:t,params:i};return e&&(s.sessionId=e),this._protocolLogger("send",s),this._transport.send(s),n}async _onMessage(e){if(this._protocolLogger("receive",e),e.id===xx)return;if(e.method==="Target.attachedToTarget"){let i=e.params.sessionId,n=e.sessionId||"",s=new Jl(this,n,e.params.targetInfo.type,i);this._sessions.set(i,s)}else if(e.method==="Target.detachedFromTarget"){let i=this._sessions.get(e.params.sessionId);i&&(i._onClosed(void 0),this._sessions.delete(e.params.sessionId))}let t=this._sessions.get(e.sessionId||"");t&&t._onMessage(e)}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0;let e=SL.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs());for(let t of this._sessions.values())t._onClosed(e);this._sessions.clear(),Promise.resolve().then(()=>this.emit(bx.Disconnected))}close(){this._closed||this._transport.close()}async createSession(e){let{sessionId:t}=await this.rootSession.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});return this._sessions.get(t)}async createBrowserSession(){let{sessionId:e}=await this.rootSession.send("Target.attachToBrowserTarget");return this._sessions.get(e)}};Ut.CRConnection=Sx;var Ex={Disconnected:Symbol("Events.CDPSession.Disconnected")};Ut.CRSessionEvents=Ex;var Jl=class extends vx.EventEmitter{constructor(e,t,i,n){super();this._connection=void 0,this._eventListener=void 0,this._callbacks=new Map,this._targetType=void 0,this._sessionId=void 0,this._rootSessionId=void 0,this._crashed=!1,this._browserDisconnectedLogs=void 0,this.on=void 0,this.addListener=void 0,this.off=void 0,this.removeListener=void 0,this.once=void 0,this.guid=void 0,this.guid=`cdp-session@${n}`,this.setMaxListeners(0),this._connection=e,this._rootSessionId=t,this._targetType=i,this._sessionId=n,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}_markAsCrashed(){this._crashed=!0}async send(e,t){if(this._crashed)throw new Kl.ProtocolError(!0,"Target crashed");if(this._browserDisconnectedLogs!==void 0)throw new Kl.ProtocolError(!0,"Browser closed."+this._browserDisconnectedLogs);if(!this._connection)throw new Kl.ProtocolError(!0,"Target closed");let i=this._connection._rawSend(this._sessionId,e,t);return new Promise((n,s)=>{this._callbacks.set(i,{resolve:n,reject:s,error:new Kl.ProtocolError(!1),method:e})})}_sendMayFail(e,t){return this.send(e,t).catch(i=>xL.debugLogger.log("error",i))}_onMessage(e){if(e.id&&this._callbacks.has(e.id)){let t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(EL(t.error,t.method,e.error)):t.resolve(e.result)}else(0,bL.assert)(!e.id),Promise.resolve().then(()=>{this._eventListener&&this._eventListener(e.method,e.params),this.emit(e.method,e.params)})}async detach(){if(!this._connection)throw new Error(`Session already detached. Most likely the ${this._targetType} has been closed.`);let e=this._connection.session(this._rootSessionId);if(!e)throw new Error("Root session has been closed");await e.send("Target.detachFromTarget",{sessionId:this._sessionId})}_onClosed(e){this._browserDisconnectedLogs=e;let t=e!==void 0?"Browser closed."+e:"Target closed";for(let i of this._callbacks.values())i.error.sessionClosed=!0,i.reject((0,yx.rewriteErrorMessage)(i.error,t));this._callbacks.clear(),this._connection=null,Promise.resolve().then(()=>this.emit(Ex.Disconnected))}};Ut.CRSession=Jl;function EL(r,e,t){let i=`Protocol error (${e}): ${t.message}`;return"data"in t&&(i+=` ${t.data}`),(0,yx.rewriteErrorMessage)(r,i)}});var vn=w(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.getExceptionMessage=Cx;xi.releaseObject=TL;xi.readProtocolStream=AL;xi.toConsoleMessageLocation=ML;xi.exceptionToError=IL;xi.toModifiersMask=FL;var CL=OL(require("fs")),kL=H(),PL=It();function OL(r){return r&&r.__esModule?r:{default:r}}function Cx(r){if(r.exception)return r.exception.description||String(r.exception.value);let e=r.text;if(r.stackTrace)for(let t of r.stackTrace.callFrames){let i=t.url+":"+t.lineNumber+":"+t.columnNumber;e+=`
    at ${t.functionName||"<anonymous>"} (${i})`}return e}async function TL(r,e){await r.send("Runtime.releaseObject",{objectId:e}).catch(t=>{})}async function AL(r,e,t){let i=!1,n;t&&(await(0,kL.mkdirIfNeeded)(t),n=await CL.default.promises.open(t,"w"));let s=[];for(;!i;){let o=await r.send("IO.read",{handle:e});i=o.eof;let c=Buffer.from(o.data,o.base64Encoded?"base64":void 0);s.push(c),n&&await n.write(c)}return n&&await n.close(),await r.send("IO.close",{handle:e}),Buffer.concat(s)}function ML(r){return r&&r.callFrames.length?{url:r.callFrames[0].url,lineNumber:r.callFrames[0].lineNumber,columnNumber:r.callFrames[0].columnNumber}:{url:"",lineNumber:0,columnNumber:0}}function IL(r){let e=Cx(r),t=e.split(`
`),i=t.findIndex(u=>u.startsWith("    at")),n="",s="";i===-1?n=e:(n=t.slice(0,i).join(`
`),s=e);let{name:o,message:c}=(0,PL.splitErrorMessage)(n),l=new Error(c);return l.stack=s,l.name=o,l}function FL(r){let e=0;return r.has("Alt")&&(e|=1),r.has("Control")&&(e|=2),r.has("Meta")&&(e|=4),r.has("Shift")&&(e|=8),e}});var Ql=w(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.CRExecutionContext=void 0;var Xl=vn(),yn=qL(ci()),DL=It(),RL=Qo(),NL=di();function kx(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(kx=function(i){return i?t:e})(r)}function qL(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=kx(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Px=class{constructor(e,t){this._client=void 0,this._contextId=void 0,this._client=e,this._contextId=t.id}async rawEvaluateJSON(e){let{exceptionDetails:t,result:i}=await this._client.send("Runtime.evaluate",{expression:e,contextId:this._contextId,returnByValue:!0}).catch(Qf);if(t)throw new yn.JavaScriptErrorInEvaluate((0,Xl.getExceptionMessage)(t));return i.value}async rawEvaluateHandle(e){let{exceptionDetails:t,result:i}=await this._client.send("Runtime.evaluate",{expression:e,contextId:this._contextId}).catch(Qf);if(t)throw new yn.JavaScriptErrorInEvaluate((0,Xl.getExceptionMessage)(t));return i.objectId}rawCallFunctionNoReply(e,...t){this._client.send("Runtime.callFunctionOn",{functionDeclaration:e.toString(),arguments:t.map(i=>i instanceof yn.JSHandle?{objectId:i._objectId}:{value:i}),returnByValue:!0,executionContextId:this._contextId,userGesture:!0}).catch(()=>{})}async evaluateWithArguments(e,t,i,n,s){let{exceptionDetails:o,result:c}=await this._client.send("Runtime.callFunctionOn",{functionDeclaration:e,objectId:i._objectId,arguments:[{objectId:i._objectId},...n.map(l=>({value:l})),...s.map(l=>({objectId:l}))],returnByValue:t,awaitPromise:!0,userGesture:!0}).catch(Qf);if(o)throw new yn.JavaScriptErrorInEvaluate((0,Xl.getExceptionMessage)(o));return t?(0,RL.parseEvaluationResultValue)(c.value):i._context.createHandle(c)}async getProperties(e,t){let i=await this._client.send("Runtime.getProperties",{objectId:t,ownProperties:!0}),n=new Map;for(let s of i.result)!s.enumerable||!s.value||n.set(s.name,e.createHandle(s.value));return n}createHandle(e,t){return new yn.JSHandle(e,t.subtype||t.type,BL(t),t.objectId,LL(t))}async releaseHandle(e){await(0,Xl.releaseObject)(this._client,e)}};Yl.CRExecutionContext=Px;function Qf(r){if(r.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(r.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};throw r instanceof TypeError&&r.message.startsWith("Converting circular structure to JSON")&&(0,DL.rewriteErrorMessage)(r,r.message+" Are you passing a nested JSHandle?"),!yn.isJavaScriptErrorInEvaluate(r)&&!(0,NL.isSessionClosedError)(r)?new Error("Execution context was destroyed, most likely because of a navigation."):r}function LL(r){let e=r.value,t=r.unserializableValue;return t?yn.parseUnserializableValue(t):e}function BL(r){if(r.type==="undefined")return"undefined";if("value"in r)return String(r.value);if(r.unserializableValue)return String(r.unserializableValue);if(r.description==="Object"&&r.preview){let e=[];for(let{name:t,value:i}of r.preview.properties)e.push(`${t}: ${i}`);return`{${e.join(", ")}}`}if(r.subtype==="array"&&r.preview){let e=[];for(let{name:t,value:i}of r.preview.properties)e[+t]=i;return"["+String(e)+"]"}return r.description}});var Dx=w(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.CRNetworkManager=void 0;var Ox=kt(),xt=dt(),ga=HL(Dt()),Es=H();function Tx(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Tx=function(i){return i?t:e})(r)}function HL(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Tx(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Ax=class{constructor(e,t,i){this._client=void 0,this._page=void 0,this._parentManager=void 0,this._requestIdToRequest=new Map,this._requestIdToRequestWillBeSentEvent=new Map,this._credentials=null,this._attemptedAuthentications=new Set,this._userRequestInterceptionEnabled=!1,this._protocolRequestInterceptionEnabled=!1,this._requestIdToRequestPausedEvent=new Map,this._eventListeners=void 0,this._responseExtraInfoTracker=new Fx,this._client=e,this._page=t,this._parentManager=i,this._eventListeners=this.instrumentNetworkEvents(e)}instrumentNetworkEvents(e,t){return[xt.eventsHelper.addEventListener(e,"Fetch.requestPaused",this._onRequestPaused.bind(this,t)),xt.eventsHelper.addEventListener(e,"Fetch.authRequired",this._onAuthRequired.bind(this)),xt.eventsHelper.addEventListener(e,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this,t)),xt.eventsHelper.addEventListener(e,"Network.requestWillBeSentExtraInfo",this._onRequestWillBeSentExtraInfo.bind(this)),xt.eventsHelper.addEventListener(e,"Network.responseReceived",this._onResponseReceived.bind(this)),xt.eventsHelper.addEventListener(e,"Network.responseReceivedExtraInfo",this._onResponseReceivedExtraInfo.bind(this)),xt.eventsHelper.addEventListener(e,"Network.loadingFinished",this._onLoadingFinished.bind(this)),xt.eventsHelper.addEventListener(e,"Network.loadingFailed",this._onLoadingFailed.bind(this)),xt.eventsHelper.addEventListener(e,"Network.webSocketCreated",i=>this._page._frameManager.onWebSocketCreated(i.requestId,i.url)),xt.eventsHelper.addEventListener(e,"Network.webSocketWillSendHandshakeRequest",i=>this._page._frameManager.onWebSocketRequest(i.requestId)),xt.eventsHelper.addEventListener(e,"Network.webSocketHandshakeResponseReceived",i=>this._page._frameManager.onWebSocketResponse(i.requestId,i.response.status,i.response.statusText)),xt.eventsHelper.addEventListener(e,"Network.webSocketFrameSent",i=>i.response.payloadData&&this._page._frameManager.onWebSocketFrameSent(i.requestId,i.response.opcode,i.response.payloadData)),xt.eventsHelper.addEventListener(e,"Network.webSocketFrameReceived",i=>i.response.payloadData&&this._page._frameManager.webSocketFrameReceived(i.requestId,i.response.opcode,i.response.payloadData)),xt.eventsHelper.addEventListener(e,"Network.webSocketClosed",i=>this._page._frameManager.webSocketClosed(i.requestId)),xt.eventsHelper.addEventListener(e,"Network.webSocketFrameError",i=>this._page._frameManager.webSocketError(i.requestId,i.errorMessage))]}async initialize(){await this._client.send("Network.enable")}dispose(){xt.eventsHelper.removeEventListeners(this._eventListeners)}async authenticate(e){this._credentials=e,await this._updateProtocolRequestInterception()}async setOffline(e){await this._client.send("Network.emulateNetworkConditions",{offline:e,latency:0,downloadThroughput:-1,uploadThroughput:-1})}async setRequestInterception(e){this._userRequestInterceptionEnabled=e,await this._updateProtocolRequestInterception()}async _updateProtocolRequestInterception(){let e=this._userRequestInterceptionEnabled||!!this._credentials;e!==this._protocolRequestInterceptionEnabled&&(this._protocolRequestInterceptionEnabled=e,e?await Promise.all([this._client.send("Network.setCacheDisabled",{cacheDisabled:!0}),this._client.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*",requestStage:"Request"},{urlPattern:"*",requestStage:"Response"}]})]):await Promise.all([this._client.send("Network.setCacheDisabled",{cacheDisabled:!1}),this._client.send("Fetch.disable")]))}_onRequestWillBeSent(e,t){if(this._responseExtraInfoTracker.requestWillBeSent(t),this._protocolRequestInterceptionEnabled&&!t.request.url.startsWith("data:")){let i=t.requestId,n=this._requestIdToRequestPausedEvent.get(i);n?(this._onRequest(e,t,n),this._requestIdToRequestPausedEvent.delete(i)):this._requestIdToRequestWillBeSentEvent.set(t.requestId,t)}else this._onRequest(e,t,null)}_onRequestWillBeSentExtraInfo(e){this._responseExtraInfoTracker.requestWillBeSentExtraInfo(e)}_onAuthRequired(e){let t="Default";this._attemptedAuthentications.has(e.requestId)?t="CancelAuth":this._credentials&&(t="ProvideCredentials",this._attemptedAuthentications.add(e.requestId));let{username:i,password:n}=this._credentials||{username:void 0,password:void 0};this._client._sendMayFail("Fetch.continueWithAuth",{requestId:e.requestId,authChallengeResponse:{response:t,username:i,password:n}})}_onRequestPaused(e,t){if(!t.responseStatusCode&&!t.responseErrorReason){let s=this._requestIdToRequest.get(t.networkId);s&&this._responseExtraInfoTracker.requestPaused(s.request,t)}if(!this._userRequestInterceptionEnabled&&this._protocolRequestInterceptionEnabled&&this._client._sendMayFail("Fetch.continueRequest",{requestId:t.requestId}),!t.networkId){this._client._sendMayFail("Fetch.failRequest",{requestId:t.requestId,errorReason:"Aborted"});return}if(t.request.url.startsWith("data:"))return;if(t.responseStatusCode||t.responseErrorReason){let s=t.responseStatusCode&&t.responseStatusCode>=300&&t.responseStatusCode<400,o=this._requestIdToRequest.get(t.networkId),c=o==null?void 0:o._routeForRedirectChain();if(s||!c||!c._interceptingResponse){this._client._sendMayFail("Fetch.continueRequest",{requestId:t.requestId});return}c._responseInterceptedCallback(t);return}let i=t.networkId,n=this._requestIdToRequestWillBeSentEvent.get(i);n?(this._onRequest(e,n,t),this._requestIdToRequestWillBeSentEvent.delete(i)):this._requestIdToRequestPausedEvent.set(i,t)}_onRequest(e,t,i){if(t.request.url.startsWith("data:"))return;let n=null;if(t.redirectResponse){let d=this._requestIdToRequest.get(t.requestId);d&&(this._handleRequestRedirect(d,t.redirectResponse,t.timestamp),n=d)}let s=t.frameId?this._page._frameManager.frame(t.frameId):e;if(!s&&i&&i.frameId&&(s=this._page._frameManager.frame(i.frameId)),!s&&t.frameId===this._page._delegate._targetId&&(s=this._page._frameManager.frameAttached(t.frameId,null)),i&&i.request.method==="OPTIONS"&&this._page._needsRequestInterception()){let d=i.request.headers,h=[{name:"Access-Control-Allow-Origin",value:d.Origin||"*"},{name:"Access-Control-Allow-Methods",value:d["Access-Control-Request-Method"]||"GET, POST, OPTIONS, DELETE"},{name:"Access-Control-Allow-Credentials",value:"true"}];d["Access-Control-Request-Headers"]&&h.push({name:"Access-Control-Allow-Headers",value:d["Access-Control-Request-Headers"]}),this._client._sendMayFail("Fetch.fulfillRequest",{requestId:i.requestId,responseCode:204,responsePhrase:ga.STATUS_TEXTS["204"],responseHeaders:h,body:""});return}if(!s){i&&this._client._sendMayFail("Fetch.continueRequest",{requestId:i.requestId});return}let o=null;i&&(n?this._client._sendMayFail("Fetch.continueRequest",{requestId:i.requestId}):o=new Ix(this._client,i.requestId));let l=t.requestId===t.loaderId&&t.type==="Document"?t.loaderId:void 0,u=new Mx({frame:s,documentId:l,route:o,requestWillBeSentEvent:t,requestPausedEvent:i,redirectedFrom:n});this._requestIdToRequest.set(t.requestId,u),this._page._frameManager.requestStarted(u.request,o||void 0)}_createResponse(e,t){var i,n,s,o,c;let l=async()=>{let p=await this._client.send("Network.getResponseBody",{requestId:e._requestId});return Buffer.from(p.body,p.base64Encoded?"base64":"utf8")},u=t.timing,d;u?d={startTime:(u.requestTime-e._timestamp+e._wallTime)*1e3,domainLookupStart:u.dnsStart,domainLookupEnd:u.dnsEnd,connectStart:u.connectStart,secureConnectionStart:u.sslStart,connectEnd:u.connectEnd,requestStart:u.sendStart,responseStart:u.receiveHeadersEnd}:d={startTime:e._wallTime*1e3,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1};let h=new ga.Response(e.request,t.status,t.statusText,(0,Es.headersObjectToArray)(t.headers),d,l,t.protocol);return t!=null&&t.remoteIPAddress&&typeof(t==null?void 0:t.remotePort)=="number"?h._serverAddrFinished({ipAddress:t.remoteIPAddress,port:t.remotePort}):h._serverAddrFinished(),h._securityDetailsFinished({protocol:t==null||(i=t.securityDetails)===null||i===void 0?void 0:i.protocol,subjectName:t==null||(n=t.securityDetails)===null||n===void 0?void 0:n.subjectName,issuer:t==null||(s=t.securityDetails)===null||s===void 0?void 0:s.issuer,validFrom:t==null||(o=t.securityDetails)===null||o===void 0?void 0:o.validFrom,validTo:t==null||(c=t.securityDetails)===null||c===void 0?void 0:c.validTo}),this._responseExtraInfoTracker.processResponse(e._requestId,h,e.wasFulfilled()),h}_handleRequestRedirect(e,t,i){let n=this._createResponse(e,t);n._requestFinished((i-e._timestamp)*1e3),this._requestIdToRequest.delete(e._requestId),e._interceptionId&&this._attemptedAuthentications.delete(e._interceptionId),this._page._frameManager.requestReceivedResponse(n),this._page._frameManager.reportRequestFinished(e.request,n)}_onResponseReceivedExtraInfo(e){this._responseExtraInfoTracker.responseReceivedExtraInfo(e)}_onResponseReceived(e){this._responseExtraInfoTracker.responseReceived(e);let t=this._requestIdToRequest.get(e.requestId);if(!t)return;let i=this._createResponse(t,e.response);this._page._frameManager.requestReceivedResponse(i)}_onLoadingFinished(e){this._responseExtraInfoTracker.loadingFinished(e);let t=this._requestIdToRequest.get(e.requestId);if(t||(t=this._maybeAdoptMainRequest(e.requestId)),!t)return;let i=t.request._existingResponse();i&&(t.request.responseSize.transferSize=e.encodedDataLength,t.request.responseSize.encodedBodySize=e.encodedDataLength-t.request.responseSize.responseHeadersSize,i._requestFinished(Ox.helper.secondsToRoundishMillis(e.timestamp-t._timestamp))),this._requestIdToRequest.delete(t._requestId),t._interceptionId&&this._attemptedAuthentications.delete(t._interceptionId),this._page._frameManager.reportRequestFinished(t.request,i)}_onLoadingFailed(e){this._responseExtraInfoTracker.loadingFailed(e);let t=this._requestIdToRequest.get(e.requestId);if(t||(t=this._maybeAdoptMainRequest(e.requestId)),!t)return;let i=t.request._existingResponse();i&&i._requestFinished(Ox.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),t._interceptionId&&this._attemptedAuthentications.delete(t._interceptionId),t.request._setFailureText(e.errorText),this._page._frameManager.requestFailed(t.request,!!e.canceled)}_maybeAdoptMainRequest(e){if(!this._parentManager)return;let t=this._parentManager._requestIdToRequest.get(e);if(!(!t||t._documentId!==e))return this._requestIdToRequest.set(e,t),this._parentManager._requestIdToRequest.delete(e),t._interceptionId&&this._parentManager._attemptedAuthentications.has(t._interceptionId)&&(this._parentManager._attemptedAuthentications.delete(t._interceptionId),this._attemptedAuthentications.add(t._interceptionId)),t}};Zl.CRNetworkManager=Ax;var Mx=class{constructor(e){this.request=void 0,this._requestId=void 0,this._interceptionId=void 0,this._documentId=void 0,this._timestamp=void 0,this._wallTime=void 0,this._route=void 0,this._redirectedFrom=void 0;let{frame:t,documentId:i,route:n,requestWillBeSentEvent:s,requestPausedEvent:o,redirectedFrom:c}=e;this._timestamp=s.timestamp,this._wallTime=s.wallTime,this._requestId=s.requestId,this._interceptionId=o&&o.requestId,this._documentId=i,this._route=n,this._redirectedFrom=c;let{headers:l,method:u,url:d,postDataEntries:h=null}=o?o.request:s.request,p=(s.type||"").toLowerCase(),f=null;h&&h.length&&h[0].bytes&&(f=Buffer.from(h[0].bytes,"base64")),this.request=new ga.Request(t,(c==null?void 0:c.request)||null,i,d,p,u,f,(0,Es.headersObjectToArray)(l))}_routeForRedirectChain(){let e=this;for(;e._redirectedFrom;)e=e._redirectedFrom;return e._route}wasFulfilled(){var e;return((e=this._routeForRedirectChain())===null||e===void 0?void 0:e._wasFulfilled)||!1}},Ix=class{constructor(e,t){this._client=void 0,this._interceptionId=void 0,this._responseInterceptedPromise=void 0,this._responseInterceptedCallback=()=>{},this._interceptingResponse=!1,this._wasFulfilled=!1,this._client=e,this._interceptionId=t,this._responseInterceptedPromise=new Promise(i=>this._responseInterceptedCallback=i)}async responseBody(){let e=await this._client.send("Fetch.getResponseBody",{requestId:this._interceptionId});return Buffer.from(e.body,e.base64Encoded?"base64":"utf8")}async continue(e,t){if(this._interceptingResponse=!!t.interceptResponse,await this._client._sendMayFail("Fetch.continueRequest",{requestId:this._interceptionId,url:t.url,headers:t.headers,method:t.method,postData:t.postData?t.postData.toString("base64"):void 0}),!this._interceptingResponse)return null;let i=await this._responseInterceptedPromise;if(this._interceptionId=i.requestId,i.responseErrorReason)throw this._client._sendMayFail("Fetch.continueRequest",{requestId:i.requestId}),new Error(`Request failed: ${i.responseErrorReason}`);return new ga.InterceptedResponse(e,i.responseStatusCode,"",i.responseHeaders)}async fulfill(e){this._wasFulfilled=!0;let t=e.isBase64?e.body:Buffer.from(e.body).toString("base64");await this._client._sendMayFail("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:e.status,responsePhrase:ga.STATUS_TEXTS[String(e.status)],responseHeaders:e.headers,body:t})}async abort(e="failed"){let t=jL[e];(0,Es.assert)(t,"Unknown error code: "+e),await this._client._sendMayFail("Fetch.failRequest",{requestId:this._interceptionId,errorReason:t})}},jL={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"},Fx=class{constructor(){this._requests=new Map}requestWillBeSent(e){let t=this._requests.get(e.requestId);t&&e.redirectResponse?this._innerResponseReceived(t,e.redirectResponse):this._getOrCreateEntry(e.requestId)}requestWillBeSentExtraInfo(e){let t=this._getOrCreateEntry(e.requestId);!t||(t.requestWillBeSentExtraInfo.push(e),this._patchHeaders(t,t.requestWillBeSentExtraInfo.length-1))}responseReceived(e){let t=this._requests.get(e.requestId);!t||this._innerResponseReceived(t,e.response)}requestPaused(e,t){e.setRawRequestHeaders((0,Es.headersObjectToArray)(t.request.headers,`
`))}_innerResponseReceived(e,t){t.connectionId||(e.sawResponseWithoutConnectionId=!0)}responseReceivedExtraInfo(e){let t=this._getOrCreateEntry(e.requestId);t.responseReceivedExtraInfo.push(e),this._patchHeaders(t,t.responseReceivedExtraInfo.length-1),this._checkFinished(t)}processResponse(e,t,i){if(i){this._stopTracking(e);return}let n=this._requests.get(e);!n||n.sawResponseWithoutConnectionId||(t.setWillReceiveExtraHeaders(),n.responses.push(t),this._patchHeaders(n,n.responses.length-1))}loadingFinished(e){let t=this._requests.get(e.requestId);!t||(t.loadingFinished=e,this._checkFinished(t))}loadingFailed(e){let t=this._requests.get(e.requestId);!t||(t.loadingFailed=e,this._checkFinished(t))}_getOrCreateEntry(e){let t=this._requests.get(e);return t||(t={requestId:e,requestWillBeSentExtraInfo:[],responseReceivedExtraInfo:[],responses:[],sawResponseWithoutConnectionId:!1},this._requests.set(e,t)),t}_patchHeaders(e,t){let i=e.responses[t],n=e.requestWillBeSentExtraInfo[t];i&&n&&i.request().setRawRequestHeaders((0,Es.headersObjectToArray)(n.headers,`
`));let s=e.responseReceivedExtraInfo[t];if(i&&s){var o;i.setRawResponseHeaders((0,Es.headersObjectToArray)(s.headers,`
`)),i.request().responseSize.responseHeadersSize=((o=s.headersText)===null||o===void 0?void 0:o.length)||0}}_checkFinished(e){if(!(!e.loadingFinished&&!e.loadingFailed)&&e.responses.length<=e.responseReceivedExtraInfo.length){this._stopTracking(e.requestId);return}}_stopTracking(e){this._requests.delete(e)}}});var tu=w(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.Dialog=void 0;var Rx=H(),WL=Qe(),Nx=class extends WL.SdkObject{constructor(e,t,i,n,s){super(e,"dialog");this._page=void 0,this._type=void 0,this._message=void 0,this._onHandle=void 0,this._handled=!1,this._defaultValue=void 0,this._page=e,this._type=t,this._message=i,this._onHandle=n,this._defaultValue=s||"",this._page._frameManager.dialogDidOpen()}type(){return this._type}message(){return this._message}defaultValue(){return this._defaultValue}async accept(e){(0,Rx.assert)(!this._handled,"Cannot accept dialog which is already handled!"),this._handled=!0,this._page._frameManager.dialogWillClose(),await this._onHandle(!0,e)}async dismiss(){(0,Rx.assert)(!this._handled,"Cannot dismiss dialog which is already handled!"),this._handled=!0,this._page._frameManager.dialogWillClose(),await this._onHandle(!1)}};eu.Dialog=Nx});var Zf=w(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.macEditingCommands=void 0;var $L={Backspace:"deleteBackward:",Enter:"insertNewline:",NumpadEnter:"insertNewline:",Escape:"cancelOperation:",ArrowUp:"moveUp:",ArrowDown:"moveDown:",ArrowLeft:"moveLeft:",ArrowRight:"moveRight:",F5:"complete:",Delete:"deleteForward:",Home:"scrollToBeginningOfDocument:",End:"scrollToEndOfDocument:",PageUp:"scrollPageUp:",PageDown:"scrollPageDown:","Shift+Backspace":"deleteBackward:","Shift+Enter":"insertNewline:","Shift+NumpadEnter":"insertNewline:","Shift+Escape":"cancelOperation:","Shift+ArrowUp":"moveUpAndModifySelection:","Shift+ArrowDown":"moveDownAndModifySelection:","Shift+ArrowLeft":"moveLeftAndModifySelection:","Shift+ArrowRight":"moveRightAndModifySelection:","Shift+F5":"complete:","Shift+Delete":"deleteForward:","Shift+Home":"moveToBeginningOfDocumentAndModifySelection:","Shift+End":"moveToEndOfDocumentAndModifySelection:","Shift+PageUp":"pageUpAndModifySelection:","Shift+PageDown":"pageDownAndModifySelection:","Shift+Numpad5":"delete:","Control+Tab":"selectNextKeyView:","Control+Enter":"insertLineBreak:","Control+NumpadEnter":"insertLineBreak:","Control+Quote":"insertSingleQuoteIgnoringSubstitution:","Control+KeyA":"moveToBeginningOfParagraph:","Control+KeyB":"moveBackward:","Control+KeyD":"deleteForward:","Control+KeyE":"moveToEndOfParagraph:","Control+KeyF":"moveForward:","Control+KeyH":"deleteBackward:","Control+KeyK":"deleteToEndOfParagraph:","Control+KeyL":"centerSelectionInVisibleArea:","Control+KeyN":"moveDown:","Control+KeyO":["insertNewlineIgnoringFieldEditor:","moveBackward:"],"Control+KeyP":"moveUp:","Control+KeyT":"transpose:","Control+KeyV":"pageDown:","Control+KeyY":"yank:","Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Control+ArrowUp":"scrollPageUp:","Control+ArrowDown":"scrollPageDown:","Control+ArrowLeft":"moveToLeftEndOfLine:","Control+ArrowRight":"moveToRightEndOfLine:","Shift+Control+Enter":"insertLineBreak:","Shift+Control+NumpadEnter":"insertLineBreak:","Shift+Control+Tab":"selectPreviousKeyView:","Shift+Control+Quote":"insertDoubleQuoteIgnoringSubstitution:","Shift+Control+KeyA":"moveToBeginningOfParagraphAndModifySelection:","Shift+Control+KeyB":"moveBackwardAndModifySelection:","Shift+Control+KeyE":"moveToEndOfParagraphAndModifySelection:","Shift+Control+KeyF":"moveForwardAndModifySelection:","Shift+Control+KeyN":"moveDownAndModifySelection:","Shift+Control+KeyP":"moveUpAndModifySelection:","Shift+Control+KeyV":"pageDownAndModifySelection:","Shift+Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Shift+Control+ArrowUp":"scrollPageUp:","Shift+Control+ArrowDown":"scrollPageDown:","Shift+Control+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Control+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Alt+Backspace":"deleteWordBackward:","Alt+Enter":"insertNewlineIgnoringFieldEditor:","Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Alt+Escape":"complete:","Alt+ArrowUp":["moveBackward:","moveToBeginningOfParagraph:"],"Alt+ArrowDown":["moveForward:","moveToEndOfParagraph:"],"Alt+ArrowLeft":"moveWordLeft:","Alt+ArrowRight":"moveWordRight:","Alt+Delete":"deleteWordForward:","Alt+PageUp":"pageUp:","Alt+PageDown":"pageDown:","Shift+Alt+Backspace":"deleteWordBackward:","Shift+Alt+Enter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+Escape":"complete:","Shift+Alt+ArrowUp":"moveParagraphBackwardAndModifySelection:","Shift+Alt+ArrowDown":"moveParagraphForwardAndModifySelection:","Shift+Alt+ArrowLeft":"moveWordLeftAndModifySelection:","Shift+Alt+ArrowRight":"moveWordRightAndModifySelection:","Shift+Alt+Delete":"deleteWordForward:","Shift+Alt+PageUp":"pageUp:","Shift+Alt+PageDown":"pageDown:","Control+Alt+KeyB":"moveWordBackward:","Control+Alt+KeyF":"moveWordForward:","Control+Alt+Backspace":"deleteWordBackward:","Shift+Control+Alt+KeyB":"moveWordBackwardAndModifySelection:","Shift+Control+Alt+KeyF":"moveWordForwardAndModifySelection:","Shift+Control+Alt+Backspace":"deleteWordBackward:","Meta+NumpadSubtract":"cancel:","Meta+Backspace":"deleteToBeginningOfLine:","Meta+ArrowUp":"moveToBeginningOfDocument:","Meta+ArrowDown":"moveToEndOfDocument:","Meta+ArrowLeft":"moveToLeftEndOfLine:","Meta+ArrowRight":"moveToRightEndOfLine:","Shift+Meta+NumpadSubtract":"cancel:","Shift+Meta+Backspace":"deleteToBeginningOfLine:","Shift+Meta+ArrowUp":"moveToBeginningOfDocumentAndModifySelection:","Shift+Meta+ArrowDown":"moveToEndOfDocumentAndModifySelection:","Shift+Meta+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Meta+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Meta+KeyA":"selectAll:"};ru.macEditingCommands=$L});var jx=w(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.RawTouchscreenImpl=Ei.RawMouseImpl=Ei.RawKeyboardImpl=void 0;var zL=GL(ul()),UL=Zf(),VL=H(),Si=vn();function qx(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(qx=function(i){return i?t:e})(r)}function GL(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=qx(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Lx=class{constructor(e,t,i){this._client=e,this._isMac=t,this._dragManger=i}_commandsForCode(e,t){if(!this._isMac)return[];let i=[];for(let o of["Shift","Control","Alt","Meta"])t.has(o)&&i.push(o);i.push(e);let n=i.join("+"),s=UL.macEditingCommands[n]||[];return(0,VL.isString)(s)&&(s=[s]),s=s.filter(o=>!o.startsWith("insert")),s.map(o=>o.substring(0,o.length-1))}async keydown(e,t,i,n,s,o,c,l){if(t==="Escape"&&await this._dragManger.cancelDrag())return;let u=this._commandsForCode(t,e);await this._client.send("Input.dispatchKeyEvent",{type:l?"keyDown":"rawKeyDown",modifiers:(0,Si.toModifiersMask)(e),windowsVirtualKeyCode:n,code:t,commands:u,key:s,text:l,unmodifiedText:l,autoRepeat:c,location:o,isKeypad:o===zL.keypadLocation})}async keyup(e,t,i,n,s,o){await this._client.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:(0,Si.toModifiersMask)(e),key:s,windowsVirtualKeyCode:n,code:t,location:o})}async sendText(e){await this._client.send("Input.insertText",{text:e})}};Ei.RawKeyboardImpl=Lx;var Bx=class{constructor(e,t,i){this._client=void 0,this._page=void 0,this._dragManager=void 0,this._page=e,this._client=t,this._dragManager=i}async move(e,t,i,n,s){await this._dragManager.interceptDragCausedByMove(e,t,i,n,s,async()=>{await this._client.send("Input.dispatchMouseEvent",{type:"mouseMoved",button:i,x:e,y:t,modifiers:(0,Si.toModifiersMask)(s)})})}async down(e,t,i,n,s,o){this._dragManager.isDragging()||await this._client.send("Input.dispatchMouseEvent",{type:"mousePressed",button:i,x:e,y:t,modifiers:(0,Si.toModifiersMask)(s),clickCount:o})}async up(e,t,i,n,s,o){if(this._dragManager.isDragging()){await this._dragManager.drop(e,t,s);return}await this._client.send("Input.dispatchMouseEvent",{type:"mouseReleased",button:i,x:e,y:t,modifiers:(0,Si.toModifiersMask)(s),clickCount:o})}async wheel(e,t,i,n,s,o){await this._client.send("Input.dispatchMouseEvent",{type:"mouseWheel",x:e,y:t,modifiers:(0,Si.toModifiersMask)(n),deltaX:s,deltaY:o})}};Ei.RawMouseImpl=Bx;var Hx=class{constructor(e){this._client=void 0,this._client=e}async tap(e,t,i){await Promise.all([this._client.send("Input.dispatchTouchEvent",{type:"touchStart",modifiers:(0,Si.toModifiersMask)(i),touchPoints:[{x:e,y:t}]}),this._client.send("Input.dispatchTouchEvent",{type:"touchEnd",modifiers:(0,Si.toModifiersMask)(i),touchPoints:[]})])}};Ei.RawTouchscreenImpl=Hx});var Wx=w(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.getAccessibilityTree=KL;async function KL(r,e){let{nodes:t}=await r.send("Accessibility.getFullAXTree"),i=iu.createTree(r,t);return{tree:i,needle:e?await i._findElement(e):null}}var iu=class{constructor(e,t){this._payload=void 0,this._children=[],this._richlyEditable=!1,this._editable=!1,this._focusable=!1,this._expanded=!1,this._hidden=!1,this._name=void 0,this._role=void 0,this._cachedHasFocusableChild=void 0,this._client=void 0,this._client=e,this._payload=t,this._name=this._payload.name?this._payload.name.value:"",this._role=this._payload.role?this._payload.role.value:"Unknown";for(let i of this._payload.properties||[])i.name==="editable"&&(this._richlyEditable=i.value.value==="richtext",this._editable=!0),i.name==="focusable"&&(this._focusable=i.value.value),i.name==="expanded"&&(this._expanded=i.value.value),i.name==="hidden"&&(this._hidden=i.value.value)}_isPlainTextField(){return this._richlyEditable?!1:this._editable?!0:this._role==="textbox"||this._role==="ComboBox"||this._role==="searchbox"}_isTextOnlyObject(){let e=this._role;return e==="LineBreak"||e==="text"||e==="InlineTextBox"||e==="StaticText"}_hasFocusableChild(){if(this._cachedHasFocusableChild===void 0){this._cachedHasFocusableChild=!1;for(let e of this._children)if(e._focusable||e._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}async _findElement(e){let t=e._objectId,{node:{backendNodeId:i}}=await this._client.send("DOM.describeNode",{objectId:t});return this.find(s=>s._payload.backendDOMNodeId===i)||null}find(e){if(e(this))return this;for(let t of this._children){let i=t.find(e);if(i)return i}return null}isLeafNode(){if(!this._children.length||this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"doc-cover":case"graphics-symbol":case"img":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0;default:break}return this._hasFocusableChild()?!1:!!(this._focusable&&this._role!=="WebArea"&&this._role!=="RootWebArea"&&this._name||this._role==="heading"&&this._name)}isControl(){switch(this._role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":return!0;default:return!1}}isInteresting(e){return this._role==="Ignored"||this._hidden?!1:this._focusable||this._richlyEditable||this.isControl()?!0:e?!1:this.isLeafNode()&&!!this._name}normalizedRole(){switch(this._role){case"RootWebArea":return"WebArea";case"StaticText":return"text";default:return this._role}}serialize(){let e=new Map;for(let l of this._payload.properties||[])e.set(l.name.toLowerCase(),l.value.value);this._payload.description&&e.set("description",this._payload.description.value);let t={role:this.normalizedRole(),name:this._payload.name&&this._payload.name.value||""},i=["description","keyshortcuts","roledescription","valuetext"];for(let l of i)!e.has(l)||(t[l]=e.get(l));let n=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(let l of n){if(l==="focused"&&(this._role==="WebArea"||this._role==="RootWebArea"))continue;let u=e.get(l);!u||(t[l]=u)}let s=["level","valuemax","valuemin"];for(let l of s)!e.has(l)||(t[l]=e.get(l));let o=["autocomplete","haspopup","invalid","orientation"];for(let l of o){let u=e.get(l);!u||u==="false"||(t[l]=u)}let c=t;return this._payload.value&&(typeof this._payload.value.value=="string"&&(c.valueString=this._payload.value.value),typeof this._payload.value.value=="number"&&(c.valueNumber=this._payload.value.value)),e.has("checked")&&(c.checked=e.get("checked")==="true"?"checked":e.get("checked")==="false"?"unchecked":"mixed"),e.has("pressed")&&(c.pressed=e.get("pressed")==="true"?"pressed":e.get("pressed")==="false"?"released":"mixed"),c}static createTree(e,t){let i=new Map;for(let n of t)i.set(n.nodeId,new iu(e,n));for(let n of i.values())for(let s of n._payload.childIds||[])n._children.push(i.get(s));return i.values().next().value}}});var Vx=w(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.CRCoverage=void 0;var bn=dt(),nu=H(),$x=class{constructor(e){this._jsCoverage=void 0,this._cssCoverage=void 0,this._jsCoverage=new zx(e),this._cssCoverage=new Ux(e)}async startJSCoverage(e){return await this._jsCoverage.start(e)}async stopJSCoverage(){return await this._jsCoverage.stop()}async startCSSCoverage(e){return await this._cssCoverage.start(e)}async stopCSSCoverage(){return await this._cssCoverage.stop()}};su.CRCoverage=$x;var zx=class{constructor(e){this._client=void 0,this._enabled=void 0,this._scriptIds=void 0,this._scriptSources=void 0,this._eventListeners=void 0,this._resetOnNavigation=void 0,this._reportAnonymousScripts=!1,this._client=e,this._enabled=!1,this._scriptIds=new Set,this._scriptSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}async start(e={}){(0,nu.assert)(!this._enabled,"JSCoverage is already enabled");let{resetOnNavigation:t=!0,reportAnonymousScripts:i=!1}=e;this._resetOnNavigation=t,this._reportAnonymousScripts=i,this._enabled=!0,this._scriptIds.clear(),this._scriptSources.clear(),this._eventListeners=[bn.eventsHelper.addEventListener(this._client,"Debugger.scriptParsed",this._onScriptParsed.bind(this)),bn.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this)),bn.eventsHelper.addEventListener(this._client,"Debugger.paused",this._onDebuggerPaused.bind(this))],await Promise.all([this._client.send("Profiler.enable"),this._client.send("Profiler.startPreciseCoverage",{callCount:!0,detailed:!0}),this._client.send("Debugger.enable"),this._client.send("Debugger.setSkipAllPauses",{skip:!0})])}_onDebuggerPaused(){this._client.send("Debugger.resume")}_onExecutionContextsCleared(){!this._resetOnNavigation||(this._scriptIds.clear(),this._scriptSources.clear())}async _onScriptParsed(e){if(this._scriptIds.add(e.scriptId),!e.url&&!this._reportAnonymousScripts)return;let t=await this._client._sendMayFail("Debugger.getScriptSource",{scriptId:e.scriptId});t&&this._scriptSources.set(e.scriptId,t.scriptSource)}async stop(){(0,nu.assert)(this._enabled,"JSCoverage is not enabled"),this._enabled=!1;let[e]=await Promise.all([this._client.send("Profiler.takePreciseCoverage"),this._client.send("Profiler.stopPreciseCoverage"),this._client.send("Profiler.disable"),this._client.send("Debugger.disable")]);bn.eventsHelper.removeEventListeners(this._eventListeners);let t=[];for(let i of e.result){if(!this._scriptIds.has(i.scriptId)||!i.url&&!this._reportAnonymousScripts)continue;let n=this._scriptSources.get(i.scriptId);n?t.push({...i,source:n}):t.push(i)}return t}},Ux=class{constructor(e){this._client=void 0,this._enabled=void 0,this._stylesheetURLs=void 0,this._stylesheetSources=void 0,this._eventListeners=void 0,this._resetOnNavigation=void 0,this._client=e,this._enabled=!1,this._stylesheetURLs=new Map,this._stylesheetSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}async start(e={}){(0,nu.assert)(!this._enabled,"CSSCoverage is already enabled");let{resetOnNavigation:t=!0}=e;this._resetOnNavigation=t,this._enabled=!0,this._stylesheetURLs.clear(),this._stylesheetSources.clear(),this._eventListeners=[bn.eventsHelper.addEventListener(this._client,"CSS.styleSheetAdded",this._onStyleSheet.bind(this)),bn.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this))],await Promise.all([this._client.send("DOM.enable"),this._client.send("CSS.enable"),this._client.send("CSS.startRuleUsageTracking")])}_onExecutionContextsCleared(){!this._resetOnNavigation||(this._stylesheetURLs.clear(),this._stylesheetSources.clear())}async _onStyleSheet(e){let t=e.header;if(!t.sourceURL)return;let i=await this._client._sendMayFail("CSS.getStyleSheetText",{styleSheetId:t.styleSheetId});i&&(this._stylesheetURLs.set(t.styleSheetId,t.sourceURL),this._stylesheetSources.set(t.styleSheetId,i.text))}async stop(){(0,nu.assert)(this._enabled,"CSSCoverage is not enabled"),this._enabled=!1;let e=await this._client.send("CSS.stopRuleUsageTracking");await Promise.all([this._client.send("CSS.disable"),this._client.send("DOM.disable")]),bn.eventsHelper.removeEventListeners(this._eventListeners);let t=new Map;for(let n of e.ruleUsage){let s=t.get(n.styleSheetId);s||(s=[],t.set(n.styleSheetId,s)),s.push({startOffset:n.startOffset,endOffset:n.endOffset,count:n.used?1:0})}let i=[];for(let n of this._stylesheetURLs.keys()){let s=this._stylesheetURLs.get(n),o=this._stylesheetSources.get(n),c=JL(t.get(n)||[]);i.push({url:s,ranges:c,text:o})}return i}};function JL(r){let e=[];for(let s of r)e.push({offset:s.startOffset,type:0,range:s}),e.push({offset:s.endOffset,type:1,range:s});e.sort((s,o)=>{if(s.offset!==o.offset)return s.offset-o.offset;if(s.type!==o.type)return o.type-s.type;let c=s.range.endOffset-s.range.startOffset,l=o.range.endOffset-o.range.startOffset;return s.type===0?l-c:c-l});let t=[],i=[],n=0;for(let s of e){if(t.length&&n<s.offset&&t[t.length-1]>0){let o=i.length?i[i.length-1]:null;o&&o.end===n?o.end=s.offset:i.push({start:n,end:s.offset})}n=s.offset,s.type===0?t.push(s.range.count):t.pop()}return i.filter(s=>s.end-s.start>1)}});var Xx=w(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.CRPDF=void 0;var Gx=H(),XL=vn(),YL={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}},Kx={px:1,in:96,cm:37.8,mm:3.78};function Cs(r){if(r===void 0)return;let e=r.substring(r.length-2).toLowerCase(),t="";Kx.hasOwnProperty(e)?t=r.substring(0,r.length-2):(e="px",t=r);let i=Number(t);return(0,Gx.assert)(!isNaN(i),"Failed to parse parameter value: "+r),i*Kx[e]/96}var Jx=class{constructor(e){this._client=void 0,this._client=e}async generate(e={}){let{scale:t=1,displayHeaderFooter:i=!1,headerTemplate:n="",footerTemplate:s="",printBackground:o=!1,landscape:c=!1,pageRanges:l="",preferCSSPageSize:u=!1,margin:d={}}=e,h=8.5,p=11;if(e.format){let x=YL[e.format.toLowerCase()];(0,Gx.assert)(x,"Unknown paper format: "+e.format),h=x.width,p=x.height}else h=Cs(e.width)||h,p=Cs(e.height)||p;let f=Cs(d.top)||0,_=Cs(d.left)||0,m=Cs(d.bottom)||0,g=Cs(d.right)||0,v=await this._client.send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:c,displayHeaderFooter:i,headerTemplate:n,footerTemplate:s,printBackground:o,scale:t,paperWidth:h,paperHeight:p,marginTop:f,marginBottom:m,marginLeft:_,marginRight:g,pageRanges:l,preferCSSPageSize:u});return await(0,XL.readProtocolStream)(this._client,v.stream,null)}};ou.CRPDF=Jx});var va=w(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.gracefullyCloseAll=QL;wa.launchProcess=ZL;wa.envArrayToObject=e2;var Yx=tS(require("child_process")),Qx=tS(require("readline")),ks=dt(),Zx=H();function eS(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(eS=function(i){return i?t:e})(r)}function tS(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=eS(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var au=new Set;async function QL(){await Promise.all(Array.from(au).map(r=>r().catch(e=>{})))}var rS=process.getMaxListeners();rS!==0&&process.setMaxListeners(Math.max(rS||0,100));async function ZL(r){let e=r.stdio==="pipe"?["ignore","pipe","pipe","pipe","pipe"]:["pipe","pipe","pipe"];r.log(`<launching> ${r.command} ${r.args?r.args.join(" "):""}`);let t={detached:process.platform!=="win32",env:r.env,cwd:r.cwd,shell:r.shell,stdio:e},i=Yx.spawn(r.command,r.args,t),n=async()=>{r.log(`[pid=${i.pid||"N/A"}] starting temporary directories cleanup`);let v=await(0,Zx.removeFolders)(r.tempDirectories);for(let x=0;x<r.tempDirectories.length;++x)v[x]&&r.log(`[pid=${i.pid||"N/A"}] exception while removing ${r.tempDirectories[x]}: ${v[x]}`);r.log(`[pid=${i.pid||"N/A"}] finished temporary directories cleanup`)};if(i.on("error",()=>{}),!i.pid){let v,x=new Promise((b,T)=>v=b);return i.once("error",b=>{v(new Error("Failed to launch: "+b))}),n().then(()=>x).then(b=>Promise.reject(b))}r.log(`<launched> pid=${i.pid}`),Qx.createInterface({input:i.stdout}).on("line",v=>{r.log(`[pid=${i.pid}][out] `+v)}),Qx.createInterface({input:i.stderr}).on("line",v=>{r.log(`[pid=${i.pid}][err] `+v)});let c=!1,l=()=>{},u=new Promise(v=>l=v),d=()=>{},h=new Promise(v=>d=v);i.once("exit",(v,x)=>{r.log(`[pid=${i.pid}] <process did exit: exitCode=${v}, signal=${x}>`),c=!0,ks.eventsHelper.removeEventListeners(p),au.delete(_),r.onExit(v,x),l(),n().then(d)});let p=[ks.eventsHelper.addEventListener(process,"exit",m)];r.handleSIGINT&&p.push(ks.eventsHelper.addEventListener(process,"SIGINT",()=>{_().then(()=>{(0,Zx.isUnderTest)()?setTimeout(()=>process.exit(130),0):process.exit(130)})})),r.handleSIGTERM&&p.push(ks.eventsHelper.addEventListener(process,"SIGTERM",_)),r.handleSIGHUP&&p.push(ks.eventsHelper.addEventListener(process,"SIGHUP",_)),au.add(_);let f=!1;async function _(){if(au.delete(_),f){r.log(`[pid=${i.pid}] <forecefully close>`),m(),await u;return}f=!0,r.log(`[pid=${i.pid}] <gracefully close start>`),await r.attemptToGracefullyClose().catch(()=>m()),await h,r.log(`[pid=${i.pid}] <gracefully close end>`)}function m(){if(r.log(`[pid=${i.pid}] <kill>`),ks.eventsHelper.removeEventListeners(p),i.pid&&!i.killed&&!c){r.log(`[pid=${i.pid}] <will force kill>`);try{if(process.platform==="win32"){let v=Yx.execSync(`taskkill /pid ${i.pid} /T /F /FI "MEMUSAGE gt 0"`);r.log(`[pid=${i.pid}] taskkill output: ${v.toString()}`)}else process.kill(-i.pid,"SIGKILL")}catch(v){r.log(`[pid=${i.pid}] exception while trying to kill process: ${v}`)}}else r.log(`[pid=${i.pid}] <skipped force kill spawnedProcess.killed=${i.killed} processClosed=${c}>`);n()}function g(){return m(),h}return{launchedProcess:i,gracefullyClose:_,kill:g}}function e2(r){let e={};for(let{name:t,value:i}of r)e[t]=i;return e}});var nS=w(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.VideoRecorder=void 0;var tm=H(),t2=bt(),r2=va(),i2=vr(),n2=Qe(),iS=25,cu=class{static async launch(e,t,i){if(!i.outputFile.endsWith(".webm"))throw new Error("File must have .webm extension");let n=new i2.ProgressController((0,n2.internalCallMetadata)(),e);return n.setLogName("browser"),await n.run(async s=>{let o=new cu(e,t,s);return await o._launch(i),o})}constructor(e,t,i){this._process=null,this._gracefullyClose=null,this._lastWritePromise=Promise.resolve(),this._lastFrameTimestamp=0,this._lastFrameBuffer=null,this._lastWriteTimestamp=0,this._progress=void 0,this._frameQueue=[],this._isStopped=!1,this._ffmpegPath=void 0,this._progress=i,this._ffmpegPath=t,e.on(t2.Page.Events.ScreencastFrame,n=>this.writeFrame(n.buffer,n.timestamp))}async _launch(e){let t=e.width,i=e.height,n=`-loglevel error -f image2pipe -avioflags direct -fpsprobesize 0 -probesize 32 -analyzeduration 0 -c:v mjpeg -i - -y -an -r ${iS} -c:v vp8 -qmin 0 -qmax 50 -crf 8 -deadline realtime -speed 8 -b:v 1M -threads 1 -vf pad=${t}:${i}:0:0:gray,crop=${t}:${i}:0:0`.split(" ");n.push(e.outputFile);let s=this._progress,{launchedProcess:o,gracefullyClose:c}=await(0,r2.launchProcess)({command:this._ffmpegPath,args:n,stdio:"stdin",log:l=>s.log(l),tempDirectories:[],attemptToGracefullyClose:async()=>{s.log("Closing stdin..."),o.stdin.end()},onExit:(l,u)=>{s.log(`ffmpeg onkill exitCode=${l} signal=${u}`)}});o.stdin.on("finish",()=>{s.log("ffmpeg finished input.")}),o.stdin.on("error",()=>{s.log("ffmpeg error.")}),this._process=o,this._gracefullyClose=c}writeFrame(e,t){if((0,tm.assert)(this._process),!this._isStopped){if(this._progress.log("writing frame "+t),this._lastFrameBuffer){let i=t-this._lastFrameTimestamp,n=Math.max(1,Math.round(iS*i));for(let s=0;s<n;++s)this._frameQueue.push(this._lastFrameBuffer);this._lastWritePromise=this._lastWritePromise.then(()=>this._sendFrames())}this._lastFrameBuffer=e,this._lastFrameTimestamp=t,this._lastWriteTimestamp=(0,tm.monotonicTime)()}}async _sendFrames(){for(;this._frameQueue.length;)await this._sendFrame(this._frameQueue.shift())}async _sendFrame(e){return new Promise(t=>this._process.stdin.write(e,t)).then(t=>{t&&this._progress.log(`ffmpeg failed to write: ${t}`)})}async stop(){this._isStopped||(this.writeFrame(Buffer.from([]),this._lastFrameTimestamp+((0,tm.monotonicTime)()-this._lastWriteTimestamp)/1e3),this._isStopped=!0,await this._lastWritePromise,await this._gracefullyClose())}};lu.VideoRecorder=cu});var oS=w(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.DragManager=void 0;var s2=H(),rm=vn(),sS=class{constructor(e){this._crPage=void 0,this._dragState=null,this._lastPosition={x:0,y:0},this._crPage=e}async cancelDrag(){return this._dragState?(await this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragCancel",x:this._lastPosition.x,y:this._lastPosition.y,data:{items:[],dragOperationsMask:65535}}),this._dragState=null,!0):!1}async interceptDragCausedByMove(e,t,i,n,s,o){if(this._lastPosition={x:e,y:t},this._dragState){await this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragOver",x:e,y:t,data:this._dragState,modifiers:(0,rm.toModifiersMask)(s)});return}if(i!=="left")return o();let c=this._crPage._mainFrameSession._client,l,u=new Promise(h=>l=h);await Promise.all(this._crPage._page.frames().map(async h=>{await h.nonStallingEvaluateInExistingContext(function(){let p=Promise.resolve(!1),f=null,_=g=>f=g,m=()=>{p=new Promise(g=>{window.addEventListener("dragstart",_,{once:!0,capture:!0}),setTimeout(()=>g(f?!f.defaultPrevented:!1),0)})};window.addEventListener("mousemove",m,{once:!0,capture:!0}),window.__cleanupDrag=async()=>{let g=await p;return window.removeEventListener("mousemove",m,{capture:!0}),window.removeEventListener("dragstart",_,{capture:!0}),g}}.toString(),!0,"utility").catch(()=>{})})),c.on("Input.dragIntercepted",l);try{await c.send("Input.setInterceptDrags",{enabled:!0})}catch{return c.off("Input.dragIntercepted",l),o()}await o();let d=(await Promise.all(this._crPage._page.frames().map(async h=>h.nonStallingEvaluateInExistingContext("window.__cleanupDrag && window.__cleanupDrag()",!1,"utility").catch(()=>!1)))).some(h=>h);this._dragState=d?(await u).data:null,c.off("Input.dragIntercepted",l),await c.send("Input.setInterceptDrags",{enabled:!1}),this._dragState&&await this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragEnter",x:e,y:t,data:this._dragState,modifiers:(0,rm.toModifiersMask)(s)})}isDragging(){return!!this._dragState}async drop(e,t,i){(0,s2.assert)(this._dragState,"missing drag state"),await this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"drop",x:e,y:t,data:this._dragState,modifiers:(0,rm.toModifiersMask)(i)}),this._dragState=null}};uu.DragManager=sS});var cS=w((L8,aS)=>{var Ci=require("constants"),o2=process.cwd,du=null,a2=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return du||(du=o2.call(process)),du};try{process.cwd()}catch(r){}typeof process.chdir=="function"&&(im=process.chdir,process.chdir=function(r){du=null,im.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,im));var im;aS.exports=c2;function c2(r){Ci.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=i(r.chmod),r.fchmod=i(r.fchmod),r.lchmod=i(r.lchmod),r.chownSync=o(r.chownSync),r.fchownSync=o(r.fchownSync),r.lchownSync=o(r.lchownSync),r.chmodSync=n(r.chmodSync),r.fchmodSync=n(r.fchmodSync),r.lchmodSync=n(r.lchmodSync),r.stat=c(r.stat),r.fstat=c(r.fstat),r.lstat=c(r.lstat),r.statSync=l(r.statSync),r.fstatSync=l(r.fstatSync),r.lstatSync=l(r.lstatSync),r.lchmod||(r.lchmod=function(d,h,p){p&&process.nextTick(p)},r.lchmodSync=function(){}),r.lchown||(r.lchown=function(d,h,p,f){f&&process.nextTick(f)},r.lchownSync=function(){}),a2==="win32"&&(r.rename=function(d){return function(h,p,f){var _=Date.now(),m=0;d(h,p,function g(v){if(v&&(v.code==="EACCES"||v.code==="EPERM")&&Date.now()-_<6e4){setTimeout(function(){r.stat(p,function(x,b){x&&x.code==="ENOENT"?d(h,p,g):f(v)})},m),m<100&&(m+=10);return}f&&f(v)})}}(r.rename)),r.read=function(d){function h(p,f,_,m,g,v){var x;if(v&&typeof v=="function"){var b=0;x=function(T,k,F){if(T&&T.code==="EAGAIN"&&b<10)return b++,d.call(r,p,f,_,m,g,x);v.apply(this,arguments)}}return d.call(r,p,f,_,m,g,x)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,d),h}(r.read),r.readSync=function(d){return function(h,p,f,_,m){for(var g=0;;)try{return d.call(r,h,p,f,_,m)}catch(v){if(v.code==="EAGAIN"&&g<10){g++;continue}throw v}}}(r.readSync);function e(d){d.lchmod=function(h,p,f){d.open(h,Ci.O_WRONLY|Ci.O_SYMLINK,p,function(_,m){if(_){f&&f(_);return}d.fchmod(m,p,function(g){d.close(m,function(v){f&&f(g||v)})})})},d.lchmodSync=function(h,p){var f=d.openSync(h,Ci.O_WRONLY|Ci.O_SYMLINK,p),_=!0,m;try{m=d.fchmodSync(f,p),_=!1}finally{if(_)try{d.closeSync(f)}catch(g){}else d.closeSync(f)}return m}}function t(d){Ci.hasOwnProperty("O_SYMLINK")?(d.lutimes=function(h,p,f,_){d.open(h,Ci.O_SYMLINK,function(m,g){if(m){_&&_(m);return}d.futimes(g,p,f,function(v){d.close(g,function(x){_&&_(v||x)})})})},d.lutimesSync=function(h,p,f){var _=d.openSync(h,Ci.O_SYMLINK),m,g=!0;try{m=d.futimesSync(_,p,f),g=!1}finally{if(g)try{d.closeSync(_)}catch(v){}else d.closeSync(_)}return m}):(d.lutimes=function(h,p,f,_){_&&process.nextTick(_)},d.lutimesSync=function(){})}function i(d){return d&&function(h,p,f){return d.call(r,h,p,function(_){u(_)&&(_=null),f&&f.apply(this,arguments)})}}function n(d){return d&&function(h,p){try{return d.call(r,h,p)}catch(f){if(!u(f))throw f}}}function s(d){return d&&function(h,p,f,_){return d.call(r,h,p,f,function(m){u(m)&&(m=null),_&&_.apply(this,arguments)})}}function o(d){return d&&function(h,p,f){try{return d.call(r,h,p,f)}catch(_){if(!u(_))throw _}}}function c(d){return d&&function(h,p,f){typeof p=="function"&&(f=p,p=null);function _(m,g){g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),f&&f.apply(this,arguments)}return p?d.call(r,h,p,_):d.call(r,h,_)}}function l(d){return d&&function(h,p){var f=p?d.call(r,h,p):d.call(r,h);return f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296),f}}function u(d){if(!d||d.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(d.code==="EINVAL"||d.code==="EPERM"))}}});var dS=w((B8,uS)=>{var lS=require("stream").Stream;uS.exports=l2;function l2(r){return{ReadStream:e,WriteStream:t};function e(i,n){if(!(this instanceof e))return new e(i,n);lS.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var o=Object.keys(n),c=0,l=o.length;c<l;c++){var u=o[c];this[u]=n[u]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(d,h){if(d){s.emit("error",d),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function t(i,n){if(!(this instanceof t))return new t(i,n);lS.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),o=0,c=s.length;o<c;o++){var l=s[o];this[l]=n[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var pS=w((H8,hS)=>{"use strict";hS.exports=d2;var u2=Object.getPrototypeOf||function(r){return r.__proto__};function d2(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:u2(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}});var am=w((j8,om)=>{var je=require("fs"),h2=cS(),p2=dS(),f2=pS(),hu=require("util"),gt,pu;typeof Symbol=="function"&&typeof Symbol.for=="function"?(gt=Symbol.for("graceful-fs.queue"),pu=Symbol.for("graceful-fs.previous")):(gt="___graceful-fs.queue",pu="___graceful-fs.previous");function m2(){}function fS(r,e){Object.defineProperty(r,gt,{get:function(){return e}})}var xn=m2;hu.debuglog?xn=hu.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(xn=function(){var r=hu.format.apply(hu,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)});je[gt]||(mS=global[gt]||[],fS(je,mS),je.close=function(r){function e(t,i){return r.call(je,t,function(n){n||_S(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,pu,{value:r}),e}(je.close),je.closeSync=function(r){function e(t){r.apply(je,arguments),_S()}return Object.defineProperty(e,pu,{value:r}),e}(je.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){xn(je[gt]),require("assert").equal(je[gt].length,0)}));var mS;global[gt]||fS(global,je[gt]);om.exports=nm(f2(je));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!je.__patched&&(om.exports=nm(je),je.__patched=!0);function nm(r){h2(r),r.gracefulify=nm,r.createReadStream=T,r.createWriteStream=k;var e=r.readFile;r.readFile=t;function t(C,A,D){return typeof A=="function"&&(D=A,A=null),W(C,A,D);function W(V,M,K,N){return e(V,M,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Ps([W,[V,M,K],L,N||Date.now(),Date.now()]):typeof K=="function"&&K.apply(this,arguments)})}}var i=r.writeFile;r.writeFile=n;function n(C,A,D,W){return typeof D=="function"&&(W=D,D=null),V(C,A,D,W);function V(M,K,N,L,ae){return i(M,K,N,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?Ps([V,[M,K,N,L],Q,ae||Date.now(),Date.now()]):typeof L=="function"&&L.apply(this,arguments)})}}var s=r.appendFile;s&&(r.appendFile=o);function o(C,A,D,W){return typeof D=="function"&&(W=D,D=null),V(C,A,D,W);function V(M,K,N,L,ae){return s(M,K,N,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?Ps([V,[M,K,N,L],Q,ae||Date.now(),Date.now()]):typeof L=="function"&&L.apply(this,arguments)})}}var c=r.copyFile;c&&(r.copyFile=l);function l(C,A,D,W){return typeof D=="function"&&(W=D,D=0),V(C,A,D,W);function V(M,K,N,L,ae){return c(M,K,N,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?Ps([V,[M,K,N,L],Q,ae||Date.now(),Date.now()]):typeof L=="function"&&L.apply(this,arguments)})}}var u=r.readdir;r.readdir=d;function d(C,A,D){return typeof A=="function"&&(D=A,A=null),W(C,A,D);function W(V,M,K,N){return u(V,M,function(L,ae){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Ps([W,[V,M,K],L,N||Date.now(),Date.now()]):(ae&&ae.sort&&ae.sort(),typeof K=="function"&&K.call(this,L,ae))})}}if(process.version.substr(0,4)==="v0.8"){var h=p2(r);g=h.ReadStream,x=h.WriteStream}var p=r.ReadStream;p&&(g.prototype=Object.create(p.prototype),g.prototype.open=v);var f=r.WriteStream;f&&(x.prototype=Object.create(f.prototype),x.prototype.open=b),Object.defineProperty(r,"ReadStream",{get:function(){return g},set:function(C){g=C},enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:function(){return x},set:function(C){x=C},enumerable:!0,configurable:!0});var _=g;Object.defineProperty(r,"FileReadStream",{get:function(){return _},set:function(C){_=C},enumerable:!0,configurable:!0});var m=x;Object.defineProperty(r,"FileWriteStream",{get:function(){return m},set:function(C){m=C},enumerable:!0,configurable:!0});function g(C,A){return this instanceof g?(p.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function v(){var C=this;y(C.path,C.flags,C.mode,function(A,D){A?(C.autoClose&&C.destroy(),C.emit("error",A)):(C.fd=D,C.emit("open",D),C.read())})}function x(C,A){return this instanceof x?(f.apply(this,arguments),this):x.apply(Object.create(x.prototype),arguments)}function b(){var C=this;y(C.path,C.flags,C.mode,function(A,D){A?(C.destroy(),C.emit("error",A)):(C.fd=D,C.emit("open",D))})}function T(C,A){return new r.ReadStream(C,A)}function k(C,A){return new r.WriteStream(C,A)}var F=r.open;r.open=y;function y(C,A,D,W){return typeof D=="function"&&(W=D,D=null),V(C,A,D,W);function V(M,K,N,L,ae){return F(M,K,N,function(Q,R){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?Ps([V,[M,K,N,L],Q,ae||Date.now(),Date.now()]):typeof L=="function"&&L.apply(this,arguments)})}}return r}function Ps(r){xn("ENQUEUE",r[0].name,r[1]),je[gt].push(r),sm()}var fu;function _S(){for(var r=Date.now(),e=0;e<je[gt].length;++e)je[gt][e].length>2&&(je[gt][e][3]=r,je[gt][e][4]=r);sm()}function sm(){if(clearTimeout(fu),fu=void 0,je[gt].length!==0){var r=je[gt].shift(),e=r[0],t=r[1],i=r[2],n=r[3],s=r[4];if(n===void 0)xn("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-n>=6e4){xn("TIMEOUT",e.name,t);var o=t.pop();typeof o=="function"&&o.call(null,i)}else{var c=Date.now()-s,l=Math.max(s-n,1),u=Math.min(l*1.2,100);c>=u?(xn("RETRY",e.name,t),e.apply(null,t.concat([n]))):je[gt].push(r)}fu===void 0&&(fu=setTimeout(sm,0))}}});var wS=w((W8,gS)=>{function Vt(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}gS.exports=Vt;Vt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts};Vt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null};Vt.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),t=this._timeouts.shift();else return!1;var i=this,n=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},t);return this._options.unref&&n.unref(),!0};Vt.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Vt.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};Vt.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};Vt.prototype.start=Vt.prototype.try;Vt.prototype.errors=function(){return this._errors};Vt.prototype.attempts=function(){return this._attempts};Vt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,i=0;i<this._errors.length;i++){var n=this._errors[i],s=n.message,o=(r[s]||0)+1;r[s]=o,o>=t&&(e=n,t=o)}return e}});var vS=w(Sn=>{var _2=wS();Sn.operation=function(r){var e=Sn.timeouts(r);return new _2(e,{forever:r&&r.forever,unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})};Sn.timeouts=function(r){if(r instanceof Array)return[].concat(r);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var t in r)e[t]=r[t];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],n=0;n<e.retries;n++)i.push(this.createTimeout(n,e));return r&&r.forever&&!i.length&&i.push(this.createTimeout(n,e)),i.sort(function(s,o){return s-o}),i};Sn.createTimeout=function(r,e){var t=e.randomize?Math.random()+1:1,i=Math.round(t*e.minTimeout*Math.pow(e.factor,r));return i=Math.min(i,e.maxTimeout),i};Sn.wrap=function(r,e,t){if(e instanceof Array&&(t=e,e=null),!t){t=[];for(var i in r)typeof r[i]=="function"&&t.push(i)}for(var n=0;n<t.length;n++){var s=t[n],o=r[s];r[s]=function(l){var u=Sn.operation(e),d=Array.prototype.slice.call(arguments,1),h=d.pop();d.push(function(p){u.retry(p)||(p&&(arguments[0]=u.mainError()),h.apply(this,arguments))}),u.attempt(function(){l.apply(r,d)})}.bind(r,o),r[s].options=e}}});var bS=w((z8,yS)=>{yS.exports=vS()});var xS=w((U8,mu)=>{mu.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&mu.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&mu.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var PS=w((V8,As)=>{var Ee=global.process;typeof Ee!="object"||!Ee?As.exports=function(){}:(SS=require("assert"),Os=xS(),ES=/^win/i.test(Ee.platform),ya=require("events"),typeof ya!="function"&&(ya=ya.EventEmitter),Ee.__signal_exit_emitter__?ct=Ee.__signal_exit_emitter__:(ct=Ee.__signal_exit_emitter__=new ya,ct.count=0,ct.emitted={}),ct.infinite||(ct.setMaxListeners(1/0),ct.infinite=!0),As.exports=function(r,e){if(global.process===Ee){SS.equal(typeof r,"function","a callback must be provided for exit handler"),Ts===!1&&cm();var t="exit";e&&e.alwaysLast&&(t="afterexit");var i=function(){ct.removeListener(t,r),ct.listeners("exit").length===0&&ct.listeners("afterexit").length===0&&_u()};return ct.on(t,r),i}},_u=function(){!Ts||global.process!==Ee||(Ts=!1,Os.forEach(function(e){try{Ee.removeListener(e,gu[e])}catch(t){}}),Ee.emit=wu,Ee.reallyExit=lm,ct.count-=1)},As.exports.unload=_u,En=function(e,t,i){ct.emitted[e]||(ct.emitted[e]=!0,ct.emit(e,t,i))},gu={},Os.forEach(function(r){gu[r]=function(){if(Ee===global.process){var t=Ee.listeners(r);t.length===ct.count&&(_u(),En("exit",null,r),En("afterexit",null,r),ES&&r==="SIGHUP"&&(r="SIGINT"),Ee.kill(Ee.pid,r))}}}),As.exports.signals=function(){return Os},Ts=!1,cm=function(){Ts||Ee!==global.process||(Ts=!0,ct.count+=1,Os=Os.filter(function(e){try{return Ee.on(e,gu[e]),!0}catch(t){return!1}}),Ee.emit=kS,Ee.reallyExit=CS)},As.exports.load=cm,lm=Ee.reallyExit,CS=function(e){Ee===global.process&&(Ee.exitCode=e||0,En("exit",Ee.exitCode,null),En("afterexit",Ee.exitCode,null),lm.call(Ee,Ee.exitCode))},wu=Ee.emit,kS=function(e,t){if(e==="exit"&&Ee===global.process){t!==void 0&&(Ee.exitCode=t);var i=wu.apply(this,arguments);return En("exit",Ee.exitCode,null),En("afterexit",Ee.exitCode,null),i}else return wu.apply(this,arguments)});var SS,Os,ES,ya,ct,_u,En,gu,Ts,cm,lm,CS,wu,kS});var TS=w((G8,um)=>{"use strict";var OS=Symbol();function g2(r,e,t){let i=e[OS];if(i)return e.stat(r,(s,o)=>{if(s)return t(s);t(null,o.mtime,i)});let n=new Date(Math.ceil(Date.now()/1e3)*1e3+5);e.utimes(r,n,n,s=>{if(s)return t(s);e.stat(r,(o,c)=>{if(o)return t(o);let l=c.mtime.getTime()%1e3==0?"s":"ms";Object.defineProperty(e,OS,{value:l}),t(null,c.mtime,l)})})}function w2(r){let e=Date.now();return r==="s"&&(e=Math.ceil(e/1e3)*1e3),new Date(e)}um.exports.probe=g2;um.exports.getMtime=w2});var DS=w((K8,xa)=>{"use strict";var v2=require("path"),dm=am(),y2=bS(),b2=PS(),AS=TS(),Lr={};function ba(r,e){return e.lockfilePath||`${r}.lock`}function hm(r,e,t){if(!e.realpath)return t(null,v2.resolve(r));e.fs.realpath(r,t)}function pm(r,e,t){let i=ba(r,e);e.fs.mkdir(i,n=>{if(!n)return AS.probe(i,e.fs,(s,o,c)=>{if(s)return e.fs.rmdir(i,()=>{}),t(s);t(null,o,c)});if(n.code!=="EEXIST")return t(n);if(e.stale<=0)return t(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:r}));e.fs.stat(i,(s,o)=>{if(s)return s.code==="ENOENT"?pm(r,{...e,stale:0},t):t(s);if(!MS(o,e))return t(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:r}));IS(r,e,c=>{if(c)return t(c);pm(r,{...e,stale:0},t)})})})}function MS(r,e){return r.mtime.getTime()<Date.now()-e.stale}function IS(r,e,t){e.fs.rmdir(ba(r,e),i=>{if(i&&i.code!=="ENOENT")return t(i);t()})}function vu(r,e){let t=Lr[r];t.updateTimeout||(t.updateDelay=t.updateDelay||e.update,t.updateTimeout=setTimeout(()=>{t.updateTimeout=null,e.fs.stat(t.lockfilePath,(i,n)=>{let s=t.lastUpdate+e.stale<Date.now();if(i)return i.code==="ENOENT"||s?fm(r,t,Object.assign(i,{code:"ECOMPROMISED"})):(t.updateDelay=1e3,vu(r,e));if(!(t.mtime.getTime()===n.mtime.getTime()))return fm(r,t,Object.assign(new Error("Unable to update lock within the stale threshold"),{code:"ECOMPROMISED"}));let c=AS.getMtime(t.mtimePrecision);e.fs.utimes(t.lockfilePath,c,c,l=>{let u=t.lastUpdate+e.stale<Date.now();if(!t.released){if(l)return l.code==="ENOENT"||u?fm(r,t,Object.assign(l,{code:"ECOMPROMISED"})):(t.updateDelay=1e3,vu(r,e));t.mtime=c,t.lastUpdate=Date.now(),t.updateDelay=null,vu(r,e)}})})},t.updateDelay),t.updateTimeout.unref&&t.updateTimeout.unref())}function fm(r,e,t){e.released=!0,e.updateTimeout&&clearTimeout(e.updateTimeout),Lr[r]===e&&delete Lr[r],e.options.onCompromised(t)}function x2(r,e,t){e={stale:1e4,update:null,realpath:!0,retries:0,fs:dm,onCompromised:i=>{throw i},...e},e.retries=e.retries||0,e.retries=typeof e.retries=="number"?{retries:e.retries}:e.retries,e.stale=Math.max(e.stale||0,2e3),e.update=e.update==null?e.stale/2:e.update||0,e.update=Math.max(Math.min(e.update,e.stale/2),1e3),hm(r,e,(i,n)=>{if(i)return t(i);let s=y2.operation(e.retries);s.attempt(()=>{pm(n,e,(o,c,l)=>{if(s.retry(o))return;if(o)return t(s.mainError());let u=Lr[n]={lockfilePath:ba(n,e),mtime:c,mtimePrecision:l,options:e,lastUpdate:Date.now()};vu(n,e),t(null,d=>{if(u.released)return d&&d(Object.assign(new Error("Lock is already released"),{code:"ERELEASED"}));FS(n,{...e,realpath:!1},d)})})})})}function FS(r,e,t){e={fs:dm,realpath:!0,...e},hm(r,e,(i,n)=>{if(i)return t(i);let s=Lr[n];if(!s)return t(Object.assign(new Error("Lock is not acquired/owned by you"),{code:"ENOTACQUIRED"}));s.updateTimeout&&clearTimeout(s.updateTimeout),s.released=!0,delete Lr[n],IS(n,e,t)})}function S2(r,e,t){e={stale:1e4,realpath:!0,fs:dm,...e},e.stale=Math.max(e.stale||0,2e3),hm(r,e,(i,n)=>{if(i)return t(i);e.fs.stat(ba(n,e),(s,o)=>s?s.code==="ENOENT"?t(null,!1):t(s):t(null,!MS(o,e)))})}function E2(){return Lr}b2(()=>{for(let r in Lr){let e=Lr[r].options;try{e.fs.rmdirSync(ba(r,e))}catch(t){}}});xa.exports.lock=x2;xa.exports.unlock=FS;xa.exports.check=S2;xa.exports.getLocks=E2});var NS=w((J8,RS)=>{"use strict";var C2=am();function k2(r){let e=["mkdir","realpath","stat","rmdir","utimes"],t={...r};return e.forEach(i=>{t[i]=(...n)=>{let s=n.pop(),o;try{o=r[`${i}Sync`](...n)}catch(c){return s(c)}s(null,o)}}),t}function P2(r){return(...e)=>new Promise((t,i)=>{e.push((n,s)=>{n?i(n):t(s)}),r(...e)})}function O2(r){return(...e)=>{let t,i;if(e.push((n,s)=>{t=n,i=s}),r(...e),t)throw t;return i}}function T2(r){if(r={...r},r.fs=k2(r.fs||C2),typeof r.retries=="number"&&r.retries>0||r.retries&&typeof r.retries.retries=="number"&&r.retries.retries>0)throw Object.assign(new Error("Cannot use retries with the sync api"),{code:"ESYNC"});return r}RS.exports={toPromise:P2,toSync:O2,toSyncOptions:T2}});var LS=w((X8,ki)=>{"use strict";var Ms=DS(),{toPromise:yu,toSync:bu,toSyncOptions:mm}=NS();async function qS(r,e){let t=await yu(Ms.lock)(r,e);return yu(t)}function A2(r,e){let t=bu(Ms.lock)(r,mm(e));return bu(t)}function M2(r,e){return yu(Ms.unlock)(r,e)}function I2(r,e){return bu(Ms.unlock)(r,mm(e))}function F2(r,e){return yu(Ms.check)(r,e)}function D2(r,e){return bu(Ms.check)(r,mm(e))}ki.exports=qS;ki.exports.lock=qS;ki.exports.unlock=M2;ki.exports.lockSync=A2;ki.exports.unlockSync=I2;ki.exports.check=F2;ki.exports.checkSync=D2});var BS=w(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.deps=void 0;var R2={bionic:{tools:["xvfb","fonts-noto-color-emoji","ttf-unifont","libfontconfig","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","ttf-ubuntu-font-family"],chromium:["fonts-liberation","libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libegl1","libgbm1","libglib2.0-0","libgtk-3-0","libnspr4","libnss3","libpango-1.0-0","libx11-6","libx11-xcb1","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxrandr2","libxshmfence1"],firefox:["ffmpeg","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libglib2.0-0","libgtk-3-0","libpango-1.0-0","libpangocairo-1.0-0","libpangoft2-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrender1","libxt6"],webkit:["gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libatk-bridge2.0-0","libatk1.0-0","libbrotli1","libcairo2","libegl1","libenchant1c2a","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libgl1","libgles2","libglib2.0-0","libgstreamer-gl1.0-0","libgstreamer1.0-0","libgtk-3-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libicu60","libjpeg-turbo8","libnotify4","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libsecret-1-0","libvpx5","libwayland-client0","libwayland-egl1","libwayland-server0","libwebp6","libwebpdemux2","libwoff1","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1"]},focal:{tools:["xvfb","fonts-noto-color-emoji","ttf-unifont","libfontconfig","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","ttf-ubuntu-font-family"],chromium:["fonts-liberation","libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libegl1","libgbm1","libglib2.0-0","libgtk-3-0","libnspr4","libnss3","libpango-1.0-0","libx11-6","libx11-xcb1","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxrandr2","libxshmfence1"],firefox:["ffmpeg","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libglib2.0-0","libgtk-3-0","libpango-1.0-0","libpangocairo-1.0-0","libpangoft2-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrender1","libxt6"],webkit:["gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libatk-bridge2.0-0","libatk1.0-0","libcairo2","libegl1","libenchant1c2a","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libgl1","libgles2","libglib2.0-0","libgstreamer-gl1.0-0","libgstreamer1.0-0","libgtk-3-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libicu66","libjpeg-turbo8","libnotify4","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libsecret-1-0","libsoup2.4-1","libvpx6","libwayland-client0","libwayland-egl1","libwayland-server0","libwebp6","libwebpdemux2","libwoff1","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1"]},hirsute:{tools:["xvfb","fonts-noto-color-emoji","ttf-unifont","libfontconfig","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","ttf-ubuntu-font-family"],chromium:["libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libgbm1","libglib2.0-0","libnspr4","libnss3","libpango-1.0-0","libx11-6","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxkbcommon0","libxrandr2","libxshmfence1"],firefox:["ffmpeg","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf-2.0-0","libglib2.0-0","libgtk-3-0","libgtk2.0-0","libharfbuzz0b","libpango-1.0-0","libpangocairo-1.0-0","libpangoft2-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrender1","libxt6"],webkit:["gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libatk-bridge2.0-0","libatk1.0-0","libcairo2","libegl1","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgdk-pixbuf-2.0-0","libgl1","libgles2","libglib2.0-0","libgstreamer-gl1.0-0","libgstreamer-plugins-bad1.0-0","libgstreamer-plugins-base1.0-0","libgstreamer1.0-0","libgtk-3-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libjavascriptcoregtk-4.0-18","libjpeg-turbo8","liblcms2-2","libnotify4","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libsecret-1-0","libsoup2.4-1","libvpx6","libwayland-client0","libwayland-egl1","libwayland-server0","libwebkit2gtk-4.0-37","libwebp6","libwebpdemux2","libwoff1","libwpe-1.0-1","libwpebackend-fdo-1.0-1","libwpewebkit-1.0-3","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1"]}};xu.deps=R2});var US=w(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.installDependenciesWindows=B2;Fs.installDependenciesLinux=H2;Fs.validateDependenciesWindows=W2;Fs.validateDependenciesLinux=$2;var Su=_m(require("fs")),Cn=_m(require("path")),Sa=WS(require("os")),N2=_m(require("child_process")),HS=Oc(),Is=WS(H());function jS(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(jS=function(i){return i?t:e})(r)}function WS(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=jS(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function _m(r){return r&&r.__esModule?r:{default:r}}var $S=Cn.default.join(__dirname,"..","..","bin"),q2=r=>Su.default.promises.access(r,Su.default.constants.X_OK).then(()=>!0).catch(e=>!1);function L2(){if(Sa.platform()!=="win32"||Sa.arch()!=="x64")return!1;let[r,e]=Sa.release().split(".").map(t=>parseInt(t,10));return r>6||r===6&&e>1}async function B2(r){if(r.has("chromium")){let{code:e}=await Is.spawnAsync("powershell.exe",["-File",Cn.default.join($S,"install_media_pack.ps1")],{cwd:$S,stdio:"inherit"});if(e!==0)throw new Error("Failed to install windows dependencies!")}}async function H2(r){let e=await(0,HS.getUbuntuVersion)();if(e!=="18.04"&&e!=="20.04"&&e!=="21.04"){console.warn("Cannot install dependencies for this linux distribution!");return}let t=[],{deps:i}=BS();for(let u of r)e==="18.04"?t.push(...i.bionic[u]):e==="20.04"?t.push(...i.focal[u]):e==="21.04"&&t.push(...i.hirsute[u]);let n=Array.from(new Set(t));console.log("Installing Ubuntu dependencies...");let s=[];s.push("apt-get update"),s.push(["apt-get","install","-y","--no-install-recommends",...n].join(" "));let[o,c]=await j2(s),l=N2.default.spawn(o,c,{stdio:"inherit"});await new Promise((u,d)=>{l.on("exit",u),l.on("error",d)})}async function j2(r){return process.getuid()===0?["sh",["-c",`${r.join("&& ")}`]]:(await Is.spawnAsync("which",["sudo"])).code===0?["sudo",["--","sh","-c",`${r.join("&& ")}`]]:["su",["root","-c",`${r.join("&& ")}`]]}async function W2(r){let e=r,t=[];for(let u of e)t.push(...await zS(u));let i=await Promise.all(t.map(u=>U2(u))),n=new Set;for(let u of i)for(let d of u)n.add(d);if(!n.size)return;let s=!1,o=!1;for(let u of n)u.startsWith("api-ms-win-crt")||u==="vcruntime140.dll"||u==="vcruntime140_1.dll"||u==="msvcp140.dll"?s=!0:(u==="mf.dll"||u==="mfplat.dll"||u==="msmpeg2vdec.dll"||u==="evr.dll"||u==="avrt.dll")&&(o=!0);let c=[];s&&c.push("Some of the Universal C Runtime files cannot be found on the system. You can fix","that by installing Microsoft Visual C++ Redistributable for Visual Studio from:","https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads",""),o&&c.push("Some of the Media Foundation files cannot be found on the system. If you are","on Windows Server try fixing this by running the following command in PowerShell","as Administrator:","","    Install-WindowsFeature Server-Media-Foundation","","For Windows N editions visit:","https://support.microsoft.com/en-us/help/3145500/media-feature-pack-list-for-windows-n-editions",""),c.push("Full list of missing libraries:",`    ${[...n].join(`
    `)}`,"");let l=`Host system is missing dependencies!

${c.join(`
`)}`;if(L2())throw new Error(l);console.warn("WARNING: running on unsupported windows version!"),console.warn(l)}async function $2(r,e){let t=r,i=[];for(let p of t)i.push(...await zS(p));let n=await Promise.all(i.map(p=>V2(p,t))),s=new Set;for(let p of n)for(let f of p)s.add(f);for(let p of await G2(e))s.add(p);if(!s.size)return;let o=new Set,c=await(0,HS.getUbuntuVersion)(),l=null;if(c==="18.04"?l=K2:c==="20.04"?l=J2:c==="21.04"&&(l=X2),l=Object.assign({},l,Y2),l)for(let p of s){let f=l[p];f&&(o.add(f),s.delete(p))}let u=process.getuid()!==0&&Sa.platform()!=="win32"?"sudo ":"";if(o.size&&!s.size)throw new Error(`
`+Is.wrapInASCIIBox(["Host system is missing a few dependencies to run browsers.","Please install them with the following command:","",`    ${u}npx playwright install-deps`,"","<3 Playwright Team"].join(`
`),1));let d="";o.size&&(d=["  Install missing packages with:",`      ${u}apt-get install ${[...o].join(`\\
          `)}`,"",""].join(`
`));let h="";throw s.size&&(h=[`  ${o.size?"Missing libraries we didn't find packages for:":"Missing libraries are:"}`,`      ${[...s].join(`
      `)}`,""].join(`
`)),new Error(`Host system is missing dependencies!

`+d+h)}function z2(r){switch(Sa.platform()){case"linux":return r.endsWith(".so")||r.includes(".so.");case"win32":return r.endsWith(".dll");default:return!1}}async function zS(r){let e=(await Su.default.promises.readdir(r)).map(s=>Cn.default.resolve(r,s)),t=await Promise.all(e.map(s=>Su.default.promises.stat(s))),i=e.filter((s,o)=>t[o].isFile());return(await Promise.all(i.map(async s=>{let o=Cn.default.basename(s).toLowerCase();return z2(o)||await q2(s)?s:!1}))).filter(Boolean)}async function U2(r){let e=Cn.default.join(__dirname,"..","..","bin","PrintDeps.exe"),t=Cn.default.dirname(r),{stdout:i,code:n}=await Is.spawnAsync(e,[r],{cwd:t,env:{...process.env,LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH?`${process.env.LD_LIBRARY_PATH}:${t}`:t}});return n!==0?[]:i.split(`
`).map(o=>o.trim()).filter(o=>o.endsWith("not found")&&o.includes("=>")).map(o=>o.split("=>")[0].trim().toLowerCase())}async function V2(r,e){let t=Cn.default.dirname(r),i=e.join(":");process.env.LD_LIBRARY_PATH&&(i=`${process.env.LD_LIBRARY_PATH}:${i}`);let{stdout:n,code:s}=await Is.spawnAsync("ldd",[r],{cwd:t,env:{...process.env,LD_LIBRARY_PATH:i}});return s!==0?[]:n.split(`
`).map(c=>c.trim()).filter(c=>c.endsWith("not found")&&c.includes("=>")).map(c=>c.split("=>")[0].trim())}async function G2(r){if(!r.length)return[];let{stdout:e,code:t,error:i}=await Is.spawnAsync("/sbin/ldconfig",["-p"],{});if(t!==0||i)return[];let n=s=>e.toLowerCase().includes(s.toLowerCase());return r.filter(s=>!n(s))}var K2={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libbrotlidec.so.1":"libbrotli1","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libepoxy.so.0":"libepoxy0","libevent-2.1.so.6":"libevent-2.1-6","libevdev.so.2":"libevdev2","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"gstreamer1.0-plugins-base","libgstaudio-1.0.so.0":"gstreamer1.0-plugins-base","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"gstreamer1.0-plugins-bad","libgstfft-1.0.so.0":"gstreamer1.0-plugins-base","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"gstreamer1.0-plugins-base","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"gstreamer1.0-plugins-base","libgstvideo-1.0.so.0":"gstreamer1.0-plugins-base","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicudata.so.60":"libicu60","libicui18n.so.60":"libicu60","libicuuc.so.60":"libicu60","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libvpx.so.5":"libvpx5","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6"},J2={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libevdev.so.2":"libevdev2","libepoxy.so.0":"libepoxy0","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"gstreamer1.0-plugins-base","libgstaudio-1.0.so.0":"gstreamer1.0-plugins-base","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"gstreamer1.0-plugins-bad","libgstfft-1.0.so.0":"gstreamer1.0-plugins-base","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"gstreamer1.0-plugins-base","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"gstreamer1.0-plugins-base","libgstvideo-1.0.so.0":"gstreamer1.0-plugins-base","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicui18n.so.66":"libicu66","libicuuc.so.66":"libicu66","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libsoup-2.4.so.1":"libsoup2.4-1","libvpx.so.6":"libvpx6","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6","libxshmfence.so.1":"libxshmfence1"},X2={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libepoxy.so.0":"libepoxy0","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf-2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"libgstreamer-plugins-bad1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libjavascriptcoregtk-4.0.so.18":"libjavascriptcoregtk-4.0-18","libjpeg.so.8":"libjpeg-turbo8","liblcms2.so.2":"liblcms2-2","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libsoup-2.4.so.1":"libsoup2.4-1","libvpx.so.6":"libvpx6","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebkit2gtk-4.0.so.37":"libwebkit2gtk-4.0-37","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libwpe-1.0.so.1":"libwpe-1.0-1","libWPEBackend-fdo-1.0.so.1":"libwpebackend-fdo-1.0-1","libWPEWebKit-1.0.so.3":"libwpewebkit-1.0-3","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxshmfence.so.1":"libxshmfence1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6"},Y2={"libx264.so":"gstreamer1.0-libav"}});var KS=w((Z8,GS)=>{var Q2=ko(),Z2=function(){},eB=function(r){return r.setHeader&&typeof r.abort=="function"},tB=function(r){return r.stdio&&Array.isArray(r.stdio)&&r.stdio.length===3},VS=function(r,e,t){if(typeof e=="function")return VS(r,null,e);e||(e={}),t=Q2(t||Z2);var i=r._writableState,n=r._readableState,s=e.readable||e.readable!==!1&&r.readable,o=e.writable||e.writable!==!1&&r.writable,c=!1,l=function(){r.writable||u()},u=function(){o=!1,s||t.call(r)},d=function(){s=!1,o||t.call(r)},h=function(g){t.call(r,g?new Error("exited with error code: "+g):null)},p=function(g){t.call(r,g)},f=function(){process.nextTick(_)},_=function(){if(!c){if(s&&!(n&&n.ended&&!n.destroyed))return t.call(r,new Error("premature close"));if(o&&!(i&&i.ended&&!i.destroyed))return t.call(r,new Error("premature close"))}},m=function(){r.req.on("finish",u)};return eB(r)?(r.on("complete",u),r.on("abort",f),r.req?m():r.on("request",m)):o&&!i&&(r.on("end",l),r.on("close",l)),tB(r)&&r.on("exit",h),r.on("end",d),r.on("finish",u),e.error!==!1&&r.on("error",p),r.on("close",f),function(){c=!0,r.removeListener("complete",u),r.removeListener("abort",f),r.removeListener("request",m),r.req&&r.req.removeListener("finish",u),r.removeListener("end",l),r.removeListener("close",l),r.removeListener("finish",u),r.removeListener("exit",h),r.removeListener("end",d),r.removeListener("error",p),r.removeListener("close",f)}};GS.exports=VS});var YS=w((e7,XS)=>{var rB=ko(),iB=KS(),gm=require("fs"),Ea=function(){},nB=/^v?\.0/.test(process.version),Eu=function(r){return typeof r=="function"},sB=function(r){return!nB||!gm?!1:(r instanceof(gm.ReadStream||Ea)||r instanceof(gm.WriteStream||Ea))&&Eu(r.close)},oB=function(r){return r.setHeader&&Eu(r.abort)},aB=function(r,e,t,i){i=rB(i);var n=!1;r.on("close",function(){n=!0}),iB(r,{readable:e,writable:t},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,sB(r))return r.close(Ea);if(oB(r))return r.abort();if(Eu(r.destroy))return r.destroy();i(o||new Error("stream was destroyed"))}}},JS=function(r){r()},cB=function(r,e){return r.pipe(e)},lB=function(){var r=Array.prototype.slice.call(arguments),e=Eu(r[r.length-1]||Ea)&&r.pop()||Ea;if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new Error("pump requires two streams per minimum");var t,i=r.map(function(n,s){var o=s<r.length-1,c=s>0;return aB(n,o,c,function(l){t||(t=l),l&&i.forEach(JS),!o&&(i.forEach(JS),e(t))})});return r.reduce(cB)};XS.exports=lB});var ZS=w((t7,QS)=>{"use strict";var{PassThrough:uB}=require("stream");QS.exports=r=>{r={...r};let{array:e}=r,{encoding:t}=r,i=t==="buffer",n=!1;e?n=!(t||i):t=t||"utf8",i&&(t=null);let s=new uB({objectMode:n});t&&s.setEncoding(t);let o=0,c=[];return s.on("data",l=>{c.push(l),n?o=c.length:o+=l.length}),s.getBufferedValue=()=>e?c:i?Buffer.concat(c,o):c.join(""),s.getBufferedLength=()=>o,s}});var eE=w((r7,Ds)=>{"use strict";var{constants:dB}=require("buffer"),hB=YS(),pB=ZS(),wm=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function Cu(r,e){if(!r)return Promise.reject(new Error("Expected a stream"));e={maxBuffer:1/0,...e};let{maxBuffer:t}=e,i;return await new Promise((n,s)=>{let o=c=>{c&&i.getBufferedLength()<=dB.MAX_LENGTH&&(c.bufferedData=i.getBufferedValue()),s(c)};i=hB(r,pB(e),c=>{if(c){o(c);return}n()}),i.on("data",()=>{i.getBufferedLength()>t&&o(new wm)})}),i.getBufferedValue()}Ds.exports=Cu;Ds.exports.default=Cu;Ds.exports.buffer=(r,e)=>Cu(r,{...e,encoding:"buffer"});Ds.exports.array=(r,e)=>Cu(r,{...e,array:!0});Ds.exports.MaxBufferError=wm});var nE=w((i7,iE)=>{iE.exports=ku;function ku(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}ku.prototype.go=function(r){this.pending<this.max?rE(this,r):this.waiting.push(r)};ku.prototype.wait=function(r){this.pending===0?r(this.error):this.listeners.push(r)};ku.prototype.hold=function(){return tE(this)};function tE(r){r.pending+=1;var e=!1;return t;function t(n){if(e)throw new Error("callback called twice");if(e=!0,r.error=r.error||n,r.pending-=1,r.waiting.length>0&&r.pending<r.max)rE(r,r.waiting.shift());else if(r.pending===0){var s=r.listeners;r.listeners=[],s.forEach(i)}}function i(n){n(r.error)}}function rE(r,e){e(tE(r))}});var oE=w(ka=>{var Ca=require("fs"),Pu=require("util"),vm=require("stream"),sE=vm.Readable,ym=vm.Writable,fB=vm.PassThrough,mB=nE(),Ou=require("events").EventEmitter;ka.createFromBuffer=_B;ka.createFromFd=gB;ka.BufferSlicer=Hr;ka.FdSlicer=Br;Pu.inherits(Br,Ou);function Br(r,e){e=e||{},Ou.call(this),this.fd=r,this.pend=new mB,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}Br.prototype.read=function(r,e,t,i,n){var s=this;s.pend.go(function(o){Ca.read(s.fd,r,e,t,i,function(c,l,u){o(),n(c,l,u)})})};Br.prototype.write=function(r,e,t,i,n){var s=this;s.pend.go(function(o){Ca.write(s.fd,r,e,t,i,function(c,l,u){o(),n(c,l,u)})})};Br.prototype.createReadStream=function(r){return new Tu(this,r)};Br.prototype.createWriteStream=function(r){return new Au(this,r)};Br.prototype.ref=function(){this.refCount+=1};Br.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.autoClose&&Ca.close(r.fd,e);function e(t){t?r.emit("error",t):r.emit("close")}};Pu.inherits(Tu,sE);function Tu(r,e){e=e||{},sE.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}Tu.prototype._read=function(r){var e=this;if(!e.destroyed){var t=Math.min(e._readableState.highWaterMark,r);if(e.endOffset!=null&&(t=Math.min(t,e.endOffset-e.pos)),t<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(i){if(e.destroyed)return i();var n=new Buffer(t);Ca.read(e.context.fd,n,0,t,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(n.slice(0,o))),i()})})}};Tu.prototype.destroy=function(r){this.destroyed||(r=r||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",r),this.context.unref())};Pu.inherits(Au,ym);function Au(r,e){e=e||{},ym.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}Au.prototype._write=function(r,e,t){var i=this;if(!i.destroyed){if(i.pos+r.length>i.endOffset){var n=new Error("maximum file length exceeded");n.code="ETOOBIG",i.destroy(),t(n);return}i.context.pend.go(function(s){if(i.destroyed)return s();Ca.write(i.context.fd,r,0,r.length,i.pos,function(o,c){o?(i.destroy(),s(),t(o)):(i.bytesWritten+=c,i.pos+=c,i.emit("progress"),s(),t())})})}};Au.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};Pu.inherits(Hr,Ou);function Hr(r,e){Ou.call(this),e=e||{},this.refCount=0,this.buffer=r,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}Hr.prototype.read=function(r,e,t,i,n){var s=i+t,o=s-this.buffer.length,c=o>0?o:t;this.buffer.copy(r,e,i,s),setImmediate(function(){n(null,c)})};Hr.prototype.write=function(r,e,t,i,n){r.copy(this.buffer,i,e,e+t),setImmediate(function(){n(null,t,r)})};Hr.prototype.createReadStream=function(r){r=r||{};var e=new fB(r);e.destroyed=!1,e.start=r.start||0,e.endOffset=r.end,e.pos=e.endOffset||this.buffer.length;for(var t=this.buffer.slice(e.start,e.pos),i=0;;){var n=i+this.maxChunkSize;if(n>=t.length){i<t.length&&e.write(t.slice(i,t.length));break}e.write(t.slice(i,n)),i=n}return e.end(),e.destroy=function(){e.destroyed=!0},e};Hr.prototype.createWriteStream=function(r){var e=this;r=r||{};var t=new ym(r);return t.start=r.start||0,t.endOffset=r.end==null?this.buffer.length:+r.end,t.bytesWritten=0,t.pos=t.start,t.destroyed=!1,t._write=function(i,n,s){if(!t.destroyed){var o=t.pos+i.length;if(o>t.endOffset){var c=new Error("maximum file length exceeded");c.code="ETOOBIG",t.destroyed=!0,s(c);return}i.copy(e.buffer,t.pos,0,i.length),t.bytesWritten+=i.length,t.pos=o,t.emit("progress"),s()}},t.destroy=function(){t.destroyed=!0},t};Hr.prototype.ref=function(){this.refCount+=1};Hr.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function _B(r,e){return new Hr(r,e)}function gB(r,e){return new Br(r,e)}});var pE=w(xr=>{var bm=require("fs"),wB=require("zlib"),aE=oE(),vB=mf(),Mu=require("util"),Iu=require("events").EventEmitter,cE=require("stream").Transform,xm=require("stream").PassThrough,yB=require("stream").Writable;xr.open=bB;xr.fromFd=lE;xr.fromBuffer=xB;xr.fromRandomAccessReader=Sm;xr.dosDateTimeToDate=dE;xr.validateFileName=hE;xr.ZipFile=Pi;xr.Entry=Pa;xr.RandomAccessReader=Oi;function bB(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=Ru),bm.open(r,"r",function(i,n){if(i)return t(i);lE(n,e,function(s,o){s&&bm.close(n,Ru),t(s,o)})})}function lE(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=Ru),bm.fstat(r,function(i,n){if(i)return t(i);var s=aE.createFromFd(r,{autoClose:!0});Sm(s,n.size,e,t)})}function xB(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var i=aE.createFromBuffer(r,{maxChunkSize:65536});Sm(i,r.length,e,t)}function Sm(r,e,t,i){typeof t=="function"&&(i=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!0),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0);var n=!!t.decodeStrings;if(t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),i==null&&(i=Ru),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");r.ref();var s=22,o=65535,c=Math.min(s+o,e),l=br(c),u=e-l.length;Rs(r,l,0,c,u,function(d){if(d)return i(d);for(var h=c-s;h>=0;h-=1)if(l.readUInt32LE(h)===101010256){var p=l.slice(h),f=p.readUInt16LE(4);if(f!==0)return i(new Error("multi-disk zip files are not supported: found disk number: "+f));var _=p.readUInt16LE(10),m=p.readUInt32LE(16),g=p.readUInt16LE(20),v=p.length-s;if(g!==v)return i(new Error("invalid comment length. expected: "+v+". found: "+g));var x=n?Du(p,22,p.length,!1):p.slice(22);if(!(_===65535||m===4294967295))return i(null,new Pi(r,m,e,_,x,t.autoClose,t.lazyEntries,n,t.validateEntrySizes,t.strictFileNames));var b=br(20),T=u+h-b.length;Rs(r,b,0,b.length,T,function(k){if(k)return i(k);if(b.readUInt32LE(0)!==117853008)return i(new Error("invalid zip64 end of central directory locator signature"));var F=Ns(b,8),y=br(56);Rs(r,y,0,y.length,F,function(C){return C?i(C):y.readUInt32LE(0)!==101075792?i(new Error("invalid zip64 end of central directory record signature")):(_=Ns(y,32),m=Ns(y,48),i(null,new Pi(r,m,e,_,x,t.autoClose,t.lazyEntries,n,t.validateEntrySizes,t.strictFileNames)))})});return}i(new Error("end of central directory record signature not found"))})}Mu.inherits(Pi,Iu);function Pi(r,e,t,i,n,s,o,c,l,u){var d=this;Iu.call(d),d.reader=r,d.reader.on("error",function(h){uE(d,h)}),d.reader.once("close",function(){d.emit("close")}),d.readEntryCursor=e,d.fileSize=t,d.entryCount=i,d.comment=n,d.entriesRead=0,d.autoClose=!!s,d.lazyEntries=!!o,d.decodeStrings=!!c,d.validateEntrySizes=!!l,d.strictFileNames=!!u,d.isOpen=!0,d.emittedError=!1,d.lazyEntries||d._readEntry()}Pi.prototype.close=function(){!this.isOpen||(this.isOpen=!1,this.reader.unref())};function sr(r,e){r.autoClose&&r.close(),uE(r,e)}function uE(r,e){r.emittedError||(r.emittedError=!0,r.emit("error",e))}Pi.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};Pi.prototype._readEntry=function(){var r=this;if(r.entryCount===r.entriesRead){setImmediate(function(){r.autoClose&&r.close(),!r.emittedError&&r.emit("end")});return}if(!r.emittedError){var e=br(46);Rs(r.reader,e,0,e.length,r.readEntryCursor,function(t){if(t)return sr(r,t);if(!r.emittedError){var i=new Pa,n=e.readUInt32LE(0);if(n!==33639248)return sr(r,new Error("invalid central directory file header signature: 0x"+n.toString(16)));if(i.versionMadeBy=e.readUInt16LE(4),i.versionNeededToExtract=e.readUInt16LE(6),i.generalPurposeBitFlag=e.readUInt16LE(8),i.compressionMethod=e.readUInt16LE(10),i.lastModFileTime=e.readUInt16LE(12),i.lastModFileDate=e.readUInt16LE(14),i.crc32=e.readUInt32LE(16),i.compressedSize=e.readUInt32LE(20),i.uncompressedSize=e.readUInt32LE(24),i.fileNameLength=e.readUInt16LE(28),i.extraFieldLength=e.readUInt16LE(30),i.fileCommentLength=e.readUInt16LE(32),i.internalFileAttributes=e.readUInt16LE(36),i.externalFileAttributes=e.readUInt32LE(38),i.relativeOffsetOfLocalHeader=e.readUInt32LE(42),i.generalPurposeBitFlag&64)return sr(r,new Error("strong encryption is not supported"));r.readEntryCursor+=46,e=br(i.fileNameLength+i.extraFieldLength+i.fileCommentLength),Rs(r.reader,e,0,e.length,r.readEntryCursor,function(s){if(s)return sr(r,s);if(!r.emittedError){var o=(i.generalPurposeBitFlag&2048)!=0;i.fileName=r.decodeStrings?Du(e,0,i.fileNameLength,o):e.slice(0,i.fileNameLength);var c=i.fileNameLength+i.extraFieldLength,l=e.slice(i.fileNameLength,c);i.extraFields=[];for(var u=0;u<l.length-3;){var d=l.readUInt16LE(u+0),h=l.readUInt16LE(u+2),p=u+4,f=p+h;if(f>l.length)return sr(r,new Error("extra field length exceeds extra field buffer size"));var _=br(h);l.copy(_,0,p,f),i.extraFields.push({id:d,data:_}),u=f}if(i.fileComment=r.decodeStrings?Du(e,c,c+i.fileCommentLength,o):e.slice(c,c+i.fileCommentLength),i.comment=i.fileComment,r.readEntryCursor+=e.length,r.entriesRead+=1,i.uncompressedSize===4294967295||i.compressedSize===4294967295||i.relativeOffsetOfLocalHeader===4294967295){for(var m=null,u=0;u<i.extraFields.length;u++){var g=i.extraFields[u];if(g.id===1){m=g.data;break}}if(m==null)return sr(r,new Error("expected zip64 extended information extra field"));var v=0;if(i.uncompressedSize===4294967295){if(v+8>m.length)return sr(r,new Error("zip64 extended information extra field does not include uncompressed size"));i.uncompressedSize=Ns(m,v),v+=8}if(i.compressedSize===4294967295){if(v+8>m.length)return sr(r,new Error("zip64 extended information extra field does not include compressed size"));i.compressedSize=Ns(m,v),v+=8}if(i.relativeOffsetOfLocalHeader===4294967295){if(v+8>m.length)return sr(r,new Error("zip64 extended information extra field does not include relative header offset"));i.relativeOffsetOfLocalHeader=Ns(m,v),v+=8}}if(r.decodeStrings)for(var u=0;u<i.extraFields.length;u++){var g=i.extraFields[u];if(g.id===28789){if(g.data.length<6||g.data.readUInt8(0)!==1)continue;var x=g.data.readUInt32LE(1);if(vB.unsigned(e.slice(0,i.fileNameLength))!==x)continue;i.fileName=Du(g.data,5,g.data.length,!0);break}}if(r.validateEntrySizes&&i.compressionMethod===0){var b=i.uncompressedSize;if(i.isEncrypted()&&(b+=12),i.compressedSize!==b){var T="compressed/uncompressed size mismatch for stored file: "+i.compressedSize+" != "+i.uncompressedSize;return sr(r,new Error(T))}}if(r.decodeStrings){r.strictFileNames||(i.fileName=i.fileName.replace(/\\/g,"/"));var k=hE(i.fileName,r.validateFileNameOptions);if(k!=null)return sr(r,new Error(k))}r.emit("entry",i),r.lazyEntries||r._readEntry()}})}})}};Pi.prototype.openReadStream=function(r,e,t){var i=this,n=0,s=r.compressedSize;if(t==null)t=e,e={};else{if(e.decrypt!=null){if(!r.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(r.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!r.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(r.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(r.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(n=e.start,n<0)throw new Error("options.start < 0");if(n>r.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>r.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<n)throw new Error("options.end < options.start")}}if(!i.isOpen)return t(new Error("closed"));if(r.isEncrypted()&&e.decrypt!==!1)return t(new Error("entry is encrypted, and options.decrypt !== false"));i.reader.ref();var o=br(30);Rs(i.reader,o,0,o.length,r.relativeOffsetOfLocalHeader,function(c){try{if(c)return t(c);var l=o.readUInt32LE(0);if(l!==67324752)return t(new Error("invalid local file header signature: 0x"+l.toString(16)));var u=o.readUInt16LE(26),d=o.readUInt16LE(28),h=r.relativeOffsetOfLocalHeader+o.length+u+d,p;if(r.compressionMethod===0)p=!1;else if(r.compressionMethod===8)p=e.decompress!=null?e.decompress:!0;else return t(new Error("unsupported compression method: "+r.compressionMethod));var f=h,_=f+r.compressedSize;if(r.compressedSize!==0&&_>i.fileSize)return t(new Error("file data overflows file bounds: "+f+" + "+r.compressedSize+" > "+i.fileSize));var m=i.reader.createReadStream({start:f+n,end:f+s}),g=m;if(p){var v=!1,x=wB.createInflateRaw();m.on("error",function(b){setImmediate(function(){v||x.emit("error",b)})}),m.pipe(x),i.validateEntrySizes?(g=new Oa(r.uncompressedSize),x.on("error",function(b){setImmediate(function(){v||g.emit("error",b)})}),x.pipe(g)):g=x,g.destroy=function(){v=!0,x!==g&&x.unpipe(g),m.unpipe(x),m.destroy()}}t(null,g)}finally{i.reader.unref()}})};function Pa(){}Pa.prototype.getLastModDate=function(){return dE(this.lastModFileDate,this.lastModFileTime)};Pa.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!=0};Pa.prototype.isCompressed=function(){return this.compressionMethod===8};function dE(r,e){var t=r&31,i=(r>>5&15)-1,n=(r>>9&127)+1980,s=0,o=(e&31)*2,c=e>>5&63,l=e>>11&31;return new Date(n,i,t,l,c,o,s)}function hE(r){return r.indexOf("\\")!==-1?"invalid characters in fileName: "+r:/^[a-zA-Z]:/.test(r)||/^\//.test(r)?"absolute path: "+r:r.split("/").indexOf("..")!==-1?"invalid relative path: "+r:null}function Rs(r,e,t,i,n,s){if(i===0)return setImmediate(function(){s(null,br(0))});r.read(e,t,i,n,function(o,c){if(o)return s(o);if(c<i)return s(new Error("unexpected EOF"));s()})}Mu.inherits(Oa,cE);function Oa(r){cE.call(this),this.actualByteCount=0,this.expectedByteCount=r}Oa.prototype._transform=function(r,e,t){if(this.actualByteCount+=r.length,this.actualByteCount>this.expectedByteCount){var i="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return t(new Error(i))}t(null,r)};Oa.prototype._flush=function(r){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return r(new Error(e))}r()};Mu.inherits(Oi,Iu);function Oi(){Iu.call(this),this.refCount=0}Oi.prototype.ref=function(){this.refCount+=1};Oi.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.close(e);function e(t){if(t)return r.emit("error",t);r.emit("close")}};Oi.prototype.createReadStream=function(r){var e=r.start,t=r.end;if(e===t){var i=new xm;return setImmediate(function(){i.end()}),i}var n=this._readStreamForRange(e,t),s=!1,o=new Fu(this);n.on("error",function(l){setImmediate(function(){s||o.emit("error",l)})}),o.destroy=function(){n.unpipe(o),o.unref(),n.destroy()};var c=new Oa(t-e);return o.on("error",function(l){setImmediate(function(){s||c.emit("error",l)})}),c.destroy=function(){s=!0,o.unpipe(c),o.destroy()},n.pipe(o).pipe(c)};Oi.prototype._readStreamForRange=function(r,e){throw new Error("not implemented")};Oi.prototype.read=function(r,e,t,i,n){var s=this.createReadStream({start:i,end:i+t}),o=new yB,c=0;o._write=function(l,u,d){l.copy(r,e+c,0,l.length),c+=l.length,d()},o.on("finish",n),s.on("error",function(l){n(l)}),s.pipe(o)};Oi.prototype.close=function(r){setImmediate(r)};Mu.inherits(Fu,xm);function Fu(r){xm.call(this),this.context=r,this.context.ref(),this.unreffedYet=!1}Fu.prototype._flush=function(r){this.unref(),r()};Fu.prototype.unref=function(r){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var SB="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function Du(r,e,t,i){if(i)return r.toString("utf8",e,t);for(var n="",s=e;s<t;s++)n+=SB[r[s]];return n}function Ns(r,e){var t=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return i*4294967296+t}var br;typeof Buffer.allocUnsafe=="function"?br=function(r){return Buffer.allocUnsafe(r)}:br=function(r){return new Buffer(r)};function Ru(r){if(r)throw r}});var _E=w((o7,mE)=>{var or=Fr()("extract-zip"),{createWriteStream:EB,promises:qs}=require("fs"),CB=eE(),kn=require("path"),{promisify:Em}=require("util"),kB=require("stream"),PB=pE(),OB=Em(PB.open),TB=Em(kB.pipeline),fE=class{constructor(e,t){this.zipPath=e,this.opts=t}async extract(){return or("opening",this.zipPath,"with opts",this.opts),this.zipfile=await OB(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise((e,t)=>{this.zipfile.on("error",i=>{this.canceled=!0,t(i)}),this.zipfile.readEntry(),this.zipfile.on("close",()=>{this.canceled||(or("zip extraction complete"),e())}),this.zipfile.on("entry",async i=>{if(this.canceled){or("skipping entry",i.fileName,{cancelled:this.canceled});return}if(or("zipfile entry",i.fileName),i.fileName.startsWith("__MACOSX/")){this.zipfile.readEntry();return}let n=kn.dirname(kn.join(this.opts.dir,i.fileName));try{await qs.mkdir(n,{recursive:!0});let s=await qs.realpath(n);if(kn.relative(this.opts.dir,s).split(kn.sep).includes(".."))throw new Error(`Out of bound path "${s}" found while processing file ${i.fileName}`);await this.extractEntry(i),or("finished processing",i.fileName),this.zipfile.readEntry()}catch(s){this.canceled=!0,this.zipfile.close(),t(s)}})})}async extractEntry(e){if(this.canceled){or("skipping entry extraction",e.fileName,{cancelled:this.canceled});return}this.opts.onEntry&&this.opts.onEntry(e,this.zipfile);let t=kn.join(this.opts.dir,e.fileName),i=e.externalFileAttributes>>16&65535,n=61440,s=16384,o=40960,c=(i&n)===o,l=(i&n)===s;!l&&e.fileName.endsWith("/")&&(l=!0);let u=e.versionMadeBy>>8;l||(l=u===0&&e.externalFileAttributes===16),or("extracting entry",{filename:e.fileName,isDir:l,isSymlink:c});let d=this.getExtractedMode(i,l)&511,h=l?t:kn.dirname(t),p={recursive:!0};if(l&&(p.mode=d),or("mkdir",{dir:h,...p}),await qs.mkdir(h,p),l)return;or("opening read stream",t);let f=await Em(this.zipfile.openReadStream.bind(this.zipfile))(e);if(c){let _=await CB(f);or("creating symlink",_,t),await qs.symlink(_,t)}else await TB(f,EB(t,{mode:d}))}getExtractedMode(e,t){let i=e;return i===0&&(t?(this.opts.defaultDirMode&&(i=parseInt(this.opts.defaultDirMode,10)),i||(i=493)):(this.opts.defaultFileMode&&(i=parseInt(this.opts.defaultFileMode,10)),i||(i=420))),i}};mE.exports=async function(r,e){if(or("creating target directory",e.dir),!kn.isAbsolute(e.dir))throw new Error("Target directory is expected to be absolute");return await qs.mkdir(e.dir,{recursive:!0}),e.dir=await qs.realpath(e.dir),new fE(r,e).extract()}});var vE=w((gE,wE)=>{/*!
 * node-progress
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */gE=wE.exports=Ls;function Ls(r,e){if(this.stream=e.stream||process.stderr,typeof e=="number"){var t=e;e={},e.total=t}else{if(e=e||{},typeof r!="string")throw new Error("format required");if(typeof e.total!="number")throw new Error("total required")}this.fmt=r,this.curr=e.curr||0,this.total=e.total,this.width=e.width||this.total,this.clear=e.clear,this.chars={complete:e.complete||"=",incomplete:e.incomplete||"-",head:e.head||e.complete||"="},this.renderThrottle=e.renderThrottle!==0?e.renderThrottle||16:0,this.lastRender=-1/0,this.callback=e.callback||function(){},this.tokens={},this.lastDraw=""}Ls.prototype.tick=function(r,e){if(r!==0&&(r=r||1),typeof r=="object"&&(e=r,r=1),e&&(this.tokens=e),this.curr==0&&(this.start=new Date),this.curr+=r,this.render(),this.curr>=this.total){this.render(void 0,!0),this.complete=!0,this.terminate(),this.callback(this);return}};Ls.prototype.render=function(r,e){if(e=e!==void 0?e:!1,r&&(this.tokens=r),!!this.stream.isTTY){var t=Date.now(),i=t-this.lastRender;if(!(!e&&i<this.renderThrottle)){this.lastRender=t;var n=this.curr/this.total;n=Math.min(Math.max(n,0),1);var s=Math.floor(n*100),o,c,l,u=new Date-this.start,d=s==100?0:u*(this.total/this.curr-1),h=this.curr/(u/1e3),p=this.fmt.replace(":current",this.curr).replace(":total",this.total).replace(":elapsed",isNaN(u)?"0.0":(u/1e3).toFixed(1)).replace(":eta",isNaN(d)||!isFinite(d)?"0.0":(d/1e3).toFixed(1)).replace(":percent",s.toFixed(0)+"%").replace(":rate",Math.round(h)),f=Math.max(0,this.stream.columns-p.replace(":bar","").length);f&&process.platform==="win32"&&(f=f-1);var _=Math.min(this.width,f);if(l=Math.round(_*n),c=Array(Math.max(0,l+1)).join(this.chars.complete),o=Array(Math.max(0,_-l+1)).join(this.chars.incomplete),l>0&&(c=c.slice(0,-1)+this.chars.head),p=p.replace(":bar",c+o),this.tokens)for(var m in this.tokens)p=p.replace(":"+m,this.tokens[m]);this.lastDraw!==p&&(this.stream.cursorTo(0),this.stream.write(p),this.stream.clearLine(1),this.lastDraw=p)}}};Ls.prototype.update=function(r,e){var t=Math.floor(r*this.total),i=t-this.curr;this.tick(i,e)};Ls.prototype.interrupt=function(r){this.stream.clearLine(),this.stream.cursorTo(0),this.stream.write(r),this.stream.write(`
`),this.stream.write(this.lastDraw)};Ls.prototype.terminate=function(){this.clear?this.stream.clearLine&&(this.stream.clearLine(),this.stream.cursorTo(0)):this.stream.write(`
`)}});var bE=w((a7,yE)=>{yE.exports=vE()});var EE=w(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.downloadBrowserWithProgressBar=DB;Nu.logPolitely=SE;var AB=Ta(_E()),xE=Ta(require("fs")),MB=Ta(require("os")),IB=Ta(require("path")),FB=Ta(bE()),Cm=H(),Gt=ze();function Ta(r){return r&&r.__esModule?r:{default:r}}async function DB(r,e,t,i,n){let s=`Playwright build of ${r}`;if(await(0,Cm.existsAsync)(e))return Gt.debugLogger.log("install",`browser ${r} is already downloaded.`),!1;let o,c=0;function l(h,p){if(!process.stderr.isTTY)return;o||(o=new FB.default(`Downloading ${s} - ${RB(p)} [:bar] :percent :etas `,{complete:"=",incomplete:" ",width:20,total:p}));let f=h-c;c=h,o.tick(f)}let u=i,d=IB.default.join(MB.default.tmpdir(),n);try{for(let h=1,p=3;h<=p;++h){Gt.debugLogger.log("install",`downloading ${s} - attempt #${h}`);let{error:f}=await(0,Cm.downloadFile)(u,d,{progressCallback:l,log:Gt.debugLogger.log.bind(Gt.debugLogger,"install")});if(!f){Gt.debugLogger.log("install",`SUCCESS downloading ${s}`);break}let _=typeof f=="object"&&typeof f.message=="string"?f.message:"";if(Gt.debugLogger.log("install",`attempt #${h} - ERROR: ${_}`),h<p&&(_.includes("ECONNRESET")||_.includes("ETIMEDOUT"))){let m=Math.random()*200+250*Math.pow(1.5,h);Gt.debugLogger.log("install",`sleeping ${m}ms before retry...`),await new Promise(g=>setTimeout(g,m))}else throw f}Gt.debugLogger.log("install","extracting archive"),Gt.debugLogger.log("install",`-- zip: ${d}`),Gt.debugLogger.log("install",`-- location: ${e}`),await(0,AB.default)(d,{dir:e}),Gt.debugLogger.log("install",`fixing permissions at ${t}`),await xE.default.promises.chmod(t,493)}catch(h){throw Gt.debugLogger.log("install",`FAILED installation ${s} with error: ${h}`),process.exitCode=1,h}finally{await(0,Cm.existsAsync)(d)&&await xE.default.promises.unlink(d)}return SE(`${s} downloaded to ${e}`),!0}function RB(r){let e=r/1024/1024;return`${Math.round(e*10)/10} Mb`}function SE(r){let e=process.env.npm_config_loglevel;["silent","error","warn"].indexOf(e||"")>-1||console.log(r)}});var CE=w((l7,NB)=>{NB.exports={comment:"Do not edit this file, use utils/roll_browser.js",browsers:[{name:"chromium",revision:"920619",installByDefault:!1},{name:"chromium-with-symbols",revision:"920619",installByDefault:!1},{name:"firefox",revision:"1295",installByDefault:!1},{name:"firefox-beta",revision:"1289",installByDefault:!1},{name:"webkit",revision:"1550",installByDefault:!1,revisionOverrides:{"mac10.14":"1446"}},{name:"ffmpeg",revision:"1005",installByDefault:!1}]}});var Lu=w(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.installDefaultBrowsersForNpmInstall=$B;Wr.registry=Wr.Registry=Wr.registryDirectory=void 0;var jr=Pm(require("os")),Oe=kE(require("path")),qB=Pm(require("util")),Ti=Pm(require("fs")),LB=kE(LS()),BB=Oc(),Ae=H(),qu=US(),km=EE();function kE(r){return r&&r.__esModule?r:{default:r}}function PE(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(PE=function(i){return i?t:e})(r)}function Pm(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=PE(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var OE=Oe.default.join(__dirname,"..",".."),TE=Oe.default.join(__dirname,"..","..","bin"),HB={chromium:{"ubuntu18.04":["chrome-linux","chrome"],"ubuntu20.04":["chrome-linux","chrome"],"mac10.13":["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],"mac10.14":["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],"mac10.15":["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],mac11:["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],"mac11-arm64":["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],win32:["chrome-win","chrome.exe"],win64:["chrome-win","chrome.exe"]},firefox:{"ubuntu18.04":["firefox","firefox"],"ubuntu20.04":["firefox","firefox"],"mac10.13":["firefox","Nightly.app","Contents","MacOS","firefox"],"mac10.14":["firefox","Nightly.app","Contents","MacOS","firefox"],"mac10.15":["firefox","Nightly.app","Contents","MacOS","firefox"],mac11:["firefox","Nightly.app","Contents","MacOS","firefox"],"mac11-arm64":["firefox","Nightly.app","Contents","MacOS","firefox"],win32:["firefox","firefox.exe"],win64:["firefox","firefox.exe"]},webkit:{"ubuntu18.04":["pw_run.sh"],"ubuntu20.04":["pw_run.sh"],"mac10.13":void 0,"mac10.14":["pw_run.sh"],"mac10.15":["pw_run.sh"],mac11:["pw_run.sh"],"mac11-arm64":["pw_run.sh"],win32:["Playwright.exe"],win64:["Playwright.exe"]},ffmpeg:{"ubuntu18.04":["ffmpeg-linux"],"ubuntu20.04":["ffmpeg-linux"],"mac10.13":["ffmpeg-mac"],"mac10.14":["ffmpeg-mac"],"mac10.15":["ffmpeg-mac"],mac11:["ffmpeg-mac"],"mac11-arm64":["ffmpeg-mac"],win32:["ffmpeg-win32.exe"],win64:["ffmpeg-win64.exe"]}},Bs={chromium:{"ubuntu18.04":"%s/builds/chromium/%s/chromium-linux.zip","ubuntu20.04":"%s/builds/chromium/%s/chromium-linux.zip","mac10.13":"%s/builds/chromium/%s/chromium-mac.zip","mac10.14":"%s/builds/chromium/%s/chromium-mac.zip","mac10.15":"%s/builds/chromium/%s/chromium-mac.zip",mac11:"%s/builds/chromium/%s/chromium-mac.zip","mac11-arm64":"%s/builds/chromium/%s/chromium-mac-arm64.zip",win32:"%s/builds/chromium/%s/chromium-win32.zip",win64:"%s/builds/chromium/%s/chromium-win64.zip"},"chromium-with-symbols":{"ubuntu18.04":"%s/builds/chromium/%s/chromium-with-symbols-linux.zip","ubuntu20.04":"%s/builds/chromium/%s/chromium-with-symbols-linux.zip","mac10.13":"%s/builds/chromium/%s/chromium-with-symbols-mac.zip","mac10.14":"%s/builds/chromium/%s/chromium-with-symbols-mac.zip","mac10.15":"%s/builds/chromium/%s/chromium-with-symbols-mac.zip",mac11:"%s/builds/chromium/%s/chromium-with-symbols-mac.zip","mac11-arm64":"%s/builds/chromium/%s/chromium-with-symbols-mac-arm64.zip",win32:"%s/builds/chromium/%s/chromium-with-symbols-win32.zip",win64:"%s/builds/chromium/%s/chromium-with-symbols-win64.zip"},firefox:{"ubuntu18.04":"%s/builds/firefox/%s/firefox-ubuntu-18.04.zip","ubuntu20.04":"%s/builds/firefox/%s/firefox-ubuntu-20.04.zip","mac10.13":"%s/builds/firefox/%s/firefox-mac-10.14.zip","mac10.14":"%s/builds/firefox/%s/firefox-mac-10.14.zip","mac10.15":"%s/builds/firefox/%s/firefox-mac-10.14.zip",mac11:"%s/builds/firefox/%s/firefox-mac-10.14.zip","mac11-arm64":"%s/builds/firefox/%s/firefox-mac-11.0-arm64.zip",win32:"%s/builds/firefox/%s/firefox-win32.zip",win64:"%s/builds/firefox/%s/firefox-win64.zip"},"firefox-beta":{"ubuntu18.04":"%s/builds/firefox-beta/%s/firefox-beta-ubuntu-18.04.zip","ubuntu20.04":"%s/builds/firefox-beta/%s/firefox-beta-ubuntu-20.04.zip","mac10.13":"%s/builds/firefox-beta/%s/firefox-beta-mac-10.14.zip","mac10.14":"%s/builds/firefox-beta/%s/firefox-beta-mac-10.14.zip","mac10.15":"%s/builds/firefox-beta/%s/firefox-beta-mac-10.14.zip",mac11:"%s/builds/firefox-beta/%s/firefox-beta-mac-10.14.zip","mac11-arm64":"%s/builds/firefox-beta/%s/firefox-beta-mac-11.0-arm64.zip",win32:"%s/builds/firefox-beta/%s/firefox-beta-win32.zip",win64:"%s/builds/firefox-beta/%s/firefox-beta-win64.zip"},webkit:{"ubuntu18.04":"%s/builds/webkit/%s/webkit-ubuntu-18.04.zip","ubuntu20.04":"%s/builds/webkit/%s/webkit-ubuntu-20.04.zip","mac10.13":void 0,"mac10.14":"%s/builds/deprecated-webkit-mac-10.14/%s/deprecated-webkit-mac-10.14.zip","mac10.15":"%s/builds/webkit/%s/webkit-mac-10.15.zip",mac11:"%s/builds/webkit/%s/webkit-mac-10.15.zip","mac11-arm64":"%s/builds/webkit/%s/webkit-mac-11.0-arm64.zip",win32:"%s/builds/webkit/%s/webkit-win64.zip",win64:"%s/builds/webkit/%s/webkit-win64.zip"},ffmpeg:{"ubuntu18.04":"%s/builds/ffmpeg/%s/ffmpeg-linux.zip","ubuntu20.04":"%s/builds/ffmpeg/%s/ffmpeg-linux.zip","mac10.13":"%s/builds/ffmpeg/%s/ffmpeg-mac.zip","mac10.14":"%s/builds/ffmpeg/%s/ffmpeg-mac.zip","mac10.15":"%s/builds/ffmpeg/%s/ffmpeg-mac.zip",mac11:"%s/builds/ffmpeg/%s/ffmpeg-mac.zip","mac11-arm64":"%s/builds/ffmpeg/%s/ffmpeg-mac.zip",win32:"%s/builds/ffmpeg/%s/ffmpeg-win32.zip",win64:"%s/builds/ffmpeg/%s/ffmpeg-win64.zip"}},Ai=(()=>{let r,e=(0,Ae.getFromENV)("PLAYWRIGHT_BROWSERS_PATH");if(e==="0")r=Oe.default.join(__dirname,"..","..",".local-browsers");else if(e)r=e;else{let t;if(process.platform==="linux")t=process.env.XDG_CACHE_HOME||Oe.default.join(jr.homedir(),".cache");else if(process.platform==="darwin")t=Oe.default.join(jr.homedir(),"Library","Caches");else if(process.platform==="win32")t=process.env.LOCALAPPDATA||Oe.default.join(jr.homedir(),"AppData","Local");else throw new Error("Unsupported platform: "+process.platform);r=Oe.default.join(t,"ms-playwright")}return Oe.default.isAbsolute(r)||(r=Oe.default.resolve((0,Ae.getFromENV)("INIT_CWD")||process.cwd(),r)),r})();Wr.registryDirectory=Ai;function jB(r){let e=Oe.default.basename(r);for(let t of ME)if(e.startsWith(t+"-"))return!0;return!1}function AE(r){return r.browsers.map(e=>{let t=e.name,i=(e.revisionOverrides||{})[Ae.hostPlatform],n=i||e.revision,s=i?`${t}_${Ae.hostPlatform}_special`:`${t}`;return{name:t,revision:n,installByDefault:!!e.installByDefault,dir:Oe.default.join(Ai,s.replace(/-/g,"_")+"-"+n)}})}var ME=["chromium","firefox","webkit","ffmpeg","firefox-beta","chromium-with-symbols"],Om=class{constructor(e){this._executables=void 0;let t=AE(e),i=(x,b)=>{let T=HB[b][Ae.hostPlatform];return T?Oe.default.join(x,...T):void 0},n=(x,b,T,k)=>{if(!b)throw new Error(`${x} is not supported on ${Ae.hostPlatform}`);let F=WB(k,`install${T?"":" "+x}`);if(!(0,Ae.canAccessFile)(b)){let y=["Looks like Playwright Test or Playwright was just installed or updated.",`Please run the following command to download new browser${T?"s":""}:`,"",`    ${F}`,"","<3 Playwright Team"].join(`
`);throw new Error(`Executable doesn't exist at ${b}
${(0,Ae.wrapInASCIIBox)(y,1)}`)}return b};this._executables=[];let s=t.find(x=>x.name==="chromium"),o=i(s.dir,"chromium");this._executables.push({type:"browser",name:"chromium",browserName:"chromium",directory:s.dir,executablePath:()=>o,executablePathOrDie:x=>n("chromium",o,s.installByDefault,x),installType:s.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("chromium",s.dir,["chrome-linux"],[],["chrome-win"]),_install:()=>this._downloadExecutable(s,o,Bs.chromium[Ae.hostPlatform],"PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST"),_dependencyGroup:"chromium"});let c=t.find(x=>x.name==="chromium-with-symbols"),l=i(c.dir,"chromium");this._executables.push({type:"tool",name:"chromium-with-symbols",browserName:"chromium",directory:c.dir,executablePath:()=>l,executablePathOrDie:x=>n("chromium-with-symbols",l,c.installByDefault,x),installType:c.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("chromium",c.dir,["chrome-linux"],[],["chrome-win"]),_install:()=>this._downloadExecutable(c,l,Bs["chromium-with-symbols"][Ae.hostPlatform],"PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST"),_dependencyGroup:"chromium"}),this._executables.push(this._createChromiumChannel("chrome",{linux:"/opt/google/chrome/chrome",darwin:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",win32:"\\Google\\Chrome\\Application\\chrome.exe"},()=>this._installChromiumChannel("chrome",{linux:"reinstall_chrome_stable_linux.sh",darwin:"reinstall_chrome_stable_mac.sh",win32:"reinstall_chrome_stable_win.ps1"}))),this._executables.push(this._createChromiumChannel("chrome-beta",{linux:"/opt/google/chrome-beta/chrome",darwin:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",win32:"\\Google\\Chrome Beta\\Application\\chrome.exe"},()=>this._installChromiumChannel("chrome-beta",{linux:"reinstall_chrome_beta_linux.sh",darwin:"reinstall_chrome_beta_mac.sh",win32:"reinstall_chrome_beta_win.ps1"}))),this._executables.push(this._createChromiumChannel("chrome-dev",{linux:"/opt/google/chrome-unstable/chrome",darwin:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",win32:"\\Google\\Chrome Dev\\Application\\chrome.exe"})),this._executables.push(this._createChromiumChannel("chrome-canary",{linux:"",darwin:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",win32:"\\Google\\Chrome SxS\\Application\\chrome.exe"})),this._executables.push(this._createChromiumChannel("msedge",{linux:"",darwin:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",win32:"\\Microsoft\\Edge\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge",{linux:"",darwin:"reinstall_msedge_stable_mac.sh",win32:"reinstall_msedge_stable_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-beta",{linux:"/opt/microsoft/msedge-beta/msedge",darwin:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",win32:"\\Microsoft\\Edge Beta\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge-beta",{darwin:"reinstall_msedge_beta_mac.sh",linux:"reinstall_msedge_beta_linux.sh",win32:"reinstall_msedge_beta_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-dev",{linux:"/opt/microsoft/msedge-dev/msedge",darwin:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",win32:"\\Microsoft\\Edge Dev\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge-dev",{darwin:"reinstall_msedge_dev_mac.sh",linux:"reinstall_msedge_dev_linux.sh",win32:"reinstall_msedge_dev_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-canary",{linux:"",darwin:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",win32:"\\Microsoft\\Edge SxS\\Application\\msedge.exe"}));let u=t.find(x=>x.name==="firefox"),d=i(u.dir,"firefox");this._executables.push({type:"browser",name:"firefox",browserName:"firefox",directory:u.dir,executablePath:()=>d,executablePathOrDie:x=>n("firefox",d,u.installByDefault,x),installType:u.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("firefox",u.dir,["firefox"],[],["firefox"]),_install:()=>this._downloadExecutable(u,d,Bs.firefox[Ae.hostPlatform],"PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST"),_dependencyGroup:"firefox"});let h=t.find(x=>x.name==="firefox-beta"),p=i(h.dir,"firefox");this._executables.push({type:"tool",name:"firefox-beta",browserName:"firefox",directory:h.dir,executablePath:()=>p,executablePathOrDie:x=>n("firefox-beta",p,h.installByDefault,x),installType:h.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("firefox",h.dir,["firefox"],[],["firefox"]),_install:()=>this._downloadExecutable(h,p,Bs["firefox-beta"][Ae.hostPlatform],"PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST"),_dependencyGroup:"firefox"});let f=t.find(x=>x.name==="webkit"),_=i(f.dir,"webkit"),m=[Oe.default.join("minibrowser-gtk"),Oe.default.join("minibrowser-gtk","bin"),Oe.default.join("minibrowser-gtk","lib"),Oe.default.join("minibrowser-wpe"),Oe.default.join("minibrowser-wpe","bin"),Oe.default.join("minibrowser-wpe","lib")];this._executables.push({type:"browser",name:"webkit",browserName:"webkit",directory:f.dir,executablePath:()=>_,executablePathOrDie:x=>n("webkit",_,f.installByDefault,x),installType:f.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>this._validateHostRequirements("webkit",f.dir,m,["libGLESv2.so.2","libx264.so"],[""]),_install:()=>this._downloadExecutable(f,_,Bs.webkit[Ae.hostPlatform],"PLAYWRIGHT_WEBKIT_DOWNLOAD_HOST"),_dependencyGroup:"webkit"});let g=t.find(x=>x.name==="ffmpeg"),v=i(g.dir,"ffmpeg");this._executables.push({type:"tool",name:"ffmpeg",browserName:void 0,directory:g.dir,executablePath:()=>v,executablePathOrDie:x=>n("ffmpeg",v,g.installByDefault,x),installType:g.installByDefault?"download-by-default":"download-on-demand",validateHostRequirements:()=>Promise.resolve(),_install:()=>this._downloadExecutable(g,v,Bs.ffmpeg[Ae.hostPlatform],"PLAYWRIGHT_FFMPEG_DOWNLOAD_HOST"),_dependencyGroup:"tools"})}_createChromiumChannel(e,t,i){let n=s=>{let o=t[process.platform];if(!o){if(s)throw new Error(`Chromium distribution '${e}' is not supported on ${process.platform}`);return}let c=process.platform==="win32"?[process.env.LOCALAPPDATA,process.env.PROGRAMFILES,process.env["PROGRAMFILES(X86)"]].filter(Boolean):[""];for(let d of c){let h=Oe.default.join(d,o);if((0,Ae.canAccessFile)(h))return h}if(!s)return;let l=c.length?` at ${Oe.default.join(c[0],o)}`:"",u=i?`
Run "npx playwright install ${e}"`:"";throw new Error(`Chromium distribution '${e}' is not found${l}${u}`)};return{type:"channel",name:e,browserName:"chromium",directory:void 0,executablePath:()=>n(!1),executablePathOrDie:s=>n(!0),installType:i?"install-script":"none",validateHostRequirements:()=>Promise.resolve(),_install:i}}executables(){return this._executables}findExecutable(e){return this._executables.find(t=>t.name===e)}_addRequirementsAndDedupe(e){let t=new Set;e||(e=this._executables.filter(i=>i.installType==="download-by-default"));for(let i of e)t.add(i),i.browserName==="chromium"&&t.add(this.findExecutable("ffmpeg"));return Array.from(t)}async _validateHostRequirements(e,t,i,n,s){if((0,Ae.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS")){process.stdout.write("Skipping host requirements validation logic because `PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS` env variable is set.\n");return}let o=await(0,BB.getUbuntuVersion)();if(e==="firefox"&&o==="16.04")throw new Error("Cannot launch Firefox on Ubuntu 16.04! Minimum required Ubuntu version for Firefox browser is 18.04");if(jr.platform()==="linux")return await(0,qu.validateDependenciesLinux)(i.map(c=>Oe.default.join(t,c)),n);if(jr.platform()==="win32"&&jr.arch()==="x64")return await(0,qu.validateDependenciesWindows)(s.map(c=>Oe.default.join(t,c)))}async installDeps(e){let t=this._addRequirementsAndDedupe(e),i=new Set;for(let n of t)n._dependencyGroup&&i.add(n._dependencyGroup);if(i.add("tools"),jr.platform()==="win32")return await(0,qu.installDependenciesWindows)(i);if(jr.platform()==="linux")return await(0,qu.installDependenciesLinux)(i)}async install(e){let t=this._addRequirementsAndDedupe(e);await Ti.promises.mkdir(Ai,{recursive:!0});let i=Oe.default.join(Ai,"__dirlock"),n=await LB.default.lock(Ai,{retries:{retries:10,factor:1.27579},onCompromised:o=>{throw new Error(`${o.message} Path: ${i}`)},lockfilePath:i}),s=Oe.default.join(Ai,".links");try{await Ti.promises.mkdir(s,{recursive:!0}),await Ti.promises.writeFile(Oe.default.join(s,(0,Ae.calculateSha1)(OE)),OE),await this._validateInstallationCache(s);for(let o of t)if(o._install)await o._install();else throw new Error(`ERROR: Playwright does not support installing ${o.name}`)}catch(o){if(o.code==="ELOCKED"){let c=process.platform==="win32"?"rm -R":"rm -rf";throw new Error(`
`+(0,Ae.wrapInASCIIBox)(["An active lockfile is found at:","",`  ${i}`,"","Either:","- wait a few minutes if other Playwright is installing browsers in parallel","- remove lock manually with:","",`    ${c} ${i}`,"","<3 Playwright Team"].join(`
`),1))}else throw o}finally{await n()}}async _downloadExecutable(e,t,i,n){if(!i||!t)throw new Error(`ERROR: Playwright does not support ${e.name} on ${Ae.hostPlatform}`);let s=n&&(0,Ae.getFromENV)(n)||(0,Ae.getFromENV)("PLAYWRIGHT_DOWNLOAD_HOST")||"https://playwright.azureedge.net",o=qB.format(i,s,e.revision),c=`${e.name} v${e.revision}`,l=`playwright-download-${e.name}-${Ae.hostPlatform}-${e.revision}.zip`;await(0,km.downloadBrowserWithProgressBar)(c,e.dir,t,o,l).catch(u=>{throw new Error(`Failed to download ${c}, caused by
${u.stack}`)}),await Ti.promises.writeFile(IE(e.dir),"")}async _installMSEdgeChannel(e,t){let i=[];if(process.platform!=="linux"){let n=JSON.parse(await(0,Ae.fetchData)("https://edgeupdates.microsoft.com/api/products")),s={msedge:"Stable","msedge-beta":"Beta","msedge-dev":"Dev"}[e],o=n.find(d=>d.Product===s),c={darwin:{platform:"MacOS",arch:"universal",artifact:"pkg"},win32:{platform:"Windows",arch:jr.arch()==="x64"?"x64":"x86",artifact:"msi"}}[process.platform],l=c?o.Releases.find(d=>d.Platform===c.platform&&d.Architecture===c.arch):null,u=l?l.Artifacts.find(d=>d.ArtifactName===c.artifact):null;if(u)i.push(u.Location);else throw new Error(`Cannot install ${e} on ${process.platform}`)}await this._installChromiumChannel(e,t,i)}async _installChromiumChannel(e,t,i=[]){let n=t[process.platform];if(!n)throw new Error(`Cannot install ${e} on ${process.platform}`);let s=n.endsWith(".ps1"),o=s?"powershell.exe":"bash",c=[...s?["-File"]:[],Oe.default.join(TE,n),...i],{code:l}=await(0,Ae.spawnAsync)(o,c,{cwd:TE,stdio:"inherit"});if(l!==0)throw new Error(`Failed to install ${e}`)}async _validateInstallationCache(e){let t=new Set;for(let i of await Ti.promises.readdir(e)){let n=Oe.default.join(e,i),s="";try{s=(await Ti.promises.readFile(n)).toString();let o=require(Oe.default.join(s,"browsers.json")),c=AE(o);for(let l of ME){let u=c.find(f=>f.name===l);if(!u)continue;let d=u.dir,h=parseInt(u.revision,10);(!(l==="chromium"&&h>=786218||l==="firefox"&&h>=1128||l==="webkit"&&h>=1307||l!=="firefox"&&l!=="chromium"&&l!=="webkit")||await(0,Ae.existsAsync)(IE(d)))&&t.add(d)}}catch(o){await Ti.promises.unlink(n).catch(c=>{})}}if(!(0,Ae.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_BROWSER_GC")){let i=(await Ti.promises.readdir(Ai)).map(s=>Oe.default.join(Ai,s));i=i.filter(s=>jB(s));let n=new Set(i);for(let s of t)n.delete(s);for(let s of n)(0,km.logPolitely)("Removing unused browser at "+s);await(0,Ae.removeFolders)([...n])}}};Wr.Registry=Om;function IE(r){return Oe.default.join(r,"INSTALLATION_COMPLETE")}function WB(r,e){switch(r){case"python":return`playwright ${e}`;case"java":return`mvn exec:java -e -Dexec.mainClass=com.microsoft.playwright.CLI -Dexec.args="${e}"`;case"csharp":return`playwright ${e}`;default:return`npx playwright ${e}`}}async function $B(){if((0,Ae.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD"))return(0,km.logPolitely)("Skipping browsers download because `PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD` env variable is set"),!1;await FE.install()}var FE=new Om(CE());Wr.registry=FE});var BE=w(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.CRPage=void 0;var DE=Mm(Zo()),RE=kt(),We=dt(),zB=Mm(Dt()),Tm=Ss(),NE=Ql(),UB=Dx(),Hs=bt(),Aa=vn(),VB=Mm(tu()),GB=r3(require("path")),Am=jx(),KB=Wx(),JB=Vx(),XB=Xx(),YB=Ws(),QB=It(),js=H(),ZB=nS(),e3=oS(),t3=Lu();function r3(r){return r&&r.__esModule?r:{default:r}}function qE(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(qE=function(i){return i?t:e})(r)}function Mm(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=qE(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Bu="__playwright_utility_world__",LE=class{static mainFrameSession(e){return e._delegate._mainFrameSession}constructor(e,t,i,n,s,o){this._mainFrameSession=void 0,this._sessions=new Map,this._page=void 0,this.rawMouse=void 0,this.rawKeyboard=void 0,this.rawTouchscreen=void 0,this._targetId=void 0,this._opener=void 0,this._pdf=void 0,this._coverage=void 0,this._browserContext=void 0,this._pagePromise=void 0,this._initializedPage=null,this._isBackgroundPage=void 0,this._nextWindowOpenPopupFeatures=[],this._targetId=t,this._opener=n,this._isBackgroundPage=o;let c=new e3.DragManager(this);if(this.rawKeyboard=new Am.RawKeyboardImpl(e,i._browser._isMac,c),this.rawMouse=new Am.RawMouseImpl(this,e,c),this.rawTouchscreen=new Am.RawTouchscreenImpl(e),this._pdf=new XB.CRPDF(e),this._coverage=new JB.CRCoverage(e),this._browserContext=i,this._page=new Hs.Page(this,i),this._mainFrameSession=new Hu(this,e,t,null),this._sessions.set(t,this._mainFrameSession),e.once(Tm.CRSessionEvents.Disconnected,()=>this._page._didDisconnect()),n&&!i._options.noDefaultViewport){let l=n._nextWindowOpenPopupFeatures.shift()||[],u=RE.helper.getViewportSizeFromWindowFeatures(l);u&&(this._page._state.emulatedSize={viewport:u,screen:u})}this._pagePromise=this._mainFrameSession._initialize(s).then(async l=>(await this._page.initOpener(this._opener),l)).catch(async l=>{throw await this._page.initOpener(this._opener),l}).then(()=>(this._initializedPage=this._page,this._reportAsNew(),this._page)).catch(l=>(this._reportAsNew(l),l))}_reportAsNew(e){this._isBackgroundPage?e||this._browserContext.emit(YB.CRBrowserContext.CREvents.BackgroundPage,this._page):this._page.reportAsNew(e)}async _forAllFrameSessions(e){let t=Array.from(this._sessions.values());await Promise.all(t.map(i=>i._isMainFrame()?e(i):e(i).catch(n=>{if(!(n.message&&(n.message.includes("Target closed.")||n.message.includes("Session closed."))))throw n})))}_sessionForFrame(e){for(;!this._sessions.has(e._id);){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");e=t}return this._sessions.get(e._id)}_sessionForHandle(e){let t=e._context.frame;return this._sessionForFrame(t)}willBeginDownload(){this._mainFrameSession._willBeginDownload()}async pageOrError(){return this._pagePromise}didClose(){for(let e of this._sessions.values())e.dispose();this._page._didClose()}async navigateFrame(e,t,i){return this._sessionForFrame(e)._navigate(e,t,i)}async exposeBinding(e){await this._forAllFrameSessions(t=>t._initBinding(e)),await Promise.all(this._page.frames().map(t=>t.evaluateExpression(e.source,!1,{}).catch(i=>{})))}async updateExtraHTTPHeaders(){await this._forAllFrameSessions(e=>e._updateExtraHTTPHeaders(!1))}async updateGeolocation(){await this._forAllFrameSessions(e=>e._updateGeolocation(!1))}async updateOffline(){await this._forAllFrameSessions(e=>e._updateOffline(!1))}async updateHttpCredentials(){await this._forAllFrameSessions(e=>e._updateHttpCredentials(!1))}async setEmulatedSize(e){(0,js.assert)(this._page._state.emulatedSize===e),await this._mainFrameSession._updateViewport()}async bringToFront(){await this._mainFrameSession._client.send("Page.bringToFront")}async updateEmulateMedia(){await this._forAllFrameSessions(e=>e._updateEmulateMedia(!1))}async updateRequestInterception(){await this._forAllFrameSessions(e=>e._updateRequestInterception())}async setFileChooserIntercepted(e){await this._forAllFrameSessions(t=>t._setFileChooserIntercepted(e))}async reload(){await this._mainFrameSession._client.send("Page.reload")}async _go(e){let t=await this._mainFrameSession._client.send("Page.getNavigationHistory"),i=t.entries[t.currentIndex+e];return i?(await this._mainFrameSession._client.send("Page.navigateToHistoryEntry",{entryId:i.id}),!0):!1}goBack(){return this._go(-1)}goForward(){return this._go(1)}async evaluateOnNewDocument(e,t="main"){await this._forAllFrameSessions(i=>i._evaluateOnNewDocument(e,t))}async closePage(e){e?await this._mainFrameSession._client.send("Page.close"):await this._browserContext._browser._closePage(this)}canScreenshotOutsideViewport(){return!1}async setBackgroundColor(e){await this._mainFrameSession._client.send("Emulation.setDefaultBackgroundColorOverride",{color:e})}async takeScreenshot(e,t,i,n,s){let{visualViewport:o}=await this._mainFrameSession._client.send("Page.getLayoutMetrics");i||(i={x:o.pageX+n.x,y:o.pageY+n.y,...RE.helper.enclosingIntSize({width:n.width/o.scale,height:n.height/o.scale})});let c={...i,scale:n?o.scale:1};e.throwIfAborted();let l=await this._mainFrameSession._client.send("Page.captureScreenshot",{format:t,quality:s,clip:c});return Buffer.from(l.data,"base64")}async resetViewport(){await this._mainFrameSession._client.send("Emulation.setDeviceMetricsOverride",{mobile:!1,width:0,height:0,deviceScaleFactor:0})}async getContentFrame(e){return this._sessionForHandle(e)._getContentFrame(e)}async getOwnerFrame(e){return this._sessionForHandle(e)._getOwnerFrame(e)}isElementHandle(e){return e.subtype==="node"}async getBoundingBox(e){return this._sessionForHandle(e)._getBoundingBox(e)}async scrollRectIntoViewIfNeeded(e,t){return this._sessionForHandle(e)._scrollRectIntoViewIfNeeded(e,t)}async setScreencastOptions(e){e?await this._mainFrameSession._startScreencast(this,{format:"jpeg",quality:e.quality,maxWidth:e.width,maxHeight:e.height}):await this._mainFrameSession._stopScreencast(this)}rafCountForStablePosition(){return 1}async getContentQuads(e){return this._sessionForHandle(e)._getContentQuads(e)}async setInputFiles(e,t){await e.evaluateInUtility(([i,n,s])=>i.setInputFiles(n,s),t)}async adoptElementHandle(e,t){return this._sessionForHandle(e)._adoptElementHandle(e,t)}async getAccessibilityTree(e){return(0,KB.getAccessibilityTree)(this._mainFrameSession._client,e)}async inputActionEpilogue(){await this._mainFrameSession._client.send("Page.enable").catch(e=>{})}async pdf(e){return this._pdf.generate(e)}coverage(){return this._coverage}async getFrameElement(e){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");let i=this._sessionForFrame(t),{backendNodeId:n}=await i._client.send("DOM.getFrameOwner",{frameId:e._id}).catch(s=>{throw s instanceof Error&&s.message.includes("Frame with the given id was not found.")&&(0,QB.rewriteErrorMessage)(s,"Frame has been detached."),s});if(t=e.parentFrame(),!t)throw new Error("Frame has been detached.");return i._adoptBackendNodeId(n,await t._mainContext())}};ju.CRPage=LE;var Hu=class{constructor(e,t,i,n){this._client=void 0,this._crPage=void 0,this._page=void 0,this._networkManager=void 0,this._contextIdToContext=new Map,this._eventListeners=[],this._targetId=void 0,this._firstNonInitialNavigationCommittedPromise=void 0,this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=s=>{},this._windowId=void 0,this._swappedIn=!1,this._videoRecorder=null,this._screencastId=null,this._screencastClients=new Set,this._client=t,this._crPage=e,this._page=e._page,this._targetId=i,this._networkManager=new UB.CRNetworkManager(t,this._page,n?n._networkManager:null),this._firstNonInitialNavigationCommittedPromise=new Promise((s,o)=>{this._firstNonInitialNavigationCommittedFulfill=s,this._firstNonInitialNavigationCommittedReject=o}),t.once(Tm.CRSessionEvents.Disconnected,()=>{this._firstNonInitialNavigationCommittedReject(new Error("Page closed"))})}_isMainFrame(){return this._targetId===this._crPage._targetId}_addRendererListeners(){this._eventListeners.push(We.eventsHelper.addEventListener(this._client,"Log.entryAdded",e=>this._onLogEntryAdded(e)),We.eventsHelper.addEventListener(this._client,"Page.fileChooserOpened",e=>this._onFileChooserOpened(e)),We.eventsHelper.addEventListener(this._client,"Page.frameAttached",e=>this._onFrameAttached(e.frameId,e.parentFrameId)),We.eventsHelper.addEventListener(this._client,"Page.frameDetached",e=>this._onFrameDetached(e.frameId,e.reason)),We.eventsHelper.addEventListener(this._client,"Page.frameNavigated",e=>this._onFrameNavigated(e.frame,!1)),We.eventsHelper.addEventListener(this._client,"Page.frameRequestedNavigation",e=>this._onFrameRequestedNavigation(e)),We.eventsHelper.addEventListener(this._client,"Page.frameStoppedLoading",e=>this._onFrameStoppedLoading(e.frameId)),We.eventsHelper.addEventListener(this._client,"Page.javascriptDialogOpening",e=>this._onDialog(e)),We.eventsHelper.addEventListener(this._client,"Page.navigatedWithinDocument",e=>this._onFrameNavigatedWithinDocument(e.frameId,e.url)),We.eventsHelper.addEventListener(this._client,"Runtime.bindingCalled",e=>this._onBindingCalled(e)),We.eventsHelper.addEventListener(this._client,"Runtime.consoleAPICalled",e=>this._onConsoleAPI(e)),We.eventsHelper.addEventListener(this._client,"Runtime.exceptionThrown",e=>this._handleException(e.exceptionDetails)),We.eventsHelper.addEventListener(this._client,"Runtime.executionContextCreated",e=>this._onExecutionContextCreated(e.context)),We.eventsHelper.addEventListener(this._client,"Runtime.executionContextDestroyed",e=>this._onExecutionContextDestroyed(e.executionContextId)),We.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",e=>this._onExecutionContextsCleared()),We.eventsHelper.addEventListener(this._client,"Target.attachedToTarget",e=>this._onAttachedToTarget(e)),We.eventsHelper.addEventListener(this._client,"Target.detachedFromTarget",e=>this._onDetachedFromTarget(e)))}_addBrowserListeners(){this._eventListeners.push(We.eventsHelper.addEventListener(this._client,"Inspector.targetCrashed",e=>this._onTargetCrashed()),We.eventsHelper.addEventListener(this._client,"Page.screencastFrame",e=>this._onScreencastFrame(e)),We.eventsHelper.addEventListener(this._client,"Page.windowOpen",e=>this._onWindowOpen(e)))}async _initialize(e){if(e&&!this._crPage._browserContext._browser.isClank()&&!this._crPage._browserContext._options.noDefaultViewport){let{windowId:o}=await this._client.send("Browser.getWindowForTarget");this._windowId=o}let t;if(this._isMainFrame()&&this._crPage._browserContext._options.recordVideo&&e){let o=(0,js.createGuid)(),c=GB.default.join(this._crPage._browserContext._options.recordVideo.dir,o+".webm");t={...this._crPage._browserContext._options.recordVideo.size,outputFile:c},await this._crPage._browserContext._ensureVideosPath(),await this._createVideoRecorder(o,t),this._crPage.pageOrError().then(l=>{l instanceof Error&&this._stopVideoRecording().catch(()=>{})})}let i;this._isMainFrame()||this._addRendererListeners(),this._addBrowserListeners();let n=[this._client.send("Page.enable"),this._client.send("Page.getFrameTree").then(({frameTree:o})=>{this._isMainFrame()&&(this._handleFrameTree(o),this._addRendererListeners());let c=this._isMainFrame()?this._page.frames():[this._page._frameManager.frame(this._targetId)];for(let u of c){this._client._sendMayFail("Page.createIsolatedWorld",{frameId:u._id,grantUniveralAccess:!0,worldName:Bu});for(let d of this._crPage._browserContext._pageBindings.values())u.evaluateExpression(d.source,!1,void 0).catch(h=>{});for(let d of this._crPage._browserContext._evaluateOnNewDocumentSources)u.evaluateExpression(d,!1,void 0,"main").catch(h=>{})}this._isMainFrame()&&this._page.mainFrame().url()===":"?i.catch(u=>{}).then(()=>{this._eventListeners.push(We.eventsHelper.addEventListener(this._client,"Page.lifecycleEvent",u=>this._onLifecycleEvent(u)))}):(this._firstNonInitialNavigationCommittedFulfill(),this._eventListeners.push(We.eventsHelper.addEventListener(this._client,"Page.lifecycleEvent",u=>this._onLifecycleEvent(u))))}),this._client.send("Log.enable",{}),i=this._client.send("Page.setLifecycleEventsEnabled",{enabled:!0}),this._client.send("Runtime.enable",{}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:"",worldName:Bu}),this._networkManager.initialize(),this._client.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0})];this._isMainFrame()&&n.push(this._client.send("Emulation.setFocusEmulationEnabled",{enabled:!0}));let s=this._crPage._browserContext._options;s.bypassCSP&&n.push(this._client.send("Page.setBypassCSP",{enabled:!0})),s.ignoreHTTPSErrors&&n.push(this._client.send("Security.setIgnoreCertificateErrors",{ignore:!0})),this._isMainFrame()&&n.push(this._updateViewport()),s.hasTouch&&n.push(this._client.send("Emulation.setTouchEmulationEnabled",{enabled:!0})),s.javaScriptEnabled===!1&&n.push(this._client.send("Emulation.setScriptExecutionDisabled",{value:!0})),(s.userAgent||s.locale)&&n.push(this._client.send("Emulation.setUserAgentOverride",{userAgent:s.userAgent||"",acceptLanguage:s.locale})),s.locale&&n.push(i3(this._client,s.locale)),s.timezoneId&&n.push(n3(this._client,s.timezoneId)),n.push(this._updateGeolocation(!0)),n.push(this._updateExtraHTTPHeaders(!0)),n.push(this._updateRequestInterception()),n.push(this._updateOffline(!0)),n.push(this._updateHttpCredentials(!0)),n.push(this._updateEmulateMedia(!0));for(let o of this._crPage._page.allBindings())n.push(this._initBinding(o));for(let o of this._crPage._browserContext._evaluateOnNewDocumentSources)n.push(this._evaluateOnNewDocument(o,"main"));for(let o of this._crPage._page._evaluateOnNewDocumentSources)n.push(this._evaluateOnNewDocument(o,"main"));t&&n.push(this._startVideoRecording(t)),n.push(this._client.send("Runtime.runIfWaitingForDebugger")),n.push(this._firstNonInitialNavigationCommittedPromise),await Promise.all(n)}dispose(){We.eventsHelper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._crPage._sessions.delete(this._targetId)}async _navigate(e,t,i){let n=await this._client.send("Page.navigate",{url:t,referrer:i,frameId:e._id});if(n.errorText)throw new Error(`${n.errorText} at ${t}`);return{newDocumentId:n.loaderId}}_onLifecycleEvent(e){this._eventBelongsToStaleFrame(e.frameId)||(e.name==="load"?this._page._frameManager.frameLifecycleEvent(e.frameId,"load"):e.name==="DOMContentLoaded"&&this._page._frameManager.frameLifecycleEvent(e.frameId,"domcontentloaded"))}_onFrameStoppedLoading(e){this._eventBelongsToStaleFrame(e)||this._page._frameManager.frameStoppedLoading(e)}_handleFrameTree(e){if(this._onFrameAttached(e.frame.id,e.frame.parentId||null),this._onFrameNavigated(e.frame,!0),!!e.childFrames)for(let t of e.childFrames)this._handleFrameTree(t)}_eventBelongsToStaleFrame(e){let t=this._page._frameManager.frame(e);if(!t)return!0;let i=this._crPage._sessionForFrame(t);return i&&i!==this&&!i._swappedIn}_onFrameAttached(e,t){let i=this._crPage._sessions.get(e);if(i&&e!==this._targetId){i._swappedIn=!0;let n=this._page._frameManager.frame(e);n&&this._page._frameManager.removeChildFramesRecursively(n);return}t&&!this._page._frameManager.frame(t)||this._page._frameManager.frameAttached(e,t)}_onFrameNavigated(e,t){this._eventBelongsToStaleFrame(e.id)||(this._page._frameManager.frameCommittedNewDocumentNavigation(e.id,e.url+(e.urlFragment||""),e.name||"",e.loaderId,t),t||this._firstNonInitialNavigationCommittedFulfill())}_onFrameRequestedNavigation(e){this._eventBelongsToStaleFrame(e.frameId)||e.disposition==="currentTab"&&this._page._frameManager.frameRequestedNavigation(e.frameId)}_onFrameNavigatedWithinDocument(e,t){this._eventBelongsToStaleFrame(e)||this._page._frameManager.frameCommittedSameDocumentNavigation(e,t)}_onFrameDetached(e,t){if(!this._crPage._sessions.has(e)){if(t==="swap"){let i=this._page._frameManager.frame(e);i&&this._page._frameManager.removeChildFramesRecursively(i);return}this._page._frameManager.frameDetached(e)}}_onExecutionContextCreated(e){let t=e.auxData?this._page._frameManager.frame(e.auxData.frameId):null;if(!t||this._eventBelongsToStaleFrame(t._id))return;let i=new NE.CRExecutionContext(this._client,e),n=null;e.auxData&&!!e.auxData.isDefault?n="main":e.name===Bu&&(n="utility");let s=new DE.FrameExecutionContext(i,t,n);n&&t._contextCreated(n,s),this._contextIdToContext.set(e.id,s)}_onExecutionContextDestroyed(e){let t=this._contextIdToContext.get(e);!t||(this._contextIdToContext.delete(e),t.frame._contextDestroyed(t))}_onExecutionContextsCleared(){for(let e of Array.from(this._contextIdToContext.keys()))this._onExecutionContextDestroyed(e)}_onAttachedToTarget(e){let t=Tm.CRConnection.fromSession(this._client).session(e.sessionId);if(e.targetInfo.type==="iframe"){let s=e.targetInfo.targetId,o=this._page._frameManager.frame(s);if(!o)return;this._page._frameManager.removeChildFramesRecursively(o);let c=new Hu(this._crPage,t,s,this);this._crPage._sessions.set(s,c),c._initialize(!1).catch(l=>l);return}if(e.targetInfo.type!=="worker"){t._sendMayFail("Runtime.runIfWaitingForDebugger").then(()=>{this._client._sendMayFail("Target.detachFromTarget",{sessionId:e.sessionId})});return}let i=e.targetInfo.url,n=new Hs.Worker(this._page,i);this._page._addWorker(e.sessionId,n),t.once("Runtime.executionContextCreated",async s=>{n._createExecutionContext(new NE.CRExecutionContext(t,s.context))}),t._sendMayFail("Runtime.enable"),t._sendMayFail("Network.enable"),t._sendMayFail("Runtime.runIfWaitingForDebugger"),t.on("Runtime.consoleAPICalled",s=>{let o=s.args.map(c=>n._existingExecutionContext.createHandle(c));this._page._addConsoleMessage(s.type,o,(0,Aa.toConsoleMessageLocation)(s.stackTrace))}),t.on("Runtime.exceptionThrown",s=>this._page.emit(Hs.Page.Events.PageError,(0,Aa.exceptionToError)(s.exceptionDetails))),this._networkManager.instrumentNetworkEvents(t,this._page._frameManager.frame(this._targetId))}_onDetachedFromTarget(e){this._page._removeWorker(e.sessionId);let t=this._crPage._sessions.get(e.targetId);if(!!t){if(t._swappedIn){t.dispose();return}this._client.send("Page.enable").catch(i=>null).then(()=>{t._swappedIn||this._page._frameManager.frameDetached(e.targetId),t.dispose()})}}_onWindowOpen(e){this._crPage._nextWindowOpenPopupFeatures.push(e.windowFeatures)}async _onConsoleAPI(e){if(e.executionContextId===0)return;let t=this._contextIdToContext.get(e.executionContextId),i=e.args.map(n=>t.createHandle(n));this._page._addConsoleMessage(e.type,i,(0,Aa.toConsoleMessageLocation)(e.stackTrace))}async _initBinding(e){await Promise.all([this._client.send("Runtime.addBinding",{name:e.name}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:e.source})])}async _onBindingCalled(e){let t=this._contextIdToContext.get(e.executionContextId);await this._crPage.pageOrError()instanceof Error||await this._page._onBindingCalled(e.payload,t)}_onDialog(e){!this._page._frameManager.frame(this._targetId)||this._page.emit(Hs.Page.Events.Dialog,new VB.Dialog(this._page,e.type,e.message,async(t,i)=>{await this._client.send("Page.handleJavaScriptDialog",{accept:t,promptText:i})},e.defaultPrompt))}_handleException(e){this._page.firePageError((0,Aa.exceptionToError)(e))}async _onTargetCrashed(){this._client._markAsCrashed(),this._page._didCrash()}_onLogEntryAdded(e){let{level:t,text:i,args:n,source:s,url:o,lineNumber:c}=e.entry;if(n&&n.map(l=>(0,Aa.releaseObject)(this._client,l.objectId)),s!=="worker"){let l={url:o||"",lineNumber:c||0,columnNumber:0};this._page._addConsoleMessage(t,[],l,i)}}async _onFileChooserOpened(e){let t=this._page._frameManager.frame(e.frameId);if(!t)return;let i;try{let n=await t._utilityContext();i=await this._adoptBackendNodeId(e.backendNodeId,n)}catch(n){return}await this._page._onFileChooserOpened(i)}_willBeginDownload(){this._crPage._initializedPage||this._firstNonInitialNavigationCommittedReject(new Error("Starting new page download"))}_onScreencastFrame(e){this._client.send("Page.screencastFrameAck",{sessionId:e.sessionId}).catch(()=>{});let t=Buffer.from(e.data,"base64");this._page.emit(Hs.Page.Events.ScreencastFrame,{buffer:t,timestamp:e.metadata.timestamp,width:e.metadata.deviceWidth,height:e.metadata.deviceHeight})}async _createVideoRecorder(e,t){(0,js.assert)(!this._screencastId);let i=t3.registry.findExecutable("ffmpeg").executablePathOrDie(this._page._browserContext._browser.options.sdkLanguage);this._videoRecorder=await ZB.VideoRecorder.launch(this._crPage._page,i,t),this._screencastId=e}async _startVideoRecording(e){let t=this._screencastId;(0,js.assert)(t),this._page.once(Hs.Page.Events.Close,()=>this._stopVideoRecording().catch(()=>{}));let i=new Promise(n=>this._client.once("Page.screencastFrame",n));await this._startScreencast(this._videoRecorder,{format:"jpeg",quality:90,maxWidth:e.width,maxHeight:e.height}),i.then(()=>{this._crPage._browserContext._browser._videoStarted(this._crPage._browserContext,t,e.outputFile,this._crPage.pageOrError())})}async _stopVideoRecording(){if(!this._screencastId)return;let e=this._screencastId;this._screencastId=null;let t=this._videoRecorder;this._videoRecorder=null,await this._stopScreencast(t),await t.stop().catch(()=>{});let i=this._crPage._browserContext._browser._takeVideo(e);i==null||i.reportFinished()}async _startScreencast(e,t={}){this._screencastClients.add(e),this._screencastClients.size===1&&await this._client.send("Page.startScreencast",t)}async _stopScreencast(e){this._screencastClients.delete(e),this._screencastClients.size||await this._client._sendMayFail("Page.stopScreencast")}async _updateExtraHTTPHeaders(e){let t=zB.mergeHeaders([this._crPage._browserContext._options.extraHTTPHeaders,this._page._state.extraHTTPHeaders]);(!e||t.length)&&await this._client.send("Network.setExtraHTTPHeaders",{headers:(0,js.headersArrayToObject)(t,!1)})}async _updateGeolocation(e){let t=this._crPage._browserContext._options.geolocation;(!e||t)&&await this._client.send("Emulation.setGeolocationOverride",t||{})}async _updateOffline(e){let t=!!this._crPage._browserContext._options.offline;(!e||t)&&await this._networkManager.setOffline(t)}async _updateHttpCredentials(e){let t=this._crPage._browserContext._options.httpCredentials||null;(!e||t)&&await this._networkManager.authenticate(t)}async _updateViewport(){if(this._crPage._browserContext._browser.isClank())return;(0,js.assert)(this._isMainFrame());let e=this._crPage._browserContext._options,t=this._page._state.emulatedSize;if(t===null)return;let i=t.viewport,n=t.screen,s=i.width>i.height,o=[this._client.send("Emulation.setDeviceMetricsOverride",{mobile:!!e.isMobile,width:i.width,height:i.height,screenWidth:n.width,screenHeight:n.height,deviceScaleFactor:e.deviceScaleFactor||1,screenOrientation:s?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"}})];if(this._windowId){let c={width:0,height:0};this._crPage._browserContext._browser.options.headful&&(c={width:24,height:88},process.platform==="win32"?c={width:16,height:88}:process.platform==="linux"?c={width:8,height:85}:process.platform==="darwin"&&(c={width:2,height:80})),o.push(this.setWindowBounds({width:i.width+c.width,height:i.height+c.height}))}await Promise.all(o)}async windowBounds(){let{bounds:e}=await this._client.send("Browser.getWindowBounds",{windowId:this._windowId});return e}async setWindowBounds(e){return await this._client.send("Browser.setWindowBounds",{windowId:this._windowId,bounds:e})}async _updateEmulateMedia(e){if(this._crPage._browserContext._browser.isClank())return;let t=this._page._state.colorScheme===null?"":this._page._state.colorScheme,i=this._page._state.reducedMotion===null?"":this._page._state.reducedMotion,n=this._page._state.forcedColors===null?"":this._page._state.forcedColors,s=[{name:"prefers-color-scheme",value:t},{name:"prefers-reduced-motion",value:i},{name:"forced-colors",value:n}];await this._client.send("Emulation.setEmulatedMedia",{media:this._page._state.mediaType||"",features:s})}async _updateRequestInterception(){await this._networkManager.setRequestInterception(this._page._needsRequestInterception())}async _setFileChooserIntercepted(e){await this._client.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(t=>{})}async _evaluateOnNewDocument(e,t){let i=t==="utility"?Bu:void 0;await this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:e,worldName:i})}async _getContentFrame(e){let t=await this._client.send("DOM.describeNode",{objectId:e._objectId});return!t||typeof t.node.frameId!="string"?null:this._page._frameManager.frame(t.node.frameId)}async _getOwnerFrame(e){let t=await e.evaluateHandle(s=>{let o=s;return o.documentElement&&o.documentElement.ownerDocument===o?o.documentElement:s.ownerDocument?s.ownerDocument.documentElement:null});if(!t||!t._objectId)return null;let i=await this._client.send("DOM.describeNode",{objectId:t._objectId}),n=i&&typeof i.node.frameId=="string"?i.node.frameId:null;return t.dispose(),n}async _getBoundingBox(e){let t=await this._client._sendMayFail("DOM.getBoxModel",{objectId:e._objectId});if(!t)return null;let i=t.model.border,n=Math.min(i[0],i[2],i[4],i[6]),s=Math.min(i[1],i[3],i[5],i[7]),o=Math.max(i[0],i[2],i[4],i[6])-n,c=Math.max(i[1],i[3],i[5],i[7])-s,l=await this._framePosition();return l?{x:n+l.x,y:s+l.y,width:o,height:c}:null}async _framePosition(){let e=this._page._frameManager.frame(this._targetId);return e?e===this._page.mainFrame()?{x:0,y:0}:await(await e.frameElement()).boundingBox():null}async _scrollRectIntoViewIfNeeded(e,t){return await this._client.send("DOM.scrollIntoViewIfNeeded",{objectId:e._objectId,rect:t}).then(()=>"done").catch(i=>{if(i instanceof Error&&i.message.includes("Node does not have a layout object"))return"error:notvisible";if(i instanceof Error&&i.message.includes("Node is detached from document"))return"error:notconnected";throw i})}async _getContentQuads(e){let t=await this._client._sendMayFail("DOM.getContentQuads",{objectId:e._objectId});if(!t)return null;let i=await this._framePosition();return i?t.quads.map(n=>[{x:n[0]+i.x,y:n[1]+i.y},{x:n[2]+i.x,y:n[3]+i.y},{x:n[4]+i.x,y:n[5]+i.y},{x:n[6]+i.x,y:n[7]+i.y}]):null}async _adoptElementHandle(e,t){let i=await this._client.send("DOM.describeNode",{objectId:e._objectId});return this._adoptBackendNodeId(i.node.backendNodeId,t)}async _adoptBackendNodeId(e,t){let i=await this._client._sendMayFail("DOM.resolveNode",{backendNodeId:e,executionContextId:t._delegate._contextId});if(!i||i.object.subtype==="null")throw new Error(DE.kUnableToAdoptErrorMessage);return t.createHandle(i.object).asElement()}};async function i3(r,e){try{await r.send("Emulation.setLocaleOverride",{locale:e})}catch(t){if(t.message.includes("Another locale override is already in effect"))return;throw t}}async function n3(r,e){try{await r.send("Emulation.setTimezoneOverride",{timezoneId:e})}catch(t){if(t.message.includes("Timezone override is already in effect"))return;throw t.message.includes("Invalid timezone")?new Error(`Invalid timezone ID: ${e}`):t}}});var Ws=w(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.CRBrowserContext=zs.CRBrowser=void 0;var s3=xs(),Wu=ht(),ar=H(),HE=l3(Dt()),$u=bt(),o3=ta(),jE=Ss(),WE=BE(),a3=vn(),c3=Ql();function $E(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return($E=function(i){return i?t:e})(r)}function l3(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=$E(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var zu=class extends s3.Browser{static async connect(e,t,i){let n=new jE.CRConnection(e,t.protocolLogger,t.browserLogsCollector),s=new zu(n,t);s._devtools=i;let o=n.rootSession;t.__testHookOnConnectToBrowser&&await t.__testHookOnConnectToBrowser();let c=await o.send("Browser.getVersion");return s._isMac=c.userAgent.includes("Macintosh"),s._version=c.product.substring(c.product.indexOf("/")+1),s._userAgent=c.userAgent,t.persistent?(s._defaultContext=new $s(s,void 0,t.persistent),await Promise.all([o.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}).then(async()=>{await o.send("Target.getTargetInfo")}),s._defaultContext._initialize()]),await s._waitForAllPagesToBeInitialized(),s):(await o.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),s)}constructor(e,t){super(t);this._connection=void 0,this._session=void 0,this._clientRootSessionPromise=null,this._contexts=new Map,this._crPages=new Map,this._backgroundPages=new Map,this._serviceWorkers=new Map,this._devtools=void 0,this._isMac=!1,this._version="",this._tracingRecording=!1,this._tracingPath="",this._tracingClient=void 0,this._userAgent="",this._connection=e,this._session=this._connection.rootSession,this._connection.on(jE.ConnectionEvents.Disconnected,()=>this._didClose()),this._session.on("Target.attachedToTarget",this._onAttachedToTarget.bind(this)),this._session.on("Target.detachedFromTarget",this._onDetachedFromTarget.bind(this)),this._session.on("Browser.downloadWillBegin",this._onDownloadWillBegin.bind(this)),this._session.on("Browser.downloadProgress",this._onDownloadProgress.bind(this))}async newContext(e){(0,Wu.validateBrowserContextOptions)(e,this.options);let{browserContextId:t}=await this._session.send("Target.createBrowserContext",{disposeOnDetach:!0,proxyServer:e.proxy?e.proxy.server:void 0,proxyBypassList:e.proxy?e.proxy.bypass:void 0}),i=new $s(this,t,e);return await i._initialize(),this._contexts.set(t,i),i}contexts(){return Array.from(this._contexts.values())}version(){return this._version}userAgent(){return this._userAgent}isClank(){return this.options.name==="clank"}async _waitForAllPagesToBeInitialized(){await Promise.all([...this._crPages.values()].map(e=>e.pageOrError()))}_onAttachedToTarget({targetInfo:e,sessionId:t,waitingForDebugger:i}){if(e.type==="browser")return;let n=this._connection.session(t);(0,ar.assert)(e.browserContextId,"targetInfo: "+JSON.stringify(e,null,2));let s=this._contexts.get(e.browserContextId)||null;if(s||(s=this._defaultContext),e.type==="other"&&e.url.startsWith("devtools://devtools")&&this._devtools){this._devtools.install(n);return}if(e.type==="other"||!s){i&&n._sendMayFail("Runtime.runIfWaitingForDebugger").then(()=>{this._session._sendMayFail("Target.detachFromTarget",{sessionId:t})});return}if((0,ar.assert)(!this._crPages.has(e.targetId),"Duplicate target "+e.targetId),(0,ar.assert)(!this._backgroundPages.has(e.targetId),"Duplicate target "+e.targetId),(0,ar.assert)(!this._serviceWorkers.has(e.targetId),"Duplicate target "+e.targetId),e.type==="background_page"){let o=new WE.CRPage(n,e.targetId,s,null,!1,!0);this._backgroundPages.set(e.targetId,o);return}if(e.type==="page"){let o=e.openerId&&this._crPages.get(e.openerId)||null,c=new WE.CRPage(n,e.targetId,s,o,!0,!1);this._crPages.set(e.targetId,c);return}if(e.type==="service_worker"){let o=new zE(s,n,e.url);this._serviceWorkers.set(e.targetId,o),s.emit($s.CREvents.ServiceWorker,o);return}(0,ar.assert)(!1,"Unknown target type: "+e.type)}_onDetachedFromTarget(e){let t=e.targetId,i=this._crPages.get(t);if(i){this._crPages.delete(t),i.didClose();return}let n=this._backgroundPages.get(t);if(n){this._backgroundPages.delete(t),n.didClose();return}let s=this._serviceWorkers.get(t);if(s){this._serviceWorkers.delete(t),s.emit($u.Worker.Events.Close);return}}_findOwningPage(e){for(let t of this._crPages.values())if(t._page._frameManager.frame(e))return t;return null}_onDownloadWillBegin(e){let t=this._findOwningPage(e.frameId);(0,ar.assert)(t,"Download started in unknown page: "+JSON.stringify(e)),t.willBeginDownload();let i=t._initializedPage;!i&&t._opener&&(i=t._opener._initializedPage),!!i&&this._downloadCreated(i,e.guid,e.url,e.suggestedFilename)}_onDownloadProgress(e){e.state==="completed"&&this._downloadFinished(e.guid,""),e.state==="canceled"&&this._downloadFinished(e.guid,"canceled")}async _closePage(e){await this._session.send("Target.closeTarget",{targetId:e._targetId})}async newBrowserCDPSession(){return await this._connection.createBrowserSession()}async startTracing(e,t={}){(0,ar.assert)(!this._tracingRecording,"Cannot start recording trace while already recording trace."),this._tracingClient=e?e._delegate._mainFrameSession._client:this._session;let i=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler","disabled-by-default-v8.cpu_profiler.hires"],{path:n=null,screenshots:s=!1,categories:o=i}=t;s&&o.push("disabled-by-default-devtools.screenshot"),this._tracingPath=n,this._tracingRecording=!0,await this._tracingClient.send("Tracing.start",{transferMode:"ReturnAsStream",categories:o.join(",")})}async stopTracing(){(0,ar.assert)(this._tracingClient,"Tracing was not started.");let[e]=await Promise.all([new Promise(i=>this._tracingClient.once("Tracing.tracingComplete",i)),this._tracingClient.send("Tracing.end")]),t=await(0,a3.readProtocolStream)(this._tracingClient,e.stream,this._tracingPath);return this._tracingRecording=!1,t}isConnected(){return!this._connection._closed}async _clientRootSession(){return this._clientRootSessionPromise||(this._clientRootSessionPromise=this._connection.createBrowserSession()),this._clientRootSessionPromise}};zs.CRBrowser=zu;var zE=class extends $u.Worker{constructor(e,t,i){super(e,i);this._browserContext=void 0,this._browserContext=e,t.once("Runtime.executionContextCreated",n=>{this._createExecutionContext(new c3.CRExecutionContext(t,n.context))}),t.send("Runtime.enable",{}).catch(n=>{}),t.send("Runtime.runIfWaitingForDebugger").catch(n=>{})}},$s=class extends Wu.BrowserContext{constructor(e,t,i){super(e,i,t);this._evaluateOnNewDocumentSources=void 0,this._evaluateOnNewDocumentSources=[],this._authenticateProxyViaCredentials()}async _initialize(){(0,ar.assert)(!Array.from(this._browser._crPages.values()).some(t=>t._browserContext===this));let e=[super._initialize()];this._browser.options.name!=="electron"&&this._browser.options.name!=="clank"&&e.push(this._browser._session.send("Browser.setDownloadBehavior",{behavior:this._options.acceptDownloads?"allowAndName":"deny",browserContextId:this._browserContextId,downloadPath:this._browser.options.downloadsPath,eventsEnabled:!0})),this._options.permissions&&e.push(this.grantPermissions(this._options.permissions)),await Promise.all(e)}pages(){let e=[];for(let t of this._browser._crPages.values())t._browserContext===this&&t._initializedPage&&e.push(t._initializedPage);return e}async newPageDelegate(){(0,Wu.assertBrowserContextIsNotOwned)(this);let e=this._browser.isClank()?new Set(this._browser._crPages.keys()):void 0,{targetId:t}=await this._browser._session.send("Target.createTarget",{url:"about:blank",browserContextId:this._browserContextId});if(e){let i=new Set(this._browser._crPages.keys());for(let n of e)i.delete(n);for(let n of i)this._browser._crPages.get(n)._opener&&i.delete(n);(0,ar.assert)(i.size===1),[t]=[...i]}return this._browser._crPages.get(t)}async _doCookies(e){let{cookies:t}=await this._browser._session.send("Storage.getCookies",{browserContextId:this._browserContextId});return HE.filterCookies(t.map(i=>{let n={sameSite:"Lax",...i};return delete n.size,delete n.priority,delete n.session,delete n.sameParty,delete n.sourceScheme,delete n.sourcePort,n}),e)}async addCookies(e){await this._browser._session.send("Storage.setCookies",{cookies:HE.rewriteCookies(e),browserContextId:this._browserContextId})}async clearCookies(){await this._browser._session.send("Storage.clearCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){let i=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["midi-sysex","midiSysex"]]),n=t.map(s=>{let o=i.get(s);if(!o)throw new Error("Unknown permission: "+s);return o});await this._browser._session.send("Browser.grantPermissions",{origin:e==="*"?void 0:e,browserContextId:this._browserContextId,permissions:n})}async _doClearPermissions(){await this._browser._session.send("Browser.resetPermissions",{browserContextId:this._browserContextId})}async setGeolocation(e){(0,Wu.verifyGeolocation)(e),this._options.geolocation=e;for(let t of this.pages())await t._delegate.updateGeolocation()}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;for(let t of this.pages())await t._delegate.updateExtraHTTPHeaders()}async setOffline(e){this._options.offline=e;for(let t of this.pages())await t._delegate.updateOffline()}async _doSetHTTPCredentials(e){this._options.httpCredentials=e;for(let t of this.pages())await t._delegate.updateHttpCredentials()}async _doAddInitScript(e){this._evaluateOnNewDocumentSources.push(e);for(let t of this.pages())await t._delegate.evaluateOnNewDocument(e)}async _doExposeBinding(e){for(let t of this.pages())await t._delegate.exposeBinding(e)}async _doUpdateRequestInterception(){for(let e of this.pages())await e._delegate.updateRequestInterception()}async _doClose(){(0,ar.assert)(this._browserContextId),await this._browser._session.send("Target.disposeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId);for(let[e,t]of this._browser._serviceWorkers)t._browserContext===this&&(t.emit($u.Worker.Events.Close),this._browser._serviceWorkers.delete(e))}_onClosePersistent(){for(let[e,t]of this._browser._backgroundPages.entries())t._browserContext===this&&t._initializedPage&&(t.didClose(),this._browser._backgroundPages.delete(e))}async _doCancelDownload(e){await this._browser._session.send("Browser.cancelDownload",{guid:e,browserContextId:this._browserContextId})}backgroundPages(){let e=[];for(let t of this._browser._backgroundPages.values())t._browserContext===this&&t._initializedPage&&e.push(t._initializedPage);return e}serviceWorkers(){return Array.from(this._browser._serviceWorkers.values()).filter(e=>e._browserContext===this)}async newCDPSession(e){let t=null;if(e instanceof $u.Page)t=e._delegate._targetId;else if(e instanceof o3.Frame){let s=e._page._delegate._sessions.get(e._id);if(!s)throw new Error("This frame does not have a separate CDP session, it is a part of the parent frame's session");t=s._targetId}else throw new Error("page: expected Page or Frame");let i=await this._browser._clientRootSession(),{sessionId:n}=await i.send("Target.attachToTarget",{targetId:t,flatten:!0});return this._browser._connection.session(n)}};zs.CRBrowserContext=$s;$s.CREvents={BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker"}});var VE=w(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.Transport=void 0;var u3=H(),UE=class{constructor(e,t,i,n="le"){this._pipeWrite=void 0,this._data=Buffer.from([]),this._waitForNextTask=(0,u3.makeWaitForNextTask)(),this._closed=!1,this._bytesLeft=0,this.onmessage=void 0,this.onclose=void 0,this._endian=void 0,this._closeableStream=void 0,this._pipeWrite=e,this._endian=n,this._closeableStream=i,t.on("data",s=>this._dispatch(s)),t.on("close",()=>{this._closed=!0,this.onclose&&this.onclose()}),this.onmessage=void 0,this.onclose=void 0}send(e){if(this._closed)throw new Error("Pipe has been closed");let t=Buffer.from(e,"utf-8"),i=Buffer.alloc(4);this._endian==="be"?i.writeUInt32BE(t.length,0):i.writeUInt32LE(t.length,0),this._pipeWrite.write(i),this._pipeWrite.write(t)}close(){this._closeableStream.close()}_dispatch(e){for(this._data=Buffer.concat([this._data,e]);!(!this._bytesLeft&&this._data.length<4||(this._bytesLeft||(this._bytesLeft=this._endian==="be"?this._data.readUInt32BE(0):this._data.readUInt32LE(0),this._data=this._data.slice(4)),!this._bytesLeft||this._data.length<this._bytesLeft));){let t=this._data.slice(0,this._bytesLeft);this._data=this._data.slice(this._bytesLeft),this._bytesLeft=0,this._waitForNextTask(()=>{this.onmessage&&this.onmessage(t.toString("utf-8"))})}}};Uu.Transport=UE});var Fm=w(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.AndroidDevice=Us.Android=void 0;var Kt=YE(Fr()),d3=require("events"),h3=YE(require("fs")),GE=v3(os()),KE=H(),p3=ht(),f3=vr(),m3=Ws(),_3=kt(),g3=VE(),w3=ze(),JE=$t(),Im=Qe();function XE(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(XE=function(i){return i?t:e})(r)}function v3(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=XE(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function YE(r){return r&&r.__esModule?r:{default:r}}var QE=class extends Im.SdkObject{constructor(e,t){super(t.rootSdkObject,"android");this._backend=void 0,this._devices=new Map,this._timeoutSettings=void 0,this._playwrightOptions=void 0,this._backend=e,this._playwrightOptions=t,this._timeoutSettings=new JE.TimeoutSettings}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async devices(){let e=(await this._backend.devices()).filter(i=>i.status==="device"),t=new Set;for(let i of e){if(t.add(i.serial),this._devices.has(i.serial))continue;let n=await $r.create(this,i);this._devices.set(i.serial,n)}for(let i of this._devices.keys())t.has(i)||this._devices.delete(i);return[...this._devices.values()]}_deviceClosed(e){this._devices.delete(e.serial)}};Us.Android=QE;var $r=class extends Im.SdkObject{constructor(e,t,i){super(e,"android-device");this._backend=void 0,this.model=void 0,this.serial=void 0,this._driverPromise=void 0,this._lastId=0,this._callbacks=new Map,this._pollingWebViews=void 0,this._timeoutSettings=void 0,this._webViews=new Map,this._browserConnections=new Set,this._android=void 0,this._isClosed=!1,this._android=e,this._backend=t,this.model=i,this.serial=t.serial,this._timeoutSettings=new JE.TimeoutSettings(e._timeoutSettings)}static async create(e,t){await t.init();let i=await t.runCommand("shell:getprop ro.product.model"),n=new $r(e,t,i.toString().trim());return await n._init(),n}async _init(){await this._refreshWebViews();let e=()=>{this._pollingWebViews=setTimeout(()=>this._refreshWebViews().then(e).catch(()=>{}),500)};e()}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async shell(e){let t=await this._backend.runCommand(`shell:${e}`);return await this._refreshWebViews(),t}async open(e){return await this._backend.open(`${e}`)}async screenshot(){return await this._backend.runCommand("shell:screencap -p")}async _driver(){return this._driverPromise||(this._driverPromise=this._installDriver()),this._driverPromise}async _installDriver(){(0,Kt.default)("pw:android")("Stopping the old driver"),await this.shell("am force-stop com.microsoft.playwright.androiddriver"),(0,Kt.default)("pw:android")("Uninstalling the old driver"),await this.shell("cmd package uninstall com.microsoft.playwright.androiddriver"),await this.shell("cmd package uninstall com.microsoft.playwright.androiddriver.test"),(0,Kt.default)("pw:android")("Installing the new driver");for(let i of["android-driver.apk","android-driver-target.apk"])await this.installApk(await h3.default.promises.readFile(require.resolve(`../../../bin/${i}`)));(0,Kt.default)("pw:android")("Starting the new driver"),this.shell("am instrument -w com.microsoft.playwright.androiddriver.test/androidx.test.runner.AndroidJUnitRunner").catch(i=>(0,Kt.default)("pw:android")(i));let e=await this._waitForLocalAbstract("playwright_android_driver_socket"),t=new g3.Transport(e,e,e,"be");return t.onmessage=i=>{let n=JSON.parse(i),{id:s,result:o,error:c}=n,l=this._callbacks.get(s);!l||(c?l.reject(new Error(c)):l.fulfill(o),this._callbacks.delete(s))},t}async _waitForLocalAbstract(e){let t;for((0,Kt.default)("pw:android")(`Polling the socket localabstract:${e}`);!t;)try{t=await this._backend.open(`localabstract:${e}`)}catch(i){await new Promise(n=>setTimeout(n,250))}return(0,Kt.default)("pw:android")(`Connected to localabstract:${e}`),t}async send(e,t={}){t.timeout=this._timeoutSettings.timeout(t);let i=await this._driver(),n=++this._lastId,s=new Promise((o,c)=>this._callbacks.set(n,{fulfill:o,reject:c}));return i.send(JSON.stringify({id:n,method:e,params:t})),s}async close(){this._isClosed=!0,this._pollingWebViews&&clearTimeout(this._pollingWebViews);for(let e of this._browserConnections)await e.close();this._driverPromise&&(await this._driver()).close(),await this._backend.close(),this._android._deviceClosed(this),this.emit($r.Events.Closed)}async launchBrowser(e="com.android.chrome",t){(0,Kt.default)("pw:android")("Force-stopping",e),await this._backend.runCommand(`shell:am force-stop ${e}`);let i="playwright-"+(0,KE.createGuid)(),n=`_ --disable-fre --no-default-browser-check --no-first-run --remote-debugging-socket-name=${i}`;return(0,Kt.default)("pw:android")("Starting",e,n),await this._backend.runCommand(`shell:echo "${n}" > /data/local/tmp/chrome-command-line`),await this._backend.runCommand(`shell:am start -n ${e}/com.google.android.apps.chrome.Main about:blank`),await this._connectToBrowser(i,t)}async connectToWebView(e){if(!this._webViews.get(e))throw new Error("WebView has been closed");return await this._connectToBrowser(`webview_devtools_remote_${e}`)}async _connectToBrowser(e,t={}){let i=await this._waitForLocalAbstract(e),n=new ZE(this,i);await n._init(),this._browserConnections.add(n);let s={...this._android._playwrightOptions,name:"clank",isChromium:!0,slowMo:0,persistent:{...t,noDefaultViewport:!0},artifactsDir:"",downloadsPath:"",tracesDir:"",browserProcess:new eC(n),proxy:t.proxy,protocolLogger:_3.helper.debugProtocolLogger(),browserLogsCollector:new w3.RecentLogsCollector};(0,p3.validateBrowserContextOptions)(t,s);let o=await m3.CRBrowser.connect(n,s),c=new f3.ProgressController((0,Im.internalCallMetadata)(),this),l=o._defaultContext;await c.run(async u=>{await l._loadDefaultContextAsIs(u)});{let d=l.pages()[0]._delegate;await d._mainFrameSession._client.send("Emulation.setDeviceMetricsOverride",{mobile:!1,width:0,height:0,deviceScaleFactor:0}),await d._mainFrameSession._client.send("Emulation.clearDeviceMetricsOverride",{})}return l}webViews(){return[...this._webViews.values()]}async installApk(e,t){let i=t&&t.args?t.args:["-r","-t","-S"];(0,Kt.default)("pw:android")("Opening install socket");let n=await this._backend.open(`shell:cmd package install ${i.join(" ")} ${e.length}`);(0,Kt.default)("pw:android")("Writing driver bytes: "+e.length),await n.write(e);let s=await new Promise(o=>n.on("data",o));(0,Kt.default)("pw:android")("Written driver bytes: "+s),n.close()}async push(e,t,i=420){let n=await this._backend.open("sync:"),s=async(d,h)=>{let p=Buffer.alloc(d.length+4);p.write(d,0),p.writeUInt32LE(h,d.length),await n.write(p)},o=async(d,h)=>{await s(d,h.length),await n.write(h)};await o("SEND",Buffer.from(`${t},${i}`));let c=65535;for(let d=0;d<e.length;d+=c)await o("DATA",e.slice(d,d+c));await s("DONE",Date.now()/1e3|0);let u=(await new Promise(d=>n.once("data",d))).slice(0,4).toString();if(u!=="OKAY")throw new Error("Could not push: "+u);n.close()}async _refreshWebViews(){let e=(await this._backend.runCommand("shell:cat /proc/net/unix | grep webview_devtools_remote")).toString().split(`
`);if(this._isClosed)return;let t=new Set;for(let i of e){let n=i.match(/[^@]+@webview_devtools_remote_(\d+)/);if(!n)continue;let s=+n[1];t.add(s)}for(let i of t){if(this._webViews.has(i))continue;let n=(await this._backend.runCommand(`shell:ps -A | grep ${i}`)).toString().split(`
`);if(this._isClosed)return;let s="";for(let c of n){let l=c.match(/[^\s]+\s+(\d+).*$/);!l||+l[1]!==i||(s=c.substring(c.lastIndexOf(" ")+1))}let o={pid:i,pkg:s};this._webViews.set(i,o),this.emit($r.Events.WebViewAdded,o)}for(let i of this._webViews.keys())t.has(i)||(this._webViews.delete(i),this.emit($r.Events.WebViewRemoved,i))}};Us.AndroidDevice=$r;$r.Events={WebViewAdded:"webViewAdded",WebViewRemoved:"webViewRemoved",Closed:"closed"};var ZE=class extends d3.EventEmitter{constructor(e,t){super();this.device=void 0,this._socket=void 0,this._receiver=void 0,this._waitForNextTask=(0,KE.makeWaitForNextTask)(),this.onmessage=void 0,this.onclose=void 0,this.setMaxListeners(0),this.device=e,this._socket=t,this._socket.on("close",()=>{this._waitForNextTask(()=>{this.onclose&&this.onclose()})}),this._receiver=new GE.Receiver,this._receiver.on("message",i=>{this._waitForNextTask(()=>{this.onmessage&&this.onmessage(JSON.parse(i))})})}async _init(){await this._socket.write(Buffer.from(`GET /devtools/browser HTTP/1.1\r
Upgrade: WebSocket\r
Connection: Upgrade\r
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\r
Sec-WebSocket-Version: 13\r
\r
`)),await new Promise(e=>this._socket.once("data",e)),this._socket.on("data",e=>this._receiver._write(e,"binary",()=>{}))}async send(e){await this._socket.write(y3(JSON.stringify(e)))}async close(){this._socket.close()}};function y3(r){return GE.Sender.frame(Buffer.from(r),{opcode:1,mask:!0,fin:!0,readOnly:!0})[0]}var eC=class{constructor(e){this._browser=void 0,this.onclose=void 0,this._browser=e}async kill(){}async close(){await this._browser.close()}}});var aC=w(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.AdbBackend=void 0;var Vs=iC(require("assert")),Ma=iC(Fr()),tC=S3(require("net")),b3=require("events"),x3=H();function rC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(rC=function(i){return i?t:e})(r)}function S3(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=rC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function iC(r){return r&&r.__esModule?r:{default:r}}var nC=class{async devices(){return(await oC("host:devices")).toString().trim().split(`
`).map(i=>{let[n,s]=i.trim().split("	");return new sC(n,s)})}};Gu.AdbBackend=nC;var sC=class{constructor(e,t){this.serial=void 0,this.status=void 0,this.serial=e,this.status=t}async init(){}async close(){}runCommand(e){return oC(e,this.serial)}async open(e){let t=await E3(e,this.serial);return t.becomeSocket(),t}};async function oC(r,e){(0,Ma.default)("pw:adb:runCommand")(r,e);let t=new Dm(r,tC.createConnection({port:5037}));if(e){await t.write(Vu(`host:transport:${e}`));let s=await t.read(4);(0,Vs.default)(s.toString()==="OKAY",s.toString())}await t.write(Vu(r));let i=await t.read(4);(0,Vs.default)(i.toString()==="OKAY",i.toString());let n;if(r.startsWith("shell:"))n=await t.readAll();else{let s=parseInt((await t.read(4)).toString(),16);n=await t.read(s)}return t.close(),n}async function E3(r,e){let t=new Dm(r,tC.createConnection({port:5037}));if(e){await t.write(Vu(`host:transport:${e}`));let n=await t.read(4);(0,Vs.default)(n.toString()==="OKAY",n.toString())}await t.write(Vu(r));let i=await t.read(4);return(0,Vs.default)(i.toString()==="OKAY",i.toString()),t}function Vu(r){let e=r.length.toString(16);return e="0".repeat(4-e.length)+e,Buffer.from(e+r)}var Dm=class extends b3.EventEmitter{constructor(e,t){super();this.guid=(0,x3.createGuid)(),this._socket=void 0,this._buffer=Buffer.from([]),this._isSocket=!1,this._notifyReader=void 0,this._connectPromise=void 0,this._isClosed=!1,this._command=void 0,this._command=e,this._socket=t,this._connectPromise=new Promise(i=>this._socket.on("connect",i)),this._socket.on("data",i=>{if((0,Ma.default)("pw:adb:data")(i.toString()),this._isSocket){this.emit("data",i);return}this._buffer=Buffer.concat([this._buffer,i]),this._notifyReader&&this._notifyReader()}),this._socket.on("close",()=>{this._isClosed=!0,this._notifyReader&&this._notifyReader(),this.close(),this.emit("close")}),this._socket.on("error",i=>this.emit("error",i))}async write(e){(0,Ma.default)("pw:adb:send")(e.toString().substring(0,100)+"..."),await this._connectPromise,await new Promise(t=>this._socket.write(e,t))}close(){this._isClosed||((0,Ma.default)("pw:adb")("Close "+this._command),this._socket.destroy())}async read(e){for(await this._connectPromise,(0,Vs.default)(!this._isSocket,"Can not read by length in socket mode");this._buffer.length<e;)await new Promise(i=>this._notifyReader=i);let t=this._buffer.slice(0,e);return this._buffer=this._buffer.slice(e),(0,Ma.default)("pw:adb:recv")(t.toString().substring(0,100)+"..."),t}async readAll(){for(;!this._isClosed;)await new Promise(e=>this._notifyReader=e);return this._buffer}becomeSocket(){(0,Vs.default)(!this._buffer.length),this._isSocket=!0}}});var Xu=w(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.WebSocketTransport=void 0;var C3=P3(os()),k3=H();function P3(r){return r&&r.__esModule?r:{default:r}}var Ku=class{static async connect(e,t,i){e.log(`<ws connecting> ${t}`);let n=new Ku(e,t,i),s=!1;return e.cleanupWhenAborted(async()=>{s||await n.closeAndWait().catch(o=>null)}),await new Promise((o,c)=>{n._ws.addEventListener("open",async()=>{e.log(`<ws connected> ${t}`),o(n)}),n._ws.addEventListener("error",l=>{e.log(`<ws connect error> ${t} ${l.message}`),c(new Error("WebSocket error: "+l.message)),n._ws.close()})}),s=!0,n}constructor(e,t,i){this._ws=void 0,this._progress=void 0,this.onmessage=void 0,this.onclose=void 0,this.wsEndpoint=void 0,this.wsEndpoint=t,this._ws=new C3.default(t,[],{perMessageDeflate:!1,maxPayload:256*1024*1024,handshakeTimeout:e.timeUntilDeadline(),headers:i}),this._progress=e;let n=(0,k3.makeWaitForNextTask)();this._ws.addEventListener("message",s=>{n(()=>{try{this.onmessage&&this.onmessage.call(null,JSON.parse(s.data))}catch(o){this._ws.close()}})}),this._ws.addEventListener("close",s=>{this._progress&&this._progress.log(`<ws disconnected> ${t}`),this.onclose&&this.onclose.call(null)}),this._ws.addEventListener("error",()=>{})}send(e){this._ws.send(JSON.stringify(e))}close(){this._progress&&this._progress.log(`<ws disconnecting> ${this._ws.url}`),this._ws.close()}async closeAndWait(){let e=new Promise(t=>this._ws.once("close",t));this.close(),await e}};Ju.WebSocketTransport=Ku});var uC=w(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.PipeTransport=void 0;var O3=H(),cC=ze(),lC=class{constructor(e,t){this._pipeWrite=void 0,this._pendingMessage="",this._waitForNextTask=(0,O3.makeWaitForNextTask)(),this._closed=!1,this.onmessage=void 0,this.onclose=void 0,this._pipeWrite=e,t.on("data",i=>this._dispatch(i)),t.on("close",()=>{this._closed=!0,this.onclose&&this.onclose.call(null)}),t.on("error",i=>cC.debugLogger.log("error",i)),e.on("error",i=>cC.debugLogger.log("error",i)),this.onmessage=void 0,this.onclose=void 0}send(e){if(this._closed)throw new Error("Pipe has been closed");this._pipeWrite.write(JSON.stringify(e)),this._pipeWrite.write("\0")}close(){throw new Error("unimplemented")}_dispatch(e){let t=e.indexOf("\0");if(t===-1){this._pendingMessage+=e.toString();return}let i=this._pendingMessage+e.toString(void 0,0,t);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(i))});let n=t+1;for(t=e.indexOf("\0",n);t!==-1;){let s=e.toString(void 0,n,t);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(s))}),n=t+1,t=e.indexOf("\0",n)}this._pendingMessage=e.toString(void 0,n)}};Yu.PipeTransport=lC});var td=w(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.BrowserType=void 0;var Qu=vC(require("fs")),dC=F3(require("os")),Zu=vC(require("path")),hC=ht(),pC=Lu(),T3=Xu(),fC=va(),A3=uC(),mC=vr(),Rm=$t(),_C=H(),gC=kt(),M3=ze(),I3=Qe();function wC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(wC=function(i){return i?t:e})(r)}function F3(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=wC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function vC(r){return r&&r.__esModule?r:{default:r}}var D3=Zu.default.join(dC.tmpdir(),"playwright-artifacts-"),yC=class extends I3.SdkObject{constructor(e,t){super(t.rootSdkObject,"browser-type");this._name=void 0,this._playwrightOptions=void 0,this.attribution.browserType=this,this._playwrightOptions=t,this._name=e}executablePath(){return pC.registry.findExecutable(this._name).executablePath()||""}name(){return this._name}async launch(e,t,i){t=this._validateLaunchOptions(t);let n=new mC.ProgressController(e,this);return n.setLogName("browser"),await n.run(o=>this._innerLaunchWithRetries(o,t,void 0,gC.helper.debugProtocolLogger(i)).catch(c=>{throw this._rewriteStartupError(c)}),Rm.TimeoutSettings.timeout(t))}async launchPersistentContext(e,t,i){i=this._validateLaunchOptions(i);let n=new mC.ProgressController(e,this),s=i;return n.setLogName("browser"),(await n.run(c=>this._innerLaunchWithRetries(c,i,s,gC.helper.debugProtocolLogger(),t).catch(l=>{throw this._rewriteStartupError(l)}),Rm.TimeoutSettings.timeout(i)))._defaultContext}async _innerLaunchWithRetries(e,t,i,n,s){try{return this._innerLaunch(e,t,i,n,s)}catch(o){if((typeof o=="object"&&typeof o.message=="string"?o.message:"").includes("Inconsistency detected by ld.so"))return e.log("<restarting browser due to hitting race condition in glibc>"),this._innerLaunch(e,t,i,n,s);throw o}}async _innerLaunch(e,t,i,n,s){t.proxy=t.proxy?(0,hC.normalizeProxySettings)(t.proxy):void 0;let o=new M3.RecentLogsCollector,{browserProcess:c,artifactsDir:l,transport:u}=await this._launchProcess(e,t,!!i,o,s);t.__testHookBeforeCreateBrowser&&await t.__testHookBeforeCreateBrowser();let d={...this._playwrightOptions,name:this._name,isChromium:this._name==="chromium",channel:t.channel,slowMo:t.slowMo,persistent:i,headful:!t.headless,artifactsDir:l,downloadsPath:t.downloadsPath||l,tracesDir:t.tracesDir||l,browserProcess:c,customExecutablePath:t.executablePath,proxy:t.proxy,protocolLogger:n,browserLogsCollector:o,wsEndpoint:t.useWebSocket?u.wsEndpoint:void 0};i&&(0,hC.validateBrowserContextOptions)(i,d),R3(t,d);let h=await this._connectToTransport(u,d);return i&&!t.ignoreAllDefaultArgs&&await h._defaultContext._loadDefaultContext(e),h}async _launchProcess(e,t,i,n,s){var o;let{ignoreDefaultArgs:c,ignoreAllDefaultArgs:l,args:u=[],executablePath:d=null,handleSIGINT:h=!0,handleSIGTERM:p=!0,handleSIGHUP:f=!0}=t,_=t.env?(0,fC.envArrayToObject)(t.env):process.env,m=[];t.downloadsPath&&await Qu.default.promises.mkdir(t.downloadsPath,{recursive:!0}),t.tracesDir&&await Qu.default.promises.mkdir(t.tracesDir,{recursive:!0});let g=await Qu.default.promises.mkdtemp(D3);m.push(g),s||(s=await Qu.default.promises.mkdtemp(Zu.default.join(dC.tmpdir(),`playwright_${this._name}dev_profile-`)),m.push(s));let v=[];l?v.push(...u):c?v.push(...this._defaultArgs(t,i,s).filter(M=>c.indexOf(M)===-1)):v.push(...this._defaultArgs(t,i,s));let x;if(d){if(!await(0,_C.existsAsync)(d))throw new Error(`Failed to launch ${this._name} because executable doesn't exist at ${d}`);x=d}else{let M=pC.registry.findExecutable(t.channel||this._name);if(!M||M.browserName!==this._name)throw new Error(`Unsupported ${this._name} channel "${t.channel}"`);x=M.executablePathOrDie(this._playwrightOptions.sdkLanguage),await M.validateHostRequirements()}let b,T=t.useWebSocket||((o=t.args)===null||o===void 0?void 0:o.some(M=>M.startsWith("--remote-debugging-port"))),k=T?new Promise(M=>b=M):void 0,F,y,{launchedProcess:C,gracefullyClose:A,kill:D}=await(0,fC.launchProcess)({command:x,args:v,env:this._amendEnvironment(_,s,x,v),handleSIGINT:h,handleSIGTERM:p,handleSIGHUP:f,log:M=>{if(b){let K=M.match(/DevTools listening on (.*)/);K&&b(K[1])}e.log(M),n.log(M)},stdio:"pipe",tempDirectories:m,attemptToGracefullyClose:async()=>{t.__testHookGracefullyClose&&await t.__testHookGracefullyClose(),this._attemptToGracefullyCloseBrowser(F)},onExit:(M,K)=>{y&&y.onclose&&y.onclose(M,K)}});async function W(M){let K;try{await Promise.race([A(),new Promise((N,L)=>K=setTimeout(L,M))])}catch(N){await D().catch(L=>{})}finally{clearTimeout(K)}}y={onclose:void 0,process:C,close:()=>W(t.__testHookBrowserCloseTimeout||Rm.DEFAULT_TIMEOUT),kill:D},e.cleanupWhenAborted(()=>W(e.timeUntilDeadline()));let V;if(T&&(V=await k),t.useWebSocket)F=await T3.WebSocketTransport.connect(e,V);else{let M=C.stdio;F=new A3.PipeTransport(M[3],M[4])}return{browserProcess:y,artifactsDir:g,transport:F}}async connectOverCDP(e,t,i,n){throw new Error("CDP connections are only supported by Chromium")}_validateLaunchOptions(e){let{devtools:t=!1}=e,{headless:i=!t,downloadsPath:n,proxy:s}=e;return(0,_C.debugMode)()&&(i=!1),n&&!Zu.default.isAbsolute(n)&&(n=Zu.default.join(process.cwd(),n)),this._playwrightOptions.socksProxyPort&&(s={server:`socks5://127.0.0.1:${this._playwrightOptions.socksProxyPort}`}),{...e,devtools:t,headless:i,downloadsPath:n,proxy:s}}};ed.BrowserType=yC;function R3(r,e){for(let[t,i]of Object.entries(r))t.startsWith("__testHook")&&(e[t]=i)}});var SC=w(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.CRDevTools=void 0;var bC=N3(require("fs"));function N3(r){return r&&r.__esModule?r:{default:r}}var Nm="__pw_devtools__",xC=class{constructor(e){this._preferencesPath=void 0,this._prefs=void 0,this._savePromise=void 0,this.__testHookOnBinding=void 0,this._preferencesPath=e,this._savePromise=Promise.resolve()}install(e){e.on("Runtime.bindingCalled",async t=>{if(t.name!==Nm)return;let i=JSON.parse(t.payload),n;if(this.__testHookOnBinding&&this.__testHookOnBinding(i),i.method==="getPreferences"){if(this._prefs===void 0)try{let s=await bC.default.promises.readFile(this._preferencesPath,"utf8");this._prefs=JSON.parse(s)}catch(s){this._prefs={}}n=this._prefs}else i.method==="setPreference"?(this._prefs[i.params[0]]=i.params[1],this._save()):i.method==="removePreference"?(delete this._prefs[i.params[0]],this._save()):i.method==="clearPreferences"&&(this._prefs={},this._save());e.send("Runtime.evaluate",{expression:`window.DevToolsAPI.embedderMessageAck(${i.id}, ${JSON.stringify(n)})`,contextId:t.executionContextId}).catch(s=>null)}),Promise.all([e.send("Runtime.enable"),e.send("Runtime.addBinding",{name:Nm}),e.send("Page.enable"),e.send("Page.addScriptToEvaluateOnNewDocument",{source:`
        (() => {
          const init = () => {
            // Lazy init happens when InspectorFrontendHost is initialized.
            // At this point DevToolsHost is ready to be used.
            const host = window.DevToolsHost;
            const old = host.sendMessageToEmbedder.bind(host);
            host.sendMessageToEmbedder = message => {
              if (['getPreferences', 'setPreference', 'removePreference', 'clearPreferences'].includes(JSON.parse(message).method))
                window.${Nm}(message);
              else
                old(message);
            };
          };
          let value;
          Object.defineProperty(window, 'InspectorFrontendHost', {
            configurable: true,
            enumerable: true,
            get() { return value; },
            set(v) { value = v; init(); },
          });
        })()
      `}),e.send("Runtime.runIfWaitingForDebugger")]).catch(t=>null)}_save(){this._savePromise=this._savePromise.then(async()=>{await bC.default.promises.writeFile(this._preferencesPath,JSON.stringify(this._prefs)).catch(e=>null)})}};rd.CRDevTools=xC});var OC=w(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.Chromium=void 0;var q3=Ia(require("fs")),EC=Ia(require("os")),CC=Ia(require("path")),kC=Ws(),L3=Ss(),B3=It(),H3=td(),j3=Xu(),W3=SC(),id=H(),$3=ze(),z3=vr(),U3=$t(),V3=kt(),G3=Ia(require("http")),K3=Ia(require("https")),J3=Lu();function Ia(r){return r&&r.__esModule?r:{default:r}}var X3=CC.default.join(EC.default.tmpdir(),"playwright-artifacts-"),PC=class extends H3.BrowserType{constructor(e){super("chromium",e);this._devtools=void 0,(0,id.debugMode)()&&(this._devtools=this._createDevTools())}async connectOverCDP(e,t,i,n){let s=new z3.ProgressController(e,this);s.setLogName("browser");let o=new $3.RecentLogsCollector;return s.run(async c=>{let l;i.headers&&(l=(0,id.headersArrayToObject)(i.headers,!1));let u=await q3.default.promises.mkdtemp(X3),d=await j3.WebSocketTransport.connect(c,await Q3(t),l),h={close:async()=>{await(0,id.removeFolders)([u]),await d.closeAndWait()},kill:async()=>{await(0,id.removeFolders)([u]),await d.closeAndWait()}},p={...this._playwrightOptions,slowMo:i.slowMo,name:"chromium",isChromium:!0,persistent:{noDefaultViewport:!0},browserProcess:h,protocolLogger:V3.helper.debugProtocolLogger(),browserLogsCollector:o,artifactsDir:u,downloadsPath:u,tracesDir:u};return await kC.CRBrowser.connect(d,p)},U3.TimeoutSettings.timeout({timeout:n}))}_createDevTools(){let e=J3.registry.findExecutable("chromium").directory;return e?new W3.CRDevTools(CC.default.join(e,"devtools-preferences.json")):void 0}async _connectToTransport(e,t){let i=this._devtools;return t.__testHookForDevTools&&(i=this._createDevTools(),await t.__testHookForDevTools(i)),kC.CRBrowser.connect(e,t,i)}_rewriteStartupError(e){return!e.message.includes("crbug.com/357670")&&!e.message.includes("No usable sandbox!")&&!e.message.includes("crbug.com/638180")?e:(0,B3.rewriteErrorMessage)(e,["Chromium sandboxing failed!","================================","To workaround sandboxing issues, do either of the following:","  - (preferred): Configure environment to support sandboxing: https://github.com/microsoft/playwright/blob/master/docs/troubleshooting.md","  - (alternative): Launch Chromium without sandbox using 'chromiumSandbox: false' option","================================",""].join(`
`))}_amendEnvironment(e,t,i,n){return e}_attemptToGracefullyCloseBrowser(e){let t={method:"Browser.close",id:L3.kBrowserCloseMessageId,params:{}};e.send(t)}_defaultArgs(e,t,i){let{args:n=[],proxy:s}=e;if(n.find(l=>l.startsWith("--user-data-dir")))throw new Error("Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --user-data-dir argument");if(n.find(l=>l.startsWith("--remote-debugging-pipe")))throw new Error("Playwright manages remote debugging connection itself.");if(n.find(l=>!l.startsWith("-")))throw new Error("Arguments can not specify page to be opened");let c=[...Y3];if(c.push(`--user-data-dir=${i}`),EC.default.platform()==="darwin"&&c.push("--enable-use-zoom-for-dsf=false"),e.useWebSocket?c.push("--remote-debugging-port=0"):c.push("--remote-debugging-pipe"),e.devtools&&c.push("--auto-open-devtools-for-tabs"),e.headless&&c.push("--headless","--hide-scrollbars","--mute-audio","--blink-settings=primaryHoverType=2,availableHoverTypes=2,primaryPointerType=4,availablePointerTypes=4"),e.chromiumSandbox!==!0&&c.push("--no-sandbox"),s){let l=new URL(s.server);l.protocol==="socks5:"&&!this._playwrightOptions.socksProxyPort&&c.push(`--host-resolver-rules="MAP * ~NOTFOUND , EXCLUDE ${l.hostname}"`),c.push(`--proxy-server=${s.server}`);let d=[];this._playwrightOptions.socksProxyPort&&d.push("<-loopback>"),s.bypass&&d.push(...s.bypass.split(",").map(h=>h.trim()).map(h=>h.startsWith(".")?"*"+h:h)),d.length>0&&c.push(`--proxy-bypass-list=${d.join(";")}`)}return c.push(...n),t?c.push("about:blank"):c.push("--no-startup-window"),c}};nd.Chromium=PC;var Y3=["--disable-background-networking","--enable-features=NetworkService,NetworkServiceInProcess","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-extensions-with-background-pages","--disable-default-apps","--disable-dev-shm-usage","--disable-extensions","--disable-features=ImprovedCookieControls,LazyFrameLoading,GlobalMediaControls,DestroyProfileOnBrowserClose,MediaRouter","--allow-pre-commit-input","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-popup-blocking","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-sync","--force-color-profile=srgb","--metrics-recording-only","--no-first-run","--enable-automation","--password-store=basic","--use-mock-keychain","--no-service-autorun"];async function Q3(r){if(r.startsWith("ws"))return r;let e=r.endsWith("/")?`${r}json/version/`:`${r}/json/version/`,t=r.startsWith("https")?K3.default:G3.default,i=await new Promise((n,s)=>{t.get(e,o=>{(o.statusCode<200||o.statusCode>=400)&&s(new Error(`Unexpected status ${o.statusCode} when connecting to ${e}.
This does not look like a DevTools server, try connecting via ws://.`));let c="";o.on("data",l=>c+=l),o.on("end",()=>n(c))}).on("error",s)});return JSON.parse(i).webSocketDebuggerUrl}});var Bm=w(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Electron=Gs.ElectronApplication=void 0;var Z3=Lm(require("fs")),TC=Lm(require("os")),e6=Lm(require("path")),t6=Ws(),r6=Ss(),i6=Ql(),AC=qC(ci()),MC=$t(),IC=Xu(),FC=va(),DC=ht(),RC=vr(),qm=kt(),Fa=dt(),n6=qC(require("readline")),s6=ze(),sd=Qe();function NC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(NC=function(i){return i?t:e})(r)}function qC(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=NC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function Lm(r){return r&&r.__esModule?r:{default:r}}var o6=e6.default.join(TC.default.tmpdir(),"playwright-artifacts-"),Pn=class extends sd.SdkObject{constructor(e,t,i){super(e,"electron-app");this._browserContext=void 0,this._nodeConnection=void 0,this._nodeSession=void 0,this._nodeExecutionContext=void 0,this._nodeElectronHandlePromise=void 0,this._lastWindowId=0,this._timeoutSettings=new MC.TimeoutSettings,this._browserContext=t._defaultContext,this._browserContext.on(DC.BrowserContext.Events.Close,()=>{Promise.resolve().then(()=>this.emit(Pn.Events.Close))});for(let n of this._browserContext.pages())this._onPage(n);this._browserContext.on(DC.BrowserContext.Events.Page,n=>this._onPage(n)),this._nodeConnection=i,this._nodeSession=i.rootSession,this._nodeElectronHandlePromise=new Promise(n=>{this._nodeSession.on("Runtime.executionContextCreated",async s=>{s.context.auxData&&s.context.auxData.isDefault&&(this._nodeExecutionContext=new AC.ExecutionContext(this,new i6.CRExecutionContext(this._nodeSession,s.context)),n(await AC.evaluate(this._nodeExecutionContext,!1,"process.mainModule.require('electron')")))})}),this._nodeSession.send("Runtime.enable",{}).catch(n=>{})}_onPage(e){let t=++this._lastWindowId;e._browserWindowId=t}context(){return this._browserContext}async close(){let t=new RC.ProgressController((0,sd.internalCallMetadata)(),this).run(n=>qm.helper.waitForEvent(n,this,Pn.Events.Close).promise,this._timeoutSettings.timeout({}));await(await this._nodeElectronHandlePromise).evaluate(({app:n})=>n.quit()),this._nodeConnection.close(),await t}async browserWindow(e){return await(await this._nodeElectronHandlePromise).evaluateHandle(({BrowserWindow:i},n)=>i.fromId(n),e._browserWindowId)}};Gs.ElectronApplication=Pn;Pn.Events={Close:"close"};var LC=class extends sd.SdkObject{constructor(e){super(e.rootSdkObject,"electron");this._playwrightOptions=void 0,this._playwrightOptions=e}async launch(e){let{args:t=[]}=e,i=new RC.ProgressController((0,sd.internalCallMetadata)(),this);return i.setLogName("browser"),i.run(async n=>{let s,o=["--inspect=0","--remote-debugging-port=0",...t];TC.default.platform()==="linux"&&process.geteuid&&process.geteuid()===0&&o.indexOf("--no-sandbox")===-1&&o.push("--no-sandbox");let c=await Z3.default.promises.mkdtemp(o6),l=new s6.RecentLogsCollector,{launchedProcess:u,gracefullyClose:d,kill:h}=await(0,FC.launchProcess)({command:e.executablePath||require("electron/index.js"),args:o,env:e.env?(0,FC.envArrayToObject)(e.env):process.env,log:T=>{n.log(T),l.log(T)},stdio:"pipe",cwd:e.cwd,tempDirectories:[c],attemptToGracefullyClose:()=>s.close(),handleSIGINT:!0,handleSIGTERM:!0,handleSIGHUP:!0,onExit:()=>{}}),p=await BC(n,u,/^Debugger listening on (ws:\/\/.*)$/),f=await IC.WebSocketTransport.connect(n,p[1]),_=new r6.CRConnection(f,qm.helper.debugProtocolLogger(),l),m=await BC(n,u,/^DevTools listening on (ws:\/\/.*)$/),g=await IC.WebSocketTransport.connect(n,m[1]),v={onclose:void 0,process:u,close:d,kill:h},x={...this._playwrightOptions,name:"electron",isChromium:!0,headful:!0,persistent:{noDefaultViewport:!0,acceptDownloads:e.acceptDownloads,bypassCSP:e.bypassCSP,colorScheme:e.colorScheme,extraHTTPHeaders:e.extraHTTPHeaders,geolocation:e.geolocation,httpCredentials:e.httpCredentials,ignoreHTTPSErrors:e.ignoreHTTPSErrors,locale:e.locale,offline:e.offline,recordHar:e.recordHar,recordVideo:e.recordVideo,timezoneId:e.timezoneId},browserProcess:v,protocolLogger:qm.helper.debugProtocolLogger(),browserLogsCollector:l,artifactsDir:c,downloadsPath:c,tracesDir:c},b=await t6.CRBrowser.connect(g,x);return s=new Pn(this,b,_),s},MC.TimeoutSettings.timeout(e))}};Gs.Electron=LC;function BC(r,e,t){return new Promise((i,n)=>{let s=n6.createInterface({input:e.stderr}),o=new Error("Process failed to launch!"),c=[Fa.eventsHelper.addEventListener(s,"line",l),Fa.eventsHelper.addEventListener(s,"close",n.bind(null,o)),Fa.eventsHelper.addEventListener(e,"exit",n.bind(null,o)),Fa.eventsHelper.addEventListener(e,"error",n.bind(null,o))];r.cleanupWhenAborted(u);function l(d){let h=d.match(t);!h||(u(),i(h))}function u(){Fa.eventsHelper.removeEventListeners(c)}})}});var od=w(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.FFSession=Jt.FFSessionEvents=Jt.FFConnection=Jt.kBrowserCloseMessageId=Jt.ConnectionEvents=void 0;var HC=require("events"),a6=H(),Hm=It(),c6=ze(),jC=kt(),Da=di(),WC={Disconnected:Symbol("Disconnected")};Jt.ConnectionEvents=WC;var $C=-9999;Jt.kBrowserCloseMessageId=$C;var zC=class extends HC.EventEmitter{constructor(e,t,i){super();this._lastId=void 0,this._callbacks=void 0,this._transport=void 0,this._protocolLogger=void 0,this._browserLogsCollector=void 0,this._sessions=void 0,this._closed=void 0,this.on=void 0,this.addListener=void 0,this.off=void 0,this.removeListener=void 0,this.once=void 0,this.setMaxListeners(0),this._transport=e,this._protocolLogger=t,this._browserLogsCollector=i,this._lastId=0,this._callbacks=new Map,this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this._sessions=new Map,this._closed=!1,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}async send(e,t){this._checkClosed(e);let i=this.nextMessageId();return this._rawSend({id:i,method:e,params:t}),new Promise((n,s)=>{this._callbacks.set(i,{resolve:n,reject:s,error:new Da.ProtocolError(!1),method:e})})}nextMessageId(){return++this._lastId}_checkClosed(e){if(this._closed)throw new Da.ProtocolError(!0,`${e}): Browser closed.`+jC.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs()))}_rawSend(e){this._protocolLogger("send",e),this._transport.send(e)}async _onMessage(e){if(this._protocolLogger("receive",e),e.id!==$C)if(e.sessionId){let t=this._sessions.get(e.sessionId);t&&t.dispatchMessage(e)}else if(e.id){let t=this._callbacks.get(e.id);t&&(this._callbacks.delete(e.id),e.error?t.reject(VC(t.error,t.method,e.error)):t.resolve(e.result))}else Promise.resolve().then(()=>this.emit(e.method,e.params))}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0;let e=jC.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs());for(let t of this._sessions.values())t.dispose();this._sessions.clear();for(let t of this._callbacks.values()){let i=(0,Hm.rewriteErrorMessage)(t.error,`Protocol error (${t.method}): Browser closed.`+e);i.sessionClosed=!0,t.reject(i)}this._callbacks.clear(),Promise.resolve().then(()=>this.emit(WC.Disconnected))}close(){this._closed||this._transport.close()}createSession(e){let t=new jm(this,e,i=>this._rawSend({...i,sessionId:e}));return this._sessions.set(e,t),t}};Jt.FFConnection=zC;var UC={Disconnected:Symbol("Disconnected")};Jt.FFSessionEvents=UC;var jm=class extends HC.EventEmitter{constructor(e,t,i){super();this._connection=void 0,this._disposed=!1,this._callbacks=void 0,this._sessionId=void 0,this._rawSend=void 0,this._crashed=!1,this.on=void 0,this.addListener=void 0,this.off=void 0,this.removeListener=void 0,this.once=void 0,this.setMaxListeners(0),this._callbacks=new Map,this._connection=e,this._sessionId=t,this._rawSend=i,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}markAsCrashed(){this._crashed=!0}async send(e,t){if(this._crashed)throw new Da.ProtocolError(!0,"Target crashed");if(this._connection._checkClosed(e),this._disposed)throw new Da.ProtocolError(!0,"Target closed");let i=this._connection.nextMessageId();return this._rawSend({method:e,params:t,id:i}),new Promise((n,s)=>{this._callbacks.set(i,{resolve:n,reject:s,error:new Da.ProtocolError(!1),method:e})})}sendMayFail(e,t){return this.send(e,t).catch(i=>c6.debugLogger.log("error",i))}dispatchMessage(e){if(e.id&&this._callbacks.has(e.id)){let t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(VC(t.error,t.method,e.error)):t.resolve(e.result)}else(0,a6.assert)(!e.id),Promise.resolve().then(()=>this.emit(e.method,e.params))}dispose(){for(let e of this._callbacks.values())e.error.sessionClosed=!0,e.reject((0,Hm.rewriteErrorMessage)(e.error,"Target closed"));this._callbacks.clear(),this._disposed=!0,this._connection._sessions.delete(this._sessionId),Promise.resolve().then(()=>this.emit(UC.Disconnected))}};Jt.FFSession=jm;function VC(r,e,t){let i=`Protocol error (${e}): ${t.message}`;return"data"in t&&(i+=` ${t.data}`),(0,Hm.rewriteErrorMessage)(r,i)}});var GC=w(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.getAccessibilityTree=l6;async function l6(r,e){let t=e?e._objectId:void 0,{tree:i}=await r.send("Accessibility.getFullAXTree",{objectId:t}),n=new ad(i);return{tree:n,needle:e?n._findNeedle():null}}var u6=new Map(Object.entries({pushbutton:"button",checkbutton:"checkbox",editcombobox:"combobox","content deletion":"deletion",footnote:"doc-footnote","non-native document":"document",grouping:"group",graphic:"img","content insertion":"insertion",animation:"marquee","flat equation":"math",menupopup:"menu","check menu item":"menuitemcheckbox","radio menu item":"menuitemradio","listbox option":"option",radiobutton:"radio",statusbar:"status",pagetab:"tab",pagetablist:"tablist",propertypage:"tabpanel",entry:"textbox",outline:"tree","tree table":"treegrid",outlineitem:"treeitem"})),ad=class{constructor(e){this._children=void 0,this._payload=void 0,this._editable=void 0,this._richlyEditable=void 0,this._focusable=void 0,this._expanded=void 0,this._name=void 0,this._role=void 0,this._cachedHasFocusableChild=void 0,this._payload=e,this._children=(e.children||[]).map(t=>new ad(t)),this._editable=!!e.editable,this._richlyEditable=this._editable&&e.tag!=="textarea"&&e.tag!=="input",this._focusable=!!e.focusable,this._expanded=!!e.expanded,this._name=this._payload.name,this._role=this._payload.role}_isPlainTextField(){return this._richlyEditable?!1:this._editable?!0:this._role==="entry"}_isTextOnlyObject(){let e=this._role;return e==="text leaf"||e==="text"||e==="statictext"}_hasFocusableChild(){if(this._cachedHasFocusableChild===void 0){this._cachedHasFocusableChild=!1;for(let e of this._children)if(e._focusable||e._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}_findNeedle(){if(this._payload.foundObject)return this;for(let e of this._children){let t=e._findNeedle();if(t)return t}return null}isLeafNode(){if(!this._children.length||this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"graphic":case"scrollbar":case"slider":case"separator":case"progressbar":return!0;default:break}return this._hasFocusableChild()?!1:!!(this._focusable&&this._role!=="document"&&this._name||this._role==="heading"&&this._name)}isControl(){switch(this._role){case"checkbutton":case"check menu item":case"check rich option":case"combobox":case"combobox option":case"color chooser":case"listbox":case"listbox option":case"listbox rich option":case"popup menu":case"menupopup":case"menuitem":case"menubar":case"button":case"pushbutton":case"radiobutton":case"radio menuitem":case"scrollbar":case"slider":case"spinbutton":case"switch":case"pagetab":case"entry":case"tree table":return!0;default:return!1}}isInteresting(e){return this._focusable||this._richlyEditable||this.isControl()?!0:e?!1:this.isLeafNode()&&!!this._name.trim()}serialize(){let e={role:u6.get(this._role)||this._role,name:this._name||""},t=["name","description","roledescription","valuetext","keyshortcuts"];for(let c of t)c in this._payload&&(e[c]=this._payload[c]);let i=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(let c of i){if(this._role==="document"&&c==="focused")continue;let l=this._payload[c];!l||(e[c]=l)}let n=["level"];for(let c of n)c in this._payload&&(e[c]=this._payload[c]);let s=["autocomplete","haspopup","invalid","orientation"];for(let c of s){let l=this._payload[c];!l||l==="false"||(e[c]=l)}let o=e;return o.valueString=this._payload.value,"checked"in this._payload&&(o.checked=this._payload.checked===!0?"checked":this._payload.checked==="mixed"?"mixed":"unchecked"),"pressed"in this._payload&&(o.pressed=this._payload.pressed===!0?"pressed":"released"),o}}});var XC=w(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.FFExecutionContext=void 0;var Ks=f6(ci()),d6=It(),h6=Qo(),p6=di();function KC(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(KC=function(i){return i?t:e})(r)}function f6(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=KC(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var JC=class{constructor(e,t){this._session=void 0,this._executionContextId=void 0,this._session=e,this._executionContextId=t}async rawEvaluateJSON(e){let t=await this._session.send("Runtime.evaluate",{expression:e,returnByValue:!0,executionContextId:this._executionContextId}).catch(zm);return $m(t.exceptionDetails),t.result.value}async rawEvaluateHandle(e){let t=await this._session.send("Runtime.evaluate",{expression:e,returnByValue:!1,executionContextId:this._executionContextId}).catch(zm);return $m(t.exceptionDetails),t.result.objectId}rawCallFunctionNoReply(e,...t){this._session.send("Runtime.callFunction",{functionDeclaration:e.toString(),args:t.map(i=>i instanceof Ks.JSHandle?{objectId:i._objectId}:{value:i}),returnByValue:!0,executionContextId:this._executionContextId}).catch(()=>{})}async evaluateWithArguments(e,t,i,n,s){let o=await this._session.send("Runtime.callFunction",{functionDeclaration:e,args:[{objectId:i._objectId,value:void 0},...n.map(c=>({value:c})),...s.map(c=>({objectId:c,value:void 0}))],returnByValue:t,executionContextId:this._executionContextId}).catch(zm);return $m(o.exceptionDetails),t?(0,h6.parseEvaluationResultValue)(o.result.value):i._context.createHandle(o.result)}async getProperties(e,t){let i=await this._session.send("Runtime.getObjectProperties",{executionContextId:this._executionContextId,objectId:t}),n=new Map;for(let s of i.properties)n.set(s.name,e.createHandle(s.value));return n}createHandle(e,t){return new Ks.JSHandle(e,t.subtype||t.type||"",_6(t),t.objectId,m6(t))}async releaseHandle(e){await this._session.send("Runtime.disposeObject",{executionContextId:this._executionContextId,objectId:e})}};cd.FFExecutionContext=JC;function $m(r){if(!!r)throw r.value?new Ks.JavaScriptErrorInEvaluate(JSON.stringify(r.value)):new Ks.JavaScriptErrorInEvaluate(r.text+`
`+r.stack)}function zm(r){if(r.message.includes("cyclic object value")||r.message.includes("Object is not serializable"))return{result:{type:"undefined",value:void 0}};throw r instanceof TypeError&&r.message.startsWith("Converting circular structure to JSON")&&(0,d6.rewriteErrorMessage)(r,r.message+" Are you passing a nested JSHandle?"),!Ks.isJavaScriptErrorInEvaluate(r)&&!(0,p6.isSessionClosedError)(r)?new Error("Execution context was destroyed, most likely because of a navigation."):r}function m6(r){let e=r.value,t=r.unserializableValue;return t?Ks.parseUnserializableValue(t):e}function _6(r){if(r.type==="undefined")return"undefined";if(r.unserializableValue)return String(r.unserializableValue);if(r.type==="symbol")return"Symbol()";if(r.subtype==="regexp")return"RegExp";if(r.subtype==="weakmap")return"WeakMap";if(r.subtype==="weakset")return"WeakSet";if(r.subtype)return r.subtype[0].toUpperCase()+r.subtype.slice(1);if("value"in r)return String(r.value)}});var tk=w(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.RawTouchscreenImpl=Mi.RawMouseImpl=Mi.RawKeyboardImpl=void 0;function Ra(r){let e=0;return r.has("Alt")&&(e|=1),r.has("Control")&&(e|=2),r.has("Shift")&&(e|=4),r.has("Meta")&&(e|=8),e}function YC(r){return r==="left"?0:r==="middle"?1:r==="right"?2:0}function Um(r){let e=0;return r.has("left")&&(e|=1),r.has("right")&&(e|=2),r.has("middle")&&(e|=4),e}var QC=class{constructor(e){this._client=void 0,this._client=e}async keydown(e,t,i,n,s,o,c,l){t==="MetaLeft"&&(t="OSLeft"),t==="MetaRight"&&(t="OSRight"),l==="\r"&&(l=""),await this._client.send("Page.dispatchKeyEvent",{type:"keydown",keyCode:n,code:t,key:s,repeat:c,location:o,text:l})}async keyup(e,t,i,n,s,o){t==="MetaLeft"&&(t="OSLeft"),t==="MetaRight"&&(t="OSRight"),await this._client.send("Page.dispatchKeyEvent",{type:"keyup",key:s,keyCode:n,code:t,location:o,repeat:!1})}async sendText(e){await this._client.send("Page.insertText",{text:e})}};Mi.RawKeyboardImpl=QC;var ZC=class{constructor(e){this._client=void 0,this._page=void 0,this._client=e}async move(e,t,i,n,s){await this._client.send("Page.dispatchMouseEvent",{type:"mousemove",button:0,buttons:Um(n),x:e,y:t,modifiers:Ra(s)})}async down(e,t,i,n,s,o){await this._client.send("Page.dispatchMouseEvent",{type:"mousedown",button:YC(i),buttons:Um(n),x:e,y:t,modifiers:Ra(s),clickCount:o})}async up(e,t,i,n,s,o){await this._client.send("Page.dispatchMouseEvent",{type:"mouseup",button:YC(i),buttons:Um(n),x:e,y:t,modifiers:Ra(s),clickCount:o})}async wheel(e,t,i,n,s,o){await this._page.mainFrame().evaluateExpression("new Promise(requestAnimationFrame)",!1,!1,"utility"),await this._client.send("Page.dispatchWheelEvent",{deltaX:s,deltaY:o,x:e,y:t,deltaZ:0,modifiers:Ra(n)})}setPage(e){this._page=e}};Mi.RawMouseImpl=ZC;var ek=class{constructor(e){this._client=void 0,this._client=e}async tap(e,t,i){await this._client.send("Page.dispatchTapEvent",{x:e,y:t,modifiers:Ra(i)})}};Mi.RawTouchscreenImpl=ek});var ok=w(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.FFNetworkManager=void 0;var Na=dt(),ld=g6(Dt());function rk(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(rk=function(i){return i?t:e})(r)}function g6(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=rk(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var ik=class{constructor(e,t){this._session=void 0,this._requests=void 0,this._page=void 0,this._eventListeners=void 0,this._session=e,this._requests=new Map,this._page=t,this._eventListeners=[Na.eventsHelper.addEventListener(e,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this)),Na.eventsHelper.addEventListener(e,"Network.responseReceived",this._onResponseReceived.bind(this)),Na.eventsHelper.addEventListener(e,"Network.requestFinished",this._onRequestFinished.bind(this)),Na.eventsHelper.addEventListener(e,"Network.requestFailed",this._onRequestFailed.bind(this))]}dispose(){Na.eventsHelper.removeEventListeners(this._eventListeners)}async setRequestInterception(e){await this._session.send("Network.setRequestInterception",{enabled:e})}_onRequestWillBeSent(e){let t=e.redirectedFrom&&this._requests.get(e.redirectedFrom)||null,i=t?t.request.frame():e.frameId?this._page._frameManager.frame(e.frameId):null;if(!i)return;t&&this._requests.delete(t._id);let n=new nk(i,t,e),s;e.isIntercepted&&(s=new sk(this._session,n)),this._requests.set(n._id,n),this._page._frameManager.requestStarted(n.request,s)}_onResponseReceived(e){var t,i,n,s,o;let c=this._requests.get(e.requestId);if(!c)return;let l=async()=>{let f=await this._session.send("Network.getResponseBody",{requestId:c._id});if(f.evicted)throw new Error(`Response body for ${c.request.method()} ${c.request.url()} was evicted!`);return Buffer.from(f.base64body,"base64")},u=e.timing.startTime;function d(f){return f?(f-u)/1e3:-1}let h={startTime:u/1e3,domainLookupStart:d(e.timing.domainLookupStart),domainLookupEnd:d(e.timing.domainLookupEnd),connectStart:d(e.timing.connectStart),secureConnectionStart:d(e.timing.secureConnectionStart),connectEnd:d(e.timing.connectEnd),requestStart:d(e.timing.requestStart),responseStart:d(e.timing.responseStart)},p=new ld.Response(c.request,e.status,e.statusText,y6(e.headers),h,l);e!=null&&e.remoteIPAddress&&typeof(e==null?void 0:e.remotePort)=="number"?p._serverAddrFinished({ipAddress:e.remoteIPAddress,port:e.remotePort}):p._serverAddrFinished(),p._securityDetailsFinished({protocol:e==null||(t=e.securityDetails)===null||t===void 0?void 0:t.protocol,subjectName:e==null||(i=e.securityDetails)===null||i===void 0?void 0:i.subjectName,issuer:e==null||(n=e.securityDetails)===null||n===void 0?void 0:n.issuer,validFrom:e==null||(s=e.securityDetails)===null||s===void 0?void 0:s.validFrom,validTo:e==null||(o=e.securityDetails)===null||o===void 0?void 0:o.validTo}),this._page._frameManager.requestReceivedResponse(p)}_onRequestFinished(e){let t=this._requests.get(e.requestId);if(!t)return;let i=t.request._existingResponse();t.request.responseSize.transferSize=e.transferSize;let n=i.status()>=300&&i.status()<=399,s=e.responseEndTime?e.responseEndTime/1e3-i.timing().startTime:-1;n||this._requests.delete(t._id),i._requestFinished(s),i._setHttpVersion(e.protocolVersion),this._page._frameManager.reportRequestFinished(t.request,i)}_onRequestFailed(e){let t=this._requests.get(e.requestId);if(!t)return;this._requests.delete(t._id);let i=t.request._existingResponse();i&&i._requestFinished(-1),t.request._setFailureText(e.errorCode),this._page._frameManager.requestFailed(t.request,e.errorCode==="NS_BINDING_ABORTED")}};ud.FFNetworkManager=ik;var w6={TYPE_INVALID:"other",TYPE_OTHER:"other",TYPE_SCRIPT:"script",TYPE_IMAGE:"image",TYPE_STYLESHEET:"stylesheet",TYPE_OBJECT:"other",TYPE_DOCUMENT:"document",TYPE_SUBDOCUMENT:"document",TYPE_REFRESH:"document",TYPE_XBL:"other",TYPE_PING:"other",TYPE_XMLHTTPREQUEST:"xhr",TYPE_OBJECT_SUBREQUEST:"other",TYPE_DTD:"other",TYPE_FONT:"font",TYPE_MEDIA:"media",TYPE_WEBSOCKET:"websocket",TYPE_CSP_REPORT:"other",TYPE_XSLT:"other",TYPE_BEACON:"other",TYPE_FETCH:"fetch",TYPE_IMAGESET:"images",TYPE_WEB_MANIFEST:"manifest"},v6={TYPE_INTERNAL_EVENTSOURCE:"eventsource"},nk=class{constructor(e,t,i){this.request=void 0,this._id=void 0,this._redirectedTo=void 0,this._id=i.requestId,t&&(t._redirectedTo=this);let n=null;i.postData&&(n=Buffer.from(i.postData,"base64")),this.request=new ld.Request(e,t?t.request:null,i.navigationId,i.url,v6[i.internalCause]||w6[i.cause]||"other",i.method,n,i.headers)}_finalRequest(){let e=this;for(;e._redirectedTo;)e=e._redirectedTo;return e}},sk=class{constructor(e,t){this._request=void 0,this._session=void 0,this._session=e,this._request=t}async responseBody(){let e=await this._session.send("Network.getResponseBody",{requestId:this._request._finalRequest()._id});return Buffer.from(e.base64body,"base64")}async continue(e,t){let i=await this._session.sendMayFail("Network.resumeInterceptedRequest",{requestId:this._request._id,url:t.url,method:t.method,headers:t.headers,postData:t.postData?Buffer.from(t.postData).toString("base64"):void 0,interceptResponse:t.interceptResponse});if(!t.interceptResponse)return null;if(i.error)throw new Error(`Request failed: ${i.error}`);return new ld.InterceptedResponse(e,i.response.status,i.response.statusText,i.response.headers)}async fulfill(e){let t=e.isBase64?e.body:Buffer.from(e.body).toString("base64");await this._session.sendMayFail("Network.fulfillInterceptedRequest",{requestId:this._request._id,status:e.status,statusText:ld.STATUS_TEXTS[String(e.status)]||"",headers:e.headers,base64body:t})}async abort(e){await this._session.sendMayFail("Network.abortInterceptedRequest",{requestId:this._request._id,errorCode:e})}};function y6(r){let e=[];for(let t of r){let i=t.name.toLowerCase()==="set-cookie"?`
`:",",n=t.value.split(i).map(s=>s.trim());for(let s of n)e.push({name:t.name,value:s})}return e}});var fk=w(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.FFPage=Xs.UTILITY_WORLD_NAME=void 0;var b6=hk(tu()),ak=hk(Zo()),Re=dt(),ck=H(),qa=bt(),x6=GC(),lk=od(),uk=XC(),Vm=tk(),S6=ok(),E6=It(),C6=ze(),k6=zt();function dk(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(dk=function(i){return i?t:e})(r)}function hk(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=dk(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Gm="__playwright_utility_world__";Xs.UTILITY_WORLD_NAME=Gm;var pk=class{constructor(e,t,i){this.cspErrorsAsynchronousForInlineScipts=!0,this.rawMouse=void 0,this.rawKeyboard=void 0,this.rawTouchscreen=void 0,this._session=void 0,this._page=void 0,this._networkManager=void 0,this._browserContext=void 0,this._pagePromise=new k6.ManualPromise,this._initializedPage=null,this._initializationFailed=!1,this._opener=void 0,this._contextIdToContext=void 0,this._eventListeners=void 0,this._workers=new Map,this._screencastId=void 0,this._session=e,this._opener=i,this.rawKeyboard=new Vm.RawKeyboardImpl(e),this.rawMouse=new Vm.RawMouseImpl(e),this.rawTouchscreen=new Vm.RawTouchscreenImpl(e),this._contextIdToContext=new Map,this._browserContext=t,this._page=new qa.Page(this,t),this.rawMouse.setPage(this._page),this._networkManager=new S6.FFNetworkManager(e,this._page),this._page.on(qa.Page.Events.FrameDetached,n=>this._removeContextsForFrame(n)),this._eventListeners=[Re.eventsHelper.addEventListener(this._session,"Page.eventFired",this._onEventFired.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.frameAttached",this._onFrameAttached.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.frameDetached",this._onFrameDetached.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.navigationAborted",this._onNavigationAborted.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.navigationCommitted",this._onNavigationCommitted.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.navigationStarted",this._onNavigationStarted.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.sameDocumentNavigation",this._onSameDocumentNavigation.bind(this)),Re.eventsHelper.addEventListener(this._session,"Runtime.executionContextCreated",this._onExecutionContextCreated.bind(this)),Re.eventsHelper.addEventListener(this._session,"Runtime.executionContextDestroyed",this._onExecutionContextDestroyed.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.linkClicked",n=>this._onLinkClicked(n.phase)),Re.eventsHelper.addEventListener(this._session,"Page.uncaughtError",this._onUncaughtError.bind(this)),Re.eventsHelper.addEventListener(this._session,"Runtime.console",this._onConsole.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.dialogOpened",this._onDialogOpened.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.bindingCalled",this._onBindingCalled.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.fileChooserOpened",this._onFileChooserOpened.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.workerCreated",this._onWorkerCreated.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.workerDestroyed",this._onWorkerDestroyed.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.dispatchMessageFromWorker",this._onDispatchMessageFromWorker.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.crashed",this._onCrashed.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.videoRecordingStarted",this._onVideoRecordingStarted.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.webSocketCreated",this._onWebSocketCreated.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.webSocketClosed",this._onWebSocketClosed.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.webSocketFrameReceived",this._onWebSocketFrameReceived.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.webSocketFrameSent",this._onWebSocketFrameSent.bind(this)),Re.eventsHelper.addEventListener(this._session,"Page.screencastFrame",this._onScreencastFrame.bind(this))],e.once(lk.FFSessionEvents.Disconnected,()=>{this._markAsError(new Error("Page closed")),this._page._didDisconnect()}),this._session.once("Page.ready",async()=>{await this._page.initOpener(this._opener),!this._initializationFailed&&(this._initializedPage=this._page,this._page.reportAsNew(),this._pagePromise.resolve(this._page))}),this._session.send("Page.addScriptToEvaluateOnNewDocument",{script:"",worldName:Gm}).catch(n=>this._markAsError(n))}async _markAsError(e){this._initializationFailed||(this._initializationFailed=!0,this._initializedPage||(await this._page.initOpener(this._opener),this._page.reportAsNew(e),this._pagePromise.resolve(e)))}async pageOrError(){return this._pagePromise}_onWebSocketCreated(e){this._page._frameManager.onWebSocketCreated(Js(e.frameId,e.wsid),e.requestURL),this._page._frameManager.onWebSocketRequest(Js(e.frameId,e.wsid))}_onWebSocketClosed(e){e.error&&this._page._frameManager.webSocketError(Js(e.frameId,e.wsid),e.error),this._page._frameManager.webSocketClosed(Js(e.frameId,e.wsid))}_onWebSocketFrameReceived(e){this._page._frameManager.webSocketFrameReceived(Js(e.frameId,e.wsid),e.opcode,e.data)}_onWebSocketFrameSent(e){this._page._frameManager.onWebSocketFrameSent(Js(e.frameId,e.wsid),e.opcode,e.data)}_onExecutionContextCreated(e){let{executionContextId:t,auxData:i}=e,n=this._page._frameManager.frame(i.frameId);if(!n)return;let s=new uk.FFExecutionContext(this._session,t),o=null;i.name===Gm?o="utility":i.name||(o="main");let c=new ak.FrameExecutionContext(s,n,o);o&&n._contextCreated(o,c),this._contextIdToContext.set(t,c)}_onExecutionContextDestroyed(e){let{executionContextId:t}=e,i=this._contextIdToContext.get(t);!i||(this._contextIdToContext.delete(t),i.frame._contextDestroyed(i))}_removeContextsForFrame(e){for(let[t,i]of this._contextIdToContext)i.frame===e&&this._contextIdToContext.delete(t)}_onLinkClicked(e){e==="before"?this._page._frameManager.frameWillPotentiallyRequestNavigation():this._page._frameManager.frameDidPotentiallyRequestNavigation()}_onNavigationStarted(e){this._page._frameManager.frameRequestedNavigation(e.frameId,e.navigationId)}_onNavigationAborted(e){this._page._frameManager.frameAbortedNavigation(e.frameId,e.errorText,e.navigationId)}_onNavigationCommitted(e){for(let[t,i]of this._workers)i.frameId===e.frameId&&this._onWorkerDestroyed({workerId:t});this._page._frameManager.frameCommittedNewDocumentNavigation(e.frameId,e.url,e.name||"",e.navigationId||"",!1)}_onSameDocumentNavigation(e){this._page._frameManager.frameCommittedSameDocumentNavigation(e.frameId,e.url)}_onFrameAttached(e){this._page._frameManager.frameAttached(e.frameId,e.parentFrameId)}_onFrameDetached(e){this._page._frameManager.frameDetached(e.frameId)}_onEventFired(e){let{frameId:t,name:i}=e;i==="load"&&this._page._frameManager.frameLifecycleEvent(t,"load"),i==="DOMContentLoaded"&&this._page._frameManager.frameLifecycleEvent(t,"domcontentloaded")}_onUncaughtError(e){let{name:t,message:i}=(0,E6.splitErrorMessage)(e.message),n=new Error(i);n.stack=e.message+`
`+e.stack.split(`
`).filter(Boolean).map(s=>s.replace(/([^@]*)@(.*)/,"    at $1 ($2)")).join(`
`),n.name=t,this._page.firePageError(n)}_onConsole(e){let{type:t,args:i,executionContextId:n,location:s}=e,o=this._contextIdToContext.get(n);this._page._addConsoleMessage(t,i.map(c=>o.createHandle(c)),s)}_onDialogOpened(e){this._page.emit(qa.Page.Events.Dialog,new b6.Dialog(this._page,e.type,e.message,async(t,i)=>{await this._session.sendMayFail("Page.handleDialog",{dialogId:e.dialogId,accept:t,promptText:i})},e.defaultValue))}async _onBindingCalled(e){let t=this._contextIdToContext.get(e.executionContextId);await this.pageOrError()instanceof Error||await this._page._onBindingCalled(e.payload,t)}async _onFileChooserOpened(e){let{executionContextId:t,element:i}=e,s=this._contextIdToContext.get(t).createHandle(i).asElement();await this._page._onFileChooserOpened(s)}async _onWorkerCreated(e){let t=e.workerId,i=new qa.Worker(this._page,e.url),n=new lk.FFSession(this._session._connection,t,s=>{this._session.send("Page.sendMessageToWorker",{frameId:e.frameId,workerId:t,message:JSON.stringify(s)}).catch(o=>{n.dispatchMessage({id:s.id,method:"",params:{},error:{message:o.message,data:void 0}})})});this._workers.set(t,{session:n,frameId:e.frameId}),this._page._addWorker(t,i),n.once("Runtime.executionContextCreated",s=>{i._createExecutionContext(new uk.FFExecutionContext(n,s.executionContextId))}),n.on("Runtime.console",s=>{let{type:o,args:c,location:l}=s,u=i._existingExecutionContext;this._page._addConsoleMessage(o,c.map(d=>u.createHandle(d)),l)})}_onWorkerDestroyed(e){let t=e.workerId,i=this._workers.get(t);!i||(i.session.dispose(),this._workers.delete(t),this._page._removeWorker(t))}async _onDispatchMessageFromWorker(e){let t=this._workers.get(e.workerId);!t||t.session.dispatchMessage(JSON.parse(e.message))}async _onCrashed(e){this._session.markAsCrashed(),this._page._didCrash()}_onVideoRecordingStarted(e){this._browserContext._browser._videoStarted(this._browserContext,e.screencastId,e.file,this.pageOrError())}async exposeBinding(e){await this._session.send("Page.addBinding",{name:e.name,script:e.source})}didClose(){this._session.dispose(),Re.eventsHelper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._page._didClose()}async navigateFrame(e,t,i){return{newDocumentId:(await this._session.send("Page.navigate",{url:t,referer:i,frameId:e._id})).navigationId||void 0}}async updateExtraHTTPHeaders(){await this._session.send("Network.setExtraHTTPHeaders",{headers:this._page._state.extraHTTPHeaders||[]})}async setEmulatedSize(e){(0,ck.assert)(this._page._state.emulatedSize===e),await this._session.send("Page.setViewportSize",{viewportSize:{width:e.viewport.width,height:e.viewport.height}})}async bringToFront(){await this._session.send("Page.bringToFront",{})}async updateEmulateMedia(){let e=this._page._state.colorScheme===null?void 0:this._page._state.colorScheme,t=this._page._state.reducedMotion===null?void 0:this._page._state.reducedMotion,i=this._page._state.forcedColors===null?void 0:this._page._state.forcedColors;await this._session.send("Page.setEmulatedMedia",{type:this._page._state.mediaType===null?"":this._page._state.mediaType,colorScheme:e,reducedMotion:t,forcedColors:i})}async updateRequestInterception(){await this._networkManager.setRequestInterception(this._page._needsRequestInterception())}async setFileChooserIntercepted(e){await this._session.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(t=>{})}async reload(){await this._session.send("Page.reload",{frameId:this._page.mainFrame()._id})}async goBack(){let{success:e}=await this._session.send("Page.goBack",{frameId:this._page.mainFrame()._id});return e}async goForward(){let{success:e}=await this._session.send("Page.goForward",{frameId:this._page.mainFrame()._id});return e}async evaluateOnNewDocument(e){await this._session.send("Page.addScriptToEvaluateOnNewDocument",{script:e})}async closePage(e){await this._session.send("Page.close",{runBeforeUnload:e})}canScreenshotOutsideViewport(){return!0}async setBackgroundColor(e){if(e)throw new Error("Not implemented")}async takeScreenshot(e,t,i,n,s){if(!i){let c=await this._page.mainFrame().waitForFunctionValueInUtility(e,()=>({x:window.scrollX,y:window.scrollY}));i={x:n.x+c.x,y:n.y+c.y,width:n.width,height:n.height}}e.throwIfAborted();let{data:o}=await this._session.send("Page.screenshot",{mimeType:"image/"+t,clip:i});return Buffer.from(o,"base64")}async resetViewport(){(0,ck.assert)(!1,"Should not be called")}async getContentFrame(e){let{contentFrameId:t}=await this._session.send("Page.describeNode",{frameId:e._context.frame._id,objectId:e._objectId});return t?this._page._frameManager.frame(t):null}async getOwnerFrame(e){let{ownerFrameId:t}=await this._session.send("Page.describeNode",{frameId:e._context.frame._id,objectId:e._objectId});return t||null}isElementHandle(e){return e.subtype==="node"}async getBoundingBox(e){let t=await this.getContentQuads(e);if(!t||!t.length)return null;let i=1/0,n=-1/0,s=1/0,o=-1/0;for(let c of t)for(let l of c)i=Math.min(i,l.x),n=Math.max(n,l.x),s=Math.min(s,l.y),o=Math.max(o,l.y);return{x:i,y:s,width:n-i,height:o-s}}async scrollRectIntoViewIfNeeded(e,t){return await this._session.send("Page.scrollIntoViewIfNeeded",{frameId:e._context.frame._id,objectId:e._objectId,rect:t}).then(()=>"done").catch(i=>{if(i instanceof Error&&i.message.includes("Node is detached from document"))return"error:notconnected";if(i instanceof Error&&i.message.includes("Node does not have a layout object"))return"error:notvisible";throw i})}async setScreencastOptions(e){if(e){let{screencastId:t}=await this._session.send("Page.startScreencast",e);this._screencastId=t}else await this._session.send("Page.stopScreencast")}_onScreencastFrame(e){if(!this._screencastId)return;this._session.send("Page.screencastFrameAck",{screencastId:this._screencastId}).catch(i=>C6.debugLogger.log("error",i));let t=Buffer.from(e.data,"base64");this._page.emit(qa.Page.Events.ScreencastFrame,{buffer:t,width:e.deviceWidth,height:e.deviceHeight})}rafCountForStablePosition(){return 1}async getContentQuads(e){let t=await this._session.sendMayFail("Page.getContentQuads",{frameId:e._context.frame._id,objectId:e._objectId});return t?t.quads.map(i=>[i.p1,i.p2,i.p3,i.p4]):null}async setInputFiles(e,t){await e.evaluateInUtility(([i,n,s])=>i.setInputFiles(n,s),t)}async adoptElementHandle(e,t){let i=await this._session.send("Page.adoptNode",{frameId:e._context.frame._id,objectId:e._objectId,executionContextId:t._delegate._executionContextId});if(!i.remoteObject)throw new Error(ak.kUnableToAdoptErrorMessage);return t.createHandle(i.remoteObject)}async getAccessibilityTree(e){return(0,x6.getAccessibilityTree)(this._session,e)}async inputActionEpilogue(){}async getFrameElement(e){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");let i=await this._page.selectors._queryAll(t,"frame,iframe",void 0),n=await Promise.all(i.map(async o=>{let c=await o.contentFrame().catch(l=>null);return{handle:o,frame:c}})),s=n.find(o=>o.frame===e);if(n.map(o=>o===s?Promise.resolve():o.handle.dispose()),!s)throw new Error("Frame has been detached.");return s.handle}};Xs.FFPage=pk;function Js(r,e){return`${r}---${e}`}});var wk=w(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.FFBrowserContext=Ys.FFBrowser=void 0;var P6=Mt(),La=H(),O6=xs(),dd=ht(),hd=A6(Dt()),mk=od(),T6=fk();function _k(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(_k=function(i){return i?t:e})(r)}function A6(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=_k(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var pd=class extends O6.Browser{static async connect(e,t){let i=new mk.FFConnection(e,t.protocolLogger,t.browserLogsCollector),n=new pd(i,t);t.__testHookOnConnectToBrowser&&await t.__testHookOnConnectToBrowser();let s=[i.send("Browser.enable",{attachToDefaultContext:!!t.persistent}),n._initVersion()];return t.persistent&&(n._defaultContext=new fd(n,void 0,t.persistent),s.push(n._defaultContext._initialize())),t.proxy&&s.push(n._connection.send("Browser.setBrowserProxy",gk(t.proxy))),await Promise.all(s),n}constructor(e,t){super(t);this._connection=void 0,this._ffPages=void 0,this._contexts=void 0,this._version="",this._userAgent="",this._connection=e,this._ffPages=new Map,this._contexts=new Map,this._connection.on(mk.ConnectionEvents.Disconnected,()=>this._onDisconnect()),this._connection.on("Browser.attachedToTarget",this._onAttachedToTarget.bind(this)),this._connection.on("Browser.detachedFromTarget",this._onDetachedFromTarget.bind(this)),this._connection.on("Browser.downloadCreated",this._onDownloadCreated.bind(this)),this._connection.on("Browser.downloadFinished",this._onDownloadFinished.bind(this)),this._connection.on("Browser.videoRecordingFinished",this._onVideoRecordingFinished.bind(this))}async _initVersion(){let e=await this._connection.send("Browser.getInfo");this._version=e.version.substring(e.version.indexOf("/")+1),this._userAgent=e.userAgent}isConnected(){return!this._connection._closed}async newContext(e){if((0,dd.validateBrowserContextOptions)(e,this.options),e.isMobile)throw new Error("options.isMobile is not supported in Firefox");let{browserContextId:t}=await this._connection.send("Browser.createBrowserContext",{removeOnDetach:!0}),i=new fd(this,t,e);return await i._initialize(),this._contexts.set(t,i),i}contexts(){return Array.from(this._contexts.values())}version(){return this._version}userAgent(){return this._userAgent}_onDetachedFromTarget(e){let t=this._ffPages.get(e.targetId);this._ffPages.delete(e.targetId),t.didClose()}_onAttachedToTarget(e){let{targetId:t,browserContextId:i,openerId:n,type:s}=e.targetInfo;(0,La.assert)(s==="page");let o=i?this._contexts.get(i):this._defaultContext;(0,La.assert)(o,`Unknown context id:${i}, _defaultContext: ${this._defaultContext}`);let c=this._connection.createSession(e.sessionId),l=n?this._ffPages.get(n):null,u=new T6.FFPage(c,o,l);this._ffPages.set(t,u)}_onDownloadCreated(e){let t=this._ffPages.get(e.pageTargetId);if((0,La.assert)(t),!t)return;let i=t._initializedPage;i||(t._markAsError(new Error("Starting new page download")),t._opener&&(i=t._opener._initializedPage)),!!i&&this._downloadCreated(i,e.uuid,e.url,e.suggestedFileName)}_onDownloadFinished(e){let t=e.canceled?"canceled":e.error;this._downloadFinished(e.uuid,t)}_onVideoRecordingFinished(e){var t;(t=this._takeVideo(e.screencastId))===null||t===void 0||t.reportFinished()}_onDisconnect(){for(let e of this._idToVideo.values())e.artifact.reportFinished(P6.kBrowserClosedError);this._idToVideo.clear(),this._didClose()}};Ys.FFBrowser=pd;var fd=class extends dd.BrowserContext{constructor(e,t,i){super(e,i,t)}async _initialize(){(0,La.assert)(!this._ffPages().length);let e=this._browserContextId,t=[super._initialize()];if(t.push(this._browser._connection.send("Browser.setDownloadOptions",{browserContextId:e,downloadOptions:{behavior:this._options.acceptDownloads?"saveToDisk":"cancel",downloadsDir:this._browser.options.downloadsPath}})),this._options.viewport){let i={viewportSize:{width:this._options.viewport.width,height:this._options.viewport.height},deviceScaleFactor:this._options.deviceScaleFactor||1};t.push(this._browser._connection.send("Browser.setDefaultViewport",{browserContextId:e,viewport:i}))}this._options.hasTouch&&t.push(this._browser._connection.send("Browser.setTouchOverride",{browserContextId:e,hasTouch:!0})),this._options.userAgent&&t.push(this._browser._connection.send("Browser.setUserAgentOverride",{browserContextId:e,userAgent:this._options.userAgent})),this._options.bypassCSP&&t.push(this._browser._connection.send("Browser.setBypassCSP",{browserContextId:e,bypassCSP:!0})),this._options.ignoreHTTPSErrors&&t.push(this._browser._connection.send("Browser.setIgnoreHTTPSErrors",{browserContextId:e,ignoreHTTPSErrors:!0})),this._options.javaScriptEnabled===!1&&t.push(this._browser._connection.send("Browser.setJavaScriptDisabled",{browserContextId:e,javaScriptDisabled:!0})),this._options.locale&&t.push(this._browser._connection.send("Browser.setLocaleOverride",{browserContextId:e,locale:this._options.locale})),this._options.timezoneId&&t.push(this._browser._connection.send("Browser.setTimezoneOverride",{browserContextId:e,timezoneId:this._options.timezoneId})),this._options.permissions&&t.push(this.grantPermissions(this._options.permissions)),(this._options.extraHTTPHeaders||this._options.locale)&&t.push(this.setExtraHTTPHeaders(this._options.extraHTTPHeaders||[])),this._options.httpCredentials&&t.push(this.setHTTPCredentials(this._options.httpCredentials)),this._options.geolocation&&t.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&t.push(this.setOffline(this._options.offline)),t.push(this._browser._connection.send("Browser.setColorScheme",{browserContextId:e,colorScheme:this._options.colorScheme!==void 0?this._options.colorScheme:"light"})),t.push(this._browser._connection.send("Browser.setReducedMotion",{browserContextId:e,reducedMotion:this._options.reducedMotion!==void 0?this._options.reducedMotion:"no-preference"})),t.push(this._browser._connection.send("Browser.setForcedColors",{browserContextId:e,forcedColors:this._options.forcedColors!==void 0?this._options.forcedColors:"none"})),this._options.recordVideo&&t.push(this._ensureVideosPath().then(()=>this._browser._connection.send("Browser.setVideoRecordingOptions",{options:{...this._options.recordVideo.size,dir:this._options.recordVideo.dir},browserContextId:this._browserContextId}))),this._options.proxy&&t.push(this._browser._connection.send("Browser.setContextProxy",{browserContextId:this._browserContextId,...gk(this._options.proxy)})),await Promise.all(t)}_ffPages(){return Array.from(this._browser._ffPages.values()).filter(e=>e._browserContext===this)}pages(){return this._ffPages().map(e=>e._initializedPage).filter(e=>!!e)}async newPageDelegate(){(0,dd.assertBrowserContextIsNotOwned)(this);let{targetId:e}=await this._browser._connection.send("Browser.newPage",{browserContextId:this._browserContextId}).catch(t=>{throw t.message.includes("Failed to override timezone")?new Error(`Invalid timezone ID: ${this._options.timezoneId}`):t});return this._browser._ffPages.get(e)}async _doCookies(e){let{cookies:t}=await this._browser._connection.send("Browser.getCookies",{browserContextId:this._browserContextId});return hd.filterCookies(t.map(i=>{let n={...i};return delete n.size,delete n.session,n}),e)}async addCookies(e){let t=hd.rewriteCookies(e).map(i=>({...i,expires:i.expires&&i.expires!==-1?i.expires:void 0}));await this._browser._connection.send("Browser.setCookies",{browserContextId:this._browserContextId,cookies:t})}async clearCookies(){await this._browser._connection.send("Browser.clearCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){let i=new Map([["geolocation","geo"],["persistent-storage","persistent-storage"],["push","push"],["notifications","desktop-notification"]]),n=t.map(s=>{let o=i.get(s);if(!o)throw new Error("Unknown permission: "+s);return o});await this._browser._connection.send("Browser.grantPermissions",{origin:e,browserContextId:this._browserContextId,permissions:n})}async _doClearPermissions(){await this._browser._connection.send("Browser.resetPermissions",{browserContextId:this._browserContextId})}async setGeolocation(e){(0,dd.verifyGeolocation)(e),this._options.geolocation=e,await this._browser._connection.send("Browser.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:e||null})}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;let t=this._options.extraHTTPHeaders;this._options.locale&&(t=hd.mergeHeaders([t,hd.singleHeader("Accept-Language",this._options.locale)])),await this._browser._connection.send("Browser.setExtraHTTPHeaders",{browserContextId:this._browserContextId,headers:t})}async setOffline(e){this._options.offline=e,await this._browser._connection.send("Browser.setOnlineOverride",{browserContextId:this._browserContextId,override:e?"offline":"online"})}async _doSetHTTPCredentials(e){this._options.httpCredentials=e,await this._browser._connection.send("Browser.setHTTPCredentials",{browserContextId:this._browserContextId,credentials:e||null})}async _doAddInitScript(e){await this._browser._connection.send("Browser.addScriptToEvaluateOnNewDocument",{browserContextId:this._browserContextId,script:e})}async _doExposeBinding(e){await this._browser._connection.send("Browser.addBinding",{browserContextId:this._browserContextId,name:e.name,script:e.source})}async _doUpdateRequestInterception(){await this._browser._connection.send("Browser.setRequestInterception",{browserContextId:this._browserContextId,enabled:!!this._requestInterceptor})}_onClosePersistent(){}async _doClose(){(0,La.assert)(this._browserContextId),await this._browser._connection.send("Browser.removeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)}async _doCancelDownload(e){await this._browser._connection.send("Browser.cancelDownload",{uuid:e})}};Ys.FFBrowserContext=fd;function gk(r){let e=new URL(r.server),t=parseInt(e.port,10),i="http";return e.protocol==="socks5:"?i="socks":e.protocol==="socks4:"?i="socks4":e.protocol==="https:"&&(i="https"),e.port===""&&(e.protocol==="http:"?t=80:e.protocol==="https:"&&(t=443)),{type:i,bypass:r.bypass?r.bypass.split(",").map(n=>n.trim()):[],host:e.hostname,port:t,username:r.username,password:r.password}}});var xk=w(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.Firefox=void 0;var md=R6(require("os")),M6=vk(require("fs")),Km=vk(require("path")),I6=wk(),F6=od(),D6=td();function vk(r){return r&&r.__esModule?r:{default:r}}function yk(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(yk=function(i){return i?t:e})(r)}function R6(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=yk(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var bk=class extends D6.BrowserType{constructor(e){super("firefox",e)}_connectToTransport(e,t){return I6.FFBrowser.connect(e,t)}_rewriteStartupError(e){return e}_amendEnvironment(e,t,i,n){if(!Km.default.isAbsolute(md.homedir()))throw new Error(`Cannot launch Firefox with relative home directory. Did you set ${md.platform()==="win32"?"USERPROFILE":"HOME"} to a relative path?`);return md.platform()==="linux"?{...e,LD_LIBRARY_PATH:`${Km.default.dirname(i)}:${process.env.LD_LIBRARY_PATH}`}:md.platform()==="darwin"?{...e,MOZ_WEBRENDER:0}:e}_attemptToGracefullyCloseBrowser(e){let t={method:"Browser.close",params:{},id:F6.kBrowserCloseMessageId};e.send(t)}_defaultArgs(e,t,i){let{args:n=[],devtools:s,headless:o}=e;if(s&&console.warn("devtools parameter is not supported as a launch argument in Firefox. You can launch the devtools window manually."),n.find(d=>d.startsWith("-profile")||d.startsWith("--profile")))throw new Error("Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --profile argument");if(n.find(d=>d.startsWith("-juggler")))throw new Error("Use the port parameter instead of -juggler argument");let l=t?void 0:e.firefoxUserPrefs;if(l){let d=[];for(let[h,p]of Object.entries(l))d.push(`user_pref(${JSON.stringify(h)}, ${JSON.stringify(p)});`);M6.default.writeFileSync(Km.default.join(i,"user.js"),d.join(`
`))}let u=["-no-remote"];return o?u.push("-headless"):(u.push("-wait-for-browser"),u.push("-foreground")),u.push("-profile",i),u.push("-juggler-pipe"),u.push(...n),t?u.push("about:blank"):u.push("-silent"),u}};_d.Firefox=bk});var Sk=w(gd=>{(function(r,e){typeof define=="function"&&define.amd?define(["exports"],e):e(typeof gd!="undefined"?gd:r)})(gd,function(r){var e=function(S,j,X){return S>=j&&S<=X};function t(S){return e(S,48,57)}function i(S){return t(S)||e(S,65,70)||e(S,97,102)}function n(S){return e(S,65,90)}function s(S){return e(S,97,122)}function o(S){return n(S)||s(S)}function c(S){return S>=128}function l(S){return o(S)||c(S)||S==95}function u(S){return l(S)||t(S)||S==45}function d(S){return e(S,0,8)||S==11||e(S,14,31)||S==127}function h(S){return S==10}function p(S){return h(S)||S==9||S==32}function f(S){return h(S)||isNaN(S)}var _=1114111,m=function(S){this.message=S};m.prototype=new Error,m.prototype.name="InvalidCharacterError";function g(S){for(var j=[],X=0;X<S.length;X++){var E=S.charCodeAt(X);if(E==13&&S.charCodeAt(X+1)==10&&(E=10,X++),(E==13||E==12)&&(E=10),E==0&&(E=65533),e(E,55296,56319)&&e(S.charCodeAt(X+1),56320,57343)){var G=E-55296,ye=S.charCodeAt(X+1)-56320;E=Math.pow(2,16)+G*Math.pow(2,10)+ye,X++}j.push(E)}return j}function v(S){if(S<=65535)return String.fromCharCode(S);S-=Math.pow(2,16);var j=Math.floor(S/Math.pow(2,10))+55296,X=S%Math.pow(2,10)+56320;return String.fromCharCode(j)+String.fromCharCode(X)}function x(S){S=g(S);for(var j=-1,X=[],E,G=0,ye=0,Te=0,se=function(){G+=1,Te=ye,ye=0},U={line:G,column:ye},te=function(q){return q>=S.length?-1:S[q]},I=function(q){if(q===void 0&&(q=1),q>3)throw"Spec Error: no more than three codepoints of lookahead.";return te(j+q)},z=function(q){return q===void 0&&(q=1),j+=q,E=te(j),h(E)?se():ye+=q,!0},ne=function(){return j-=1,h(E)?(G-=1,ye=Te):ye-=1,U.line=G,U.column=ye,!0},_e=function(q){return q===void 0&&(q=E),q==-1},xe=function(){},ie=function(){return console.log("Parse error at index "+j+", processing codepoint 0x"+E.toString(16)+"."),!0},ke=function(){if(Xe(),z(),p(E)){for(;p(I());)z();return new F}else{if(E==34)return fr();if(E==35)if(u(I())||Tr(I(1),I(2))){var q=new $;return _r(I(1),I(2),I(3))&&(q.type="id"),q.value=gr(),q}else return new ce(E);else return E==36?I()==61?(z(),new Y):new ce(E):E==39?fr():E==40?new ae:E==41?new Q:E==42?I()==61?(z(),new he):new ce(E):E==43?Ar()?(ne(),Le()):new ce(E):E==44?new W:E==45?Ar()?(ne(),Le()):I(1)==45&&I(2)==62?(z(2),new C):Vn()?(ne(),it()):new ce(E):E==46?Ar()?(ne(),Le()):new ce(E):E==58?new A:E==59?new D:E==60?I(1)==33&&I(2)==45&&I(3)==45?(z(3),new y):new ce(E):E==64?_r(I(1),I(2),I(3))?new de(gr()):new ce(E):E==91?new N:E==92?mr()?(ne(),it()):(ie(),new ce(E)):E==93?new L:E==94?I()==61?(z(),new re):new ce(E):E==123?new M:E==124?I()==61?(z(),new J):I()==124?(z(),new P):new ce(E):E==125?new K:E==126?I()==61?(z(),new R):new ce(E):t(E)?(ne(),Le()):l(E)?(ne(),it()):_e()?new Z:new ce(E)}},Xe=function(){for(;I(1)==47&&I(2)==42;)for(z(2);;)if(z(),E==42&&I()==47){z();break}else if(_e()){ie();return}},Le=function(){var q=Yi();if(_r(I(1),I(2),I(3))){var me=new Je;return me.value=q.value,me.repr=q.repr,me.type=q.type,me.unit=gr(),me}else if(I()==37){z();var me=new le;return me.value=q.value,me.repr=q.repr,me}else{var me=new oe;return me.value=q.value,me.repr=q.repr,me.type=q.type,me}},it=function(){var q=gr();if(q.toLowerCase()=="url"&&I()==40){for(z();p(I(1))&&p(I(2));)z();return I()==34||I()==39?new pe(q):p(I())&&(I(2)==34||I(2)==39)?new pe(q):Or()}else return I()==40?(z(),new pe(q)):new fe(q)},fr=function(q){q===void 0&&(q=E);for(var me="";z();){if(E==q||_e())return new B(me);if(h(E))return ie(),ne(),new T;E==92?_e(I())?xe():h(I())?z():me+=v(er()):me+=v(E)}},Or=function(){for(var q=new be("");p(I());)z();if(_e(I()))return q;for(;z();){if(E==41||_e())return q;if(p(E)){for(;p(I());)z();return I()==41||_e(I())?(z(),q):(Gn(),new k)}else{if(E==34||E==39||E==40||d(E))return ie(),Gn(),new k;if(E==92)if(mr())q.value+=v(er());else return ie(),Gn(),new k;else q.value+=v(E)}}},er=function(){if(z(),i(E)){for(var q=[E],me=0;me<5&&i(I());me++)z(),q.push(E);p(I())&&z();var Ct=parseInt(q.map(function(Qi){return String.fromCharCode(Qi)}).join(""),16);return Ct>_&&(Ct=65533),Ct}else return _e()?65533:E},Tr=function(q,me){return!(q!=92||h(me))},mr=function(){return Tr(E,I())},_r=function(q,me,Ct){return q==45?l(me)||me==45||Tr(me,Ct):l(q)?!0:q==92?Tr(q,me):!1},Vn=function(){return _r(E,I(1),I(2))},Xi=function(q,me,Ct){return q==43||q==45?!!(t(me)||me==46&&t(Ct)):q==46?!!t(me):!!t(q)},Ar=function(){return Xi(E,I(1),I(2))},gr=function(){for(var q="";z();)if(u(E))q+=v(E);else if(mr())q+=v(er());else return ne(),q},Yi=function(){var q=[],me="integer";for((I()==43||I()==45)&&(z(),q+=v(E));t(I());)z(),q+=v(E);if(I(1)==46&&t(I(2)))for(z(),q+=v(E),z(),q+=v(E),me="number";t(I());)z(),q+=v(E);var Ct=I(1),Qi=I(2),Zi=I(3);if((Ct==69||Ct==101)&&t(Qi))for(z(),q+=v(E),z(),q+=v(E),me="number";t(I());)z(),q+=v(E);else if((Ct==69||Ct==101)&&(Qi==43||Qi==45)&&t(Zi))for(z(),q+=v(E),z(),q+=v(E),z(),q+=v(E),me="number";t(I());)z(),q+=v(E);var xo=yo(q);return{type:me,value:xo,repr:q}},yo=function(q){return+q},Gn=function(){for(;z();){if(E==41||_e())return;mr()&&er(),xe()}},bo=0;!_e(I());)if(X.push(ke()),bo++,bo>S.length*2)return"I'm infinite-looping!";return X}function b(){throw"Abstract Base Class"}b.prototype.toJSON=function(){return{token:this.tokenType}},b.prototype.toString=function(){return this.tokenType},b.prototype.toSource=function(){return""+this};function T(){return this}T.prototype=Object.create(b.prototype),T.prototype.tokenType="BADSTRING";function k(){return this}k.prototype=Object.create(b.prototype),k.prototype.tokenType="BADURL";function F(){return this}F.prototype=Object.create(b.prototype),F.prototype.tokenType="WHITESPACE",F.prototype.toString=function(){return"WS"},F.prototype.toSource=function(){return" "};function y(){return this}y.prototype=Object.create(b.prototype),y.prototype.tokenType="CDO",y.prototype.toSource=function(){return"<!--"};function C(){return this}C.prototype=Object.create(b.prototype),C.prototype.tokenType="CDC",C.prototype.toSource=function(){return"-->"};function A(){return this}A.prototype=Object.create(b.prototype),A.prototype.tokenType=":";function D(){return this}D.prototype=Object.create(b.prototype),D.prototype.tokenType=";";function W(){return this}W.prototype=Object.create(b.prototype),W.prototype.tokenType=",";function V(){throw"Abstract Base Class"}V.prototype=Object.create(b.prototype);function M(){return this.value="{",this.mirror="}",this}M.prototype=Object.create(V.prototype),M.prototype.tokenType="{";function K(){return this.value="}",this.mirror="{",this}K.prototype=Object.create(V.prototype),K.prototype.tokenType="}";function N(){return this.value="[",this.mirror="]",this}N.prototype=Object.create(V.prototype),N.prototype.tokenType="[";function L(){return this.value="]",this.mirror="[",this}L.prototype=Object.create(V.prototype),L.prototype.tokenType="]";function ae(){return this.value="(",this.mirror=")",this}ae.prototype=Object.create(V.prototype),ae.prototype.tokenType="(";function Q(){return this.value=")",this.mirror="(",this}Q.prototype=Object.create(V.prototype),Q.prototype.tokenType=")";function R(){return this}R.prototype=Object.create(b.prototype),R.prototype.tokenType="~=";function J(){return this}J.prototype=Object.create(b.prototype),J.prototype.tokenType="|=";function re(){return this}re.prototype=Object.create(b.prototype),re.prototype.tokenType="^=";function Y(){return this}Y.prototype=Object.create(b.prototype),Y.prototype.tokenType="$=";function he(){return this}he.prototype=Object.create(b.prototype),he.prototype.tokenType="*=";function P(){return this}P.prototype=Object.create(b.prototype),P.prototype.tokenType="||";function Z(){return this}Z.prototype=Object.create(b.prototype),Z.prototype.tokenType="EOF",Z.prototype.toSource=function(){return""};function ce(S){return this.value=v(S),this}ce.prototype=Object.create(b.prototype),ce.prototype.tokenType="DELIM",ce.prototype.toString=function(){return"DELIM("+this.value+")"},ce.prototype.toJSON=function(){var S=this.constructor.prototype.constructor.prototype.toJSON.call(this);return S.value=this.value,S},ce.prototype.toSource=function(){return this.value=="\\"?`\\
`:this.value};function ge(){throw"Abstract Base Class"}ge.prototype=Object.create(b.prototype),ge.prototype.ASCIIMatch=function(S){return this.value.toLowerCase()==S.toLowerCase()},ge.prototype.toJSON=function(){var S=this.constructor.prototype.constructor.prototype.toJSON.call(this);return S.value=this.value,S};function fe(S){this.value=S}fe.prototype=Object.create(ge.prototype),fe.prototype.tokenType="IDENT",fe.prototype.toString=function(){return"IDENT("+this.value+")"},fe.prototype.toSource=function(){return O(this.value)};function pe(S){this.value=S,this.mirror=")"}pe.prototype=Object.create(ge.prototype),pe.prototype.tokenType="FUNCTION",pe.prototype.toString=function(){return"FUNCTION("+this.value+")"},pe.prototype.toSource=function(){return O(this.value)+"("};function de(S){this.value=S}de.prototype=Object.create(ge.prototype),de.prototype.tokenType="AT-KEYWORD",de.prototype.toString=function(){return"AT("+this.value+")"},de.prototype.toSource=function(){return"@"+O(this.value)};function $(S){this.value=S,this.type="unrestricted"}$.prototype=Object.create(ge.prototype),$.prototype.tokenType="HASH",$.prototype.toString=function(){return"HASH("+this.value+")"},$.prototype.toJSON=function(){var S=this.constructor.prototype.constructor.prototype.toJSON.call(this);return S.value=this.value,S.type=this.type,S},$.prototype.toSource=function(){return this.type=="id"?"#"+O(this.value):"#"+ee(this.value)};function B(S){this.value=S}B.prototype=Object.create(ge.prototype),B.prototype.tokenType="STRING",B.prototype.toString=function(){return'"'+ue(this.value)+'"'};function be(S){this.value=S}be.prototype=Object.create(ge.prototype),be.prototype.tokenType="URL",be.prototype.toString=function(){return"URL("+this.value+")"},be.prototype.toSource=function(){return'url("'+ue(this.value)+'")'};function oe(){this.value=null,this.type="integer",this.repr=""}oe.prototype=Object.create(b.prototype),oe.prototype.tokenType="NUMBER",oe.prototype.toString=function(){return this.type=="integer"?"INT("+this.value+")":"NUMBER("+this.value+")"},oe.prototype.toJSON=function(){var S=this.constructor.prototype.constructor.prototype.toJSON.call(this);return S.value=this.value,S.type=this.type,S.repr=this.repr,S},oe.prototype.toSource=function(){return this.repr};function le(){this.value=null,this.repr=""}le.prototype=Object.create(b.prototype),le.prototype.tokenType="PERCENTAGE",le.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},le.prototype.toJSON=function(){var S=this.constructor.prototype.constructor.prototype.toJSON.call(this);return S.value=this.value,S.repr=this.repr,S},le.prototype.toSource=function(){return this.repr+"%"};function Je(){this.value=null,this.type="integer",this.repr="",this.unit=""}Je.prototype=Object.create(b.prototype),Je.prototype.tokenType="DIMENSION",Je.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},Je.prototype.toJSON=function(){var S=this.constructor.prototype.constructor.prototype.toJSON.call(this);return S.value=this.value,S.type=this.type,S.repr=this.repr,S.unit=this.unit,S},Je.prototype.toSource=function(){var S=this.repr,j=O(this.unit);return j[0].toLowerCase()=="e"&&(j[1]=="-"||e(j.charCodeAt(1),48,57))&&(j="\\65 "+j.slice(1,j.length)),S+j};function O(S){S=""+S;for(var j="",X=S.charCodeAt(0),E=0;E<S.length;E++){var G=S.charCodeAt(E);if(G==0)throw new m("Invalid character: the input contains U+0000.");e(G,1,31)||G==127||E==0&&e(G,48,57)||E==1&&e(G,48,57)&&X==45?j+="\\"+G.toString(16)+" ":G>=128||G==45||G==95||e(G,48,57)||e(G,65,90)||e(G,97,122)?j+=S[E]:j+="\\"+S[E]}return j}function ee(S){S=""+S;for(var j="",X=S.charCodeAt(0),E=0;E<S.length;E++){var G=S.charCodeAt(E);if(G==0)throw new m("Invalid character: the input contains U+0000.");G>=128||G==45||G==95||e(G,48,57)||e(G,65,90)||e(G,97,122)?j+=S[E]:j+="\\"+G.toString(16)+" "}return j}function ue(S){S=""+S;for(var j="",X=0;X<S.length;X++){var E=S.charCodeAt(X);if(E==0)throw new m("Invalid character: the input contains U+0000.");e(E,1,31)||E==127?j+="\\"+E.toString(16)+" ":E==34||E==92?j+="\\"+S[X]:j+=S[X]}return j}r.tokenize=x,r.IdentToken=fe,r.FunctionToken=pe,r.AtKeywordToken=de,r.HashToken=$,r.StringToken=B,r.BadStringToken=T,r.URLToken=be,r.BadURLToken=k,r.DelimToken=ce,r.NumberToken=oe,r.PercentageToken=le,r.DimensionToken=Je,r.IncludeMatchToken=R,r.DashMatchToken=J,r.PrefixMatchToken=re,r.SuffixMatchToken=Y,r.SubstringMatchToken=he,r.ColumnToken=P,r.WhitespaceToken=F,r.CDOToken=y,r.CDCToken=C,r.ColonToken=A,r.SemicolonToken=D,r.CommaToken=W,r.OpenParenToken=ae,r.CloseParenToken=Q,r.OpenSquareToken=N,r.CloseSquareToken=L,r.OpenCurlyToken=M,r.CloseCurlyToken=K,r.EOFToken=Z,r.CSSParserToken=b,r.GroupingToken=V})});var kk=w(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.parseCSS=q6;wd.serializeSelector=Ck;var Ce=N6(Sk());function Ek(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ek=function(i){return i?t:e})(r)}function N6(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Ek(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function q6(r,e){let t;try{t=Ce.tokenize(r),t[t.length-1]instanceof Ce.EOFToken||t.push(new Ce.EOFToken)}catch(y){let C=y.message+` while parsing selector "${r}"`,A=(y.stack||"").indexOf(y.message);throw A!==-1&&(y.stack=y.stack.substring(0,A)+C+y.stack.substring(A+y.message.length)),y.message=C,y}let i=t.find(y=>y instanceof Ce.AtKeywordToken||y instanceof Ce.BadStringToken||y instanceof Ce.BadURLToken||y instanceof Ce.ColumnToken||y instanceof Ce.CDOToken||y instanceof Ce.CDCToken||y instanceof Ce.SemicolonToken||y instanceof Ce.OpenCurlyToken||y instanceof Ce.CloseCurlyToken||y instanceof Ce.URLToken||y instanceof Ce.PercentageToken);if(i)throw new Error(`Unsupported token "${i.toSource()}" while parsing selector "${r}"`);let n=0,s=new Set;function o(){return new Error(`Unexpected token "${t[n].toSource()}" while parsing selector "${r}"`)}function c(){for(;t[n]instanceof Ce.WhitespaceToken;)n++}function l(y=n){return t[y]instanceof Ce.IdentToken}function u(y=n){return t[y]instanceof Ce.StringToken}function d(y=n){return t[y]instanceof Ce.NumberToken}function h(y=n){return t[y]instanceof Ce.CommaToken}function p(y=n){return t[y]instanceof Ce.CloseParenToken}function f(y=n){return t[y]instanceof Ce.DelimToken&&t[y].value==="*"}function _(y=n){return t[y]instanceof Ce.EOFToken}function m(y=n){return t[y]instanceof Ce.DelimToken&&[">","+","~"].includes(t[y].value)}function g(y=n){return h(y)||p(y)||_(y)||m(y)||t[y]instanceof Ce.WhitespaceToken}function v(){let y=[x()];for(;c(),!!h();)n++,y.push(x());return y}function x(){return c(),d()||u()?t[n++].value:b()}function b(){c();let y={simples:[{selector:T(),combinator:""}]};for(;;){if(c(),m())y.simples[y.simples.length-1].combinator=t[n++].value,c();else if(g())break;y.simples.push({combinator:"",selector:T()})}return y}function T(){let y="",C=[];for(;!g();)if(l()||f())y+=t[n++].toSource();else if(t[n]instanceof Ce.HashToken)y+=t[n++].toSource();else if(t[n]instanceof Ce.DelimToken&&t[n].value===".")if(n++,l())y+="."+t[n++].toSource();else throw o();else if(t[n]instanceof Ce.ColonToken)if(n++,l())if(!e.has(t[n].value.toLowerCase()))y+=":"+t[n++].toSource();else{let A=t[n++].value.toLowerCase();C.push({name:A,args:[]}),s.add(A)}else if(t[n]instanceof Ce.FunctionToken){let A=t[n++].value.toLowerCase();if(e.has(A)?(C.push({name:A,args:v()}),s.add(A)):y+=`:${A}(${k()})`,c(),!p())throw o();n++}else throw o();else if(t[n]instanceof Ce.OpenSquareToken){for(y+="[",n++;!(t[n]instanceof Ce.CloseSquareToken)&&!_();)y+=t[n++].toSource();if(!(t[n]instanceof Ce.CloseSquareToken))throw o();y+="]",n++}else throw o();if(!y&&!C.length)throw o();return{css:y||void 0,functions:C}}function k(){let y="";for(;!p()&&!_();)y+=t[n++].toSource();return y}let F=v();if(!_())throw new Error(`Error while parsing selector "${r}"`);if(F.some(y=>typeof y!="object"||!("simples"in y)))throw new Error(`Error while parsing selector "${r}"`);return{selector:F,names:Array.from(s)}}function Ck(r){return r.map(e=>typeof e=="string"?`"${e}"`:typeof e=="number"?String(e):e.simples.map(({selector:t,combinator:i})=>{let n=t.css||"";return n=n+t.functions.map(s=>`:${s.name}(${Ck(s.args)})`).join(""),i&&(n+=" "+i),n}).join(" ")).join(", ")}});var Ok=w(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.parseSelector=B6;Ba.customCSSNames=void 0;var L6=kk(),Pk=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);Ba.customCSSNames=Pk;function B6(r){let e=H6(r),t=e.parts.map(i=>{if(i.name==="css"||i.name==="css:light"){i.name==="css:light"&&(i.body=":light("+i.body+")");let n=(0,L6.parseCSS)(i.body,Pk);return{name:"css",body:n.selector}}return i});return{selector:r,capture:e.capture,parts:t}}function H6(r){let e=0,t,i=0,n={parts:[]},s=()=>{let o=r.substring(i,e).trim(),c=o.indexOf("="),l,u;c!==-1&&o.substring(0,c).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(l=o.substring(0,c).trim(),u=o.substring(c+1)):o.length>1&&o[0]==='"'&&o[o.length-1]==='"'||o.length>1&&o[0]==="'"&&o[o.length-1]==="'"?(l="text",u=o):/^\(*\/\//.test(o)||o.startsWith("..")?(l="xpath",u=o):(l="css",u=o);let d=!1;if(l[0]==="*"&&(d=!0,l=l.substring(1)),n.parts.push({name:l,body:u}),d){if(n.capture!==void 0)throw new Error("Only one of the selectors can capture using * modifier");n.capture=n.parts.length-1}};if(!r.includes(">>"))return e=r.length,s(),n;for(;e<r.length;){let o=r[e];o==="\\"&&e+1<r.length?e+=2:o===t?(t=void 0,e++):!t&&(o==='"'||o==="'"||o==="`")?(t=o,e++):!t&&o===">"&&r[e+1]===">"?(s(),e+=2,i=e):e++}return s(),n}});var Jm=w(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.Selectors=void 0;var j6=Ok(),W6=H(),Tk=class{constructor(){this._builtinEngines=void 0,this._builtinEnginesInMainWorld=void 0,this._engines=void 0,this.guid=`selectors@${(0,W6.createGuid)()}`,this._builtinEngines=new Set(["css","css:light","xpath","xpath:light","_react","_vue","text","text:light","id","id:light","data-testid","data-testid:light","data-test-id","data-test-id:light","data-test","data-test:light","nth","visible"]),this._builtinEnginesInMainWorld=new Set(["_react","_vue"]),this._engines=new Map}async register(e,t,i=!1){if(!e.match(/^[a-zA-Z_0-9-]+$/))throw new Error("Selector engine name may only contain [a-zA-Z0-9_] characters");if(this._builtinEngines.has(e)||e==="zs"||e==="zs:light")throw new Error(`"${e}" is a predefined selector engine`);if(this._engines.has(e))throw new Error(`"${e}" selector engine has been already registered`);this._engines.set(e,{source:t,contentScript:i})}unregisterAll(){this._engines.clear()}async query(e,t,i,n){let s=e._page.parseSelector(t,i),l=await(await(await e._context(s.world)).injectedScript()).evaluateHandle((h,{parsed:p,scope:f,strict:_})=>h.querySelector(p,f||document,_),{parsed:s.parsed,scope:n,strict:s.strict}),u=l.asElement();if(!u)return l.dispose(),null;let d=await e._mainContext();return this._adoptIfNeeded(u,d)}async _queryArray(e,t,i){let n=this.parseSelector(t,!1);return await(await(await e._mainContext()).injectedScript()).evaluateHandle((l,{parsed:u,scope:d})=>l.querySelectorAll(u,d||document),{parsed:n.parsed,scope:i})}async _queryAll(e,t,i,n){let s=this.parseSelector(t,!1),o=await e._context(s.world),l=await(await o.injectedScript()).evaluateHandle((p,{parsed:f,scope:_})=>p.querySelectorAll(f,_||document),{parsed:s.parsed,scope:i}),u=await l.getProperties();l.dispose();let d=n?await e._mainContext():o,h=[];for(let p of u.values()){let f=p.asElement();f?h.push(this._adoptIfNeeded(f,d)):p.dispose()}return Promise.all(h)}async _adoptIfNeeded(e,t){if(e._context===t)return e;let i=e._page._delegate.adoptElementHandle(e,t);return e.dispose(),i}parseSelector(e,t){let i=(0,j6.parseSelector)(e),n=!1;for(let s of i.parts){let o=this._engines.get(s.name);if(!o&&!this._builtinEngines.has(s.name))throw new Error(`Unknown engine "${s.name}" while parsing selector ${e}`);o&&!o.contentScript&&(n=!0),this._builtinEnginesInMainWorld.has(s.name)&&(n=!0)}return{parsed:i,selector:e,world:n?"main":"utility",strict:t}}};vd.Selectors=Tk});var Ha=w(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.createProtocolError=Dk;cr.WKSession=cr.WKConnection=cr.kPageProxyMessageReceived=cr.kBrowserCloseMessageId=void 0;var $6=require("events"),z6=H(),Ak=It(),U6=ze(),V6=kt(),G6=Mt(),Xm=di(),Mk=-9999;cr.kBrowserCloseMessageId=Mk;var Ik="kPageProxyMessageReceived";cr.kPageProxyMessageReceived=Ik;var Fk=class{constructor(e,t,i,n){this._transport=void 0,this._onDisconnect=void 0,this._protocolLogger=void 0,this._browserLogsCollector=void 0,this._lastId=0,this._closed=!1,this.browserSession=void 0,this._transport=e,this._transport.onmessage=this._dispatchMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this._onDisconnect=t,this._protocolLogger=i,this._browserLogsCollector=n,this.browserSession=new Ym(this,"",G6.kBrowserClosedError,s=>{this.rawSend(s)})}nextMessageId(){return++this._lastId}rawSend(e){this._protocolLogger("send",e),this._transport.send(e)}_dispatchMessage(e){if(this._protocolLogger("receive",e),e.id!==Mk){if(e.pageProxyId){let t={message:e,pageProxyId:e.pageProxyId};this.browserSession.dispatchMessage({method:Ik,params:t});return}this.browserSession.dispatchMessage(e)}}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0,this.browserSession.dispose(!0),this._onDisconnect()}isClosed(){return this._closed}close(){this._closed||this._transport.close()}};cr.WKConnection=Fk;var Ym=class extends $6.EventEmitter{constructor(e,t,i,n){super();this.connection=void 0,this.errorText=void 0,this.sessionId=void 0,this._disposed=!1,this._rawSend=void 0,this._callbacks=new Map,this._crashed=!1,this.on=void 0,this.addListener=void 0,this.off=void 0,this.removeListener=void 0,this.once=void 0,this.setMaxListeners(0),this.connection=e,this.sessionId=t,this._rawSend=n,this.errorText=i,this.on=super.on,this.off=super.removeListener,this.addListener=super.addListener,this.removeListener=super.removeListener,this.once=super.once}async send(e,t){if(this._crashed)throw new Xm.ProtocolError(!0,"Target crashed");if(this._disposed)throw new Xm.ProtocolError(!0,"Target closed");let i=this.connection.nextMessageId(),n={id:i,method:e,params:t};return this._rawSend(n),new Promise((s,o)=>{this._callbacks.set(i,{resolve:s,reject:o,error:new Xm.ProtocolError(!1),method:e})})}sendMayFail(e,t){return this.send(e,t).catch(i=>U6.debugLogger.log("error",i))}markAsCrashed(){this._crashed=!0}isDisposed(){return this._disposed}dispose(e){e&&(this.errorText="Browser closed."+V6.helper.formatBrowserLogs(this.connection._browserLogsCollector.recentLogs()));for(let t of this._callbacks.values())t.error.sessionClosed=!0,t.reject((0,Ak.rewriteErrorMessage)(t.error,this.errorText));this._callbacks.clear(),this._disposed=!0}dispatchMessage(e){if(e.id&&this._callbacks.has(e.id)){let t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(Dk(t.error,t.method,e.error)):t.resolve(e.result)}else e.id&&!e.error?(0,z6.assert)(this.isDisposed()):Promise.resolve().then(()=>this.emit(e.method,e.params))}};cr.WKSession=Ym;function Dk(r,e,t){let i=`Protocol error (${e}): ${t.message}`;return"data"in t&&(i+=` ${JSON.stringify(t.data)}`),(0,Ak.rewriteErrorMessage)(r,i)}});var qk=w((R7,yd)=>{var Rk=Rk||function(r){return Buffer.from(r).toString("base64")};function K6(r){var e=this,t=Math.round,i=Math.floor,n=new Array(64),s=new Array(64),o=new Array(64),c=new Array(64),l,u,d,h,p=new Array(65535),f=new Array(65535),_=new Array(64),m=new Array(64),g=[],v=0,x=7,b=new Array(64),T=new Array(64),k=new Array(64),F=new Array(256),y=new Array(2048),C,A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],K=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(O){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var S=i((ee[ue]*O+50)/100);S<1?S=1:S>255&&(S=255),n[A[ue]]=S}for(var j=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],X=0;X<64;X++){var E=i((j[X]*O+50)/100);E<1?E=1:E>255&&(E=255),s[A[X]]=E}for(var G=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ye=0,Te=0;Te<8;Te++)for(var se=0;se<8;se++)o[ye]=1/(n[A[ye]]*G[Te]*G[se]*8),c[ye]=1/(s[A[ye]]*G[Te]*G[se]*8),ye++}function R(O,ee){for(var ue=0,S=0,j=new Array,X=1;X<=16;X++){for(var E=1;E<=O[X];E++)j[ee[S]]=[],j[ee[S]][0]=ue,j[ee[S]][1]=X,S++,ue++;ue*=2}return j}function J(){l=R(D,W),u=R(K,N),d=R(V,M),h=R(L,ae)}function re(){for(var O=1,ee=2,ue=1;ue<=15;ue++){for(var S=O;S<ee;S++)f[32767+S]=ue,p[32767+S]=[],p[32767+S][1]=ue,p[32767+S][0]=S;for(var j=-(ee-1);j<=-O;j++)f[32767+j]=ue,p[32767+j]=[],p[32767+j][1]=ue,p[32767+j][0]=ee-1+j;O<<=1,ee<<=1}}function Y(){for(var O=0;O<256;O++)y[O]=19595*O,y[O+256>>0]=38470*O,y[O+512>>0]=7471*O+32768,y[O+768>>0]=-11059*O,y[O+1024>>0]=-21709*O,y[O+1280>>0]=32768*O+8421375,y[O+1536>>0]=-27439*O,y[O+1792>>0]=-5329*O}function he(O){for(var ee=O[0],ue=O[1]-1;ue>=0;)ee&1<<ue&&(v|=1<<x),ue--,x--,x<0&&(v==255?(P(255),P(0)):P(v),x=7,v=0)}function P(O){g.push(O)}function Z(O){P(O>>8&255),P(O&255)}function ce(O,ee){var ue,S,j,X,E,G,ye,Te,se=0,U,te=8,I=64;for(U=0;U<te;++U){ue=O[se],S=O[se+1],j=O[se+2],X=O[se+3],E=O[se+4],G=O[se+5],ye=O[se+6],Te=O[se+7];var z=ue+Te,ne=ue-Te,_e=S+ye,xe=S-ye,ie=j+G,ke=j-G,Xe=X+E,Le=X-E,it=z+Xe,fr=z-Xe,Or=_e+ie,er=_e-ie;O[se]=it+Or,O[se+4]=it-Or;var Tr=(er+fr)*.707106781;O[se+2]=fr+Tr,O[se+6]=fr-Tr,it=Le+ke,Or=ke+xe,er=xe+ne;var mr=(it-er)*.382683433,_r=.5411961*it+mr,Vn=1.306562965*er+mr,Xi=Or*.707106781,Ar=ne+Xi,gr=ne-Xi;O[se+5]=gr+_r,O[se+3]=gr-_r,O[se+1]=Ar+Vn,O[se+7]=Ar-Vn,se+=8}for(se=0,U=0;U<te;++U){ue=O[se],S=O[se+8],j=O[se+16],X=O[se+24],E=O[se+32],G=O[se+40],ye=O[se+48],Te=O[se+56];var Yi=ue+Te,yo=ue-Te,Gn=S+ye,bo=S-ye,q=j+G,me=j-G,Ct=X+E,Qi=X-E,Zi=Yi+Ct,xo=Yi-Ct,pc=Gn+q,fc=Gn-q;O[se]=Zi+pc,O[se+32]=Zi-pc;var Sg=(fc+xo)*.707106781;O[se+16]=xo+Sg,O[se+48]=xo-Sg,Zi=Qi+me,pc=me+bo,fc=bo+yo;var Eg=(Zi-fc)*.382683433,Cg=.5411961*Zi+Eg,kg=1.306562965*fc+Eg,Pg=pc*.707106781,Og=yo+Pg,Tg=yo-Pg;O[se+40]=Tg+Cg,O[se+24]=Tg-Cg,O[se+8]=Og+kg,O[se+56]=Og-kg,se++}var mc;for(U=0;U<I;++U)mc=O[U]*ee[U],_[U]=mc>0?mc+.5|0:mc-.5|0;return _}function ge(){Z(65504),Z(16),P(74),P(70),P(73),P(70),P(0),P(1),P(1),P(0),Z(1),Z(1),P(0),P(0)}function fe(O){if(!!O){Z(65505),O[0]===69&&O[1]===120&&O[2]===105&&O[3]===102?Z(O.length+2):(Z(O.length+5+2),P(69),P(120),P(105),P(102),P(0));for(var ee=0;ee<O.length;ee++)P(O[ee])}}function pe(O,ee){Z(65472),Z(17),P(8),Z(ee),Z(O),P(3),P(1),P(17),P(0),P(2),P(17),P(1),P(3),P(17),P(1)}function de(){Z(65499),Z(132),P(0);for(var O=0;O<64;O++)P(n[O]);P(1);for(var ee=0;ee<64;ee++)P(s[ee])}function $(){Z(65476),Z(418),P(0);for(var O=0;O<16;O++)P(D[O+1]);for(var ee=0;ee<=11;ee++)P(W[ee]);P(16);for(var ue=0;ue<16;ue++)P(V[ue+1]);for(var S=0;S<=161;S++)P(M[S]);P(1);for(var j=0;j<16;j++)P(K[j+1]);for(var X=0;X<=11;X++)P(N[X]);P(17);for(var E=0;E<16;E++)P(L[E+1]);for(var G=0;G<=161;G++)P(ae[G])}function B(){Z(65498),Z(12),P(3),P(1),P(0),P(2),P(17),P(3),P(17),P(0),P(63),P(0)}function be(O,ee,ue,S,j){for(var X=j[0],E=j[240],G,ye=16,Te=63,se=64,U=ce(O,ee),te=0;te<se;++te)m[A[te]]=U[te];var I=m[0]-ue;ue=m[0],I==0?he(S[0]):(G=32767+I,he(S[f[G]]),he(p[G]));for(var z=63;z>0&&m[z]==0;z--);if(z==0)return he(X),ue;for(var ne=1,_e;ne<=z;){for(var xe=ne;m[ne]==0&&ne<=z;++ne);var ie=ne-xe;if(ie>=ye){_e=ie>>4;for(var ke=1;ke<=_e;++ke)he(E);ie=ie&15}G=32767+m[ne],he(j[(ie<<4)+f[G]]),he(p[G]),ne++}return z!=Te&&he(X),ue}function oe(){for(var O=String.fromCharCode,ee=0;ee<256;ee++)F[ee]=O(ee)}this.encode=function(O,ee){var ue=new Date().getTime();ee&&le(ee),g=new Array,v=0,x=7,Z(65496),ge(),fe(O.exifBuffer),de(),pe(O.width,O.height),$(),B();var S=0,j=0,X=0;v=0,x=7,this.encode.displayName="_encode_";for(var E=O.data,G=O.width,ye=O.height,Te=G*4,se=G*3,U,te=0,I,z,ne,_e,xe,ie,ke,Xe;te<ye;){for(U=0;U<Te;){for(_e=Te*te+U,xe=_e,ie=-1,ke=0,Xe=0;Xe<64;Xe++)ke=Xe>>3,ie=(Xe&7)*4,xe=_e+ke*Te+ie,te+ke>=ye&&(xe-=Te*(te+1+ke-ye)),U+ie>=Te&&(xe-=U+ie-Te+4),I=E[xe++],z=E[xe++],ne=E[xe++],b[Xe]=(y[I]+y[z+256>>0]+y[ne+512>>0]>>16)-128,T[Xe]=(y[I+768>>0]+y[z+1024>>0]+y[ne+1280>>0]>>16)-128,k[Xe]=(y[I+1280>>0]+y[z+1536>>0]+y[ne+1792>>0]>>16)-128;S=be(b,o,S,l,d),j=be(T,c,j,u,h),X=be(k,c,X,u,h),U+=32}te+=8}if(x>=0){var Le=[];Le[1]=x+1,Le[0]=(1<<x+1)-1,he(Le)}if(Z(65497),typeof yd=="undefined")return new Uint8Array(g);return Buffer.from(g);var it,fr};function le(O){if(O<=0&&(O=1),O>100&&(O=100),C!=O){var ee=0;O<50?ee=Math.floor(5e3/O):ee=Math.floor(200-O*2),Q(ee),C=O}}function Je(){var O=new Date().getTime();r||(r=50),oe(),J(),re(),Y(),le(r);var ee=new Date().getTime()-O}Je()}typeof yd!="undefined"?yd.exports=Nk:typeof window!="undefined"&&(window["jpeg-js"]=window["jpeg-js"]||{},window["jpeg-js"].encode=Nk);function Nk(r,e){typeof e=="undefined"&&(e=50);var t=new K6(e),i=t.encode(r,e);return{data:i,width:r.width,height:r.height}}});var Bk=w((N7,Zm)=>{var Qm=function(){"use strict";var e=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),t=4017,i=799,n=3406,s=2276,o=1567,c=3784,l=5793,u=2896;function d(){}function h(x,b){for(var T=0,k=[],F,y,C=16;C>0&&!x[C-1];)C--;k.push({children:[],index:0});var A=k[0],D;for(F=0;F<C;F++){for(y=0;y<x[F];y++){for(A=k.pop(),A.children[A.index]=b[T];A.index>0;){if(k.length===0)throw new Error("Could not recreate Huffman Table");A=k.pop()}for(A.index++,k.push(A);k.length<=F;)k.push(D={children:[],index:0}),A.children[A.index]=D.children,A=D;T++}F+1<C&&(k.push(D={children:[],index:0}),A.children[A.index]=D.children,A=D)}return k[0].children}function p(x,b,T,k,F,y,C,A,D,W){var V=T.precision,M=T.samplesPerLine,K=T.scanLines,N=T.mcusPerLine,L=T.progressive,ae=T.maxH,Q=T.maxV,R=b,J=0,re=0;function Y(){if(re>0)return re--,J>>re&1;if(J=x[b++],J==255){var U=x[b++];if(U)throw new Error("unexpected marker: "+(J<<8|U).toString(16))}return re=7,J>>>7}function he(U){for(var te=U,I;(I=Y())!==null;){if(te=te[I],typeof te=="number")return te;if(typeof te!="object")throw new Error("invalid huffman sequence")}return null}function P(U){for(var te=0;U>0;){var I=Y();if(I===null)return;te=te<<1|I,U--}return te}function Z(U){var te=P(U);return te>=1<<U-1?te:te+(-1<<U)+1}function ce(U,te){var I=he(U.huffmanTableDC),z=I===0?0:Z(I);te[0]=U.pred+=z;for(var ne=1;ne<64;){var _e=he(U.huffmanTableAC),xe=_e&15,ie=_e>>4;if(xe===0){if(ie<15)break;ne+=16;continue}ne+=ie;var ke=e[ne];te[ke]=Z(xe),ne++}}function ge(U,te){var I=he(U.huffmanTableDC),z=I===0?0:Z(I)<<D;te[0]=U.pred+=z}function fe(U,te){te[0]|=Y()<<D}var pe=0;function de(U,te){if(pe>0){pe--;return}for(var I=y,z=C;I<=z;){var ne=he(U.huffmanTableAC),_e=ne&15,xe=ne>>4;if(_e===0){if(xe<15){pe=P(xe)+(1<<xe)-1;break}I+=16;continue}I+=xe;var ie=e[I];te[ie]=Z(_e)*(1<<D),I++}}var $=0,B;function be(U,te){for(var I=y,z=C,ne=0;I<=z;){var _e=e[I],xe=te[_e]<0?-1:1;switch($){case 0:var ie=he(U.huffmanTableAC),ke=ie&15,ne=ie>>4;if(ke===0)ne<15?(pe=P(ne)+(1<<ne),$=4):(ne=16,$=1);else{if(ke!==1)throw new Error("invalid ACn encoding");B=Z(ke),$=ne?2:3}continue;case 1:case 2:te[_e]?te[_e]+=(Y()<<D)*xe:(ne--,ne===0&&($=$==2?3:0));break;case 3:te[_e]?te[_e]+=(Y()<<D)*xe:(te[_e]=B<<D,$=0);break;case 4:te[_e]&&(te[_e]+=(Y()<<D)*xe);break}I++}$===4&&(pe--,pe===0&&($=0))}function oe(U,te,I,z,ne){var _e=I/N|0,xe=I%N,ie=_e*U.v+z,ke=xe*U.h+ne;U.blocks[ie]===void 0&&W.tolerantDecoding||te(U,U.blocks[ie][ke])}function le(U,te,I){var z=I/U.blocksPerLine|0,ne=I%U.blocksPerLine;U.blocks[z]===void 0&&W.tolerantDecoding||te(U,U.blocks[z][ne])}var Je=k.length,O,ee,ue,S,j,X;L?y===0?X=A===0?ge:fe:X=A===0?de:be:X=ce;var E=0,G,ye;Je==1?ye=k[0].blocksPerLine*k[0].blocksPerColumn:ye=N*T.mcusPerColumn,F||(F=ye);for(var Te,se;E<ye;){for(ee=0;ee<Je;ee++)k[ee].pred=0;if(pe=0,Je==1)for(O=k[0],j=0;j<F;j++)le(O,X,E),E++;else for(j=0;j<F;j++){for(ee=0;ee<Je;ee++)for(O=k[ee],Te=O.h,se=O.v,ue=0;ue<se;ue++)for(S=0;S<Te;S++)oe(O,X,E,ue,S);if(E++,E===ye)break}if(E===ye)do{if(x[b]===255&&x[b+1]!==0)break;b+=1}while(b<x.length-2);if(re=0,G=x[b]<<8|x[b+1],G<65280)throw new Error("marker was not found");if(G>=65488&&G<=65495)b+=2;else break}return b-R}function f(x,b){var T=[],k=b.blocksPerLine,F=b.blocksPerColumn,y=k<<3,C=new Int32Array(64),A=new Uint8Array(64);function D(R,J,re){var Y=b.quantizationTable,he,P,Z,ce,ge,fe,pe,de,$,B=re,be;for(be=0;be<64;be++)B[be]=R[be]*Y[be];for(be=0;be<8;++be){var oe=8*be;if(B[1+oe]==0&&B[2+oe]==0&&B[3+oe]==0&&B[4+oe]==0&&B[5+oe]==0&&B[6+oe]==0&&B[7+oe]==0){$=l*B[0+oe]+512>>10,B[0+oe]=$,B[1+oe]=$,B[2+oe]=$,B[3+oe]=$,B[4+oe]=$,B[5+oe]=$,B[6+oe]=$,B[7+oe]=$;continue}he=l*B[0+oe]+128>>8,P=l*B[4+oe]+128>>8,Z=B[2+oe],ce=B[6+oe],ge=u*(B[1+oe]-B[7+oe])+128>>8,de=u*(B[1+oe]+B[7+oe])+128>>8,fe=B[3+oe]<<4,pe=B[5+oe]<<4,$=he-P+1>>1,he=he+P+1>>1,P=$,$=Z*c+ce*o+128>>8,Z=Z*o-ce*c+128>>8,ce=$,$=ge-pe+1>>1,ge=ge+pe+1>>1,pe=$,$=de+fe+1>>1,fe=de-fe+1>>1,de=$,$=he-ce+1>>1,he=he+ce+1>>1,ce=$,$=P-Z+1>>1,P=P+Z+1>>1,Z=$,$=ge*s+de*n+2048>>12,ge=ge*n-de*s+2048>>12,de=$,$=fe*i+pe*t+2048>>12,fe=fe*t-pe*i+2048>>12,pe=$,B[0+oe]=he+de,B[7+oe]=he-de,B[1+oe]=P+pe,B[6+oe]=P-pe,B[2+oe]=Z+fe,B[5+oe]=Z-fe,B[3+oe]=ce+ge,B[4+oe]=ce-ge}for(be=0;be<8;++be){var le=be;if(B[1*8+le]==0&&B[2*8+le]==0&&B[3*8+le]==0&&B[4*8+le]==0&&B[5*8+le]==0&&B[6*8+le]==0&&B[7*8+le]==0){$=l*re[be+0]+8192>>14,B[0*8+le]=$,B[1*8+le]=$,B[2*8+le]=$,B[3*8+le]=$,B[4*8+le]=$,B[5*8+le]=$,B[6*8+le]=$,B[7*8+le]=$;continue}he=l*B[0*8+le]+2048>>12,P=l*B[4*8+le]+2048>>12,Z=B[2*8+le],ce=B[6*8+le],ge=u*(B[1*8+le]-B[7*8+le])+2048>>12,de=u*(B[1*8+le]+B[7*8+le])+2048>>12,fe=B[3*8+le],pe=B[5*8+le],$=he-P+1>>1,he=he+P+1>>1,P=$,$=Z*c+ce*o+2048>>12,Z=Z*o-ce*c+2048>>12,ce=$,$=ge-pe+1>>1,ge=ge+pe+1>>1,pe=$,$=de+fe+1>>1,fe=de-fe+1>>1,de=$,$=he-ce+1>>1,he=he+ce+1>>1,ce=$,$=P-Z+1>>1,P=P+Z+1>>1,Z=$,$=ge*s+de*n+2048>>12,ge=ge*n-de*s+2048>>12,de=$,$=fe*i+pe*t+2048>>12,fe=fe*t-pe*i+2048>>12,pe=$,B[0*8+le]=he+de,B[7*8+le]=he-de,B[1*8+le]=P+pe,B[6*8+le]=P-pe,B[2*8+le]=Z+fe,B[5*8+le]=Z-fe,B[3*8+le]=ce+ge,B[4*8+le]=ce-ge}for(be=0;be<64;++be){var Je=128+(B[be]+8>>4);J[be]=Je<0?0:Je>255?255:Je}}v(y*F*8);for(var W,V,M=0;M<F;M++){var K=M<<3;for(W=0;W<8;W++)T.push(new Uint8Array(y));for(var N=0;N<k;N++){D(b.blocks[M][N],A,C);var L=0,ae=N<<3;for(V=0;V<8;V++){var Q=T[K+V];for(W=0;W<8;W++)Q[ae+W]=A[L++]}}}return T}function _(x){return x<0?0:x>255?255:x}d.prototype={load:function(b){var T=new XMLHttpRequest;T.open("GET",b,!0),T.responseType="arraybuffer",T.onload=function(){var k=new Uint8Array(T.response||T.mozResponseArrayBuffer);this.parse(k),this.onload&&this.onload()}.bind(this),T.send(null)},parse:function(b){var T=this.opts.maxResolutionInMP*1e3*1e3,k=0,F=b.length;function y(){var ie=b[k]<<8|b[k+1];return k+=2,ie}function C(){var ie=y(),ke=b.subarray(k,k+ie-2);return k+=ke.length,ke}function A(ie){var ke=0,Xe=0,Le,it;for(it in ie.components)ie.components.hasOwnProperty(it)&&(Le=ie.components[it],ke<Le.h&&(ke=Le.h),Xe<Le.v&&(Xe=Le.v));var fr=Math.ceil(ie.samplesPerLine/8/ke),Or=Math.ceil(ie.scanLines/8/Xe);for(it in ie.components)if(ie.components.hasOwnProperty(it)){Le=ie.components[it];var er=Math.ceil(Math.ceil(ie.samplesPerLine/8)*Le.h/ke),Tr=Math.ceil(Math.ceil(ie.scanLines/8)*Le.v/Xe),mr=fr*Le.h,_r=Or*Le.v,Vn=_r*mr,Xi=[];v(Vn*256);for(var Ar=0;Ar<_r;Ar++){for(var gr=[],Yi=0;Yi<mr;Yi++)gr.push(new Int32Array(64));Xi.push(gr)}Le.blocksPerLine=er,Le.blocksPerColumn=Tr,Le.blocks=Xi}ie.maxH=ke,ie.maxV=Xe,ie.mcusPerLine=fr,ie.mcusPerColumn=Or}var D=null,W=null,V=null,M,K,N=[],L=[],ae=[],Q=[],R=y(),J=-1;if(this.comments=[],R!=65496)throw new Error("SOI not found");for(R=y();R!=65497;){var re,Y,he;switch(R){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var P=C();if(R===65534){var Z=String.fromCharCode.apply(null,P);this.comments.push(Z)}R===65504&&P[0]===74&&P[1]===70&&P[2]===73&&P[3]===70&&P[4]===0&&(D={version:{major:P[5],minor:P[6]},densityUnits:P[7],xDensity:P[8]<<8|P[9],yDensity:P[10]<<8|P[11],thumbWidth:P[12],thumbHeight:P[13],thumbData:P.subarray(14,14+3*P[12]*P[13])}),R===65505&&P[0]===69&&P[1]===120&&P[2]===105&&P[3]===102&&P[4]===0&&(this.exifBuffer=P.subarray(5,P.length)),R===65518&&P[0]===65&&P[1]===100&&P[2]===111&&P[3]===98&&P[4]===101&&P[5]===0&&(W={version:P[6],flags0:P[7]<<8|P[8],flags1:P[9]<<8|P[10],transformCode:P[11]});break;case 65499:for(var ce=y(),ge=ce+k-2;k<ge;){var fe=b[k++];v(64*4);var pe=new Int32Array(64);if(fe>>4==0)for(Y=0;Y<64;Y++){var de=e[Y];pe[de]=b[k++]}else if(fe>>4==1)for(Y=0;Y<64;Y++){var de=e[Y];pe[de]=y()}else throw new Error("DQT: invalid table spec");N[fe&15]=pe}break;case 65472:case 65473:case 65474:y(),M={},M.extended=R===65473,M.progressive=R===65474,M.precision=b[k++],M.scanLines=y(),M.samplesPerLine=y(),M.components={},M.componentsOrder=[];var $=M.scanLines*M.samplesPerLine;if($>T){var B=Math.ceil(($-T)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${B}MP`)}var be=b[k++],oe,le=0,Je=0;for(re=0;re<be;re++){oe=b[k];var O=b[k+1]>>4,ee=b[k+1]&15,ue=b[k+2];M.componentsOrder.push(oe),M.components[oe]={h:O,v:ee,quantizationIdx:ue},k+=3}A(M),L.push(M);break;case 65476:var S=y();for(re=2;re<S;){var j=b[k++],X=new Uint8Array(16),E=0;for(Y=0;Y<16;Y++,k++)E+=X[Y]=b[k];v(16+E);var G=new Uint8Array(E);for(Y=0;Y<E;Y++,k++)G[Y]=b[k];re+=17+E,(j>>4==0?Q:ae)[j&15]=h(X,G)}break;case 65501:y(),K=y();break;case 65500:y(),y();break;case 65498:var ye=y(),Te=b[k++],se=[],U;for(re=0;re<Te;re++){U=M.components[b[k++]];var te=b[k++];U.huffmanTableDC=Q[te>>4],U.huffmanTableAC=ae[te&15],se.push(U)}var I=b[k++],z=b[k++],ne=b[k++],_e=p(b,k,M,se,K,I,z,ne>>4,ne&15,this.opts);k+=_e;break;case 65535:b[k]!==255&&k--;break;default:if(b[k-3]==255&&b[k-2]>=192&&b[k-2]<=254){k-=3;break}else if(R===224||R==225){if(J!==-1)throw new Error(`first unknown JPEG marker at offset ${J.toString(16)}, second unknown JPEG marker ${R.toString(16)} at offset ${(k-1).toString(16)}`);J=k-1;let ie=y();if(b[k+ie-2]===255){k+=ie-2;break}}throw new Error("unknown JPEG marker "+R.toString(16))}R=y()}if(L.length!=1)throw new Error("only single frame JPEGs supported");for(var re=0;re<L.length;re++){var xe=L[re].components;for(var Y in xe)xe[Y].quantizationTable=N[xe[Y].quantizationIdx],delete xe[Y].quantizationIdx}this.width=M.samplesPerLine,this.height=M.scanLines,this.jfif=D,this.adobe=W,this.components=[];for(var re=0;re<M.componentsOrder.length;re++){var U=M.components[M.componentsOrder[re]];this.components.push({lines:f(M,U),scaleX:U.h/M.maxH,scaleY:U.v/M.maxV})}},getData:function(b,T){var k=this.width/b,F=this.height/T,y,C,A,D,W,V,M,K,N,L,ae=0,Q,R,J,re,Y,he,P,Z,ce,ge,fe,pe=b*T*this.components.length;v(pe);var de=new Uint8Array(pe);switch(this.components.length){case 1:for(y=this.components[0],L=0;L<T;L++)for(W=y.lines[0|L*y.scaleY*F],N=0;N<b;N++)Q=W[0|N*y.scaleX*k],de[ae++]=Q;break;case 2:for(y=this.components[0],C=this.components[1],L=0;L<T;L++)for(W=y.lines[0|L*y.scaleY*F],V=C.lines[0|L*C.scaleY*F],N=0;N<b;N++)Q=W[0|N*y.scaleX*k],de[ae++]=Q,Q=V[0|N*C.scaleX*k],de[ae++]=Q;break;case 3:for(fe=!0,this.adobe&&this.adobe.transformCode?fe=!0:typeof this.opts.colorTransform!="undefined"&&(fe=!!this.opts.colorTransform),y=this.components[0],C=this.components[1],A=this.components[2],L=0;L<T;L++)for(W=y.lines[0|L*y.scaleY*F],V=C.lines[0|L*C.scaleY*F],M=A.lines[0|L*A.scaleY*F],N=0;N<b;N++)fe?(Q=W[0|N*y.scaleX*k],R=V[0|N*C.scaleX*k],J=M[0|N*A.scaleX*k],Z=_(Q+1.402*(J-128)),ce=_(Q-.3441363*(R-128)-.71413636*(J-128)),ge=_(Q+1.772*(R-128))):(Z=W[0|N*y.scaleX*k],ce=V[0|N*C.scaleX*k],ge=M[0|N*A.scaleX*k]),de[ae++]=Z,de[ae++]=ce,de[ae++]=ge;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(fe=!1,this.adobe&&this.adobe.transformCode?fe=!0:typeof this.opts.colorTransform!="undefined"&&(fe=!!this.opts.colorTransform),y=this.components[0],C=this.components[1],A=this.components[2],D=this.components[3],L=0;L<T;L++)for(W=y.lines[0|L*y.scaleY*F],V=C.lines[0|L*C.scaleY*F],M=A.lines[0|L*A.scaleY*F],K=D.lines[0|L*D.scaleY*F],N=0;N<b;N++)fe?(Q=W[0|N*y.scaleX*k],R=V[0|N*C.scaleX*k],J=M[0|N*A.scaleX*k],re=K[0|N*D.scaleX*k],Y=255-_(Q+1.402*(J-128)),he=255-_(Q-.3441363*(R-128)-.71413636*(J-128)),P=255-_(Q+1.772*(R-128))):(Y=W[0|N*y.scaleX*k],he=V[0|N*C.scaleX*k],P=M[0|N*A.scaleX*k],re=K[0|N*D.scaleX*k]),de[ae++]=255-Y,de[ae++]=255-he,de[ae++]=255-P,de[ae++]=255-re;break;default:throw new Error("Unsupported color mode")}return de},copyToImageData:function(b,T){var k=b.width,F=b.height,y=b.data,C=this.getData(k,F),A=0,D=0,W,V,M,K,N,L,ae,Q,R;switch(this.components.length){case 1:for(V=0;V<F;V++)for(W=0;W<k;W++)M=C[A++],y[D++]=M,y[D++]=M,y[D++]=M,T&&(y[D++]=255);break;case 3:for(V=0;V<F;V++)for(W=0;W<k;W++)ae=C[A++],Q=C[A++],R=C[A++],y[D++]=ae,y[D++]=Q,y[D++]=R,T&&(y[D++]=255);break;case 4:for(V=0;V<F;V++)for(W=0;W<k;W++)N=C[A++],L=C[A++],M=C[A++],K=C[A++],ae=255-_(N*(1-K/255)+K),Q=255-_(L*(1-K/255)+K),R=255-_(M*(1-K/255)+K),y[D++]=ae,y[D++]=Q,y[D++]=R,T&&(y[D++]=255);break;default:throw new Error("Unsupported color mode")}}};var m=0,g=0;function v(x=0){var b=m+x;if(b>g){var T=Math.ceil((b-g)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${T}MB`)}m=b}return d.resetMaxMemoryUsage=function(x){m=0,g=x},d.getBytesAllocated=function(){return m},d.requestMemoryAllocation=v,d}();typeof Zm!="undefined"?Zm.exports=Lk:typeof window!="undefined"&&(window["jpeg-js"]=window["jpeg-js"]||{},window["jpeg-js"].decode=Lk);function Lk(r,e={}){var t={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},i={...t,...e},n=new Uint8Array(r),s=new Qm;s.opts=i,Qm.resetMaxMemoryUsage(i.maxMemoryUsageInMB*1024*1024),s.parse(n);var o=i.formatAsRGBA?4:3,c=s.width*s.height*o;try{Qm.requestMemoryAllocation(c);var l={width:s.width,height:s.height,exifBuffer:s.exifBuffer,data:i.useTArray?new Uint8Array(c):Buffer.alloc(c)};s.comments.length>0&&(l.comments=s.comments)}catch(u){throw u instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+c):u}return s.copyToImageData(l,i.formatAsRGBA),l}});var jk=w((q7,Hk)=>{var J6=qk(),X6=Bk();Hk.exports={encode:J6,decode:X6}});var e_=w((L7,$k)=>{"use strict";var Y6=require("util"),Wk=require("stream"),lr=$k.exports=function(){Wk.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};Y6.inherits(lr,Wk);lr.prototype.read=function(r,e){this._reads.push({length:Math.abs(r),allowLess:r<0,func:e}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};lr.prototype.write=function(r,e){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let t;return Buffer.isBuffer(r)?t=r:t=Buffer.from(r,e||this._encoding),this._buffers.push(t),this._buffered+=t.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};lr.prototype.end=function(r,e){r&&this.write(r,e),this.writable=!1,!!this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};lr.prototype.destroySoon=lr.prototype.end;lr.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};lr.prototype.destroy=function(){!this._buffers||(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};lr.prototype._processReadAllowingLess=function(r){this._reads.shift();let e=this._buffers[0];e.length>r.length?(this._buffered-=r.length,this._buffers[0]=e.slice(r.length),r.func.call(this,e.slice(0,r.length))):(this._buffered-=e.length,this._buffers.shift(),r.func.call(this,e))};lr.prototype._processRead=function(r){this._reads.shift();let e=0,t=0,i=Buffer.alloc(r.length);for(;e<r.length;){let n=this._buffers[t++],s=Math.min(n.length,r.length-e);n.copy(i,e,0,s),e+=s,s!==n.length&&(this._buffers[--t]=n.slice(s))}t>0&&this._buffers.splice(0,t),this._buffered-=r.length,r.func.call(this,i)};lr.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let r=this._reads[0];if(r.allowLess)this._processReadAllowingLess(r);else if(this._buffered>=r.length)this._processRead(r);else break}this._buffers&&!this.writable&&this._end()}catch(r){this.emit("error",r)}}});var r_=w(t_=>{"use strict";var Ii=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];t_.getImagePasses=function(r,e){let t=[],i=r%8,n=e%8,s=(r-i)/8,o=(e-n)/8;for(let c=0;c<Ii.length;c++){let l=Ii[c],u=s*l.x.length,d=o*l.y.length;for(let h=0;h<l.x.length&&l.x[h]<i;h++)u++;for(let h=0;h<l.y.length&&l.y[h]<n;h++)d++;u>0&&d>0&&t.push({width:u,height:d,index:c})}return t};t_.getInterlaceIterator=function(r){return function(e,t,i){let n=e%Ii[i].x.length,s=(e-n)/Ii[i].x.length*8+Ii[i].x[n],o=t%Ii[i].y.length,c=(t-o)/Ii[i].y.length*8+Ii[i].y[o];return s*4+c*r*4}}});var i_=w((H7,zk)=>{"use strict";zk.exports=function(e,t,i){let n=e+t-i,s=Math.abs(n-e),o=Math.abs(n-t),c=Math.abs(n-i);return s<=o&&s<=c?e:o<=c?t:i}});var n_=w((j7,Vk)=>{"use strict";var Q6=r_(),Z6=i_();function Uk(r,e,t){let i=r*e;return t!==8&&(i=Math.ceil(i/(8/t))),i}var Qs=Vk.exports=function(r,e){let t=r.width,i=r.height,n=r.interlace,s=r.bpp,o=r.depth;if(this.read=e.read,this.write=e.write,this.complete=e.complete,this._imageIndex=0,this._images=[],n){let c=Q6.getImagePasses(t,i);for(let l=0;l<c.length;l++)this._images.push({byteWidth:Uk(c[l].width,s,o),height:c[l].height,lineIndex:0})}else this._images.push({byteWidth:Uk(t,s,o),height:i,lineIndex:0});o===8?this._xComparison=s:o===16?this._xComparison=s*2:this._xComparison=1};Qs.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};Qs.prototype._unFilterType1=function(r,e,t){let i=this._xComparison,n=i-1;for(let s=0;s<t;s++){let o=r[1+s],c=s>n?e[s-i]:0;e[s]=o+c}};Qs.prototype._unFilterType2=function(r,e,t){let i=this._lastLine;for(let n=0;n<t;n++){let s=r[1+n],o=i?i[n]:0;e[n]=s+o}};Qs.prototype._unFilterType3=function(r,e,t){let i=this._xComparison,n=i-1,s=this._lastLine;for(let o=0;o<t;o++){let c=r[1+o],l=s?s[o]:0,u=o>n?e[o-i]:0,d=Math.floor((u+l)/2);e[o]=c+d}};Qs.prototype._unFilterType4=function(r,e,t){let i=this._xComparison,n=i-1,s=this._lastLine;for(let o=0;o<t;o++){let c=r[1+o],l=s?s[o]:0,u=o>n?e[o-i]:0,d=o>n&&s?s[o-i]:0,h=Z6(u,l,d);e[o]=c+h}};Qs.prototype._reverseFilterLine=function(r){let e=r[0],t,i=this._images[this._imageIndex],n=i.byteWidth;if(e===0)t=r.slice(1,n+1);else switch(t=Buffer.alloc(n),e){case 1:this._unFilterType1(r,t,n);break;case 2:this._unFilterType2(r,t,n);break;case 3:this._unFilterType3(r,t,n);break;case 4:this._unFilterType4(r,t,n);break;default:throw new Error("Unrecognised filter type - "+e)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}});var Jk=w((W7,Kk)=>{"use strict";var e4=require("util"),Gk=e_(),t4=n_(),r4=Kk.exports=function(r){Gk.call(this);let e=[],t=this;this._filter=new t4(r,{read:this.read.bind(this),write:function(i){e.push(i)},complete:function(){t.emit("complete",Buffer.concat(e))}}),this._filter.start()};e4.inherits(r4,Gk)});var Zs=w(($7,Xk)=>{"use strict";Xk.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}});var a_=w((z7,Yk)=>{"use strict";var s_=[];(function(){for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;s_[r]=e}})();var o_=Yk.exports=function(){this._crc=-1};o_.prototype.write=function(r){for(let e=0;e<r.length;e++)this._crc=s_[(this._crc^r[e])&255]^this._crc>>>8;return!0};o_.prototype.crc32=function(){return this._crc^-1};o_.crc32=function(r){let e=-1;for(let t=0;t<r.length;t++)e=s_[(e^r[t])&255]^e>>>8;return e^-1}});var c_=w((U7,Qk)=>{"use strict";var rt=Zs(),i4=a_(),lt=Qk.exports=function(r,e){this._options=r,r.checkCRC=r.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[rt.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[rt.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[rt.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[rt.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[rt.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[rt.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.finished=e.finished,this.simpleTransparency=e.simpleTransparency,this.headersFinished=e.headersFinished||function(){}};lt.prototype.start=function(){this.read(rt.PNG_SIGNATURE.length,this._parseSignature.bind(this))};lt.prototype._parseSignature=function(r){let e=rt.PNG_SIGNATURE;for(let t=0;t<e.length;t++)if(r[t]!==e[t]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};lt.prototype._parseChunkBegin=function(r){let e=r.readUInt32BE(0),t=r.readUInt32BE(4),i="";for(let s=4;s<8;s++)i+=String.fromCharCode(r[s]);let n=Boolean(r[4]&32);if(!this._hasIHDR&&t!==rt.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new i4,this._crc.write(Buffer.from(i)),this._chunks[t])return this._chunks[t](e);if(!n){this.error(new Error("Unsupported critical chunk type "+i));return}this.read(e+4,this._skipChunk.bind(this))};lt.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};lt.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};lt.prototype._parseChunkEnd=function(r){let e=r.readInt32BE(0),t=this._crc.crc32();if(this._options.checkCRC&&t!==e){this.error(new Error("Crc error - "+e+" - "+t));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};lt.prototype._handleIHDR=function(r){this.read(r,this._parseIHDR.bind(this))};lt.prototype._parseIHDR=function(r){this._crc.write(r);let e=r.readUInt32BE(0),t=r.readUInt32BE(4),i=r[8],n=r[9],s=r[10],o=r[11],c=r[12];if(i!==8&&i!==4&&i!==2&&i!==1&&i!==16){this.error(new Error("Unsupported bit depth "+i));return}if(!(n in rt.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(s!==0){this.error(new Error("Unsupported compression method"));return}if(o!==0){this.error(new Error("Unsupported filter method"));return}if(c!==0&&c!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=n;let l=rt.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:t,depth:i,interlace:Boolean(c),palette:Boolean(n&rt.COLORTYPE_PALETTE),color:Boolean(n&rt.COLORTYPE_COLOR),alpha:Boolean(n&rt.COLORTYPE_ALPHA),bpp:l,colorType:n}),this._handleChunkEnd()};lt.prototype._handlePLTE=function(r){this.read(r,this._parsePLTE.bind(this))};lt.prototype._parsePLTE=function(r){this._crc.write(r);let e=Math.floor(r.length/3);for(let t=0;t<e;t++)this._palette.push([r[t*3],r[t*3+1],r[t*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};lt.prototype._handleTRNS=function(r){this.simpleTransparency(),this.read(r,this._parseTRNS.bind(this))};lt.prototype._parseTRNS=function(r){if(this._crc.write(r),this._colorType===rt.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(r.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let e=0;e<r.length;e++)this._palette[e][3]=r[e];this.palette(this._palette)}this._colorType===rt.COLORTYPE_GRAYSCALE&&this.transColor([r.readUInt16BE(0)]),this._colorType===rt.COLORTYPE_COLOR&&this.transColor([r.readUInt16BE(0),r.readUInt16BE(2),r.readUInt16BE(4)]),this._handleChunkEnd()};lt.prototype._handleGAMA=function(r){this.read(r,this._parseGAMA.bind(this))};lt.prototype._parseGAMA=function(r){this._crc.write(r),this.gamma(r.readUInt32BE(0)/rt.GAMMA_DIVISION),this._handleChunkEnd()};lt.prototype._handleIDAT=function(r){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-r,this._parseIDAT.bind(this,r))};lt.prototype._parseIDAT=function(r,e){if(this._crc.write(e),this._colorType===rt.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(e);let t=r-e.length;t>0?this._handleIDAT(t):this._handleChunkEnd()};lt.prototype._handleIEND=function(r){this.read(r,this._parseIEND.bind(this))};lt.prototype._parseIEND=function(r){this._crc.write(r),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}});var l_=w(eP=>{"use strict";var Zk=r_(),n4=[function(){},function(r,e,t,i){if(i===e.length)throw new Error("Ran out of data");let n=e[i];r[t]=n,r[t+1]=n,r[t+2]=n,r[t+3]=255},function(r,e,t,i){if(i+1>=e.length)throw new Error("Ran out of data");let n=e[i];r[t]=n,r[t+1]=n,r[t+2]=n,r[t+3]=e[i+1]},function(r,e,t,i){if(i+2>=e.length)throw new Error("Ran out of data");r[t]=e[i],r[t+1]=e[i+1],r[t+2]=e[i+2],r[t+3]=255},function(r,e,t,i){if(i+3>=e.length)throw new Error("Ran out of data");r[t]=e[i],r[t+1]=e[i+1],r[t+2]=e[i+2],r[t+3]=e[i+3]}],s4=[function(){},function(r,e,t,i){let n=e[0];r[t]=n,r[t+1]=n,r[t+2]=n,r[t+3]=i},function(r,e,t){let i=e[0];r[t]=i,r[t+1]=i,r[t+2]=i,r[t+3]=e[1]},function(r,e,t,i){r[t]=e[0],r[t+1]=e[1],r[t+2]=e[2],r[t+3]=i},function(r,e,t){r[t]=e[0],r[t+1]=e[1],r[t+2]=e[2],r[t+3]=e[3]}];function o4(r,e){let t=[],i=0;function n(){if(i===r.length)throw new Error("Ran out of data");let s=r[i];i++;let o,c,l,u,d,h,p,f;switch(e){default:throw new Error("unrecognised depth");case 16:p=r[i],i++,t.push((s<<8)+p);break;case 4:p=s&15,f=s>>4,t.push(f,p);break;case 2:d=s&3,h=s>>2&3,p=s>>4&3,f=s>>6&3,t.push(f,p,h,d);break;case 1:o=s&1,c=s>>1&1,l=s>>2&1,u=s>>3&1,d=s>>4&1,h=s>>5&1,p=s>>6&1,f=s>>7&1,t.push(f,p,h,d,u,l,c,o);break}}return{get:function(s){for(;t.length<s;)n();let o=t.slice(0,s);return t=t.slice(s),o},resetAfterLine:function(){t.length=0},end:function(){if(i!==r.length)throw new Error("extra data found")}}}function a4(r,e,t,i,n,s){let o=r.width,c=r.height,l=r.index;for(let u=0;u<c;u++)for(let d=0;d<o;d++){let h=t(d,u,l);n4[i](e,n,h,s),s+=i}return s}function c4(r,e,t,i,n,s){let o=r.width,c=r.height,l=r.index;for(let u=0;u<c;u++){for(let d=0;d<o;d++){let h=n.get(i),p=t(d,u,l);s4[i](e,h,p,s)}n.resetAfterLine()}}eP.dataToBitMap=function(r,e){let t=e.width,i=e.height,n=e.depth,s=e.bpp,o=e.interlace,c;n!==8&&(c=o4(r,n));let l;n<=8?l=Buffer.alloc(t*i*4):l=new Uint16Array(t*i*4);let u=Math.pow(2,n)-1,d=0,h,p;if(o)h=Zk.getImagePasses(t,i),p=Zk.getInterlaceIterator(t,i);else{let f=0;p=function(){let _=f;return f+=4,_},h=[{width:t,height:i}]}for(let f=0;f<h.length;f++)n===8?d=a4(h[f],l,p,s,r,d):c4(h[f],l,p,s,c,u);if(n===8){if(d!==r.length)throw new Error("extra data found")}else c.end();return l}});var u_=w((G7,tP)=>{"use strict";function l4(r,e,t,i,n){let s=0;for(let o=0;o<i;o++)for(let c=0;c<t;c++){let l=n[r[s]];if(!l)throw new Error("index "+r[s]+" not in palette");for(let u=0;u<4;u++)e[s+u]=l[u];s+=4}}function u4(r,e,t,i,n){let s=0;for(let o=0;o<i;o++)for(let c=0;c<t;c++){let l=!1;if(n.length===1?n[0]===r[s]&&(l=!0):n[0]===r[s]&&n[1]===r[s+1]&&n[2]===r[s+2]&&(l=!0),l)for(let u=0;u<4;u++)e[s+u]=0;s+=4}}function d4(r,e,t,i,n){let s=255,o=Math.pow(2,n)-1,c=0;for(let l=0;l<i;l++)for(let u=0;u<t;u++){for(let d=0;d<4;d++)e[c+d]=Math.floor(r[c+d]*s/o+.5);c+=4}}tP.exports=function(r,e){let t=e.depth,i=e.width,n=e.height,s=e.colorType,o=e.transColor,c=e.palette,l=r;return s===3?l4(r,l,i,n,c):(o&&u4(r,l,i,n,o),t!==8&&(t===16&&(l=Buffer.alloc(i*n*4)),d4(r,l,i,n,t))),l}});var nP=w((K7,iP)=>{"use strict";var h4=require("util"),d_=require("zlib"),rP=e_(),p4=Jk(),f4=c_(),m4=l_(),_4=u_(),Sr=iP.exports=function(r){rP.call(this),this._parser=new f4(r,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=r,this.writable=!0,this._parser.start()};h4.inherits(Sr,rP);Sr.prototype._handleError=function(r){this.emit("error",r),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};Sr.prototype._inflateData=function(r){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=d_.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let t=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,i=Math.max(t,d_.Z_MIN_CHUNK);this._inflate=d_.createInflate({chunkSize:i});let n=t,s=this.emit.bind(this,"error");this._inflate.on("error",function(c){!n||s(c)}),this._filter.on("complete",this._complete.bind(this));let o=this._filter.write.bind(this._filter);this._inflate.on("data",function(c){!n||(c.length>n&&(c=c.slice(0,n)),n-=c.length,o(c))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(r)};Sr.prototype._handleMetaData=function(r){this._metaData=r,this._bitmapInfo=Object.create(r),this._filter=new p4(this._bitmapInfo)};Sr.prototype._handleTransColor=function(r){this._bitmapInfo.transColor=r};Sr.prototype._handlePalette=function(r){this._bitmapInfo.palette=r};Sr.prototype._simpleTransparency=function(){this._metaData.alpha=!0};Sr.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};Sr.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};Sr.prototype._complete=function(r){if(this.errord)return;let e;try{let t=m4.dataToBitMap(r,this._bitmapInfo);e=_4(t,this._bitmapInfo),t=null}catch(t){this._handleError(t);return}this.emit("parsed",e)}});var oP=w((J7,sP)=>{"use strict";var Xt=Zs();sP.exports=function(r,e,t,i){let n=[Xt.COLORTYPE_COLOR_ALPHA,Xt.COLORTYPE_ALPHA].indexOf(i.colorType)!==-1;if(i.colorType===i.inputColorType){let _=function(){let m=new ArrayBuffer(2);return new DataView(m).setInt16(0,256,!0),new Int16Array(m)[0]!==256}();if(i.bitDepth===8||i.bitDepth===16&&_)return r}let s=i.bitDepth!==16?r:new Uint16Array(r.buffer),o=255,c=Xt.COLORTYPE_TO_BPP_MAP[i.inputColorType];c===4&&!i.inputHasAlpha&&(c=3);let l=Xt.COLORTYPE_TO_BPP_MAP[i.colorType];i.bitDepth===16&&(o=65535,l*=2);let u=Buffer.alloc(e*t*l),d=0,h=0,p=i.bgColor||{};p.red===void 0&&(p.red=o),p.green===void 0&&(p.green=o),p.blue===void 0&&(p.blue=o);function f(){let _,m,g,v=o;switch(i.inputColorType){case Xt.COLORTYPE_COLOR_ALPHA:v=s[d+3],_=s[d],m=s[d+1],g=s[d+2];break;case Xt.COLORTYPE_COLOR:_=s[d],m=s[d+1],g=s[d+2];break;case Xt.COLORTYPE_ALPHA:v=s[d+1],_=s[d],m=_,g=_;break;case Xt.COLORTYPE_GRAYSCALE:_=s[d],m=_,g=_;break;default:throw new Error("input color type:"+i.inputColorType+" is not supported at present")}return i.inputHasAlpha&&(n||(v/=o,_=Math.min(Math.max(Math.round((1-v)*p.red+v*_),0),o),m=Math.min(Math.max(Math.round((1-v)*p.green+v*m),0),o),g=Math.min(Math.max(Math.round((1-v)*p.blue+v*g),0),o))),{red:_,green:m,blue:g,alpha:v}}for(let _=0;_<t;_++)for(let m=0;m<e;m++){let g=f(s,d);switch(i.colorType){case Xt.COLORTYPE_COLOR_ALPHA:case Xt.COLORTYPE_COLOR:i.bitDepth===8?(u[h]=g.red,u[h+1]=g.green,u[h+2]=g.blue,n&&(u[h+3]=g.alpha)):(u.writeUInt16BE(g.red,h),u.writeUInt16BE(g.green,h+2),u.writeUInt16BE(g.blue,h+4),n&&u.writeUInt16BE(g.alpha,h+6));break;case Xt.COLORTYPE_ALPHA:case Xt.COLORTYPE_GRAYSCALE:{let v=(g.red+g.green+g.blue)/3;i.bitDepth===8?(u[h]=v,n&&(u[h+1]=g.alpha)):(u.writeUInt16BE(v,h),n&&u.writeUInt16BE(g.alpha,h+2));break}default:throw new Error("unrecognised color Type "+i.colorType)}d+=c,h+=l}return u}});var lP=w((X7,cP)=>{"use strict";var aP=i_();function g4(r,e,t,i,n){for(let s=0;s<t;s++)i[n+s]=r[e+s]}function w4(r,e,t){let i=0,n=e+t;for(let s=e;s<n;s++)i+=Math.abs(r[s]);return i}function v4(r,e,t,i,n,s){for(let o=0;o<t;o++){let c=o>=s?r[e+o-s]:0,l=r[e+o]-c;i[n+o]=l}}function y4(r,e,t,i){let n=0;for(let s=0;s<t;s++){let o=s>=i?r[e+s-i]:0,c=r[e+s]-o;n+=Math.abs(c)}return n}function b4(r,e,t,i,n){for(let s=0;s<t;s++){let o=e>0?r[e+s-t]:0,c=r[e+s]-o;i[n+s]=c}}function x4(r,e,t){let i=0,n=e+t;for(let s=e;s<n;s++){let o=e>0?r[s-t]:0,c=r[s]-o;i+=Math.abs(c)}return i}function S4(r,e,t,i,n,s){for(let o=0;o<t;o++){let c=o>=s?r[e+o-s]:0,l=e>0?r[e+o-t]:0,u=r[e+o]-(c+l>>1);i[n+o]=u}}function E4(r,e,t,i){let n=0;for(let s=0;s<t;s++){let o=s>=i?r[e+s-i]:0,c=e>0?r[e+s-t]:0,l=r[e+s]-(o+c>>1);n+=Math.abs(l)}return n}function C4(r,e,t,i,n,s){for(let o=0;o<t;o++){let c=o>=s?r[e+o-s]:0,l=e>0?r[e+o-t]:0,u=e>0&&o>=s?r[e+o-(t+s)]:0,d=r[e+o]-aP(c,l,u);i[n+o]=d}}function k4(r,e,t,i){let n=0;for(let s=0;s<t;s++){let o=s>=i?r[e+s-i]:0,c=e>0?r[e+s-t]:0,l=e>0&&s>=i?r[e+s-(t+i)]:0,u=r[e+s]-aP(o,c,l);n+=Math.abs(u)}return n}var P4={0:g4,1:v4,2:b4,3:S4,4:C4},O4={0:w4,1:y4,2:x4,3:E4,4:k4};cP.exports=function(r,e,t,i,n){let s;if(!("filterType"in i)||i.filterType===-1)s=[0,1,2,3,4];else if(typeof i.filterType=="number")s=[i.filterType];else throw new Error("unrecognised filter types");i.bitDepth===16&&(n*=2);let o=e*n,c=0,l=0,u=Buffer.alloc((o+1)*t),d=s[0];for(let h=0;h<t;h++){if(s.length>1){let p=1/0;for(let f=0;f<s.length;f++){let _=O4[s[f]](r,l,o,n);_<p&&(d=s[f],p=_)}}u[c]=d,c++,P4[d](r,l,o,u,c,n),c+=o,l+=o}return u}});var h_=w((Y7,uP)=>{"use strict";var St=Zs(),T4=a_(),A4=oP(),M4=lP(),I4=require("zlib"),Fi=uP.exports=function(r){if(this._options=r,r.deflateChunkSize=r.deflateChunkSize||32*1024,r.deflateLevel=r.deflateLevel!=null?r.deflateLevel:9,r.deflateStrategy=r.deflateStrategy!=null?r.deflateStrategy:3,r.inputHasAlpha=r.inputHasAlpha!=null?r.inputHasAlpha:!0,r.deflateFactory=r.deflateFactory||I4.createDeflate,r.bitDepth=r.bitDepth||8,r.colorType=typeof r.colorType=="number"?r.colorType:St.COLORTYPE_COLOR_ALPHA,r.inputColorType=typeof r.inputColorType=="number"?r.inputColorType:St.COLORTYPE_COLOR_ALPHA,[St.COLORTYPE_GRAYSCALE,St.COLORTYPE_COLOR,St.COLORTYPE_COLOR_ALPHA,St.COLORTYPE_ALPHA].indexOf(r.colorType)===-1)throw new Error("option color type:"+r.colorType+" is not supported at present");if([St.COLORTYPE_GRAYSCALE,St.COLORTYPE_COLOR,St.COLORTYPE_COLOR_ALPHA,St.COLORTYPE_ALPHA].indexOf(r.inputColorType)===-1)throw new Error("option input color type:"+r.inputColorType+" is not supported at present");if(r.bitDepth!==8&&r.bitDepth!==16)throw new Error("option bit depth:"+r.bitDepth+" is not supported at present")};Fi.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};Fi.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};Fi.prototype.filterData=function(r,e,t){let i=A4(r,e,t,this._options),n=St.COLORTYPE_TO_BPP_MAP[this._options.colorType];return M4(i,e,t,this._options,n)};Fi.prototype._packChunk=function(r,e){let t=e?e.length:0,i=Buffer.alloc(t+12);return i.writeUInt32BE(t,0),i.writeUInt32BE(r,4),e&&e.copy(i,8),i.writeInt32BE(T4.crc32(i.slice(4,i.length-4)),i.length-4),i};Fi.prototype.packGAMA=function(r){let e=Buffer.alloc(4);return e.writeUInt32BE(Math.floor(r*St.GAMMA_DIVISION),0),this._packChunk(St.TYPE_gAMA,e)};Fi.prototype.packIHDR=function(r,e){let t=Buffer.alloc(13);return t.writeUInt32BE(r,0),t.writeUInt32BE(e,4),t[8]=this._options.bitDepth,t[9]=this._options.colorType,t[10]=0,t[11]=0,t[12]=0,this._packChunk(St.TYPE_IHDR,t)};Fi.prototype.packIDAT=function(r){return this._packChunk(St.TYPE_IDAT,r)};Fi.prototype.packIEND=function(){return this._packChunk(St.TYPE_IEND,null)}});var fP=w((Q7,pP)=>{"use strict";var F4=require("util"),dP=require("stream"),D4=Zs(),R4=h_(),hP=pP.exports=function(r){dP.call(this);let e=r||{};this._packer=new R4(e),this._deflate=this._packer.createDeflate(),this.readable=!0};F4.inherits(hP,dP);hP.prototype.pack=function(r,e,t,i){this.emit("data",Buffer.from(D4.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(e,t)),i&&this.emit("data",this._packer.packGAMA(i));let n=this._packer.filterData(r,e,t);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(s){this.emit("data",this._packer.packIDAT(s))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(n)}});var yP=w((ja,vP)=>{"use strict";var mP=require("assert").ok,eo=require("zlib"),N4=require("util"),_P=require("buffer").kMaxLength;function On(r){if(!(this instanceof On))return new On(r);r&&r.chunkSize<eo.Z_MIN_CHUNK&&(r.chunkSize=eo.Z_MIN_CHUNK),eo.Inflate.call(this,r),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,r&&r.maxLength!=null&&(this._maxLength=r.maxLength)}function q4(r){return new On(r)}function gP(r,e){e&&process.nextTick(e),!!r._handle&&(r._handle.close(),r._handle=null)}On.prototype._processChunk=function(r,e,t){if(typeof t=="function")return eo.Inflate._processChunk.call(this,r,e,t);let i=this,n=r&&r.length,s=this._chunkSize-this._offset,o=this._maxLength,c=0,l=[],u=0,d;this.on("error",function(_){d=_});function h(_,m){if(i._hadError)return;let g=s-m;if(mP(g>=0,"have should not go down"),g>0){let v=i._buffer.slice(i._offset,i._offset+g);if(i._offset+=g,v.length>o&&(v=v.slice(0,o)),l.push(v),u+=v.length,o-=v.length,o===0)return!1}return(m===0||i._offset>=i._chunkSize)&&(s=i._chunkSize,i._offset=0,i._buffer=Buffer.allocUnsafe(i._chunkSize)),m===0?(c+=n-_,n=_,!0):!1}mP(this._handle,"zlib binding closed");let p;do p=this._handle.writeSync(e,r,c,n,this._buffer,this._offset,s),p=p||this._writeState;while(!this._hadError&&h(p[0],p[1]));if(this._hadError)throw d;if(u>=_P)throw gP(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+_P.toString(16)+" bytes");let f=Buffer.concat(l,u);return gP(this),f};N4.inherits(On,eo.Inflate);function L4(r,e){if(typeof e=="string"&&(e=Buffer.from(e)),!(e instanceof Buffer))throw new TypeError("Not a string or buffer");let t=r._finishFlushFlag;return t==null&&(t=eo.Z_FINISH),r._processChunk(e,t)}function wP(r,e){return L4(new On(e),r)}vP.exports=ja=wP;ja.Inflate=On;ja.createInflate=q4;ja.inflateSync=wP});var p_=w((Z7,xP)=>{"use strict";var bP=xP.exports=function(r){this._buffer=r,this._reads=[]};bP.prototype.read=function(r,e){this._reads.push({length:Math.abs(r),allowLess:r<0,func:e})};bP.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let r=this._reads[0];if(this._buffer.length&&(this._buffer.length>=r.length||r.allowLess)){this._reads.shift();let e=this._buffer;this._buffer=e.slice(r.length),r.func.call(this,e.slice(0,r.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")}});var EP=w(SP=>{"use strict";var B4=p_(),H4=n_();SP.process=function(r,e){let t=[],i=new B4(r);return new H4(e,{read:i.read.bind(i),write:function(s){t.push(s)},complete:function(){}}).start(),i.process(),Buffer.concat(t)}});var OP=w((t9,PP)=>{"use strict";var CP=!0,kP=require("zlib"),j4=yP();kP.deflateSync||(CP=!1);var W4=p_(),$4=EP(),z4=c_(),U4=l_(),V4=u_();PP.exports=function(r,e){if(!CP)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let t;function i(T){t=T}let n;function s(T){n=T}function o(T){n.transColor=T}function c(T){n.palette=T}function l(){n.alpha=!0}let u;function d(T){u=T}let h=[];function p(T){h.push(T)}let f=new W4(r);if(new z4(e,{read:f.read.bind(f),error:i,metadata:s,gamma:d,palette:c,transColor:o,inflateData:p,simpleTransparency:l}).start(),f.process(),t)throw t;let m=Buffer.concat(h);h.length=0;let g;if(n.interlace)g=kP.inflateSync(m);else{let k=((n.width*n.bpp*n.depth+7>>3)+1)*n.height;g=j4(m,{chunkSize:k,maxLength:k})}if(m=null,!g||!g.length)throw new Error("bad png - invalid inflate data response");let v=$4.process(g,n);m=null;let x=U4.dataToBitMap(v,n);v=null;let b=V4(x,n);return n.data=b,n.gamma=u||0,n}});var IP=w((r9,MP)=>{"use strict";var TP=!0,AP=require("zlib");AP.deflateSync||(TP=!1);var G4=Zs(),K4=h_();MP.exports=function(r,e){if(!TP)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let t=e||{},i=new K4(t),n=[];n.push(Buffer.from(G4.PNG_SIGNATURE)),n.push(i.packIHDR(r.width,r.height)),r.gamma&&n.push(i.packGAMA(r.gamma));let s=i.filterData(r.data,r.width,r.height),o=AP.deflateSync(s,i.getDeflateOptions());if(s=null,!o||!o.length)throw new Error("bad png - invalid compressed data response");return n.push(i.packIDAT(o)),n.push(i.packIEND()),Buffer.concat(n)}});var FP=w(f_=>{"use strict";var J4=OP(),X4=IP();f_.read=function(r,e){return J4(r,e||{})};f_.write=function(r,e){return X4(r,e)}});var NP=w(RP=>{"use strict";var Y4=require("util"),DP=require("stream"),Q4=nP(),Z4=fP(),eH=FP(),Ot=RP.PNG=function(r){DP.call(this),r=r||{},this.width=r.width|0,this.height=r.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,r.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new Q4(r),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new Z4(r),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};Y4.inherits(Ot,DP);Ot.sync=eH;Ot.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};Ot.prototype.parse=function(r,e){if(e){let t,i;t=function(n){this.removeListener("error",i),this.data=n,e(null,this)}.bind(this),i=function(n){this.removeListener("parsed",t),e(n,null)}.bind(this),this.once("parsed",t),this.once("error",i)}return this.end(r),this};Ot.prototype.write=function(r){return this._parser.write(r),!0};Ot.prototype.end=function(r){this._parser.end(r)};Ot.prototype._metadata=function(r){this.width=r.width,this.height=r.height,this.emit("metadata",r)};Ot.prototype._gamma=function(r){this.gamma=r};Ot.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};Ot.bitblt=function(r,e,t,i,n,s,o,c){if(t|=0,i|=0,n|=0,s|=0,o|=0,c|=0,t>r.width||i>r.height||t+n>r.width||i+s>r.height)throw new Error("bitblt reading outside image");if(o>e.width||c>e.height||o+n>e.width||c+s>e.height)throw new Error("bitblt writing outside image");for(let l=0;l<s;l++)r.data.copy(e.data,(c+l)*e.width+o<<2,(i+l)*r.width+t<<2,(i+l)*r.width+t+n<<2)};Ot.prototype.bitblt=function(r,e,t,i,n,s,o){return Ot.bitblt(this,r,e,t,i,n,s,o),this};Ot.adjustGamma=function(r){if(r.gamma){for(let e=0;e<r.height;e++)for(let t=0;t<r.width;t++){let i=r.width*e+t<<2;for(let n=0;n<3;n++){let s=r.data[i+n]/255;s=Math.pow(s,1/2.2/r.gamma),r.data[i+n]=Math.round(s*255)}}r.gamma=0}};Ot.prototype.adjustGamma=function(){Ot.adjustGamma(this)}});var qP=w(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});m_.getAccessibilityTree=tH;async function tH(r,e){let t=e?e._objectId:void 0,{axNode:i}=await r.send("Page.accessibilitySnapshot",{objectId:t}),n=new bd(i);return{tree:n,needle:e?n._findNeedle():null}}var rH=new Map(Object.entries({TextField:"textbox"})),iH=new Map(Object.entries({WebArea:"HTML content",Summary:"summary",DescriptionList:"description list",ImageMap:"image map",ListMarker:"list marker",Video:"video playback",Mark:"highlighted",contentinfo:"content information",Details:"details",DescriptionListDetail:"description",DescriptionListTerm:"term",alertdialog:"web alert dialog",dialog:"web dialog",status:"application status",tabpanel:"tab panel",application:"web application"})),bd=class{constructor(e){this._payload=void 0,this._children=void 0,this._payload=e,this._children=[];for(let t of this._payload.children||[])this._children.push(new bd(t))}children(){return this._children}_findNeedle(){if(this._payload.found)return this;for(let e of this._children){let t=e._findNeedle();if(t)return t}return null}isControl(){switch(this._payload.role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"TextField":case"tree":return!0;default:return!1}}_isTextControl(){switch(this._payload.role){case"combobox":case"searchfield":case"textbox":case"TextField":return!0}return!1}_name(){return this._payload.role==="text"?this._payload.value||"":this._payload.name||""}isInteresting(e){let{role:t,focusable:i}=this._payload,n=this._name();return t==="ScrollArea"?!1:t==="WebArea"||i||t==="MenuListOption"||this.isControl()?!0:e?!1:this.isLeafNode()&&!!n}_hasRendundantTextChild(){if(this._children.length!==1)return!1;let e=this._children[0];return e._payload.role==="text"&&this._payload.name===e._payload.value}isLeafNode(){return!!(!this._children.length||this._isTextControl()||this._hasRendundantTextChild())}serialize(){let e={role:rH.get(this._payload.role)||this._payload.role,name:this._name()};if("description"in this._payload&&this._payload.description!==e.name&&(e.description=this._payload.description),"roledescription"in this._payload){let c=this._payload.roledescription;c!==this._payload.role&&iH.get(this._payload.role)!==c&&(e.roledescription=c)}"value"in this._payload&&this._payload.role!=="text"&&(typeof this._payload.value=="string"?e.valueString=this._payload.value:typeof this._payload.value=="number"&&(e.valueNumber=this._payload.value)),"checked"in this._payload&&(e.checked=this._payload.checked==="true"?"checked":this._payload.checked==="false"?"unchecked":"mixed"),"pressed"in this._payload&&(e.pressed=this._payload.pressed==="true"?"pressed":this._payload.pressed==="false"?"released":"mixed");let t=["keyshortcuts","valuetext"];for(let c of t)c in this._payload&&(e[c]=this._payload[c]);let i=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(let c of i){if(c==="focused"&&(this._payload.role==="WebArea"||this._payload.role==="ScrollArea"))continue;let l=this._payload[c];!l||(e[c]=l)}let n=["level","valuemax","valuemin"];for(let c of n)c in this._payload&&(e[c]=this._payload[c]);let s=["autocomplete","haspopup","invalid"];for(let c of s){let l=this._payload[c];!l||l==="false"||(e[c]=l)}let o=new Set(["ScrollArea","scrollbar","listbox","combobox","menu","tree","separator","slider","tablist","toolbar"]);return this._payload.orientation&&o.has(this._payload.role)&&(e.orientation=this._payload.orientation),e}}});var g_=w(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.WKExecutionContext=void 0;var Di=oH(ci()),nH=Qo(),sH=di();function LP(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(LP=function(i){return i?t:e})(r)}function oH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=LP(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var BP=class{constructor(e,t){this._session=void 0,this._contextId=void 0,this._contextDestroyedCallback=()=>{},this._executionContextDestroyedPromise=void 0,this._session=e,this._contextId=t,this._executionContextDestroyedPromise=new Promise((i,n)=>{this._contextDestroyedCallback=i})}_dispose(){this._contextDestroyedCallback()}async rawEvaluateJSON(e){try{let t=await this._session.send("Runtime.evaluate",{expression:e,contextId:this._contextId,returnByValue:!0});if(t.wasThrown)throw new Di.JavaScriptErrorInEvaluate(t.result.description);return t.result.value}catch(t){throw __(t)}}async rawEvaluateHandle(e){try{let t=await this._session.send("Runtime.evaluate",{expression:e,contextId:this._contextId,returnByValue:!1});if(t.wasThrown)throw new Di.JavaScriptErrorInEvaluate(t.result.description);return t.result.objectId}catch(t){throw __(t)}}rawCallFunctionNoReply(e,...t){this._session.send("Runtime.callFunctionOn",{functionDeclaration:e.toString(),objectId:t.find(i=>i instanceof Di.JSHandle)._objectId,arguments:t.map(i=>i instanceof Di.JSHandle?{objectId:i._objectId}:{value:i}),returnByValue:!0,emulateUserGesture:!0}).catch(()=>{})}async evaluateWithArguments(e,t,i,n,s){try{let o=await Promise.race([this._executionContextDestroyedPromise.then(()=>{throw new Error(aH)}),this._session.send("Runtime.callFunctionOn",{functionDeclaration:e,objectId:i._objectId,arguments:[{objectId:i._objectId},...n.map(c=>({value:c})),...s.map(c=>({objectId:c}))],returnByValue:t,emulateUserGesture:!0,awaitPromise:!0})]);if(o.wasThrown)throw new Di.JavaScriptErrorInEvaluate(o.result.description);return t?(0,nH.parseEvaluationResultValue)(o.result.value):i._context.createHandle(o.result)}catch(o){throw __(o)}}async getProperties(e,t){let i=await this._session.send("Runtime.getProperties",{objectId:t,ownProperties:!0}),n=new Map;for(let s of i.properties)!s.enumerable||!s.value||n.set(s.name,e.createHandle(s.value));return n}createHandle(e,t){let i=t.className==="Promise";return new Di.JSHandle(e,i?"promise":t.subtype||t.type,lH(t),t.objectId,cH(t))}async releaseHandle(e){await this._session.send("Runtime.releaseObject",{objectId:e})}};xd.WKExecutionContext=BP;var aH="Execution context was destroyed.";function cH(r){let e=r.value;return r.type==="number"&&["NaN","-Infinity","Infinity","-0"].includes(r.description)?Di.parseUnserializableValue(r.description):e}function __(r){return!Di.isJavaScriptErrorInEvaluate(r)&&!(0,sH.isSessionClosedError)(r)?new Error("Execution context was destroyed, most likely because of a navigation."):r}function lH(r){if(r.type==="undefined")return"undefined";if("value"in r)return String(r.value);if(r.description==="Object"&&r.preview){let e=[];for(let{name:t,value:i}of r.preview.properties)e.push(`${t}: ${i}`);return`{${e.join(", ")}}`}if(r.subtype==="array"&&r.preview){let e=[];for(let{name:t,value:i}of r.preview.properties)e[+t]=i;return"["+String(e)+"]"}return r.description}});var UP=w(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.RawTouchscreenImpl=Ri.RawMouseImpl=Ri.RawKeyboardImpl=void 0;var HP=hH(ul()),uH=Zf(),dH=H();function jP(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(jP=function(i){return i?t:e})(r)}function hH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=jP(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function Tn(r){let e=0;return r.has("Shift")&&(e|=1),r.has("Control")&&(e|=2),r.has("Alt")&&(e|=4),r.has("Meta")&&(e|=8),e}function w_(r){let e=0;return r.has("left")&&(e|=1),r.has("middle")&&(e|=2),r.has("right")&&(e|=4),e}var WP=class{constructor(e){this._pageProxySession=void 0,this._session=void 0,this._pageProxySession=e}setSession(e){this._session=e}async keydown(e,t,i,n,s,o,c,l){let u=[];for(let p of["Shift","Control","Alt","Meta"])e.has(p)&&u.push(p);u.push(t);let d=u.join("+"),h=uH.macEditingCommands[d];(0,dH.isString)(h)&&(h=[h]),await this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyDown",modifiers:Tn(e),windowsVirtualKeyCode:i,code:t,key:s,text:l,unmodifiedText:l,autoRepeat:c,macCommands:h,isKeypad:o===HP.keypadLocation})}async keyup(e,t,i,n,s,o){await this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:Tn(e),key:s,windowsVirtualKeyCode:i,code:t,isKeypad:o===HP.keypadLocation})}async sendText(e){await this._session.send("Page.insertText",{text:e})}};Ri.RawKeyboardImpl=WP;var $P=class{constructor(e){this._pageProxySession=void 0,this._session=void 0,this._page=void 0,this._pageProxySession=e}setSession(e){this._session=e}async move(e,t,i,n,s){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"move",button:i,buttons:w_(n),x:e,y:t,modifiers:Tn(s)})}async down(e,t,i,n,s,o){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"down",button:i,buttons:w_(n),x:e,y:t,modifiers:Tn(s),clickCount:o})}async up(e,t,i,n,s,o){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"up",button:i,buttons:w_(n),x:e,y:t,modifiers:Tn(s),clickCount:o})}async wheel(e,t,i,n,s,o){await this._session.send("Page.updateScrollingState"),await this._page.mainFrame().evaluateExpression("new Promise(requestAnimationFrame)",!1,!1,"utility"),await this._pageProxySession.send("Input.dispatchWheelEvent",{x:e,y:t,deltaX:s,deltaY:o,modifiers:Tn(n)})}setPage(e){this._page=e}};Ri.RawMouseImpl=$P;var zP=class{constructor(e){this._pageProxySession=void 0,this._pageProxySession=e}async tap(e,t,i){await this._pageProxySession.send("Input.dispatchTapEvent",{x:e,y:t,modifiers:Tn(i)})}};Ri.RawTouchscreenImpl=zP});var XP=w(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.WKRouteImpl=ro.WKInterceptableRequest=void 0;var Sd=pH(Dt()),to=H(),VP=zt();function GP(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(GP=function(i){return i?t:e})(r)}function pH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=GP(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var fH={aborted:"Cancellation",accessdenied:"AccessControl",addressunreachable:"General",blockedbyclient:"Cancellation",blockedbyresponse:"General",connectionaborted:"General",connectionclosed:"General",connectionfailed:"General",connectionrefused:"General",connectionreset:"General",internetdisconnected:"General",namenotresolved:"General",timedout:"Timeout",failed:"General"},KP=class{constructor(e,t,i,n,s,o){this._session=void 0,this.request=void 0,this._requestId=void 0,this._timestamp=void 0,this._wallTime=void 0,this._route=void 0,this._redirectedFrom=void 0,this._session=e,this._requestId=n.requestId,this._route=t,this._redirectedFrom=s;let c=n.type?n.type.toLowerCase():s?s.request.resourceType():"other",l=null;this._timestamp=n.timestamp,this._wallTime=n.walltime*1e3,n.request.postData&&(l=Buffer.from(n.request.postData,"base64")),this.request=new Sd.Request(i,(s==null?void 0:s.request)||null,o,n.request.url,c,n.request.method,l,(0,to.headersObjectToArray)(n.request.headers))}_routeForRedirectChain(){let e=this;for(;e._redirectedFrom;)e=e._redirectedFrom;return e._route}createResponse(e){let t=async()=>{let o=await this._session.send("Network.getResponseBody",{requestId:this._requestId});return Buffer.from(o.body,o.base64Encoded?"base64":"utf8")},i=e.timing,n={startTime:this._wallTime,domainLookupStart:i?An(i.domainLookupStart):-1,domainLookupEnd:i?An(i.domainLookupEnd):-1,connectStart:i?An(i.connectStart):-1,secureConnectionStart:i?An(i.secureConnectionStart):-1,connectEnd:i?An(i.connectEnd):-1,requestStart:i?An(i.requestStart):-1,responseStart:i?An(i.responseStart):-1},s=process.platform==="darwin"?",":`
`;return new Sd.Response(this.request,e.status,e.statusText,(0,to.headersObjectToArray)(e.headers,",",s),n,t)}};ro.WKInterceptableRequest=KP;var JP=class{constructor(e,t,i){this._session=void 0,this._requestId=void 0,this._requestInterceptedPromise=new VP.ManualPromise,this._responseInterceptedPromise=void 0,this._page=void 0,this._session=e,this._page=t,this._requestId=i}async responseBody(){let e=await this._session.send("Network.getInterceptedResponseBody",{requestId:this._requestId});return Buffer.from(e.body,"base64")}async abort(e){let t=fH[e];(0,to.assert)(t,"Unknown error code: "+e),await this._requestInterceptedPromise;let i=await this._responseInterceptedPromise;await this._session.sendMayFail(i?"Network.interceptResponseWithError":"Network.interceptRequestWithError",{requestId:this._requestId,errorType:t})}async fulfill(e){if(300<=e.status&&e.status<400)throw new Error("Cannot fulfill with redirect status: "+e.status);await this._requestInterceptedPromise;let t=e.isBase64?"application/octet-stream":"text/plain",i=(0,to.headersArrayToObject)(e.headers,!1),n=i["content-type"];n&&(t=n.split(";")[0].trim());let s=await this._responseInterceptedPromise;await this._session.sendMayFail(s?"Network.interceptWithResponse":"Network.interceptRequestWithResponse",{requestId:this._requestId,status:e.status,statusText:Sd.STATUS_TEXTS[String(e.status)],mimeType:t,headers:i,base64Encoded:e.isBase64,content:e.body})}async continue(e,t){if(t.interceptResponse&&(await this._page._ensureResponseInterceptionEnabled(),this._responseInterceptedPromise=new VP.ManualPromise),await this._requestInterceptedPromise,await this._session.sendMayFail("Network.interceptWithRequest",{requestId:this._requestId,url:t.url,method:t.method,headers:t.headers?(0,to.headersArrayToObject)(t.headers,!1):void 0,postData:t.postData?Buffer.from(t.postData).toString("base64"):void 0}),!this._responseInterceptedPromise)return null;let{response:i,error:n}=await this._responseInterceptedPromise;if(n)throw new Error(`Request failed: ${n.errorText}`);return new Sd.InterceptedResponse(e,i.status,i.statusText,(0,to.headersObjectToArray)(i.headers))}};ro.WKRouteImpl=JP;function An(r){return r===-1e3||r<=0?-1:(r*1e3|0)/1e3}});var ZP=w(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.WKProvisionalPage=void 0;var Mn=dt(),YP=H(),QP=class{constructor(e,t){this._session=void 0,this._wkPage=void 0,this._sessionListeners=[],this._mainFrameId=null,this.initializationPromise=void 0,this._session=e,this._wkPage=t;let i=s=>o=>{o.frameId&&(o.frameId=this._wkPage._page._frameManager.mainFrame()._id),s(o)},n=this._wkPage;this._sessionListeners=[Mn.eventsHelper.addEventListener(e,"Network.requestWillBeSent",i(s=>n._onRequestWillBeSent(e,s))),Mn.eventsHelper.addEventListener(e,"Network.requestIntercepted",i(s=>n._onRequestIntercepted(e,s))),Mn.eventsHelper.addEventListener(e,"Network.responseIntercepted",i(s=>n._onResponseIntercepted(e,s))),Mn.eventsHelper.addEventListener(e,"Network.responseReceived",i(s=>n._onResponseReceived(s))),Mn.eventsHelper.addEventListener(e,"Network.loadingFinished",i(s=>n._onLoadingFinished(s))),Mn.eventsHelper.addEventListener(e,"Network.loadingFailed",i(s=>n._onLoadingFailed(s)))],this.initializationPromise=this._wkPage._initializeSession(e,!0,({frameTree:s})=>this._handleFrameTree(s))}dispose(){Mn.eventsHelper.removeEventListeners(this._sessionListeners)}commit(){(0,YP.assert)(this._mainFrameId),this._wkPage._onFrameAttached(this._mainFrameId,null)}_handleFrameTree(e){(0,YP.assert)(!e.frame.parentId),this._mainFrameId=e.frame.id}};Ed.WKProvisionalPage=QP});var tO=w(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.WKWorkers=void 0;var Cd=dt(),mH=bt(),_H=Ha(),gH=g_(),eO=class{constructor(e){this._sessionListeners=[],this._page=void 0,this._workerSessions=new Map,this._page=e}setSession(e){Cd.eventsHelper.removeEventListeners(this._sessionListeners),this.clear(),this._sessionListeners=[Cd.eventsHelper.addEventListener(e,"Worker.workerCreated",t=>{let i=new mH.Worker(this._page,t.url),n=new _H.WKSession(e.connection,t.workerId,"Most likely the worker has been closed.",s=>{e.send("Worker.sendMessageToWorker",{workerId:t.workerId,message:JSON.stringify(s)}).catch(o=>{n.dispatchMessage({id:s.id,error:{message:o.message}})})});this._workerSessions.set(t.workerId,n),i._createExecutionContext(new gH.WKExecutionContext(n,void 0)),this._page._addWorker(t.workerId,i),n.on("Console.messageAdded",s=>this._onConsoleMessage(i,s)),Promise.all([n.send("Runtime.enable"),n.send("Console.enable"),e.send("Worker.initialized",{workerId:t.workerId})]).catch(s=>{this._page._removeWorker(t.workerId)})}),Cd.eventsHelper.addEventListener(e,"Worker.dispatchMessageFromWorker",t=>{let i=this._workerSessions.get(t.workerId);!i||i.dispatchMessage(JSON.parse(t.message))}),Cd.eventsHelper.addEventListener(e,"Worker.workerTerminated",t=>{let i=this._workerSessions.get(t.workerId);!i||(i.dispose(!1),this._workerSessions.delete(t.workerId),this._page._removeWorker(t.workerId))})]}clear(){this._page._clearWorkers(),this._workerSessions.clear()}async initializeSession(e){await e.send("Worker.enable")}async _onConsoleMessage(e,t){let{type:i,level:n,text:s,parameters:o,url:c,line:l,column:u}=t.message,d=i||"";i==="log"?d=n:i==="timing"&&(d="timeEnd");let h=(o||[]).map(f=>e._existingExecutionContext.createHandle(f)),p={url:c||"",lineNumber:(l||1)-1,columnNumber:(u||1)-1};this._page._addConsoleMessage(d,h,p,h.length?void 0:s)}};kd.WKWorkers=eO});var cO=w(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.WKPage=void 0;var wH=Wa(jk()),vH=AH(require("path")),yH=Wa(NP()),bH=It(),wt=H(),xH=Wa(tu()),rO=Wa(Zo()),Se=dt(),Pd=kt(),iO=Wa(Dt()),In=bt(),SH=qP(),EH=Ha(),CH=g_(),v_=UP(),nO=XP(),kH=ZP(),PH=tO(),OH=ze(),TH=zt();function AH(r){return r&&r.__esModule?r:{default:r}}function sO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(sO=function(i){return i?t:e})(r)}function Wa(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=sO(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var oO="__playwright_utility_world__",aO="__playwright_binding_call__",$a=class{constructor(e,t,i){if(this.rawMouse=void 0,this.rawKeyboard=void 0,this.rawTouchscreen=void 0,this._session=void 0,this._provisionalPage=null,this._page=void 0,this._pagePromise=new TH.ManualPromise,this._pageProxySession=void 0,this._opener=void 0,this._requestIdToRequest=new Map,this._workers=void 0,this._contextIdToContext=void 0,this._mainFrameContextId=void 0,this._sessionListeners=[],this._eventListeners=void 0,this._browserContext=void 0,this._initializedPage=null,this._firstNonInitialNavigationCommittedPromise=void 0,this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=n=>{},this._lastConsoleMessage=null,this._requestIdToResponseReceivedPayloadEvent=new Map,this._needsResponseInterception=!1,this._nextWindowOpenPopupFeatures=void 0,this._recordingVideoFile=null,this._screencastGeneration=0,this._pageProxySession=t,this._opener=i,this.rawKeyboard=new v_.RawKeyboardImpl(t),this.rawMouse=new v_.RawMouseImpl(t),this.rawTouchscreen=new v_.RawTouchscreenImpl(t),this._contextIdToContext=new Map,this._page=new In.Page(this,e),this.rawMouse.setPage(this._page),this._workers=new PH.WKWorkers(this._page),this._session=void 0,this._browserContext=e,this._page.on(In.Page.Events.FrameDetached,n=>this._removeContextsForFrame(n,!1)),this._eventListeners=[Se.eventsHelper.addEventListener(this._pageProxySession,"Target.targetCreated",this._onTargetCreated.bind(this)),Se.eventsHelper.addEventListener(this._pageProxySession,"Target.targetDestroyed",this._onTargetDestroyed.bind(this)),Se.eventsHelper.addEventListener(this._pageProxySession,"Target.dispatchMessageFromTarget",this._onDispatchMessageFromTarget.bind(this)),Se.eventsHelper.addEventListener(this._pageProxySession,"Target.didCommitProvisionalTarget",this._onDidCommitProvisionalTarget.bind(this)),Se.eventsHelper.addEventListener(this._pageProxySession,"Screencast.screencastFrame",this._onScreencastFrame.bind(this))],this._firstNonInitialNavigationCommittedPromise=new Promise((n,s)=>{this._firstNonInitialNavigationCommittedFulfill=n,this._firstNonInitialNavigationCommittedReject=s}),i&&!e._options.noDefaultViewport&&i._nextWindowOpenPopupFeatures){let n=Pd.helper.getViewportSizeFromWindowFeatures(i._nextWindowOpenPopupFeatures);i._nextWindowOpenPopupFeatures=void 0,n&&(this._page._state.emulatedSize={viewport:n,screen:n})}}async _initializePageProxySession(){let e=[this._pageProxySession.send("Dialog.enable"),this._pageProxySession.send("Emulation.setActiveAndFocused",{active:!0})];if(this._browserContext._options.javaScriptEnabled===!1&&e.push(this._pageProxySession.send("Emulation.setJavaScriptEnabled",{enabled:!1})),e.push(this._updateViewport()),e.push(this.updateHttpCredentials()),this._browserContext._permissions.size)for(let[i,n]of this._browserContext._permissions)e.push(this._grantPermissions(i,n));if(this._browserContext._options.recordVideo){let i=vH.default.join(this._browserContext._options.recordVideo.dir,(0,wt.createGuid)()+".webm");e.push(this._browserContext._ensureVideosPath().then(()=>this._startVideo({...this._browserContext._options.recordVideo.size,outputFile:i})))}await Promise.all(e)}_setSession(e){Se.eventsHelper.removeEventListeners(this._sessionListeners),this._session=e,this.rawKeyboard.setSession(e),this.rawMouse.setSession(e),this._addSessionListeners(),this._workers.setSession(e)}async _initializeSession(e,t,i){await this._initializeSessionMayThrow(e,i).catch(n=>{if(!(t&&e.isDisposed())&&this._session===e)throw n})}async _initializeSessionMayThrow(e,t){let[,i]=await Promise.all([e.send("Page.enable"),e.send("Page.getResourceTree")]);t(i);let n=[e.send("Runtime.enable"),e.send("Page.createUserWorld",{name:oO}).catch(c=>{}),e.send("Console.enable"),e.send("Network.enable"),this._workers.initializeSession(e)];this._page._needsRequestInterception()&&(n.push(e.send("Network.setInterceptionEnabled",{enabled:!0})),n.push(e.send("Network.addInterception",{url:".*",stage:"request",isRegex:!0})),this._needsResponseInterception&&n.push(e.send("Network.addInterception",{url:".*",stage:"response",isRegex:!0})));let s=this._browserContext._options;s.userAgent&&n.push(e.send("Page.overrideUserAgent",{value:s.userAgent})),(this._page._state.mediaType||this._page._state.colorScheme||this._page._state.reducedMotion)&&n.push($a._setEmulateMedia(e,this._page._state.mediaType,this._page._state.colorScheme,this._page._state.reducedMotion));let o=this._calculateBootstrapScript();o.length&&n.push(e.send("Page.setBootstrapScript",{source:o})),this._page.frames().map(c=>c.evaluateExpression(o,!1,void 0).catch(l=>{})),s.bypassCSP&&n.push(e.send("Page.setBypassCSP",{enabled:!0})),this._page._state.emulatedSize&&n.push(e.send("Page.setScreenSizeOverride",{width:this._page._state.emulatedSize.screen.width,height:this._page._state.emulatedSize.screen.height})),n.push(this.updateEmulateMedia()),n.push(e.send("Network.setExtraHTTPHeaders",{headers:(0,wt.headersArrayToObject)(this._calculateExtraHTTPHeaders(),!1)})),s.offline&&n.push(e.send("Network.setEmulateOfflineState",{offline:!0})),n.push(e.send("Page.setTouchEmulationEnabled",{enabled:!!s.hasTouch})),s.timezoneId&&n.push(e.send("Page.setTimeZone",{timeZone:s.timezoneId}).catch(c=>{throw new Error(`Invalid timezone ID: ${s.timezoneId}`)})),n.push(e.send("Page.overrideSetting",{setting:"DeviceOrientationEventEnabled",value:s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"FullScreenEnabled",value:!s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"NotificationsEnabled",value:!s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"PointerLockEnabled",value:!s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"InputTypeMonthEnabled",value:s.isMobile})),n.push(e.send("Page.overrideSetting",{setting:"InputTypeWeekEnabled",value:s.isMobile})),await Promise.all(n)}_onDidCommitProvisionalTarget(e){let{oldTargetId:t,newTargetId:i}=e;(0,wt.assert)(this._provisionalPage),(0,wt.assert)(this._provisionalPage._session.sessionId===i,"Unknown new target: "+i),(0,wt.assert)(this._session.sessionId===t,"Unknown old target: "+t);let n=this._provisionalPage._session;this._provisionalPage.commit(),this._provisionalPage.dispose(),this._provisionalPage=null,this._setSession(n)}_onTargetDestroyed(e){let{targetId:t,crashed:i}=e;this._provisionalPage&&this._provisionalPage._session.sessionId===t?(this._provisionalPage._session.dispose(!1),this._provisionalPage.dispose(),this._provisionalPage=null):this._session.sessionId===t&&(this._session.dispose(!1),Se.eventsHelper.removeEventListeners(this._sessionListeners),i&&(this._session.markAsCrashed(),this._page._didCrash()))}didClose(){this._page._didClose()}dispose(e){this._pageProxySession.dispose(e),Se.eventsHelper.removeEventListeners(this._sessionListeners),Se.eventsHelper.removeEventListeners(this._eventListeners),this._session&&this._session.dispose(e),this._provisionalPage&&(this._provisionalPage._session.dispose(e),this._provisionalPage.dispose(),this._provisionalPage=null),this._page._didDisconnect(),this._firstNonInitialNavigationCommittedReject(new Error("Page closed"))}dispatchMessageToSession(e){this._pageProxySession.dispatchMessage(e)}handleProvisionalLoadFailed(e){if(!this._initializedPage){this._firstNonInitialNavigationCommittedReject(new Error("Initial load failed"));return}if(!this._provisionalPage)return;let t=e.error;t.includes("cancelled")&&(t+="; maybe frame was detached?"),this._page._frameManager.frameAbortedNavigation(this._page.mainFrame()._id,t,e.loaderId)}handleWindowOpen(e){(0,wt.debugAssert)(!this._nextWindowOpenPopupFeatures),this._nextWindowOpenPopupFeatures=e.windowFeatures}async pageOrError(){return this._pagePromise}async _onTargetCreated(e){let{targetInfo:t}=e,i=new EH.WKSession(this._pageProxySession.connection,t.targetId,"Target closed",n=>{this._pageProxySession.send("Target.sendMessageToTarget",{message:JSON.stringify(n),targetId:t.targetId}).catch(s=>{i.dispatchMessage({id:n.id,error:{message:s.message}})})});if((0,wt.assert)(t.type==="page","Only page targets are expected in WebKit, received: "+t.type),t.isProvisional)(0,wt.assert)(t.isProvisional),(0,wt.assert)(!this._provisionalPage),this._provisionalPage=new kH.WKProvisionalPage(i,this),t.isPaused&&this._provisionalPage.initializationPromise.then(()=>{this._pageProxySession.sendMayFail("Target.resume",{targetId:t.targetId})});else{(0,wt.assert)(!this._initializedPage);let n;try{this._setSession(i),await Promise.all([this._initializePageProxySession(),this._initializeSession(i,!1,({frameTree:s})=>this._handleFrameTree(s))]),n=this._page}catch(s){n=s}if(t.isPaused&&this._pageProxySession.sendMayFail("Target.resume",{targetId:t.targetId}),n instanceof In.Page&&this._page.mainFrame().url()==="")try{await this._firstNonInitialNavigationCommittedPromise}catch(s){n=s}else this._firstNonInitialNavigationCommittedPromise.catch(()=>{});await this._page.initOpener(this._opener),this._initializedPage=n instanceof In.Page?n:null,this._page.reportAsNew(n instanceof In.Page?void 0:n),this._pagePromise.resolve(n)}}_onDispatchMessageFromTarget(e){let{targetId:t,message:i}=e;if(this._provisionalPage&&this._provisionalPage._session.sessionId===t)this._provisionalPage._session.dispatchMessage(JSON.parse(i));else if(this._session.sessionId===t)this._session.dispatchMessage(JSON.parse(i));else throw new Error("Unknown target: "+t)}_addSessionListeners(){this._sessionListeners=[Se.eventsHelper.addEventListener(this._session,"Page.frameNavigated",e=>this._onFrameNavigated(e.frame,!1)),Se.eventsHelper.addEventListener(this._session,"Page.navigatedWithinDocument",e=>this._onFrameNavigatedWithinDocument(e.frameId,e.url)),Se.eventsHelper.addEventListener(this._session,"Page.frameAttached",e=>this._onFrameAttached(e.frameId,e.parentFrameId)),Se.eventsHelper.addEventListener(this._session,"Page.frameDetached",e=>this._onFrameDetached(e.frameId)),Se.eventsHelper.addEventListener(this._session,"Page.frameScheduledNavigation",e=>this._onFrameScheduledNavigation(e.frameId)),Se.eventsHelper.addEventListener(this._session,"Page.frameStoppedLoading",e=>this._onFrameStoppedLoading(e.frameId)),Se.eventsHelper.addEventListener(this._session,"Page.loadEventFired",e=>this._onLifecycleEvent(e.frameId,"load")),Se.eventsHelper.addEventListener(this._session,"Page.domContentEventFired",e=>this._onLifecycleEvent(e.frameId,"domcontentloaded")),Se.eventsHelper.addEventListener(this._session,"Runtime.executionContextCreated",e=>this._onExecutionContextCreated(e.context)),Se.eventsHelper.addEventListener(this._session,"Console.messageAdded",e=>this._onConsoleMessage(e)),Se.eventsHelper.addEventListener(this._session,"Console.messageRepeatCountUpdated",e=>this._onConsoleRepeatCountUpdated(e)),Se.eventsHelper.addEventListener(this._pageProxySession,"Dialog.javascriptDialogOpening",e=>this._onDialog(e)),Se.eventsHelper.addEventListener(this._session,"Page.fileChooserOpened",e=>this._onFileChooserOpened(e)),Se.eventsHelper.addEventListener(this._session,"Network.requestWillBeSent",e=>this._onRequestWillBeSent(this._session,e)),Se.eventsHelper.addEventListener(this._session,"Network.requestIntercepted",e=>this._onRequestIntercepted(this._session,e)),Se.eventsHelper.addEventListener(this._session,"Network.responseIntercepted",e=>this._onResponseIntercepted(this._session,e)),Se.eventsHelper.addEventListener(this._session,"Network.responseReceived",e=>this._onResponseReceived(e)),Se.eventsHelper.addEventListener(this._session,"Network.loadingFinished",e=>this._onLoadingFinished(e)),Se.eventsHelper.addEventListener(this._session,"Network.loadingFailed",e=>this._onLoadingFailed(e)),Se.eventsHelper.addEventListener(this._session,"Network.webSocketCreated",e=>this._page._frameManager.onWebSocketCreated(e.requestId,e.url)),Se.eventsHelper.addEventListener(this._session,"Network.webSocketWillSendHandshakeRequest",e=>this._page._frameManager.onWebSocketRequest(e.requestId)),Se.eventsHelper.addEventListener(this._session,"Network.webSocketHandshakeResponseReceived",e=>this._page._frameManager.onWebSocketResponse(e.requestId,e.response.status,e.response.statusText)),Se.eventsHelper.addEventListener(this._session,"Network.webSocketFrameSent",e=>e.response.payloadData&&this._page._frameManager.onWebSocketFrameSent(e.requestId,e.response.opcode,e.response.payloadData)),Se.eventsHelper.addEventListener(this._session,"Network.webSocketFrameReceived",e=>e.response.payloadData&&this._page._frameManager.webSocketFrameReceived(e.requestId,e.response.opcode,e.response.payloadData)),Se.eventsHelper.addEventListener(this._session,"Network.webSocketClosed",e=>this._page._frameManager.webSocketClosed(e.requestId)),Se.eventsHelper.addEventListener(this._session,"Network.webSocketFrameError",e=>this._page._frameManager.webSocketError(e.requestId,e.errorMessage))]}async _updateState(e,t){await this._forAllSessions(i=>i.send(e,t).then())}async _forAllSessions(e){let t=[this._session];this._provisionalPage&&t.push(this._provisionalPage._session),await Promise.all(t.map(i=>e(i).catch(n=>{})))}_onFrameScheduledNavigation(e){this._page._frameManager.frameRequestedNavigation(e)}_onFrameStoppedLoading(e){this._page._frameManager.frameStoppedLoading(e)}_onLifecycleEvent(e,t){this._page._frameManager.frameLifecycleEvent(e,t)}_handleFrameTree(e){if(this._onFrameAttached(e.frame.id,e.frame.parentId||null),this._onFrameNavigated(e.frame,!0),this._page._frameManager.frameLifecycleEvent(e.frame.id,"domcontentloaded"),this._page._frameManager.frameLifecycleEvent(e.frame.id,"load"),!!e.childFrames)for(let t of e.childFrames)this._handleFrameTree(t)}_onFrameAttached(e,t){return this._page._frameManager.frameAttached(e,t)}_onFrameNavigated(e,t){let i=this._page._frameManager.frame(e.id);(0,wt.assert)(i),this._removeContextsForFrame(i,!0),e.parentId||this._workers.clear(),this._page._frameManager.frameCommittedNewDocumentNavigation(e.id,e.url,e.name||"",e.loaderId,t),t||this._firstNonInitialNavigationCommittedFulfill()}_onFrameNavigatedWithinDocument(e,t){this._page._frameManager.frameCommittedSameDocumentNavigation(e,t)}_onFrameDetached(e){this._page._frameManager.frameDetached(e)}_removeContextsForFrame(e,t){for(let[i,n]of this._contextIdToContext)n.frame===e&&(n._delegate._dispose(),this._contextIdToContext.delete(i),t&&e._contextDestroyed(n))}_onExecutionContextCreated(e){if(this._contextIdToContext.has(e.id))return;let t=this._page._frameManager.frame(e.frameId);if(!t)return;let i=new CH.WKExecutionContext(this._session,e.id),n=null;e.type==="normal"?n="main":e.type==="user"&&e.name===oO&&(n="utility");let s=new rO.FrameExecutionContext(i,t,n);n&&t._contextCreated(n,s),e.type==="normal"&&t===this._page.mainFrame()&&(this._mainFrameContextId=e.id),this._contextIdToContext.set(e.id,s)}async navigateFrame(e,t,i){if(this._pageProxySession.isDisposed())throw new Error("Target closed");let n=this._pageProxySession.sessionId;return{newDocumentId:(await this._pageProxySession.connection.browserSession.send("Playwright.navigate",{url:t,pageProxyId:n,frameId:e._id,referrer:i})).loaderId}}_onConsoleMessage(e){let{type:t,level:i,text:n,parameters:s,url:o,line:c,column:l,source:u}=e.message;if(i==="debug"&&s&&s[0].value===aO){let p=JSON.parse(s[1].objectId),f=this._contextIdToContext.get(p.injectedScriptId);this.pageOrError().then(_=>{_ instanceof Error||this._page._onBindingCalled(s[2].value,f)});return}if(i==="error"&&u==="javascript"){let{name:p,message:f}=(0,bH.splitErrorMessage)(n),_;e.message.stackTrace?_=n+`
`+e.message.stackTrace.map(g=>`    at ${g.functionName||"unknown"} (${g.url}:${g.lineNumber}:${g.columnNumber})`).join(`
`):_="";let m=new Error(f);m.stack=_,m.name=p,this._page.firePageError(m);return}let d=t||"";t==="log"?d=i:t==="timing"&&(d="timeEnd");let h=(s||[]).map(p=>{let f=null;if(p.objectId){let _=JSON.parse(p.objectId);f=this._contextIdToContext.get(_.injectedScriptId)}else f=this._contextIdToContext.get(this._mainFrameContextId);return f.createHandle(p)});this._lastConsoleMessage={derivedType:d,text:n,handles:h,count:0,location:{url:o||"",lineNumber:(c||1)-1,columnNumber:(l||1)-1}},this._onConsoleRepeatCountUpdated({count:1})}_onConsoleRepeatCountUpdated(e){if(this._lastConsoleMessage){let{derivedType:t,text:i,handles:n,count:s,location:o}=this._lastConsoleMessage;for(let c=s;c<e.count;++c)this._page._addConsoleMessage(t,n,o,n.length?void 0:i);this._lastConsoleMessage.count=e.count}}_onDialog(e){this._page.emit(In.Page.Events.Dialog,new xH.Dialog(this._page,e.type,e.message,async(t,i)=>{await this._pageProxySession.send("Dialog.handleJavaScriptDialog",{accept:t,promptText:i})},e.defaultPrompt))}async _onFileChooserOpened(e){let t;try{t=(await this._page._frameManager.frame(e.frameId)._mainContext()).createHandle(e.element).asElement()}catch(i){return}await this._page._onFileChooserOpened(t)}static async _setEmulateMedia(e,t,i,n){let s=[];s.push(e.send("Page.setEmulatedMedia",{media:t||""}));let o;switch(i){case"light":o="Light";break;case"dark":o="Dark";break}s.push(e.send("Page.setForcedAppearance",{appearance:o}));let c;switch(n){case"reduce":c="Reduce";break;case"no-preference":c="NoPreference";break}s.push(e.send("Page.setForcedReducedMotion",{reducedMotion:c})),await Promise.all(s)}async updateExtraHTTPHeaders(){await this._updateState("Network.setExtraHTTPHeaders",{headers:(0,wt.headersArrayToObject)(this._calculateExtraHTTPHeaders(),!1)})}_calculateExtraHTTPHeaders(){let e=this._browserContext._options.locale;return iO.mergeHeaders([this._browserContext._options.extraHTTPHeaders,this._page._state.extraHTTPHeaders,e?iO.singleHeader("Accept-Language",e):void 0])}async updateEmulateMedia(){let e=this._page._state.colorScheme,t=this._page._state.reducedMotion;await this._forAllSessions(i=>$a._setEmulateMedia(i,this._page._state.mediaType,e,t))}async setEmulatedSize(e){(0,wt.assert)(this._page._state.emulatedSize===e),await this._updateViewport()}async bringToFront(){this._pageProxySession.send("Target.activate",{targetId:this._session.sessionId})}async _updateViewport(){let e=this._browserContext._options,t=this._page._state.emulatedSize;if(t===null)return;let i=t.viewport,n=t.screen,s=[this._pageProxySession.send("Emulation.setDeviceMetricsOverride",{width:i.width,height:i.height,fixedLayout:!!e.isMobile,deviceScaleFactor:e.deviceScaleFactor||1}),this._session.send("Page.setScreenSizeOverride",{width:n.width,height:n.height})];if(e.isMobile){let o=i.width>i.height?90:0;s.push(this._session.send("Page.setOrientationOverride",{angle:o}))}await Promise.all(s)}async _ensureResponseInterceptionEnabled(){this._needsResponseInterception||(this._needsResponseInterception=!0,await this.updateRequestInterception())}async updateRequestInterception(){let e=this._page._needsRequestInterception(),t=[this._updateState("Network.setInterceptionEnabled",{enabled:e}),this._updateState("Network.addInterception",{url:".*",stage:"request",isRegex:!0})];this._needsResponseInterception&&this._updateState("Network.addInterception",{url:".*",stage:"response",isRegex:!0}),await Promise.all(t)}async updateOffline(){await this._updateState("Network.setEmulateOfflineState",{offline:!!this._browserContext._options.offline})}async updateHttpCredentials(){let e=this._browserContext._options.httpCredentials||{username:"",password:""};await this._pageProxySession.send("Emulation.setAuthCredentials",{username:e.username,password:e.password})}async setFileChooserIntercepted(e){await this._session.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(t=>{})}async reload(){await this._session.send("Page.reload")}goBack(){return this._session.send("Page.goBack").then(()=>!0).catch(e=>{if(e instanceof Error&&e.message.includes("Protocol error (Page.goBack): Failed to go"))return!1;throw e})}goForward(){return this._session.send("Page.goForward").then(()=>!0).catch(e=>{if(e instanceof Error&&e.message.includes("Protocol error (Page.goForward): Failed to go"))return!1;throw e})}async exposeBinding(e){await this._updateBootstrapScript(),await this._evaluateBindingScript(e)}async _evaluateBindingScript(e){let t=this._bindingToScript(e);await Promise.all(this._page.frames().map(i=>i.evaluateExpression(t,!1,{}).catch(n=>{})))}async evaluateOnNewDocument(e){await this._updateBootstrapScript()}_bindingToScript(e){return`self.${e.name} = (param) => console.debug('${aO}', {}, param); ${e.source}`}_calculateBootstrapScript(){let e=[];for(let t of this._page.allBindings())e.push(this._bindingToScript(t));return e.push(...this._browserContext._evaluateOnNewDocumentSources),e.push(...this._page._evaluateOnNewDocumentSources),e.join(";")}async _updateBootstrapScript(){await this._updateState("Page.setBootstrapScript",{source:this._calculateBootstrapScript()})}async closePage(e){await this._stopVideo(),await this._pageProxySession.sendMayFail("Target.close",{targetId:this._session.sessionId,runBeforeUnload:e})}canScreenshotOutsideViewport(){return!0}async setBackgroundColor(e){await this._session.send("Page.setDefaultBackgroundColorOverride",{color:e})}_toolbarHeight(){var e;return(e=this._page._browserContext._browser)!==null&&e!==void 0&&e.options.headful?wt.hostPlatform==="mac10.15"?55:59:0}async _startVideo(e){(0,wt.assert)(!this._recordingVideoFile);let{screencastId:t}=await this._pageProxySession.send("Screencast.startVideo",{file:e.outputFile,width:e.width,height:e.height,toolbarHeight:this._toolbarHeight()});this._recordingVideoFile=e.outputFile,this._browserContext._browser._videoStarted(this._browserContext,t,e.outputFile,this.pageOrError())}async _stopVideo(){!this._recordingVideoFile||(await this._pageProxySession.sendMayFail("Screencast.stopVideo"),this._recordingVideoFile=null)}async takeScreenshot(e,t,i,n,s){let o=i||n,c=await this._session.send("Page.snapshotRect",{...o,coordinateSystem:i?"Page":"Viewport"}),l="data:image/png;base64,",u=Buffer.from(c.dataURL.substr(l.length),"base64");return t==="jpeg"&&(u=wH.encode(yH.PNG.sync.read(u),s).data),u}async resetViewport(){(0,wt.assert)(!1,"Should not be called")}async getContentFrame(e){let t=await this._session.send("DOM.describeNode",{objectId:e._objectId});return t.contentFrameId?this._page._frameManager.frame(t.contentFrameId):null}async getOwnerFrame(e){return e._objectId&&(await this._session.send("DOM.describeNode",{objectId:e._objectId})).ownerFrameId||null}isElementHandle(e){return e.subtype==="node"}async getBoundingBox(e){let t=await this.getContentQuads(e);if(!t||!t.length)return null;let i=1/0,n=-1/0,s=1/0,o=-1/0;for(let c of t)for(let l of c)i=Math.min(i,l.x),n=Math.max(n,l.x),s=Math.min(s,l.y),o=Math.max(o,l.y);return{x:i,y:s,width:n-i,height:o-s}}async scrollRectIntoViewIfNeeded(e,t){return await this._session.send("DOM.scrollIntoViewIfNeeded",{objectId:e._objectId,rect:t}).then(()=>"done").catch(i=>{if(i instanceof Error&&i.message.includes("Node does not have a layout object"))return"error:notvisible";if(i instanceof Error&&i.message.includes("Node is detached from document"))return"error:notconnected";throw i})}async setScreencastOptions(e){if(e){let t={...e,toolbarHeight:this._toolbarHeight()},{generation:i}=await this._pageProxySession.send("Screencast.startScreencast",t);this._screencastGeneration=i}else await this._pageProxySession.send("Screencast.stopScreencast")}_onScreencastFrame(e){this._pageProxySession.send("Screencast.screencastFrameAck",{generation:this._screencastGeneration}).catch(i=>OH.debugLogger.log("error",i));let t=Buffer.from(e.data,"base64");this._page.emit(In.Page.Events.ScreencastFrame,{buffer:t,width:e.deviceWidth,height:e.deviceHeight})}rafCountForStablePosition(){return process.platform==="win32"?5:1}async getContentQuads(e){let t=await this._session.sendMayFail("DOM.getContentQuads",{objectId:e._objectId});return t?t.quads.map(i=>[{x:i[0],y:i[1]},{x:i[2],y:i[3]},{x:i[4],y:i[5]},{x:i[6],y:i[7]}]):null}async setInputFiles(e,t){let i=e._objectId,n=t.map(s=>({name:s.name,type:s.mimeType,data:s.buffer}));await this._session.send("DOM.setInputFiles",{objectId:i,files:n})}async adoptElementHandle(e,t){let i=await this._session.sendMayFail("DOM.resolveNode",{objectId:e._objectId,executionContextId:t._delegate._contextId});if(!i||i.object.subtype==="null")throw new Error(rO.kUnableToAdoptErrorMessage);return t.createHandle(i.object)}async getAccessibilityTree(e){return(0,SH.getAccessibilityTree)(this._session,e)}async inputActionEpilogue(){}async getFrameElement(e){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");let i=await this._page.selectors._queryAll(t,"frame,iframe",void 0),n=await Promise.all(i.map(async o=>{let c=await o.contentFrame().catch(l=>null);return{handle:o,frame:c}})),s=n.find(o=>o.frame===e);if(n.map(o=>o===s?Promise.resolve():o.handle.dispose()),!s)throw new Error("Frame has been detached.");return s.handle}_onRequestWillBeSent(e,t){if(t.request.url.startsWith("data:"))return;let i=null;if(t.redirectResponse){let u=this._requestIdToRequest.get(t.requestId);u&&(this._handleRequestRedirect(u,t.redirectResponse,t.timestamp),i=u)}let n=i?i.request.frame():this._page._frameManager.frame(t.frameId);if(!n)return;let o=t.type==="Document"?t.loaderId:void 0,c=null;this._page._needsRequestInterception()&&!i&&(c=new nO.WKRouteImpl(e,this,t.requestId));let l=new nO.WKInterceptableRequest(e,c,n,t,i,o);this._requestIdToRequest.set(t.requestId,l),this._page._frameManager.requestStarted(l.request,c||void 0)}_handleRequestRedirect(e,t,i){let n=e.createResponse(t);n._securityDetailsFinished(),n._serverAddrFinished(),n._requestFinished(t.timing?Pd.helper.secondsToRoundishMillis(i-e._timestamp):-1),this._requestIdToRequest.delete(e._requestId),this._page._frameManager.requestReceivedResponse(n),this._page._frameManager.reportRequestFinished(e.request,n)}_onRequestIntercepted(e,t){let i=this._requestIdToRequest.get(t.requestId);if(!i){e.sendMayFail("Network.interceptRequestWithError",{errorType:"Cancellation",requestId:t.requestId});return}i._route?i._route._requestInterceptedPromise.resolve():e.sendMayFail("Network.interceptWithRequest",{requestId:i._requestId})}_onResponseIntercepted(e,t){let i=this._requestIdToRequest.get(t.requestId),n=i==null?void 0:i._routeForRedirectChain();if(!(n!=null&&n._responseInterceptedPromise)){e.sendMayFail("Network.interceptContinue",{requestId:t.requestId,stage:"response"});return}n._responseInterceptedPromise.resolve({response:t.response})}_onResponseReceived(e){let t=this._requestIdToRequest.get(e.requestId);if(!t)return;this._requestIdToResponseReceivedPayloadEvent.set(t._requestId,e);let i=t.createResponse(e.response);if(e.response.requestHeaders&&Object.keys(e.response.requestHeaders).length){let n={...e.response.requestHeaders};n.host||(n.Host=new URL(t.request.url()).host),t.request.setRawRequestHeaders((0,wt.headersObjectToArray)(n))}this._page._frameManager.requestReceivedResponse(i),i.status()===204&&this._onLoadingFailed({requestId:e.requestId,errorText:"Aborted: 204 No Content",timestamp:e.timestamp})}_onLoadingFinished(e){let t=this._requestIdToRequest.get(e.requestId);if(!t)return;let i=t.request._existingResponse();if(i){var n,s,o,c,l,u,d,h,p,f,_,m;let g=this._requestIdToResponseReceivedPayloadEvent.get(t._requestId);i._serverAddrFinished(MH(e==null||(n=e.metrics)===null||n===void 0?void 0:n.remoteAddress)),i._securityDetailsFinished({protocol:IH(i.url(),i.timing())?(s=e.metrics)===null||s===void 0||(o=s.securityConnection)===null||o===void 0?void 0:o.protocol:void 0,subjectName:g==null||(c=g.response.security)===null||c===void 0||(l=c.certificate)===null||l===void 0?void 0:l.subject,validFrom:g==null||(u=g.response.security)===null||u===void 0||(d=u.certificate)===null||d===void 0?void 0:d.validFrom,validTo:g==null||(h=g.response.security)===null||h===void 0||(p=h.certificate)===null||p===void 0?void 0:p.validUntil}),(f=e.metrics)!==null&&f!==void 0&&f.protocol&&i._setHttpVersion(e.metrics.protocol),(_=e.metrics)!==null&&_!==void 0&&_.responseBodyBytesReceived&&(t.request.responseSize.encodedBodySize=e.metrics.responseBodyBytesReceived),(m=e.metrics)!==null&&m!==void 0&&m.responseHeaderBytesReceived&&(t.request.responseSize.responseHeadersSize=e.metrics.responseHeaderBytesReceived),i._requestFinished(Pd.helper.secondsToRoundishMillis(e.timestamp-t._timestamp))}this._requestIdToResponseReceivedPayloadEvent.delete(t._requestId),this._requestIdToRequest.delete(t._requestId),this._page._frameManager.reportRequestFinished(t.request,i)}_onLoadingFailed(e){let t=this._requestIdToRequest.get(e.requestId);if(!t)return;let i=t._routeForRedirectChain();i!=null&&i._responseInterceptedPromise&&i._responseInterceptedPromise.resolve({error:e});let n=t.request._existingResponse();n&&(n._serverAddrFinished(),n._securityDetailsFinished(),n._requestFinished(Pd.helper.secondsToRoundishMillis(e.timestamp-t._timestamp))),this._requestIdToRequest.delete(t._requestId),t.request._setFailureText(e.errorText),this._page._frameManager.requestFailed(t.request,e.errorText.includes("cancelled"))}async _grantPermissions(e,t){let i=new Map([["geolocation","geolocation"]]),n=t.map(s=>{let o=i.get(s);if(!o)throw new Error("Unknown permission: "+s);return o});await this._pageProxySession.send("Emulation.grantPermissions",{origin:e,permissions:n})}async _clearPermissions(){await this._pageProxySession.send("Emulation.resetPermissions",{})}};Od.WKPage=$a;function MH(r){if(!!r)try{let e=r.lastIndexOf(":"),t=r.lastIndexOf(".");if(t<0)return{ipAddress:`[${r.slice(0,e)}]`,port:+r.slice(e+1)};if(e>t){let[i,n]=r.split(":");return{ipAddress:i,port:+n}}else{let[i,n]=r.split(".");return{ipAddress:`[${i}]`,port:+n}}}catch(e){}}function IH(r,e){try{let t=new URL(r);return!(t.protocol!=="https:"&&t.protocol!=="wss:"&&t.protocol!=="sftp:"||e.secureConnectionStart===-1&&e.connectStart!==-1)}catch(t){}}});var pO=w(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.WKBrowserContext=io.WKBrowser=void 0;var FH=xs(),Td=ht(),zr=dt(),lO=H(),uO=NH(Dt()),y_=Ha(),DH=cO(),RH=Mt();function dO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(dO=function(i){return i?t:e})(r)}function NH(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=dO(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var hO="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15",qH="15.0",Ad=class extends FH.Browser{static async connect(e,t){let i=new Ad(e,t);t.__testHookOnConnectToBrowser&&await t.__testHookOnConnectToBrowser();let n=[i._browserSession.send("Playwright.enable")];return t.persistent&&(i._defaultContext=new Md(i,void 0,t.persistent),n.push(i._defaultContext._initialize())),await Promise.all(n),i}constructor(e,t){super(t);this._connection=void 0,this._browserSession=void 0,this._contexts=new Map,this._wkPages=new Map,this._eventListeners=void 0,this._connection=new y_.WKConnection(e,this._onDisconnect.bind(this),t.protocolLogger,t.browserLogsCollector),this._browserSession=this._connection.browserSession,this._eventListeners=[zr.eventsHelper.addEventListener(this._browserSession,"Playwright.pageProxyCreated",this._onPageProxyCreated.bind(this)),zr.eventsHelper.addEventListener(this._browserSession,"Playwright.pageProxyDestroyed",this._onPageProxyDestroyed.bind(this)),zr.eventsHelper.addEventListener(this._browserSession,"Playwright.provisionalLoadFailed",i=>this._onProvisionalLoadFailed(i)),zr.eventsHelper.addEventListener(this._browserSession,"Playwright.windowOpen",i=>this._onWindowOpen(i)),zr.eventsHelper.addEventListener(this._browserSession,"Playwright.downloadCreated",this._onDownloadCreated.bind(this)),zr.eventsHelper.addEventListener(this._browserSession,"Playwright.downloadFilenameSuggested",this._onDownloadFilenameSuggested.bind(this)),zr.eventsHelper.addEventListener(this._browserSession,"Playwright.downloadFinished",this._onDownloadFinished.bind(this)),zr.eventsHelper.addEventListener(this._browserSession,"Playwright.screencastFinished",this._onScreencastFinished.bind(this)),zr.eventsHelper.addEventListener(this._browserSession,y_.kPageProxyMessageReceived,this._onPageProxyMessageReceived.bind(this))]}_onDisconnect(){for(let e of this._wkPages.values())e.dispose(!0);for(let e of this._idToVideo.values())e.artifact.reportFinished(RH.kBrowserClosedError);this._idToVideo.clear(),this._didClose()}async newContext(e){(0,Td.validateBrowserContextOptions)(e,this.options);let t=e.proxy?{proxyServer:e.proxy.server,proxyBypassList:e.proxy.bypass}:void 0,{browserContextId:i}=await this._browserSession.send("Playwright.createContext",t);e.userAgent=e.userAgent||hO;let n=new Md(this,i,e);return await n._initialize(),this._contexts.set(i,n),n}contexts(){return Array.from(this._contexts.values())}version(){return qH}userAgent(){return hO}_onDownloadCreated(e){let t=this._wkPages.get(e.pageProxyId);if(!t)return;t._page._frameManager.frameAbortedNavigation(e.frameId,"Download is starting");let i=t._initializedPage;i||(t._firstNonInitialNavigationCommittedReject(new Error("Starting new page download")),t._opener&&(i=t._opener._initializedPage)),!!i&&this._downloadCreated(i,e.uuid,e.url)}_onDownloadFilenameSuggested(e){this._downloadFilenameSuggested(e.uuid,e.suggestedFilename)}_onDownloadFinished(e){this._downloadFinished(e.uuid,e.error)}_onScreencastFinished(e){var t;(t=this._takeVideo(e.screencastId))===null||t===void 0||t.reportFinished()}_onPageProxyCreated(e){let t=e.pageProxyId,i=null;if(e.browserContextId&&(i=this._contexts.get(e.browserContextId)||null),i||(i=this._defaultContext),!i)return;let n=new y_.WKSession(this._connection,t,"Target closed",c=>{this._connection.rawSend({...c,pageProxyId:t})}),s=e.openerId?this._wkPages.get(e.openerId):void 0,o=new DH.WKPage(i,n,s||null);this._wkPages.set(t,o)}_onPageProxyDestroyed(e){let t=e.pageProxyId,i=this._wkPages.get(t);!i||(i.didClose(),i.dispose(!1),this._wkPages.delete(t))}_onPageProxyMessageReceived(e){let t=this._wkPages.get(e.pageProxyId);!t||t.dispatchMessageToSession(e.message)}_onProvisionalLoadFailed(e){let t=this._wkPages.get(e.pageProxyId);!t||t.handleProvisionalLoadFailed(e)}_onWindowOpen(e){let t=this._wkPages.get(e.pageProxyId);!t||t.handleWindowOpen(e)}isConnected(){return!this._connection.isClosed()}};io.WKBrowser=Ad;var Md=class extends Td.BrowserContext{constructor(e,t,i){super(e,i,t);this._evaluateOnNewDocumentSources=void 0,this._evaluateOnNewDocumentSources=[],this._authenticateProxyViaHeader()}async _initialize(){(0,lO.assert)(!this._wkPages().length);let e=this._browserContextId,t=[super._initialize()];t.push(this._browser._browserSession.send("Playwright.setDownloadBehavior",{behavior:this._options.acceptDownloads?"allow":"deny",downloadPath:this._browser.options.downloadsPath,browserContextId:e})),this._options.ignoreHTTPSErrors&&t.push(this._browser._browserSession.send("Playwright.setIgnoreCertificateErrors",{browserContextId:e,ignore:!0})),this._options.locale&&t.push(this._browser._browserSession.send("Playwright.setLanguages",{browserContextId:e,languages:[this._options.locale]})),this._options.permissions&&t.push(this.grantPermissions(this._options.permissions)),this._options.geolocation&&t.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&t.push(this.setOffline(this._options.offline)),this._options.httpCredentials&&t.push(this.setHTTPCredentials(this._options.httpCredentials)),await Promise.all(t)}_wkPages(){return Array.from(this._browser._wkPages.values()).filter(e=>e._browserContext===this)}pages(){return this._wkPages().map(e=>e._initializedPage).filter(e=>!!e)}async newPageDelegate(){(0,Td.assertBrowserContextIsNotOwned)(this);let{pageProxyId:e}=await this._browser._browserSession.send("Playwright.createPage",{browserContextId:this._browserContextId});return this._browser._wkPages.get(e)}async _doCookies(e){let{cookies:t}=await this._browser._browserSession.send("Playwright.getAllCookies",{browserContextId:this._browserContextId});return uO.filterCookies(t.map(i=>{let n={...i};return n.expires=i.expires===-1?-1:i.expires/1e3,delete n.session,n}),e)}async addCookies(e){let t=uO.rewriteCookies(e).map(i=>({...i,session:i.expires===-1||i.expires===void 0,expires:i.expires&&i.expires!==-1?i.expires*1e3:i.expires}));await this._browser._browserSession.send("Playwright.setCookies",{cookies:t,browserContextId:this._browserContextId})}async clearCookies(){await this._browser._browserSession.send("Playwright.deleteAllCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){await Promise.all(this.pages().map(i=>i._delegate._grantPermissions(e,t)))}async _doClearPermissions(){await Promise.all(this.pages().map(e=>e._delegate._clearPermissions()))}async setGeolocation(e){(0,Td.verifyGeolocation)(e),this._options.geolocation=e;let t=e?{...e,timestamp:Date.now()}:void 0;await this._browser._browserSession.send("Playwright.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:t})}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;for(let t of this.pages())await t._delegate.updateExtraHTTPHeaders()}async setOffline(e){this._options.offline=e;for(let t of this.pages())await t._delegate.updateOffline()}async _doSetHTTPCredentials(e){this._options.httpCredentials=e;for(let t of this.pages())await t._delegate.updateHttpCredentials()}async _doAddInitScript(e){this._evaluateOnNewDocumentSources.push(e);for(let t of this.pages())await t._delegate._updateBootstrapScript()}async _doExposeBinding(e){for(let t of this.pages())await t._delegate.exposeBinding(e)}async _doUpdateRequestInterception(){for(let e of this.pages())await e._delegate.updateRequestInterception()}_onClosePersistent(){}async _doClose(){(0,lO.assert)(this._browserContextId),await this._browser._browserSession.send("Playwright.deleteContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)}async _doCancelDownload(e){await this._browser._browserSession.send("Playwright.cancelDownload",{uuid:e})}};io.WKBrowserContext=Md});var mO=w(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.WebKit=void 0;var LH=pO(),BH=WH(require("path")),HH=Ha(),jH=td();function WH(r){return r&&r.__esModule?r:{default:r}}var fO=class extends jH.BrowserType{constructor(e){super("webkit",e)}_connectToTransport(e,t){return LH.WKBrowser.connect(e,t)}_amendEnvironment(e,t,i,n){return{...e,CURL_COOKIE_JAR_PATH:BH.default.join(t,"cookiejar.db")}}_rewriteStartupError(e){return e}_attemptToGracefullyCloseBrowser(e){e.send({method:"Playwright.close",params:{},id:HH.kBrowserCloseMessageId})}_defaultArgs(e,t,i){let{args:n=[],proxy:s,devtools:o,headless:c}=e;if(o&&console.warn("devtools parameter as a launch argument in WebKit is not supported. Also starting Web Inspector manually will terminate the execution in WebKit."),n.find(d=>d.startsWith("--user-data-dir")))throw new Error("Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --user-data-dir argument");if(n.find(d=>!d.startsWith("-")))throw new Error("Arguments can not specify page to be opened");let u=["--inspector-pipe"];return c&&u.push("--headless"),t?u.push(`--user-data-dir=${i}`):u.push("--no-startup-window"),s&&(process.platform==="darwin"?(u.push(`--proxy=${s.server}`),s.bypass&&u.push(`--proxy-bypass-list=${s.bypass}`)):process.platform==="linux"?(u.push(`--proxy=${s.server}`),s.bypass&&u.push(...s.bypass.split(",").map(d=>`--ignore-host=${d}`))):process.platform==="win32"&&(u.push(`--curl-proxy=${s.server}`),s.bypass&&u.push(`--curl-noproxy=${s.bypass}`))),u.push(...n),t&&u.push("about:blank"),u}};Id.WebKit=fO});var fa=w(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.createPlaywright=YH;za.Playwright=void 0;var $H=Fm(),zH=aC(),UH=OC(),VH=Bm(),GH=xk(),KH=Jm(),JH=mO(),_O=Qe(),XH=ze(),b_=class extends _O.SdkObject{constructor(e,t){super({attribution:{isInternal:t},instrumentation:(0,_O.createInstrumentation)()},void 0,"Playwright");this.selectors=void 0,this.chromium=void 0,this.android=void 0,this.electron=void 0,this.firefox=void 0,this.webkit=void 0,this.options=void 0,this.instrumentation.addListener({onCallLog:(i,n,s,o)=>{XH.debugLogger.log(i,n)}}),this.options={rootSdkObject:this,selectors:new KH.Selectors,sdkLanguage:e},this.chromium=new UH.Chromium(this.options),this.firefox=new GH.Firefox(this.options),this.webkit=new JH.WebKit(this.options),this.electron=new VH.Electron(this.options),this.android=new $H.Android(new zH.AdbBackend,this.options),this.selectors=this.options.selectors}};za.Playwright=b_;function YH(r,e=!1){return new b_(r,e)}});var vO=w(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.SocksConnection=void 0;var QH=ZH(require("net")),Fd=H();function ZH(r){return r&&r.__esModule?r:{default:r}}var x_;(function(r){r[r.NO_AUTHENTICATION_REQUIRED=0]="NO_AUTHENTICATION_REQUIRED",r[r.GSSAPI=1]="GSSAPI",r[r.USERNAME_PASSWORD=2]="USERNAME_PASSWORD",r[r.NO_ACCEPTABLE_METHODS=255]="NO_ACCEPTABLE_METHODS"})(x_||(x_={}));var Ua;(function(r){r[r.IPv4=1]="IPv4",r[r.FqName=3]="FqName",r[r.IPv6=4]="IPv6"})(Ua||(Ua={}));var S_;(function(r){r[r.CONNECT=1]="CONNECT",r[r.BIND=2]="BIND",r[r.UDP_ASSOCIATE=3]="UDP_ASSOCIATE"})(S_||(S_={}));var Fn;(function(r){r[r.Succeeded=0]="Succeeded",r[r.GeneralServerFailure=1]="GeneralServerFailure",r[r.NotAllowedByRuleSet=2]="NotAllowedByRuleSet",r[r.NetworkUnreachable=3]="NetworkUnreachable",r[r.HostUnreachable=4]="HostUnreachable",r[r.ConnectionRefused=5]="ConnectionRefused",r[r.TtlExpired=6]="TtlExpired",r[r.CommandNotSupported=7]="CommandNotSupported",r[r.AddressTypeNotSupported=8]="AddressTypeNotSupported"})(Fn||(Fn={}));var gO=class{constructor(e,t,i){this._buffer=Buffer.from([]),this._offset=0,this._fence=0,this._fenceCallback=void 0,this._socket=void 0,this._boundOnData=void 0,this._uid=void 0,this._client=void 0,this._uid=e,this._socket=t,this._client=i,this._boundOnData=this._onData.bind(this),t.on("data",this._boundOnData),t.on("close",()=>this._onClose()),t.on("end",()=>this._onClose()),t.on("error",()=>this._onClose()),this._run().catch(()=>this._socket.end())}async _run(){(0,Fd.assert)(await this._authenticate());let{command:e,host:t,port:i}=await this._parseRequest();if(e!==S_.CONNECT){this._writeBytes(Buffer.from([5,Fn.CommandNotSupported,0,1,0,0,0,0,0,0]));return}this._socket.off("data",this._boundOnData),this._client.onSocketRequested(this._uid,t,i)}async _authenticate(){let e=await this._readByte();(0,Fd.assert)(e===5,"The VER field must be set to x05 for this version of the protocol, was "+e);let t=await this._readByte();(0,Fd.assert)(t,"No authentication methods specified");let i=await this._readBytes(t);for(let n of i)if(n===0)return this._writeBytes(Buffer.from([e,n])),!0;return this._writeBytes(Buffer.from([e,x_.NO_ACCEPTABLE_METHODS])),!1}async _parseRequest(){let e=await this._readByte();(0,Fd.assert)(e===5,"The VER field must be set to x05 for this version of the protocol, was "+e);let t=await this._readByte();await this._readByte();let i=await this._readByte(),n="";switch(i){case Ua.IPv4:n=(await this._readBytes(4)).join(".");break;case Ua.FqName:let o=await this._readByte();n=(await this._readBytes(o)).toString();break;case Ua.IPv6:let c=await this._readBytes(16),l=[];for(let u=0;u<8;++u)l.push(c.readUInt16BE(u*2));n=l.join(":");break}let s=(await this._readBytes(2)).readUInt16BE(0);return this._buffer=Buffer.from([]),this._offset=0,this._fence=0,{command:t,host:n,port:s}}async _readByte(){return(await this._readBytes(1))[0]}async _readBytes(e){return this._fence=this._offset+e,(!this._buffer||this._buffer.length<this._fence)&&await new Promise(t=>this._fenceCallback=t),this._offset+=e,this._buffer.slice(this._offset-e,this._offset)}_writeBytes(e){this._socket.writable&&this._socket.write(e)}_onClose(){this._client.onSocketClosed(this._uid)}_onData(e){if(this._buffer=Buffer.concat([this._buffer,e]),this._fenceCallback&&this._buffer.length>=this._fence){let t=this._fenceCallback;this._fenceCallback=void 0,t()}}socketConnected(e,t){this._writeBytes(Buffer.from([5,Fn.Succeeded,0,1,...wO(e),t<<8,t&255])),this._socket.on("data",i=>this._client.onSocketData(this._uid,i))}socketFailed(e){let t=Buffer.from([5,0,0,1,...wO("0.0.0.0"),0,0]);switch(e){case"ENOENT":case"ENOTFOUND":case"ETIMEDOUT":case"EHOSTUNREACH":t[1]=Fn.HostUnreachable;break;case"ENETUNREACH":t[1]=Fn.NetworkUnreachable;break;case"ECONNREFUSED":t[1]=Fn.ConnectionRefused;break}this._writeBytes(t),this._socket.end()}sendData(e){this._socket.write(e)}end(){this._socket.end()}error(e){this._socket.destroy(new Error(e))}};Dd.SocksConnection=gO;function wO(r){if(!QH.default.isIPv4(r))throw new Error("IPv6 is not supported");return r.split(".",4).map(e=>+e)}});var Va=w(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.parseArgument=k_;Dn.parseValue=tj;Dn.serializeResult=P_;Dn.JSHandleDispatcher=void 0;var ej=$e(),E_=no(),C_=Xr(),yO=class extends ej.Dispatcher{constructor(e,t){super(e,t,t.asElement()?"ElementHandle":"JSHandle",{preview:t.toString()});t._setPreviewCallback(i=>this._dispatchEvent("previewUpdated",{preview:i}))}async evaluateExpression(e){return{value:P_(await this._object.evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,!0,k_(e.arg)))}}async evaluateExpressionHandle(e){let t=await this._object.evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,!1,k_(e.arg));return{handle:E_.ElementHandleDispatcher.fromJSHandle(this._scope,t)}}async getProperty(e){let t=await this._object.getProperty(e.name);return{handle:E_.ElementHandleDispatcher.fromJSHandle(this._scope,t)}}async getPropertyList(){let e=await this._object.getProperties(),t=[];for(let[i,n]of e)t.push({name:i,value:E_.ElementHandleDispatcher.fromJSHandle(this._scope,n)});return{properties:t}}async jsonValue(){return{value:P_(await this._object.jsonValue())}}async dispose(){await this._object.dispose()}};Dn.JSHandleDispatcher=yO;function k_(r){return(0,C_.parseSerializedValue)(r.value,r.handles.map(e=>e._object))}function tj(r){return(0,C_.parseSerializedValue)(r,[])}function P_(r){return(0,C_.serializeValue)(r,e=>({fallThrough:e}),new Set)}});var no=w(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.ElementHandleDispatcher=void 0;var Ga=$e(),Rn=Va(),Ur=class extends Rn.JSHandleDispatcher{static from(e,t){return(0,Ga.existingDispatcher)(t)||new Ur(e,t)}static fromNullable(e,t){if(!!t)return(0,Ga.existingDispatcher)(t)||new Ur(e,t)}static fromJSHandle(e,t){let i=(0,Ga.existingDispatcher)(t);return i||(t.asElement()?new Ur(e,t.asElement()):new Rn.JSHandleDispatcher(e,t))}constructor(e,t){super(e,t);this._elementHandle=void 0,this._elementHandle=t}async ownerFrame(e,t){return{frame:(0,Ga.lookupNullableDispatcher)(await this._elementHandle.ownerFrame())}}async contentFrame(e,t){return{frame:(0,Ga.lookupNullableDispatcher)(await this._elementHandle.contentFrame())}}async getAttribute(e,t){let i=await this._elementHandle.getAttribute(e.name);return{value:i===null?void 0:i}}async inputValue(e,t){return{value:await this._elementHandle.inputValue()}}async textContent(e,t){let i=await this._elementHandle.textContent();return{value:i===null?void 0:i}}async innerText(e,t){return{value:await this._elementHandle.innerText()}}async innerHTML(e,t){return{value:await this._elementHandle.innerHTML()}}async isChecked(e,t){return{value:await this._elementHandle.isChecked()}}async isDisabled(e,t){return{value:await this._elementHandle.isDisabled()}}async isEditable(e,t){return{value:await this._elementHandle.isEditable()}}async isEnabled(e,t){return{value:await this._elementHandle.isEnabled()}}async isHidden(e,t){return{value:await this._elementHandle.isHidden()}}async isVisible(e,t){return{value:await this._elementHandle.isVisible()}}async dispatchEvent(e,t){await this._elementHandle.dispatchEvent(e.type,(0,Rn.parseArgument)(e.eventInit))}async scrollIntoViewIfNeeded(e,t){await this._elementHandle.scrollIntoViewIfNeeded(t,e)}async hover(e,t){return await this._elementHandle.hover(t,e)}async click(e,t){return await this._elementHandle.click(t,e)}async dblclick(e,t){return await this._elementHandle.dblclick(t,e)}async tap(e,t){return await this._elementHandle.tap(t,e)}async selectOption(e,t){let i=(e.elements||[]).map(n=>n._elementHandle);return{values:await this._elementHandle.selectOption(t,i,e.options||[],e)}}async fill(e,t){return await this._elementHandle.fill(t,e.value,e)}async selectText(e,t){await this._elementHandle.selectText(t,e)}async setInputFiles(e,t){return await this._elementHandle.setInputFiles(t,e.files,e)}async focus(e,t){await this._elementHandle.focus(t)}async type(e,t){return await this._elementHandle.type(t,e.text,e)}async press(e,t){return await this._elementHandle.press(t,e.key,e)}async check(e,t){return await this._elementHandle.check(t,e)}async uncheck(e,t){return await this._elementHandle.uncheck(t,e)}async boundingBox(e,t){return{value:await this._elementHandle.boundingBox()||void 0}}async screenshot(e,t){return{binary:(await this._elementHandle.screenshot(t,e)).toString("base64")}}async querySelector(e,t){let i=await this._elementHandle.querySelector(e.selector,e);return{element:Ur.fromNullable(this._scope,i)}}async querySelectorAll(e,t){return{elements:(await this._elementHandle.querySelectorAll(e.selector)).map(n=>Ur.from(this._scope,n))}}async evalOnSelector(e,t){return{value:(0,Rn.serializeResult)(await this._elementHandle.evalOnSelectorAndWaitForSignals(e.selector,!!e.strict,e.expression,e.isFunction,(0,Rn.parseArgument)(e.arg)))}}async evalOnSelectorAll(e,t){return{value:(0,Rn.serializeResult)(await this._elementHandle.evalOnSelectorAllAndWaitForSignals(e.selector,e.expression,e.isFunction,(0,Rn.parseArgument)(e.arg)))}}async waitForElementState(e,t){await this._elementHandle.waitForElementState(t,e.state,e)}async waitForSelector(e,t){return{element:Ur.fromNullable(this._scope,await this._elementHandle.waitForSelector(t,e.selector,e))}}};Rd.ElementHandleDispatcher=Ur});var xO=w(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.ConsoleMessageDispatcher=void 0;var rj=$e(),ij=no(),bO=class extends rj.Dispatcher{constructor(e,t){super(e,t,"ConsoleMessage",{type:t.type(),text:t.text(),args:t.args().map(i=>ij.ElementHandleDispatcher.fromJSHandle(e,i)),location:t.location()})}};Nd.ConsoleMessageDispatcher=bO});var EO=w(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.DialogDispatcher=void 0;var nj=$e(),SO=class extends nj.Dispatcher{constructor(e,t){super(e,t,"Dialog",{type:t.type(),message:t.message(),defaultValue:t.defaultValue()})}async accept(e){await this._object.accept(e.promptText)}async dismiss(){await this._object.dismiss()}};qd.DialogDispatcher=SO});var Xa=w(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.FetchRequestDispatcher=Yt.WebSocketDispatcher=Yt.RouteDispatcher=Yt.ResponseDispatcher=Yt.RequestDispatcher=void 0;var Ld=Dt(),Er=$e(),sj=O_(),oj=Xo(),CO=H(),Vr=class extends Er.Dispatcher{static from(e,t){return(0,Er.existingDispatcher)(t)||new Vr(e,t)}static fromNullable(e,t){return t?Vr.from(e,t):void 0}constructor(e,t){let i=t.postDataBuffer();super(e,t,"Request",{frame:sj.FrameDispatcher.from(e,t.frame()),url:t.url(),resourceType:t.resourceType(),method:t.method(),postData:i===null?void 0:i.toString("base64"),headers:t.headers(),isNavigationRequest:t.isNavigationRequest(),redirectedFrom:Vr.fromNullable(e,t.redirectedFrom())})}async rawRequestHeaders(e){return{headers:await this._object.rawRequestHeaders()}}async response(){return{response:(0,Er.lookupNullableDispatcher)(await this._object.response())}}};Yt.RequestDispatcher=Vr;var Ka=class extends Er.Dispatcher{static from(e,t){return(0,Er.existingDispatcher)(t)||new Ka(e,t)}static fromNullable(e,t){return t?Ka.from(e,t):void 0}constructor(e,t){super(e,t,"Response",{request:Vr.from(e,t.request()),url:t.url(),status:t.status(),statusText:t.statusText(),headers:t.headers(),timing:t.timing()})}async body(){return{binary:(await this._object.body()).toString("base64")}}async securityDetails(){return{value:await this._object.securityDetails()||void 0}}async serverAddr(){return{value:await this._object.serverAddr()||void 0}}async rawResponseHeaders(e){return{headers:await this._object.rawResponseHeaders()}}async sizes(e){return{sizes:await this._object.sizes()}}};Yt.ResponseDispatcher=Ka;var Bd=class extends Er.Dispatcher{static from(e,t){return(0,Er.existingDispatcher)(t)||new Bd(e,t)}constructor(e,t){super(e,t,"Route",{request:Vr.from(e,t.request())})}async responseBody(e){return{binary:(await this._object.responseBody()).toString("base64")}}async continue(e,t){let i=await this._object.continue({url:e.url,method:e.method,headers:e.headers,postData:e.postData?Buffer.from(e.postData,"base64"):void 0,interceptResponse:e.interceptResponse}),n={};return i&&(n.response={request:Vr.from(this._scope,i.request()),status:i.status(),statusText:i.statusText(),headers:i.headers()}),n}async fulfill(e){await this._object.fulfill(e)}async abort(e){await this._object.abort(e.errorCode||"failed")}};Yt.RouteDispatcher=Bd;var kO=class extends Er.Dispatcher{constructor(e,t){super(e,t,"WebSocket",{url:t.url()});t.on(Ld.WebSocket.Events.FrameSent,i=>this._dispatchEvent("frameSent",i)),t.on(Ld.WebSocket.Events.FrameReceived,i=>this._dispatchEvent("frameReceived",i)),t.on(Ld.WebSocket.Events.SocketError,i=>this._dispatchEvent("socketError",{error:i})),t.on(Ld.WebSocket.Events.Close,()=>this._dispatchEvent("close",{}))}};Yt.WebSocketDispatcher=kO;var Ja=class extends Er.Dispatcher{static from(e,t){return(0,Er.existingDispatcher)(t)||new Ja(e,t)}static fromNullable(e,t){return t?Ja.from(e,t):void 0}constructor(e,t){super(e,t,"FetchRequest",{},!0);t.once(oj.FetchRequest.Events.Dispose,()=>{this._disposed||super._dispose()})}async dispose(e){this._object.dispose()}async fetch(e,t){let{fetchResponse:i,error:n}=await this._object.fetch({url:e.url,params:(0,CO.arrayToObject)(e.params),method:e.method,headers:e.headers?(0,CO.headersArrayToObject)(e.headers,!1):void 0,postData:e.postData?Buffer.from(e.postData,"base64"):void 0,formData:e.formData,timeout:e.timeout,failOnStatusCode:e.failOnStatusCode}),s;return i&&(s={url:i.url,status:i.status,statusText:i.statusText,headers:i.headers,fetchUid:i.fetchUid}),{response:s,error:n}}async fetchResponseBody(e,t){let i=this._object.fetchResponses.get(e.fetchUid);return{binary:i?i.toString("base64"):void 0}}async disposeFetchResponse(e,t){this._object.fetchResponses.delete(e.fetchUid)}};Yt.FetchRequestDispatcher=Ja});var O_=w(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.FrameDispatcher=void 0;var T_=ta(),A_=$e(),Ni=no(),Gr=Va(),aj=Xa(),so=class extends A_.Dispatcher{static from(e,t){return(0,A_.existingDispatcher)(t)||new so(e,t)}static fromNullable(e,t){if(!!t)return so.from(e,t)}constructor(e,t){super(e,t,"Frame",{url:t.url(),name:t.name(),parentFrame:so.fromNullable(e,t.parentFrame()),loadStates:Array.from(t._subtreeLifecycleEvents)});this._frame=void 0,this._frame=t,t.on(T_.Frame.Events.AddLifecycle,i=>{this._dispatchEvent("loadstate",{add:i})}),t.on(T_.Frame.Events.RemoveLifecycle,i=>{this._dispatchEvent("loadstate",{remove:i})}),t.on(T_.Frame.Events.Navigation,i=>{let n={url:i.url,name:i.name,error:i.error?i.error.message:void 0};i.newDocument&&(n.newDocument={request:aj.RequestDispatcher.fromNullable(this._scope,i.newDocument.request||null)}),this._dispatchEvent("navigated",n)})}async goto(e,t){return{response:(0,A_.lookupNullableDispatcher)(await this._frame.goto(t,e.url,e))}}async frameElement(){return{element:Ni.ElementHandleDispatcher.from(this._scope,await this._frame.frameElement())}}async evaluateExpression(e,t){return{value:(0,Gr.serializeResult)(await this._frame.evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,(0,Gr.parseArgument)(e.arg),"main"))}}async evaluateExpressionHandle(e,t){return{handle:Ni.ElementHandleDispatcher.fromJSHandle(this._scope,await this._frame.evaluateExpressionHandleAndWaitForSignals(e.expression,e.isFunction,(0,Gr.parseArgument)(e.arg),"main"))}}async waitForSelector(e,t){return{element:Ni.ElementHandleDispatcher.fromNullable(this._scope,await this._frame.waitForSelector(t,e.selector,e))}}async dispatchEvent(e,t){return this._frame.dispatchEvent(t,e.selector,e.type,(0,Gr.parseArgument)(e.eventInit),e)}async evalOnSelector(e,t){return{value:(0,Gr.serializeResult)(await this._frame.evalOnSelectorAndWaitForSignals(e.selector,!!e.strict,e.expression,e.isFunction,(0,Gr.parseArgument)(e.arg)))}}async evalOnSelectorAll(e,t){return{value:(0,Gr.serializeResult)(await this._frame.evalOnSelectorAllAndWaitForSignals(e.selector,e.expression,e.isFunction,(0,Gr.parseArgument)(e.arg)))}}async querySelector(e,t){return{element:Ni.ElementHandleDispatcher.fromNullable(this._scope,await this._frame.querySelector(e.selector,e))}}async querySelectorAll(e,t){return{elements:(await this._frame.querySelectorAll(e.selector)).map(n=>Ni.ElementHandleDispatcher.from(this._scope,n))}}async content(){return{value:await this._frame.content()}}async setContent(e,t){return await this._frame.setContent(t,e.html,e)}async addScriptTag(e,t){return{element:Ni.ElementHandleDispatcher.from(this._scope,await this._frame.addScriptTag(e))}}async addStyleTag(e,t){return{element:Ni.ElementHandleDispatcher.from(this._scope,await this._frame.addStyleTag(e))}}async click(e,t){return await this._frame.click(t,e.selector,e)}async dblclick(e,t){return await this._frame.dblclick(t,e.selector,e)}async dragAndDrop(e,t){return await this._frame.dragAndDrop(t,e.source,e.target,e)}async tap(e,t){return await this._frame.tap(t,e.selector,e)}async fill(e,t){return await this._frame.fill(t,e.selector,e.value,e)}async focus(e,t){await this._frame.focus(t,e.selector,e)}async textContent(e,t){let i=await this._frame.textContent(t,e.selector,e);return{value:i===null?void 0:i}}async innerText(e,t){return{value:await this._frame.innerText(t,e.selector,e)}}async innerHTML(e,t){return{value:await this._frame.innerHTML(t,e.selector,e)}}async getAttribute(e,t){let i=await this._frame.getAttribute(t,e.selector,e.name,e);return{value:i===null?void 0:i}}async inputValue(e,t){return{value:await this._frame.inputValue(t,e.selector,e)}}async isChecked(e,t){return{value:await this._frame.isChecked(t,e.selector,e)}}async isDisabled(e,t){return{value:await this._frame.isDisabled(t,e.selector,e)}}async isEditable(e,t){return{value:await this._frame.isEditable(t,e.selector,e)}}async isEnabled(e,t){return{value:await this._frame.isEnabled(t,e.selector,e)}}async isHidden(e,t){return{value:await this._frame.isHidden(t,e.selector,e)}}async isVisible(e,t){return{value:await this._frame.isVisible(t,e.selector,e)}}async hover(e,t){return await this._frame.hover(t,e.selector,e)}async selectOption(e,t){let i=(e.elements||[]).map(n=>n._elementHandle);return{values:await this._frame.selectOption(t,e.selector,i,e.options||[],e)}}async setInputFiles(e,t){return await this._frame.setInputFiles(t,e.selector,e.files,e)}async type(e,t){return await this._frame.type(t,e.selector,e.text,e)}async press(e,t){return await this._frame.press(t,e.selector,e.key,e)}async check(e,t){return await this._frame.check(t,e.selector,e)}async uncheck(e,t){return await this._frame.uncheck(t,e.selector,e)}async waitForFunction(e,t){return{handle:Ni.ElementHandleDispatcher.fromJSHandle(this._scope,await this._frame._waitForFunctionExpression(t,e.expression,e.isFunction,(0,Gr.parseArgument)(e.arg),e))}}async title(e,t){return{value:await this._frame.title()}}};Hd.FrameDispatcher=so});var OO=w(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.StreamDispatcher=void 0;var cj=$e(),lj=H(),PO=class extends cj.Dispatcher{constructor(e,t){super(e,{guid:"stream@"+(0,lj.createGuid)(),stream:t},"Stream",{});this._ended=!1,t.once("end",()=>this._ended=!0),t.once("error",()=>this._ended=!0)}async read(e){let t=this._object.stream;if(this._ended)return{binary:""};t.readableLength||await new Promise((n,s)=>{t.once("readable",n),t.once("end",n),t.once("error",s)});let i=t.read(Math.min(t.readableLength,e.size||t.readableLength));return{binary:i?i.toString("base64"):""}}async close(){this._object.stream.destroy()}};jd.StreamDispatcher=PO});var I_=w(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.ArtifactDispatcher=void 0;var uj=$e(),TO=OO(),M_=hj(require("fs")),dj=H();function hj(r){return r&&r.__esModule?r:{default:r}}var AO=class extends uj.Dispatcher{constructor(e,t){super(e,t,"Artifact",{absolutePath:t.localPath()})}async pathAfterFinished(){return{value:await this._object.localPathAfterFinished()||void 0}}async saveAs(e){return await new Promise((t,i)=>{this._object.saveAs(async(n,s)=>{if(s!==void 0){i(new Error(s));return}try{await(0,dj.mkdirIfNeeded)(e.path),await M_.default.promises.copyFile(n,e.path),t()}catch(o){i(o)}})})}async saveAsStream(){return await new Promise((e,t)=>{this._object.saveAs(async(i,n)=>{if(n!==void 0){t(new Error(n));return}try{let s=M_.default.createReadStream(i),o=new TO.StreamDispatcher(this._scope,s);e({stream:o}),await new Promise(c=>{s.on("close",c),s.on("end",c),s.on("error",c)})}catch(s){t(s)}})})}async stream(){let e=await this._object.localPathAfterFinished();if(!e)return{};let t=M_.default.createReadStream(e);return{stream:new TO.StreamDispatcher(this._scope,t)}}async failure(){return{error:await this._object.failureError()||void 0}}async cancel(){await this._object.cancel()}async delete(){await this._object.delete(),this._dispose()}};Wd.ArtifactDispatcher=AO});var FO=w(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.BindingCallDispatcher=qi.WorkerDispatcher=qi.PageDispatcher=void 0;var Tt=bt(),ur=$e(),MO=Xr(),pj=xO(),fj=EO(),IO=O_(),F_=Xa(),Ya=Va(),D_=no(),mj=I_(),_j=H(),Qa=class extends ur.Dispatcher{static fromNullable(e,t){return t?(0,ur.existingDispatcher)(t)||new Qa(e,t):void 0}constructor(e,t){super(e,t,"Page",{mainFrame:IO.FrameDispatcher.from(e,t.mainFrame()),viewportSize:t.viewportSize()||void 0,isClosed:t.isClosed(),opener:Qa.fromNullable(e,t.opener())},!0);this._page=void 0,this._page=t,t.on(Tt.Page.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),t.on(Tt.Page.Events.Console,n=>this._dispatchEvent("console",{message:new pj.ConsoleMessageDispatcher(this._scope,n)})),t.on(Tt.Page.Events.Crash,()=>this._dispatchEvent("crash")),t.on(Tt.Page.Events.DOMContentLoaded,()=>this._dispatchEvent("domcontentloaded")),t.on(Tt.Page.Events.Dialog,n=>this._dispatchEvent("dialog",{dialog:new fj.DialogDispatcher(this._scope,n)})),t.on(Tt.Page.Events.Download,n=>{this._dispatchEvent("download",{url:n.url,suggestedFilename:n.suggestedFilename(),artifact:new mj.ArtifactDispatcher(e,n.artifact)})}),this._page.on(Tt.Page.Events.FileChooser,n=>this._dispatchEvent("fileChooser",{element:D_.ElementHandleDispatcher.from(this._scope,n.element()),isMultiple:n.isMultiple()})),t.on(Tt.Page.Events.FrameAttached,n=>this._onFrameAttached(n)),t.on(Tt.Page.Events.FrameDetached,n=>this._onFrameDetached(n)),t.on(Tt.Page.Events.Load,()=>this._dispatchEvent("load")),t.on(Tt.Page.Events.PageError,n=>this._dispatchEvent("pageError",{error:(0,MO.serializeError)(n)})),t.on(Tt.Page.Events.WebSocket,n=>this._dispatchEvent("webSocket",{webSocket:new F_.WebSocketDispatcher(this._scope,n)})),t.on(Tt.Page.Events.Worker,n=>this._dispatchEvent("worker",{worker:new R_(this._scope,n)})),t.on(Tt.Page.Events.Video,n=>this._dispatchEvent("video",{artifact:(0,ur.existingDispatcher)(n)})),t._video&&this._dispatchEvent("video",{artifact:(0,ur.existingDispatcher)(t._video)});let i=t._frameManager.frames();for(let n=1;n<i.length;n++)this._onFrameAttached(i[n])}page(){return this._page}async setDefaultNavigationTimeoutNoReply(e,t){this._page.setDefaultNavigationTimeout(e.timeout)}async setDefaultTimeoutNoReply(e,t){this._page.setDefaultTimeout(e.timeout)}async exposeBinding(e,t){await this._page.exposeBinding(e.name,!!e.needsHandle,(i,...n)=>{let s=new N_(this._scope,e.name,!!e.needsHandle,i,n);return this._dispatchEvent("bindingCall",{binding:s}),s.promise()})}async setExtraHTTPHeaders(e,t){await this._page.setExtraHTTPHeaders(e.headers)}async reload(e,t){return{response:(0,ur.lookupNullableDispatcher)(await this._page.reload(t,e))}}async goBack(e,t){return{response:(0,ur.lookupNullableDispatcher)(await this._page.goBack(t,e))}}async goForward(e,t){return{response:(0,ur.lookupNullableDispatcher)(await this._page.goForward(t,e))}}async emulateMedia(e,t){await this._page.emulateMedia({media:e.media==="null"?null:e.media,colorScheme:e.colorScheme==="null"?null:e.colorScheme,reducedMotion:e.reducedMotion==="null"?null:e.reducedMotion,forcedColors:e.forcedColors==="null"?null:e.forcedColors})}async setViewportSize(e,t){await this._page.setViewportSize(e.viewportSize)}async addInitScript(e,t){await this._page._addInitScriptExpression(e.source)}async setNetworkInterceptionEnabled(e,t){if(!e.enabled){await this._page._setClientRequestInterceptor(void 0);return}await this._page._setClientRequestInterceptor((i,n)=>{this._dispatchEvent("route",{route:F_.RouteDispatcher.from(this._scope,i),request:F_.RequestDispatcher.from(this._scope,n)})})}async screenshot(e,t){return{binary:(await this._page.screenshot(t,e)).toString("base64")}}async close(e,t){await this._page.close(t,e)}async setFileChooserInterceptedNoReply(e,t){await this._page._setFileChooserIntercepted(e.intercepted)}async keyboardDown(e,t){await this._page.keyboard.down(e.key)}async keyboardUp(e,t){await this._page.keyboard.up(e.key)}async keyboardInsertText(e,t){await this._page.keyboard.insertText(e.text)}async keyboardType(e,t){await this._page.keyboard.type(e.text,e)}async keyboardPress(e,t){await this._page.keyboard.press(e.key,e)}async mouseMove(e,t){await this._page.mouse.move(e.x,e.y,e)}async mouseDown(e,t){await this._page.mouse.down(e)}async mouseUp(e,t){await this._page.mouse.up(e)}async mouseClick(e,t){await this._page.mouse.click(e.x,e.y,e)}async mouseWheel(e,t){await this._page.mouse.wheel(e.deltaX,e.deltaY)}async touchscreenTap(e,t){await this._page.touchscreen.tap(e.x,e.y)}async accessibilitySnapshot(e,t){return{rootAXNode:await this._page.accessibility.snapshot({interestingOnly:e.interestingOnly,root:e.root?e.root._elementHandle:void 0})||void 0}}async pdf(e,t){if(!this._page.pdf)throw new Error("PDF generation is only supported for Headless Chromium");return{pdf:(await this._page.pdf(e)).toString("base64")}}async bringToFront(e,t){await this._page.bringToFront()}async startJSCoverage(e,t){await this._page.coverage.startJSCoverage(e)}async stopJSCoverage(e,t){return{entries:await this._page.coverage.stopJSCoverage()}}async startCSSCoverage(e,t){await this._page.coverage.startCSSCoverage(e)}async stopCSSCoverage(e,t){return{entries:await this._page.coverage.stopCSSCoverage()}}_onFrameAttached(e){this._dispatchEvent("frameAttached",{frame:IO.FrameDispatcher.from(this._scope,e)})}_onFrameDetached(e){this._dispatchEvent("frameDetached",{frame:(0,ur.lookupDispatcher)(e)})}};qi.PageDispatcher=Qa;var R_=class extends ur.Dispatcher{constructor(e,t){super(e,t,"Worker",{url:t.url()});t.on(Tt.Worker.Events.Close,()=>this._dispatchEvent("close"))}async evaluateExpression(e,t){return{value:(0,Ya.serializeResult)(await this._object.evaluateExpression(e.expression,e.isFunction,(0,Ya.parseArgument)(e.arg)))}}async evaluateExpressionHandle(e,t){return{handle:D_.ElementHandleDispatcher.fromJSHandle(this._scope,await this._object.evaluateExpressionHandle(e.expression,e.isFunction,(0,Ya.parseArgument)(e.arg)))}}};qi.WorkerDispatcher=R_;var N_=class extends ur.Dispatcher{constructor(e,t,i,n,s){super(e,{guid:"bindingCall@"+(0,_j.createGuid)()},"BindingCall",{frame:(0,ur.lookupDispatcher)(n.frame),name:t,args:i?void 0:s.map(Ya.serializeResult),handle:i?D_.ElementHandleDispatcher.fromJSHandle(e,s[0]):void 0});this._resolve=void 0,this._reject=void 0,this._promise=void 0,this._promise=new Promise((o,c)=>{this._resolve=o,this._reject=c})}promise(){return this._promise}async resolve(e,t){this._resolve((0,Ya.parseArgument)(e.result))}async reject(e,t){this._reject((0,MO.parseError)(e.error))}};qi.BindingCallDispatcher=N_});var zd=w($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.CDPSessionDispatcher=void 0;var gj=Ss(),wj=$e(),DO=class extends wj.Dispatcher{constructor(e,t){super(e,t,"CDPSession",{},!0);t._eventListener=(i,n)=>{this._dispatchEvent("event",{method:i,params:n})},t.on(gj.CRSessionEvents.Disconnected,()=>this._dispose())}async send(e){return{result:await this._object.send(e.method,e.params)}}async detach(){return this._object.detach()}};$d.CDPSessionDispatcher=DO});var oo=w(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.BrowserContextDispatcher=void 0;var Nn=ht(),RO=$e(),dr=FO(),Li=Xa(),NO=Ws(),vj=zd(),yj=Kf(),q_=I_(),qO=class extends RO.Dispatcher{constructor(e,t){super(e,t,"BrowserContext",{isChromium:t._browser.options.isChromium,fetchRequest:Li.FetchRequestDispatcher.from(e,t.fetchRequest)},!0);this._context=void 0,this._context=t;let i=n=>{let s=new q_.ArtifactDispatcher(e,n);this._dispatchEvent("video",{artifact:s})};t.on(Nn.BrowserContext.Events.VideoStarted,i);for(let n of t._browser._idToVideo.values())n.context===t&&i(n.artifact);for(let n of t.pages())this._dispatchEvent("page",{page:new dr.PageDispatcher(this._scope,n)});if(t.on(Nn.BrowserContext.Events.Page,n=>this._dispatchEvent("page",{page:new dr.PageDispatcher(this._scope,n)})),t.on(Nn.BrowserContext.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),t._browser.options.name==="chromium"){for(let n of t.backgroundPages())this._dispatchEvent("backgroundPage",{page:new dr.PageDispatcher(this._scope,n)});t.on(NO.CRBrowserContext.CREvents.BackgroundPage,n=>this._dispatchEvent("backgroundPage",{page:new dr.PageDispatcher(this._scope,n)}));for(let n of t.serviceWorkers())this._dispatchEvent("serviceWorker",{worker:new dr.WorkerDispatcher(this._scope,n)});t.on(NO.CRBrowserContext.CREvents.ServiceWorker,n=>this._dispatchEvent("serviceWorker",{worker:new dr.WorkerDispatcher(this._scope,n)}))}t.on(Nn.BrowserContext.Events.Request,n=>this._dispatchEvent("request",{request:Li.RequestDispatcher.from(this._scope,n),page:dr.PageDispatcher.fromNullable(this._scope,n.frame()._page.initializedOrUndefined())})),t.on(Nn.BrowserContext.Events.Response,n=>this._dispatchEvent("response",{response:Li.ResponseDispatcher.from(this._scope,n),page:dr.PageDispatcher.fromNullable(this._scope,n.frame()._page.initializedOrUndefined())})),t.on(Nn.BrowserContext.Events.RequestFailed,n=>this._dispatchEvent("requestFailed",{request:Li.RequestDispatcher.from(this._scope,n),failureText:n._failureText||void 0,responseEndTiming:n._responseEndTiming,page:dr.PageDispatcher.fromNullable(this._scope,n.frame()._page.initializedOrUndefined())})),t.on(Nn.BrowserContext.Events.RequestFinished,({request:n,response:s})=>this._dispatchEvent("requestFinished",{request:Li.RequestDispatcher.from(e,n),response:Li.ResponseDispatcher.fromNullable(e,s),responseEndTiming:n._responseEndTiming,page:dr.PageDispatcher.fromNullable(this._scope,n.frame()._page.initializedOrUndefined())}))}async setDefaultNavigationTimeoutNoReply(e){this._context.setDefaultNavigationTimeout(e.timeout)}async setDefaultTimeoutNoReply(e){this._context.setDefaultTimeout(e.timeout)}async exposeBinding(e){await this._context.exposeBinding(e.name,!!e.needsHandle,(t,...i)=>{let n=new dr.BindingCallDispatcher(this._scope,e.name,!!e.needsHandle,t,i);return this._dispatchEvent("bindingCall",{binding:n}),n.promise()})}async newPage(e,t){return{page:(0,RO.lookupDispatcher)(await this._context.newPage(t))}}async cookies(e){return{cookies:await this._context.cookies(e.urls)}}async addCookies(e){await this._context.addCookies(e.cookies)}async clearCookies(){await this._context.clearCookies()}async grantPermissions(e){await this._context.grantPermissions(e.permissions,e.origin)}async clearPermissions(){await this._context.clearPermissions()}async setGeolocation(e){await this._context.setGeolocation(e.geolocation)}async setExtraHTTPHeaders(e){await this._context.setExtraHTTPHeaders(e.headers)}async setOffline(e){await this._context.setOffline(e.offline)}async setHTTPCredentials(e){await this._context.setHTTPCredentials(e.httpCredentials)}async addInitScript(e){await this._context._doAddInitScript(e.source)}async setNetworkInterceptionEnabled(e){if(!e.enabled){await this._context._setRequestInterceptor(void 0);return}await this._context._setRequestInterceptor((t,i)=>{this._dispatchEvent("route",{route:Li.RouteDispatcher.from(this._scope,t),request:Li.RequestDispatcher.from(this._scope,i)})})}async storageState(e,t){return await this._context.storageState(t)}async close(e,t){await this._context.close(t)}async recorderSupplementEnable(e){await yj.RecorderSupplement.show(this._context,e)}async pause(e,t){}async newCDPSession(e){if(!this._object._browser.options.isChromium)throw new Error("CDP session is only available in Chromium");if(!e.page&&!e.frame||e.page&&e.frame)throw new Error("CDP session must be initiated with either Page or Frame, not none or both");let t=this._object;return{session:new vj.CDPSessionDispatcher(this._scope,await t.newCDPSession((e.page?e.page:e.frame)._object))}}async tracingStart(e){await this._context.tracing.start(e)}async tracingStartChunk(e){await this._context.tracing.startChunk()}async tracingStopChunk(e){let t=await this._context.tracing.stopChunk(e.save);return{artifact:t?new q_.ArtifactDispatcher(this._scope,t):void 0}}async tracingStop(e){await this._context.tracing.stop()}async harExport(e){var t;let i=await((t=this._context._harRecorder)===null||t===void 0?void 0:t.export());if(!i)throw new Error("No HAR artifact. Ensure record.harPath is set.");return{artifact:new q_.ArtifactDispatcher(this._scope,i)}}};Ud.BrowserContextDispatcher=qO});var jO=w(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.AndroidSocketDispatcher=Bi.AndroidDeviceDispatcher=Bi.AndroidDispatcher=void 0;var Vd=$e(),LO=Fm(),BO=oo(),HO=class extends Vd.Dispatcher{constructor(e,t){super(e,t,"Android",{},!0)}async devices(e){return{devices:(await this._object.devices()).map(i=>Za.from(this._scope,i))}}async setDefaultTimeoutNoReply(e){this._object.setDefaultTimeout(e.timeout)}};Bi.AndroidDispatcher=HO;var Za=class extends Vd.Dispatcher{static from(e,t){return(0,Vd.existingDispatcher)(t)||new Za(e,t)}constructor(e,t){super(e,t,"AndroidDevice",{model:t.model,serial:t.serial},!0);for(let i of t.webViews())this._dispatchEvent("webViewAdded",{webView:i});t.on(LO.AndroidDevice.Events.WebViewAdded,i=>this._dispatchEvent("webViewAdded",{webView:i})),t.on(LO.AndroidDevice.Events.WebViewRemoved,i=>this._dispatchEvent("webViewRemoved",{pid:i}))}async wait(e){await this._object.send("wait",e)}async fill(e){await this._object.send("click",{selector:e.selector}),await this._object.send("fill",e)}async tap(e){await this._object.send("click",e)}async drag(e){await this._object.send("drag",e)}async fling(e){await this._object.send("fling",e)}async longTap(e){await this._object.send("longClick",e)}async pinchClose(e){await this._object.send("pinchClose",e)}async pinchOpen(e){await this._object.send("pinchOpen",e)}async scroll(e){await this._object.send("scroll",e)}async swipe(e){await this._object.send("swipe",e)}async info(e){return{info:await this._object.send("info",e)}}async inputType(e){let t=e.text,i=[];for(let n=0;n<t.length;++n){let s=B_.get(t[n].toUpperCase());if(s===void 0)throw new Error("No mapping for "+t[n]+" found");i.push(s)}await Promise.all(i.map(n=>this._object.send("inputPress",{keyCode:n})))}async inputPress(e){if(!B_.has(e.key))throw new Error("Unknown key: "+e.key);await this._object.send("inputPress",{keyCode:B_.get(e.key)})}async inputTap(e){await this._object.send("inputClick",e)}async inputSwipe(e){await this._object.send("inputSwipe",e)}async inputDrag(e){await this._object.send("inputDrag",e)}async screenshot(e){return{binary:(await this._object.screenshot()).toString("base64")}}async shell(e){return{result:(await this._object.shell(e.command)).toString("base64")}}async open(e,t){let i=await this._object.open(e.command);return{socket:new L_(this._scope,i)}}async installApk(e){await this._object.installApk(Buffer.from(e.file,"base64"),{args:e.args})}async push(e){await this._object.push(Buffer.from(e.file,"base64"),e.path,e.mode)}async launchBrowser(e){let t=await this._object.launchBrowser(e.pkg,e);return{context:new BO.BrowserContextDispatcher(this._scope,t)}}async close(e){await this._object.close()}async setDefaultTimeoutNoReply(e){this._object.setDefaultTimeout(e.timeout)}async connectToWebView(e){return{context:new BO.BrowserContextDispatcher(this._scope,await this._object.connectToWebView(e.pid))}}};Bi.AndroidDeviceDispatcher=Za;var L_=class extends Vd.Dispatcher{constructor(e,t){super(e,t,"AndroidSocket",{},!0);t.on("data",i=>this._dispatchEvent("data",{data:i.toString("base64")})),t.on("close",()=>{this._dispatchEvent("close"),this._dispose()})}async write(e,t){await this._object.write(Buffer.from(e.data,"base64"))}async close(e,t){this._object.close()}};Bi.AndroidSocketDispatcher=L_;var B_=new Map([["Unknown",0],["SoftLeft",1],["SoftRight",2],["Home",3],["Back",4],["Call",5],["EndCall",6],["0",7],["1",8],["2",9],["3",10],["4",11],["5",12],["6",13],["7",14],["8",15],["9",16],["Star",17],["*",17],["Pound",18],["#",18],["DialUp",19],["DialDown",20],["DialLeft",21],["DialRight",22],["DialCenter",23],["VolumeUp",24],["VolumeDown",25],["Power",26],["Camera",27],["Clear",28],["A",29],["B",30],["C",31],["D",32],["E",33],["F",34],["G",35],["H",36],["I",37],["J",38],["K",39],["L",40],["M",41],["N",42],["O",43],["P",44],["Q",45],["R",46],["S",47],["T",48],["U",49],["V",50],["W",51],["X",52],["Y",53],["Z",54],["Comma",55],[",",55],["Period",56],[".",56],["AltLeft",57],["AltRight",58],["ShiftLeft",59],["ShiftRight",60],["Tab",61],["	",61],["Space",62],[" ",62],["Sym",63],["Explorer",64],["Envelop",65],["Enter",66],["Del",67],["Grave",68],["Minus",69],["-",69],["Equals",70],["=",70],["LeftBracket",71],["(",71],["RightBracket",72],[")",72],["Backslash",73],["\\",73],["Semicolon",74],[";",74],["Apostrophe",75],["`",75],["Slash",76],["/",76],["At",77],["@",77],["Num",78],["HeadsetHook",79],["Focus",80],["Plus",81],["Menu",82],["Notification",83],["Search",84],["AppSwitch",187],["Assist",219],["Cut",277],["Copy",278],["Paste",279]])});var $O=w(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.BrowserDispatcher=void 0;var bj=xs(),xj=oo(),Sj=zd(),Ej=$e(),WO=class extends Ej.Dispatcher{constructor(e,t){super(e,t,"Browser",{version:t.version(),name:t.options.name},!0);t.on(bj.Browser.Events.Disconnected,()=>this._didClose())}_didClose(){this._dispatchEvent("close"),this._dispose()}async newContext(e,t){let i=await this._object.newContext(e);return e.storageState&&await i.setStorageState(t,e.storageState),{context:new xj.BrowserContextDispatcher(this._scope,i)}}async close(){await this._object.close()}async killForTests(){await this._object.killForTests()}async newBrowserCDPSession(){if(!this._object.options.isChromium)throw new Error("CDP session is only available in Chromium");let e=this._object;return{session:new Sj.CDPSessionDispatcher(this._scope,await e.newBrowserCDPSession())}}async startTracing(e){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");await this._object.startTracing(e.page?e.page._object:void 0,e)}async stopTracing(){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");return{binary:(await this._object.stopTracing()).toString("base64")}}};Gd.BrowserDispatcher=WO});var UO=w(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.JsonPipeDispatcher=void 0;var Cj=$e(),kj=H(),Pj=Xr(),zO=class extends Cj.Dispatcher{constructor(e){super(e,{guid:"jsonPipe@"+(0,kj.createGuid)()},"JsonPipe",{})}async send(e){this.emit("message",e.message)}async close(){this.emit("close"),this._disposed||(this._dispatchEvent("closed",{}),this._dispose())}dispatch(e){this._disposed||this._dispatchEvent("message",{message:e})}wasClosed(e){if(!this._disposed){let t=e?{error:(0,Pj.serializeError)(e)}:{};this._dispatchEvent("closed",t),this._dispose()}}dispose(){this._dispose()}};Kd.JsonPipeDispatcher=zO});var XO=w(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.BrowserTypeDispatcher=void 0;var VO=$O(),Oj=$e(),GO=oo(),Tj=Ij(os()),Aj=UO(),KO=H(),Mj=zt();function Ij(r){return r&&r.__esModule?r:{default:r}}var JO=class extends Oj.Dispatcher{constructor(e,t){super(e,t,"BrowserType",{executablePath:t.executablePath(),name:t.name()},!0)}async launch(e,t){let i=await this._object.launch(t,e);return{browser:new VO.BrowserDispatcher(this._scope,i)}}async launchPersistentContext(e,t){let i=await this._object.launchPersistentContext(t,e.userDataDir,e);return{context:new GO.BrowserContextDispatcher(this._scope,i)}}async connectOverCDP(e,t){let i=await this._object.connectOverCDP(t,e.endpointURL,e,e.timeout),n=new VO.BrowserDispatcher(this._scope,i);return{browser:n,defaultContext:i._defaultContext?new GO.BrowserContextDispatcher(n._scope,i._defaultContext):void 0}}async connect(e){let t=e.slowMo?c=>setTimeout(c,e.slowMo):(0,KO.makeWaitForNextTask)(),i=Object.assign({"User-Agent":(0,KO.getUserAgent)()},e.headers||{}),n=new Tj.default(e.wsEndpoint,[],{perMessageDeflate:!1,maxPayload:256*1024*1024,handshakeTimeout:e.timeout,headers:i}),s=new Aj.JsonPipeDispatcher(this._scope),o=new Mj.ManualPromise;return n.on("open",()=>o.resolve({pipe:s})),n.on("close",()=>s.wasClosed()),n.on("error",c=>{o.isDone()?s.wasClosed(c):(s.dispose(),o.reject(c))}),s.on("close",()=>n.close()),s.on("message",c=>n.send(JSON.stringify(c))),n.addEventListener("message",c=>{t(()=>{try{s.dispatch(JSON.parse(c.data))}catch(l){n.close()}})}),o}};Jd.BrowserTypeDispatcher=JO});var eT=w(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.ElectronApplicationDispatcher=ao.ElectronDispatcher=void 0;var YO=$e(),Fj=Bm(),Dj=oo(),H_=Va(),QO=no(),ZO=class extends YO.Dispatcher{constructor(e,t){super(e,t,"Electron",{},!0)}async launch(e){let t=await this._object.launch(e);return{electronApplication:new j_(this._scope,t)}}};ao.ElectronDispatcher=ZO;var j_=class extends YO.Dispatcher{constructor(e,t){super(e,t,"ElectronApplication",{context:new Dj.BrowserContextDispatcher(e,t.context())},!0);t.on(Fj.ElectronApplication.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()})}async browserWindow(e){let t=await this._object.browserWindow(e.page.page());return{handle:QO.ElementHandleDispatcher.fromJSHandle(this._scope,t)}}async evaluateExpression(e){let t=await this._object._nodeElectronHandlePromise;return{value:(0,H_.serializeResult)(await t.evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,!0,(0,H_.parseArgument)(e.arg)))}}async evaluateExpressionHandle(e){let i=await(await this._object._nodeElectronHandlePromise).evaluateExpressionAndWaitForSignals(e.expression,e.isFunction,!1,(0,H_.parseArgument)(e.arg));return{handle:QO.ElementHandleDispatcher.fromJSHandle(this._scope,i)}}async close(){await this._object.close()}};ao.ElectronApplicationDispatcher=j_});var W_=w(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.SelectorsDispatcher=void 0;var Rj=$e(),tT=class extends Rj.Dispatcher{constructor(e,t){super(e,t,"Selectors",{})}async register(e){await this._object.register(e.name,e.source,e.contentScript)}};Xd.SelectorsDispatcher=tT});var Qd=w(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.PlaywrightDispatcher=void 0;var Nj=Vj(require("net")),qj=Xo(),Lj=ze(),Bj=vO(),Hj=H(),jj=jO(),$_=XO(),Wj=$e(),$j=eT(),zj=Xa(),Uj=W_();function Vj(r){return r&&r.__esModule?r:{default:r}}var rT=class extends Wj.Dispatcher{constructor(e,t,i,n){let s=gs(),o=Object.entries(s).map(([c,l])=>({name:c,descriptor:l}));super(e,t,"Playwright",{chromium:new $_.BrowserTypeDispatcher(e,t.chromium),firefox:new $_.BrowserTypeDispatcher(e,t.firefox),webkit:new $_.BrowserTypeDispatcher(e,t.webkit),android:new jj.AndroidDispatcher(e,t.android),electron:new $j.ElectronDispatcher(e,t.electron),deviceDescriptors:o,selectors:i||new Uj.SelectorsDispatcher(e,t.selectors),preLaunchedBrowser:n},!1);this._socksProxy=void 0}async enableSocksProxy(){this._socksProxy=new iT(this),this._object.options.socksProxyPort=await this._socksProxy.listen(0),Lj.debugLogger.log("proxy",`Starting socks proxy server on port ${this._object.options.socksProxyPort}`)}async socksConnected(e){var t;(t=this._socksProxy)===null||t===void 0||t.socketConnected(e)}async socksFailed(e){var t;(t=this._socksProxy)===null||t===void 0||t.socketFailed(e)}async socksData(e){var t;(t=this._socksProxy)===null||t===void 0||t.sendSocketData(e)}async socksError(e){var t;(t=this._socksProxy)===null||t===void 0||t.sendSocketError(e)}async socksEnd(e){var t;(t=this._socksProxy)===null||t===void 0||t.sendSocketEnd(e)}async newRequest(e,t){let i=new qj.GlobalFetchRequest(this._object,e);return{request:zj.FetchRequestDispatcher.from(this._scope,i)}}};Yd.PlaywrightDispatcher=rT;var iT=class{constructor(e){this._server=void 0,this._connections=new Map,this._dispatcher=void 0,this._dispatcher=e,this._server=new Nj.default.Server(t=>{let i=(0,Hj.createGuid)(),n=new Bj.SocksConnection(i,t,this);this._connections.set(i,n)})}async listen(e){return new Promise(t=>{this._server.listen(e,()=>{t(this._server.address().port)})})}onSocketRequested(e,t,i){this._dispatcher._dispatchEvent("socksRequested",{uid:e,host:t,port:i})}onSocketData(e,t){this._dispatcher._dispatchEvent("socksData",{uid:e,data:t.toString("base64")})}onSocketClosed(e){this._dispatcher._dispatchEvent("socksClosed",{uid:e})}socketConnected(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.socketConnected(e.host,e.port)}socketFailed(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.socketFailed(e.errorCode)}sendSocketData(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.sendData(Buffer.from(e.data,"base64"))}sendSocketEnd(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.end()}sendSocketError(e){var t;(t=this._connections.get(e.uid))===null||t===void 0||t.error(e.error)}}});var Cr=w(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.Events=void 0;var Gj={AndroidDevice:{WebView:"webview",Close:"close"},AndroidSocket:{Data:"data",Close:"close"},AndroidWebView:{Close:"close"},Browser:{Disconnected:"disconnected"},BrowserContext:{Close:"close",Page:"page",BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished"},BrowserServer:{Close:"close"},Page:{Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",FrameAttached:"frameattached",FrameDetached:"framedetached",FrameNavigated:"framenavigated",Load:"load",Popup:"popup",WebSocket:"websocket",Worker:"worker"},WebSocket:{Close:"close",Error:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"},Worker:{Close:"close"},ElectronApplication:{Close:"close",Window:"window"}};Zd.Events=Gj});var oT=w(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.Accessibility=void 0;function nT(r){let e={...r,value:r.valueNumber!==void 0?r.valueNumber:r.valueString,checked:r.checked==="checked"?!0:r.checked==="unchecked"?!1:r.checked,pressed:r.pressed==="pressed"?!0:r.pressed==="released"?!1:r.pressed,children:r.children?r.children.map(nT):void 0};return delete e.valueNumber,delete e.valueString,e}var sT=class{constructor(e){this._channel=void 0,this._channel=e}async snapshot(e={}){let t=e.root?e.root._elementChannel:void 0,i=await this._channel.accessibilitySnapshot({interestingOnly:e.interestingOnly,root:t});return i.rootAXNode?nT(i.rootAXNode):null}};eh.Accessibility=sT});var Ve=w(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.renderCallWithParams=lT;ec.ChannelOwner=void 0;var aT=require("events"),cT=kp(),Kj=ze(),Jj=It(),Xj=H(),co=class extends aT.EventEmitter{constructor(e,t,i,n){super();this._connection=void 0,this._parent=void 0,this._objects=new Map,this._type=void 0,this._guid=void 0,this._channel=void 0,this._initializer=void 0,this._logger=void 0,this._csi=void 0,this.setMaxListeners(0),this._connection=e instanceof co?e._connection:e,this._type=t,this._guid=i,this._parent=e instanceof co?e:void 0,this._connection._objects.set(i,this),this._parent&&(this._parent._objects.set(i,this),this._logger=this._parent._logger),this._channel=this._createChannel(new aT.EventEmitter,null),this._initializer=n}_dispose(){this._parent&&this._parent._objects.delete(this._guid),this._connection._objects.delete(this._guid);for(let e of[...this._objects.values()])e._dispose();this._objects.clear()}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._objects.values()).map(e=>e._debugScopeState())}}_createChannel(e,t,i,n){let s=new Proxy(e,{get:(o,c)=>{if(c==="debugScopeState")return l=>this._connection.sendMessageToServer(this,c,l,t);if(typeof c=="string"){let l=e5[Yj(this._type,c)];if(l)return u=>(n&&i&&(n.userObject=i.onApiCallBegin(lT(t.apiName,u)).userObject,i=void 0),this._connection.sendMessageToServer(this,c,l(u,""),t))}return o[c]}});return s._object=this,s}async _wrapApiCall(e,t){t=t||this._logger;let i=(0,Jj.captureStackTrace)(),{apiName:n,frameTexts:s}=i,o=this;for(;!o._csi&&o._parent;)o=o._parent;let c=i.allFrames.filter(d=>{var h;return(h=d.function)===null||h===void 0?void 0:h.includes("_wrapApiCall")}).length>1,l=c?void 0:o._csi,u={userObject:null};try{z_(t,`=> ${n} started`,c);let d=this._createChannel({},i,l,u),h=await e(d,i);return l==null||l.onApiCallEnd(u),z_(t,`<= ${n} succeeded`,c),h}catch(d){let h=(process.env.PWDEBUGIMPL||(0,Xj.isUnderTest)())&&d.stack?`
<inner error>
`+d.stack:"";throw d.message=n+": "+d.message,d.stack=d.message+`
`+s.join(`
`)+h,l==null||l.onApiCallEnd(u,d),z_(t,`<= ${n} failed`,c),d}}toJSON(){return{_type:this._type,_guid:this._guid}}};ec.ChannelOwner=co;function z_(r,e,t){t||(r&&r.isEnabled("api","info")&&r.log("api","info",e,[],{color:"cyan"}),Kj.debugLogger.log("api",e))}function Yj(r,e){return r+e[0].toUpperCase()+e.substring(1)+"Params"}var Qj=["url","selector","text","key"];function lT(r,e){let t=[];if(e)for(let n of Qj)e[n]&&t.push(e[n]);let i=t.length?"("+t.join(", ")+")":"";return r+i}var Zj=r=>(e,t)=>{if(e._object instanceof co&&(r==="*"||e._object._type===r))return{guid:e._object._guid};throw new cT.ValidationError(`${t}: expected ${r}`)},e5=(0,cT.createScheme)(Zj)});var Hi=w(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.serializeArgument=U_;Ln.parseResult=V_;Ln.assertMaxArguments=r5;Ln.JSHandle=void 0;var t5=Ve(),uT=Xr(),qn=class extends t5.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._preview=void 0,this._preview=this._initializer.preview,this._channel.on("previewUpdated",({preview:s})=>this._preview=s)}async evaluate(e,t){return this._wrapApiCall(async i=>{let n=await i.evaluateExpression({expression:String(e),isFunction:typeof e=="function",arg:U_(t)});return V_(n.value)})}async evaluateHandle(e,t){return this._wrapApiCall(async i=>{let n=await i.evaluateExpressionHandle({expression:String(e),isFunction:typeof e=="function",arg:U_(t)});return qn.from(n.handle)})}async getProperty(e){return this._wrapApiCall(async t=>{let i=await t.getProperty({name:e});return qn.from(i.handle)})}async getProperties(){return this._wrapApiCall(async e=>{let t=new Map;for(let{name:i,value:n}of(await e.getPropertyList()).properties)t.set(i,qn.from(n));return t})}async jsonValue(){return this._wrapApiCall(async e=>V_((await e.jsonValue()).value))}asElement(){return null}async dispose(){return this._wrapApiCall(async e=>await e.dispose())}toString(){return this._preview}};Ln.JSHandle=qn;function U_(r){let e=[],t=n=>(e.push(n),e.length-1);return{value:(0,uT.serializeValue)(r,n=>n instanceof qn?{h:t(n._channel)}:{fallThrough:n},new Set),handles:e}}function V_(r){return(0,uT.parseSerializedValue)(r,void 0)}function r5(r,e){if(r>e)throw new Error("Too many arguments. If you need to pass more than 1 argument to the function wrap them in an object.")}});var G_=w(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.ConsoleMessage=void 0;var i5=o5(require("util")),n5=Hi(),s5=Ve();function dT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(dT=function(i){return i?t:e})(r)}function o5(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=dT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var hT=class extends s5.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}type(){return this._initializer.type}text(){return this._initializer.text}args(){return this._initializer.args.map(n5.JSHandle.from)}location(){return this._initializer.location}[i5.inspect.custom](){return this.text()}};th.ConsoleMessage=hT});var K_=w(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.Dialog=void 0;var a5=Ve(),pT=class extends a5.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}type(){return this._initializer.type}message(){return this._initializer.message}defaultValue(){return this._initializer.defaultValue}async accept(e){return this._wrapApiCall(async t=>{await t.accept({promptText:e})})}async dismiss(){return this._wrapApiCall(async e=>{await e.dismiss()})}};rh.Dialog=pT});var mT=w(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.Download=void 0;var fT=class{constructor(e,t,i,n){this._page=void 0,this._url=void 0,this._suggestedFilename=void 0,this._artifact=void 0,this._page=e,this._url=t,this._suggestedFilename=i,this._artifact=n}page(){return this._page}url(){return this._url}suggestedFilename(){return this._suggestedFilename}async path(){return this._artifact.pathAfterFinished()}async saveAs(e){return this._artifact.saveAs(e)}async failure(){return this._artifact.failure()}async createReadStream(){return this._artifact.createReadStream()}async cancel(){return this._artifact.cancel()}async delete(){return this._artifact.delete()}};ih.Download=fT});var vT=w(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});nh.Locator=void 0;var c5=l5(require("util")),_T=H(),gT;function wT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(wT=function(i){return i?t:e})(r)}function l5(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=wT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}gT=c5.inspect.custom;var Bn=class{constructor(e,t){this._frame=void 0,this._selector=void 0,this._frame=e,this._selector=t}async _withElement(e,t){t=this._frame.page()._timeoutSettings.timeout({timeout:t});let i=t?(0,_T.monotonicTime)()+t:0,n=await this.elementHandle({timeout:t});if(!n)throw new Error(`Could not resolve ${this._selector} to DOM Element`);try{return await e(n,i?i-(0,_T.monotonicTime)():0)}finally{await n.dispose()}}async boundingBox(e){return this._withElement(t=>t.boundingBox(),e==null?void 0:e.timeout)}async check(e={}){return this._frame.check(this._selector,{strict:!0,...e})}async click(e={}){return this._frame.click(this._selector,{strict:!0,...e})}async dblclick(e={}){return this._frame.dblclick(this._selector,{strict:!0,...e})}async dispatchEvent(e,t={},i){return this._frame.dispatchEvent(this._selector,e,t,{strict:!0,...i})}async evaluate(e,t,i){return this._withElement(n=>n.evaluate(e,t),i==null?void 0:i.timeout)}async evaluateAll(e,t){return this._frame.$$eval(this._selector,e,t)}async evaluateHandle(e,t,i){return this._withElement(n=>n.evaluateHandle(e,t),i==null?void 0:i.timeout)}async fill(e,t={}){return this._frame.fill(this._selector,e,{strict:!0,...t})}locator(e){return new Bn(this._frame,this._selector+" >> "+e)}async elementHandle(e){return await this._frame.waitForSelector(this._selector,{strict:!0,state:"attached",...e})}async elementHandles(){return this._frame.$$(this._selector)}first(){return new Bn(this._frame,this._selector+" >> nth=0")}last(){return new Bn(this._frame,this._selector+" >> nth=-1")}nth(e){return new Bn(this._frame,this._selector+` >> nth=${e}`)}async focus(e){return this._frame.focus(this._selector,{strict:!0,...e})}async count(){return this.evaluateAll(e=>e.length)}async getAttribute(e,t){return this._frame.getAttribute(this._selector,e,{strict:!0,...t})}async hover(e={}){return this._frame.hover(this._selector,{strict:!0,...e})}async innerHTML(e){return this._frame.innerHTML(this._selector,{strict:!0,...e})}async innerText(e){return this._frame.innerText(this._selector,{strict:!0,...e})}async inputValue(e){return this._frame.inputValue(this._selector,{strict:!0,...e})}async isChecked(e){return this._frame.isChecked(this._selector,{strict:!0,...e})}async isDisabled(e){return this._frame.isDisabled(this._selector,{strict:!0,...e})}async isEditable(e){return this._frame.isEditable(this._selector,{strict:!0,...e})}async isEnabled(e){return this._frame.isEnabled(this._selector,{strict:!0,...e})}async isHidden(e){return this._frame.isHidden(this._selector,{strict:!0,...e})}async isVisible(e){return this._frame.isVisible(this._selector,{strict:!0,...e})}async press(e,t={}){return this._frame.press(this._selector,e,{strict:!0,...t})}async screenshot(e={}){return this._withElement((t,i)=>t.screenshot({...e,timeout:i}),e.timeout)}async scrollIntoViewIfNeeded(e={}){return this._withElement((t,i)=>t.scrollIntoViewIfNeeded({...e,timeout:i}),e.timeout)}async selectOption(e,t={}){return this._frame.selectOption(this._selector,e,{strict:!0,...t})}async selectText(e={}){return this._withElement((t,i)=>t.selectText({...e,timeout:i}),e.timeout)}async setChecked(e,t){e?await this.check(t):await this.uncheck(t)}async setInputFiles(e,t={}){return this._frame.setInputFiles(this._selector,e,{strict:!0,...t})}async tap(e={}){return this._frame.tap(this._selector,{strict:!0,...e})}async textContent(e){return this._frame.textContent(this._selector,{strict:!0,...e})}async type(e,t={}){return this._frame.type(this._selector,e,{strict:!0,...t})}async uncheck(e={}){return this._frame.uncheck(this._selector,{strict:!0,...e})}async allInnerTexts(){return this._frame.$$eval(this._selector,e=>e.map(t=>t.innerText))}async allTextContents(){return this._frame.$$eval(this._selector,e=>e.map(t=>t.textContent||""))}[gT](){return this.toString()}toString(){return`Locator@${this._selector}`}};nh.Locator=Bn});var Hn=w(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.Waiter=void 0;var u5=It(),d5=Mt(),h5=H(),sh=class{constructor(e,t){this._dispose=void 0,this._failures=[],this._immediateError=void 0,this._logs=[],this._channel=void 0,this._waitId=void 0,this._error=void 0,this._waitId=(0,h5.createGuid)(),this._channel=e._channel,e._wrapApiCall(async i=>{i.waitForEventInfo({info:{waitId:this._waitId,phase:"before",event:t}}).catch(()=>{})}),this._dispose=[()=>this._channel.waitForEventInfo({info:{waitId:this._waitId,phase:"after",error:this._error}}).catch(()=>{})]}static createForEvent(e,t){return new sh(e,t)}async waitForEvent(e,t,i){let{promise:n,dispose:s}=yT(e,t,i);return this.waitForPromise(n,s)}rejectOnEvent(e,t,i,n){let{promise:s,dispose:o}=yT(e,t,n);this._rejectOn(s.then(()=>{throw i}),o)}rejectOnTimeout(e,t){if(!e)return;let{promise:i,dispose:n}=p5(e);this._rejectOn(i.then(()=>{throw new d5.TimeoutError(t)}),n)}rejectImmediately(e){this._immediateError=e}dispose(){for(let e of this._dispose)e()}async waitForPromise(e,t){try{if(this._immediateError)throw this._immediateError;let i=await Promise.race([e,...this._failures]);return t&&t(),i}catch(i){throw t&&t(),this._error=i.message,this.dispose(),(0,u5.rewriteErrorMessage)(i,i.message+f5(this._logs)),i}}log(e){this._logs.push(e),this._channel.waitForEventInfo({info:{waitId:this._waitId,phase:"log",message:e}}).catch(()=>{})}_rejectOn(e,t){this._failures.push(e),t&&this._dispose.push(t)}};oh.Waiter=sh;function yT(r,e,t){let i;return{promise:new Promise((o,c)=>{i=async l=>{try{if(t&&!await t(l))return;r.removeListener(e,i),o(l)}catch(u){r.removeListener(e,i),c(u)}},r.addListener(e,i)}),dispose:()=>r.removeListener(e,i)}}function p5(r){let e;return{promise:new Promise(n=>e=setTimeout(n,r)),dispose:()=>clearTimeout(e)}}function f5(r){if(!r.length)return"";let e=" logs ",t=60,i=(t-e.length)/2,n=t-e.length-i;return`
${"=".repeat(i)}${e}${"=".repeat(n)}
${r.join(`
`)}
${"=".repeat(t)}`}});var Kr=w(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.deprecate=g5;ji.envObjectToArray=w5;ji.evaluationScript=v5;ji.parsedURL=xT;ji.urlMatches=y5;ji.globToRegex=ST;var m5=_5(require("fs")),tc=H();function _5(r){return r&&r.__esModule?r:{default:r}}var bT=new Set;function g5(r,e){bT.has(r)||(bT.add(r),console.warn(e))}function w5(r){let e=[];for(let t in r)Object.is(r[t],void 0)||e.push({name:t,value:String(r[t])});return e}async function v5(r,e,t=!0){if(typeof r=="function"){let i=r.toString(),n=Object.is(e,void 0)?"undefined":JSON.stringify(e);return`(${i})(${n})`}if(e!==void 0)throw new Error("Cannot evaluate a string with arguments");if((0,tc.isString)(r))return r;if(r.content!==void 0)return r.content;if(r.path!==void 0){let i=await m5.default.promises.readFile(r.path,"utf8");return t&&(i+="//# sourceURL="+r.path.replace(/\n/g,"")),i}throw new Error("Either path or content property must be present")}function xT(r){try{return new URL(r)}catch(e){return null}}function y5(r,e,t){if(t===void 0||t==="")return!0;if((0,tc.isString)(t)&&!t.startsWith("*")&&(t=(0,tc.constructURLBasedOnBaseURL)(r,t)),(0,tc.isString)(t)&&(t=ST(t)),(0,tc.isRegExp)(t))return t.test(e);if(typeof t=="string"&&t===e)return!0;let i=xT(e);if(!i)return!1;if(typeof t=="string")return i.pathname===t;if(typeof t!="function")throw new Error("url parameter should be string, RegExp or function");return t(i)}var b5=new Set(["/","$","^","+",".","(",")","=","!","|"]);function ST(r){let e=["^"],t;for(let i=0;i<r.length;++i){let n=r[i];if(b5.has(n)){e.push("\\"+n);continue}if(n==="*"){let s=r[i-1],o=1;for(;r[i+1]==="*";)o++,i++;let c=r[i+1];o>1&&(s==="/"||s===void 0)&&(c==="/"||c===void 0)?(e.push("((?:[^/]*(?:/|$))*)"),i++):e.push("([^/]*)");continue}switch(n){case"?":e.push(".");break;case"{":t=!0,e.push("(");break;case"}":t=!1,e.push(")");break;case",":if(t){e.push("|");break}e.push("\\"+n);break;default:e.push(n)}}return e.push("$"),new RegExp(e.join(""))}});var CT=w(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.MultiMap=void 0;var ET=class{constructor(){this._map=void 0,this._map=new Map}set(e,t){let i=this._map.get(e);i||(i=[],this._map.set(e,i)),i.push(t)}get(e){return this._map.get(e)||[]}has(e){return this._map.has(e)}hasValue(e,t){let i=this._map.get(e);return i?i.includes(t):!1}get size(){return this._map.size}keys(){return this._map.keys()}values(){let e=[];for(let t of this.keys())e.push(...this.get(t));return e}clear(){this._map.clear()}};ah.MultiMap=ET});var ic=w(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.FetchResponse=lo.FetchRequest=void 0;var x5=require("fs"),S5=P5(require("path")),E5=OT(li()),C5=Mt(),rc=H(),k5=Ve(),kT=OT(uo());function PT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(PT=function(i){return i?t:e})(r)}function OT(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=PT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function P5(r){return r&&r.__esModule?r:{default:r}}var TT=class extends k5.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}dispose(){return this._wrapApiCall(async e=>{await e.dispose()})}async get(e,t){return this.fetch(e,{...t,method:"GET"})}async post(e,t){return this.fetch(e,{...t,method:"POST"})}async fetch(e,t={}){return this._wrapApiCall(async i=>{let n=e instanceof kT.Request?e:void 0;(0,rc.assert)(n||typeof e=="string","First argument must be either URL string or Request");let s=n?n.url():e,o=(0,rc.objectToArray)(t.params),c=t.method||(n==null?void 0:n.method()),l=t.headers||(n==null?void 0:n.headers()),u=l?(0,rc.headersObjectToArray)(l):void 0,d,h;if(t.data){if((0,rc.isString)(t.data))h=Buffer.from(t.data,"utf8");else if(Buffer.isBuffer(t.data))h=t.data;else if(typeof t.data=="object"){d={};for(let[_,m]of Object.entries(t.data))if((0,rc.isFilePayload)(m)){let g=m;if(!Buffer.isBuffer(g.buffer))throw new Error(`Unexpected buffer type of 'data.${_}'`);d[_]=O5(g)}else m instanceof x5.ReadStream?d[_]=await T5(m):d[_]=m}else throw new Error("Unexpected 'data' type");h===void 0&&d===void 0&&(h=(n==null?void 0:n.postDataBuffer())||void 0)}let p=h?h.toString("base64"):void 0,f=await i.fetch({url:s,params:o,method:c,headers:u,postData:p,formData:d,timeout:t.timeout,failOnStatusCode:t.failOnStatusCode});if(f.error)throw new Error(f.error);return new J_(this,f.response)})}};lo.FetchRequest=TT;var J_=class{constructor(e,t){this._initializer=void 0,this._headers=void 0,this._request=void 0,this._request=e,this._initializer=t,this._headers=new kT.RawHeaders(this._initializer.headers)}ok(){return this._initializer.status===0||this._initializer.status>=200&&this._initializer.status<=299}url(){return this._initializer.url}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return this._headers.headers()}headersArray(){return this._headers.headersArray()}async body(){return this._request._wrapApiCall(async e=>{try{let t=await e.fetchResponseBody({fetchUid:this._fetchUid()});if(!t.binary)throw new Error("Response has been disposed");return Buffer.from(t.binary,"base64")}catch(t){throw t.message===C5.kBrowserOrContextClosedError?new Error("Response has been disposed"):t}})}async text(){return(await this.body()).toString("utf8")}async json(){let e=await this.text();return JSON.parse(e)}async dispose(){return this._request._wrapApiCall(async e=>{await e.disposeFetchResponse({fetchUid:this._fetchUid()})})}_fetchUid(){return this._initializer.fetchUid}};lo.FetchResponse=J_;function O5(r){return{name:r.name,mimeType:r.mimeType,buffer:r.buffer.toString("base64")}}async function T5(r){let e=await new Promise((i,n)=>{let s=[];r.on("data",o=>s.push(o)),r.on("end",()=>i(Buffer.concat(s))),r.on("error",o=>n(o))}),t=Buffer.isBuffer(r.path)?r.path.toString("utf8"):r.path;return{name:S5.default.basename(t),mimeType:E5.getType(t)||"application/octet-stream",buffer:e.toString("base64")}}});var uo=w(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.validateHeaders=j5;vt.RawHeaders=vt.RouteHandler=vt.WebSocket=vt.Response=vt.Route=vt.InterceptedResponse=vt.Request=void 0;var A5=require("url"),ch=Ve(),M5=ho(),I5=H5(require("fs")),F5=B5(li()),nc=H(),D5=zt(),hr=Cr(),R5=Hn(),N5=Kr(),q5=CT(),L5=ic();function AT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(AT=function(i){return i?t:e})(r)}function B5(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=AT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function H5(r){return r&&r.__esModule?r:{default:r}}var Wi=class extends ch.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?Wi.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._redirectedFrom=null,this._redirectedTo=null,this._failureText=null,this._provisionalHeaders=void 0,this._actualHeadersPromise=void 0,this._postData=void 0,this._timing=void 0,this._redirectedFrom=Wi.fromNullable(n.redirectedFrom),this._redirectedFrom&&(this._redirectedFrom._redirectedTo=this),this._provisionalHeaders=new jn(n.headers),this._postData=n.postData?Buffer.from(n.postData,"base64"):null,this._timing={startTime:0,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1,responseEnd:-1}}url(){return this._initializer.url}resourceType(){return this._initializer.resourceType}method(){return this._initializer.method}postData(){return this._postData?this._postData.toString("utf8"):null}postDataBuffer(){return this._postData}postDataJSON(){let e=this.postData();if(!e)return null;if(this.headers()["content-type"]==="application/x-www-form-urlencoded"){let i={},n=new A5.URLSearchParams(e);for(let[s,o]of n.entries())i[s]=o;return i}try{return JSON.parse(e)}catch(i){throw new Error("POST data is not a valid JSON object: "+e)}}headers(){return this._provisionalHeaders.headers()}_actualHeaders(){return this._actualHeadersPromise||(this._actualHeadersPromise=this._wrapApiCall(async e=>new jn((await e.rawRequestHeaders()).headers))),this._actualHeadersPromise}async allHeaders(){return(await this._actualHeaders()).headers()}async headersArray(){return(await this._actualHeaders()).headersArray()}async headerValue(e){return(await this._actualHeaders()).get(e)}async response(){return this._wrapApiCall(async e=>sc.fromNullable((await e.response()).response))}frame(){return M5.Frame.from(this._initializer.frame)}isNavigationRequest(){return this._initializer.isNavigationRequest}redirectedFrom(){return this._redirectedFrom}redirectedTo(){return this._redirectedTo}failure(){return this._failureText===null?null:{errorText:this._failureText}}timing(){return this._timing}async sizes(){let e=await this.response();if(!e)throw new Error("Unable to fetch sizes for failed request");return e._wrapApiCall(async t=>(await t.sizes()).sizes)}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}};vt.Request=Wi;var X_=class{constructor(e,t){this._route=void 0,this._initializer=void 0,this._request=void 0,this._headers=void 0,this._route=e,this._initializer=t,this._headers=new jn(t.headers),this._request=Wi.from(t.request)}async securityDetails(){return null}async serverAddr(){return null}async finished(){let e=await this._request.response();return e?await e.finished():null}frame(){return this._request.frame()}ok(){return this._initializer.status===0||this._initializer.status>=200&&this._initializer.status<=299}url(){return this._request.url()}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return this._headers.headers()}async allHeaders(){return this.headers()}async headersArray(){return this._headers.headersArray()}async headerValue(e){return this._headers.get(e)}async headerValues(e){return this._headers.getAll(e)}async body(){return this._route._responseBody()}async text(){return(await this.body()).toString("utf8")}async json(){let e=await this.text();return JSON.parse(e)}request(){return this._request}};vt.InterceptedResponse=X_;var MT=class extends ch.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._interceptedResponse=void 0}request(){return Wi.from(this._initializer.request)}async abort(e){return this._wrapApiCall(async t=>{await t.abort({errorCode:e})})}async fulfill(e={}){return this._wrapApiCall(async t=>{let i,n,{status:s,headers:o,body:c}=e;e.response&&(s||(s=e.response.status()),o||(o=e.response.headers()),e.body===void 0&&e.path===void 0&&(e.response instanceof L5.FetchResponse?n=e.response._fetchUid():e.response===this._interceptedResponse?i=!0:c=await e.response.body()));let l,u=!1,d=0;if(e.path){let p=await I5.default.promises.readFile(e.path);l=p.toString("base64"),u=!0,d=p.length}else(0,nc.isString)(c)?(l=c,u=!1,d=Buffer.byteLength(l)):c&&(l=c.toString("base64"),u=!0,d=c.length);let h={};for(let p of Object.keys(o||{}))h[p.toLowerCase()]=String(o[p]);e.contentType?h["content-type"]=String(e.contentType):e.path&&(h["content-type"]=F5.getType(e.path)||"application/octet-stream"),d&&!("content-length"in h)&&(h["content-length"]=String(d)),await t.fulfill({status:s||200,headers:(0,nc.headersObjectToArray)(h),body:l,isBase64:u,useInterceptedResponseBody:i,fetchResponseUid:n})})}async _continueToResponse(e={}){return this._interceptedResponse=await this._continue(e,!0),this._interceptedResponse}async continue(e={}){await this._continue(e,!1)}async _continue(e,t){return await this._wrapApiCall(async i=>{let n=(0,nc.isString)(e.postData)?Buffer.from(e.postData,"utf8"):e.postData,s=await i.continue({url:e.url,method:e.method,headers:e.headers?(0,nc.headersObjectToArray)(e.headers):void 0,postData:n?n.toString("base64"):void 0,interceptResponse:t});return s.response?new X_(this,s.response):null})}async _responseBody(){return this._wrapApiCall(async e=>Buffer.from((await e.responseBody()).binary,"base64"))}};vt.Route=MT;var sc=class extends ch.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?sc.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._provisionalHeaders=void 0,this._actualHeadersPromise=void 0,this._request=void 0,this._finishedPromise=new D5.ManualPromise,this._provisionalHeaders=new jn(n.headers),this._request=Wi.from(this._initializer.request),Object.assign(this._request._timing,this._initializer.timing)}url(){return this._initializer.url}ok(){return this._initializer.status===0||this._initializer.status>=200&&this._initializer.status<=299}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return this._provisionalHeaders.headers()}async _actualHeaders(){return this._actualHeadersPromise||(this._actualHeadersPromise=this._wrapApiCall(async e=>new jn((await e.rawResponseHeaders()).headers))),this._actualHeadersPromise}async allHeaders(){return(await this._actualHeaders()).headers()}async headersArray(){return(await this._actualHeaders()).headersArray().slice()}async headerValue(e){return(await this._actualHeaders()).get(e)}async headerValues(e){return(await this._actualHeaders()).getAll(e)}async finished(){return this._finishedPromise.then(()=>null)}async body(){return this._wrapApiCall(async e=>Buffer.from((await e.body()).binary,"base64"))}async text(){return(await this.body()).toString("utf8")}async json(){let e=await this.text();return JSON.parse(e)}request(){return this._request}frame(){return this._request.frame()}async serverAddr(){return this._wrapApiCall(async e=>(await e.serverAddr()).value||null)}async securityDetails(){return this._wrapApiCall(async e=>(await e.securityDetails()).value||null)}};vt.Response=sc;var IT=class extends ch.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._page=void 0,this._isClosed=void 0,this._isClosed=!1,this._page=e,this._channel.on("frameSent",s=>{s.opcode===1?this.emit(hr.Events.WebSocket.FrameSent,{payload:s.data}):s.opcode===2&&this.emit(hr.Events.WebSocket.FrameSent,{payload:Buffer.from(s.data,"base64")})}),this._channel.on("frameReceived",s=>{s.opcode===1?this.emit(hr.Events.WebSocket.FrameReceived,{payload:s.data}):s.opcode===2&&this.emit(hr.Events.WebSocket.FrameReceived,{payload:Buffer.from(s.data,"base64")})}),this._channel.on("socketError",({error:s})=>this.emit(hr.Events.WebSocket.Error,s)),this._channel.on("close",()=>{this._isClosed=!0,this.emit(hr.Events.WebSocket.Close,this)})}url(){return this._initializer.url}isClosed(){return this._isClosed}async waitForEvent(e,t={}){return this._wrapApiCall(async i=>{let n=this._page._timeoutSettings.timeout(typeof t=="function"?{}:t),s=typeof t=="function"?t:t.predicate,o=R5.Waiter.createForEvent(this,e);o.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==hr.Events.WebSocket.Error&&o.rejectOnEvent(this,hr.Events.WebSocket.Error,new Error("Socket error")),e!==hr.Events.WebSocket.Close&&o.rejectOnEvent(this,hr.Events.WebSocket.Close,new Error("Socket closed")),o.rejectOnEvent(this._page,hr.Events.Page.Close,new Error("Page closed"));let c=await o.waitForEvent(this,e,s);return o.dispose(),c})}};vt.WebSocket=IT;function j5(r){for(let e of Object.keys(r)){let t=r[e];if(!Object.is(t,void 0)&&!(0,nc.isString)(t))throw new Error(`Expected value of header "${e}" to be String, but "${typeof t}" is found.`)}}var FT=class{constructor(e,t,i,n){this.handledCount=0,this._baseURL=void 0,this._times=void 0,this.url=void 0,this.handler=void 0,this._baseURL=e,this._times=n,this.url=t,this.handler=i}matches(e){return this._times&&this.handledCount>=this._times?!1:(0,N5.urlMatches)(this._baseURL,e,this.url)}handle(e,t){this.handler(e,t),this.handledCount++}};vt.RouteHandler=FT;var jn=class{constructor(e){this._headersArray=void 0,this._headersMap=new q5.MultiMap,this._headersArray=e;for(let t of e)this._headersMap.set(t.name.toLowerCase(),t.value)}get(e){let t=this.getAll(e);return!t||!t.length?null:t.join(e.toLowerCase()==="set-cookie"?`
`:", ")}getAll(e){return[...this._headersMap.get(e.toLowerCase())]}headers(){let e={};for(let t of this._headersMap.keys())e[t]=this.get(t);return e}headersArray(){return this._headersArray}};vt.RawHeaders=jn});var DT=w(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Object.defineProperty(Qt,"Size",{enumerable:!0,get:function(){return $i.Size}});Object.defineProperty(Qt,"Point",{enumerable:!0,get:function(){return $i.Point}});Object.defineProperty(Qt,"Rect",{enumerable:!0,get:function(){return $i.Rect}});Object.defineProperty(Qt,"Quad",{enumerable:!0,get:function(){return $i.Quad}});Object.defineProperty(Qt,"URLMatch",{enumerable:!0,get:function(){return $i.URLMatch}});Object.defineProperty(Qt,"TimeoutOptions",{enumerable:!0,get:function(){return $i.TimeoutOptions}});Object.defineProperty(Qt,"HeadersArray",{enumerable:!0,get:function(){return $i.HeadersArray}});Object.defineProperty(Qt,"NewRequestOptions",{enumerable:!0,get:function(){return $i.NewRequestOptions}});Qt.kLifecycleEvents=void 0;var $i=ef(),W5=new Set(["load","domcontentloaded","networkidle"]);Qt.kLifecycleEvents=W5});var ho=w(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.verifyLoadState=ac;cc.Frame=void 0;var $5=H(),z5=Ve(),U5=vT(),zi=uh(),At=Hi(),RT=X5(require("fs")),NT=J5(uo()),V5=require("events"),G5=Hn(),lh=Cr(),K5=DT(),qT=Kr();function LT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(LT=function(i){return i?t:e})(r)}function J5(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=LT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function X5(r){return r&&r.__esModule?r:{default:r}}var oc=class extends z5.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?oc.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._eventEmitter=void 0,this._loadStates=void 0,this._parentFrame=null,this._url="",this._name="",this._detached=!1,this._childFrames=new Set,this._page=void 0,this._eventEmitter=new V5.EventEmitter,this._eventEmitter.setMaxListeners(0),this._parentFrame=oc.fromNullable(n.parentFrame),this._parentFrame&&this._parentFrame._childFrames.add(this),this._name=n.name,this._url=n.url,this._loadStates=new Set(n.loadStates),this._channel.on("loadstate",s=>{s.add&&(this._loadStates.add(s.add),this._eventEmitter.emit("loadstate",s.add)),s.remove&&this._loadStates.delete(s.remove)}),this._channel.on("navigated",s=>{this._url=s.url,this._name=s.name,this._eventEmitter.emit("navigated",s),!s.error&&this._page&&this._page.emit(lh.Events.Page.FrameNavigated,this)})}page(){return this._page}async goto(e,t={}){return this._wrapApiCall(async i=>{let n=ac("waitUntil",t.waitUntil===void 0?"load":t.waitUntil);return NT.Response.fromNullable((await i.goto({url:e,...t,waitUntil:n})).response)})}_setupNavigationWaiter(e){let t=new G5.Waiter(this._page,"");this._page.isClosed()&&t.rejectImmediately(new Error("Navigation failed because page was closed!")),t.rejectOnEvent(this._page,lh.Events.Page.Close,new Error("Navigation failed because page was closed!")),t.rejectOnEvent(this._page,lh.Events.Page.Crash,new Error("Navigation failed because page crashed!")),t.rejectOnEvent(this._page,lh.Events.Page.FrameDetached,new Error("Navigating frame was detached!"),n=>n===this);let i=this._page._timeoutSettings.navigationTimeout(e);return t.rejectOnTimeout(i,`Timeout ${i}ms exceeded.`),t}async waitForNavigation(e={}){return this._wrapApiCall(async t=>{let i=ac("waitUntil",e.waitUntil===void 0?"load":e.waitUntil),n=this._setupNavigationWaiter(e),s=typeof e.url=="string"?` to "${e.url}"`:"";n.log(`waiting for navigation${s} until "${i}"`);let o=await n.waitForEvent(this._eventEmitter,"navigated",u=>{var d;return u.error?!0:(n.log(`  navigated to "${u.url}"`),(0,qT.urlMatches)((d=this._page)===null||d===void 0?void 0:d.context()._options.baseURL,u.url,e.url))});if(o.error){let u=new Error(o.error);u.stack="",await n.waitForPromise(Promise.reject(u))}this._loadStates.has(i)||await n.waitForEvent(this._eventEmitter,"loadstate",u=>(n.log(`  "${u}" event fired`),u===i));let c=o.newDocument?NT.Request.fromNullable(o.newDocument.request):null,l=c?await n.waitForPromise(c._finalRequest().response()):null;return n.dispose(),l})}async waitForLoadState(e="load",t={}){if(e=ac("state",e),!this._loadStates.has(e))return this._wrapApiCall(async i=>{let n=this._setupNavigationWaiter(t);await n.waitForEvent(this._eventEmitter,"loadstate",s=>(n.log(`  "${s}" event fired`),s===e)),n.dispose()})}async waitForURL(e,t={}){var i;if((0,qT.urlMatches)((i=this._page)===null||i===void 0?void 0:i.context()._options.baseURL,this.url(),e))return await this.waitForLoadState(t==null?void 0:t.waitUntil,t);await this.waitForNavigation({url:e,...t})}async frameElement(){return this._wrapApiCall(async e=>zi.ElementHandle.from((await e.frameElement()).element))}async evaluateHandle(e,t){return(0,At.assertMaxArguments)(arguments.length,2),this._wrapApiCall(async i=>{let n=await i.evaluateExpressionHandle({expression:String(e),isFunction:typeof e=="function",arg:(0,At.serializeArgument)(t)});return At.JSHandle.from(n.handle)})}async evaluate(e,t){return(0,At.assertMaxArguments)(arguments.length,2),this._wrapApiCall(async i=>{let n=await i.evaluateExpression({expression:String(e),isFunction:typeof e=="function",arg:(0,At.serializeArgument)(t)});return(0,At.parseResult)(n.value)})}async $(e,t){return this._wrapApiCall(async i=>{let n=await i.querySelector({selector:e,...t});return zi.ElementHandle.fromNullable(n.element)})}async waitForSelector(e,t={}){return this._wrapApiCall(async i=>{if(t.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(t.waitFor&&t.waitFor!=="visible")throw new Error("options.waitFor is not supported, did you mean options.state?");let n=await i.waitForSelector({selector:e,...t});return zi.ElementHandle.fromNullable(n.element)})}async dispatchEvent(e,t,i,n={}){return this._wrapApiCall(async s=>{await s.dispatchEvent({selector:e,type:t,eventInit:(0,At.serializeArgument)(i),...n})})}async $eval(e,t,i){return(0,At.assertMaxArguments)(arguments.length,3),this._wrapApiCall(async n=>{let s=await n.evalOnSelector({selector:e,expression:String(t),isFunction:typeof t=="function",arg:(0,At.serializeArgument)(i)});return(0,At.parseResult)(s.value)})}async $$eval(e,t,i){return(0,At.assertMaxArguments)(arguments.length,3),this._wrapApiCall(async n=>{let s=await n.evalOnSelectorAll({selector:e,expression:String(t),isFunction:typeof t=="function",arg:(0,At.serializeArgument)(i)});return(0,At.parseResult)(s.value)})}async $$(e){return this._wrapApiCall(async t=>(await t.querySelectorAll({selector:e})).elements.map(n=>zi.ElementHandle.from(n)))}async content(){return this._wrapApiCall(async e=>(await e.content()).value)}async setContent(e,t={}){return this._wrapApiCall(async i=>{let n=ac("waitUntil",t.waitUntil===void 0?"load":t.waitUntil);await i.setContent({html:e,...t,waitUntil:n})})}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}isDetached(){return this._detached}async addScriptTag(e={}){return this._wrapApiCall(async t=>{let i={...e};return i.path&&(i.content=(await RT.default.promises.readFile(i.path)).toString(),i.content+="//# sourceURL="+i.path.replace(/\n/g,"")),zi.ElementHandle.from((await t.addScriptTag({...i})).element)})}async addStyleTag(e={}){return this._wrapApiCall(async t=>{let i={...e};return i.path&&(i.content=(await RT.default.promises.readFile(i.path)).toString(),i.content+="/*# sourceURL="+i.path.replace(/\n/g,"")+"*/"),zi.ElementHandle.from((await t.addStyleTag({...i})).element)})}async click(e,t={}){return this._wrapApiCall(async i=>await i.click({selector:e,...t}))}async dblclick(e,t={}){return this._wrapApiCall(async i=>await i.dblclick({selector:e,...t}))}async dragAndDrop(e,t,i={}){return this._wrapApiCall(async n=>await n.dragAndDrop({source:e,target:t,...i}))}async tap(e,t={}){return this._wrapApiCall(async i=>await i.tap({selector:e,...t}))}async fill(e,t,i={}){return this._wrapApiCall(async n=>await n.fill({selector:e,value:t,...i}))}locator(e){return new U5.Locator(this,e)}async focus(e,t={}){return this._wrapApiCall(async i=>{await i.focus({selector:e,...t})})}async textContent(e,t={}){return this._wrapApiCall(async i=>{let n=(await i.textContent({selector:e,...t})).value;return n===void 0?null:n})}async innerText(e,t={}){return this._wrapApiCall(async i=>(await i.innerText({selector:e,...t})).value)}async innerHTML(e,t={}){return this._wrapApiCall(async i=>(await i.innerHTML({selector:e,...t})).value)}async getAttribute(e,t,i={}){return this._wrapApiCall(async n=>{let s=(await n.getAttribute({selector:e,name:t,...i})).value;return s===void 0?null:s})}async inputValue(e,t={}){return this._wrapApiCall(async i=>(await i.inputValue({selector:e,...t})).value)}async isChecked(e,t={}){return this._wrapApiCall(async i=>(await i.isChecked({selector:e,...t})).value)}async isDisabled(e,t={}){return this._wrapApiCall(async i=>(await i.isDisabled({selector:e,...t})).value)}async isEditable(e,t={}){return this._wrapApiCall(async i=>(await i.isEditable({selector:e,...t})).value)}async isEnabled(e,t={}){return this._wrapApiCall(async i=>(await i.isEnabled({selector:e,...t})).value)}async isHidden(e,t={}){return this._wrapApiCall(async i=>(await i.isHidden({selector:e,...t})).value)}async isVisible(e,t={}){return this._wrapApiCall(async i=>(await i.isVisible({selector:e,...t})).value)}async hover(e,t={}){return this._wrapApiCall(async i=>{await i.hover({selector:e,...t})})}async selectOption(e,t,i={}){return this._wrapApiCall(async n=>(await n.selectOption({selector:e,...(0,zi.convertSelectOptionValues)(t),...i})).values)}async setInputFiles(e,t,i={}){return this._wrapApiCall(async n=>{await n.setInputFiles({selector:e,files:await(0,zi.convertInputFiles)(t),...i})})}async type(e,t,i={}){return this._wrapApiCall(async n=>{await n.type({selector:e,text:t,...i})})}async press(e,t,i={}){return this._wrapApiCall(async n=>{await n.press({selector:e,key:t,...i})})}async check(e,t={}){return this._wrapApiCall(async i=>{await i.check({selector:e,...t})})}async uncheck(e,t={}){return this._wrapApiCall(async i=>{await i.uncheck({selector:e,...t})})}async setChecked(e,t,i){t?await this.check(e,i):await this.uncheck(e,i)}async waitForTimeout(e){return this._wrapApiCall(async t=>{await new Promise(i=>setTimeout(i,e))})}async waitForFunction(e,t,i={}){return this._wrapApiCall(async n=>{typeof i.polling=="string"&&(0,$5.assert)(i.polling==="raf","Unknown polling option: "+i.polling);let s=await n.waitForFunction({...i,pollingInterval:i.polling==="raf"?void 0:i.polling,expression:String(e),isFunction:typeof e=="function",arg:(0,At.serializeArgument)(t)});return At.JSHandle.from(s.handle)})}async title(){return this._wrapApiCall(async e=>(await e.title()).value)}};cc.Frame=oc;function ac(r,e){if(e==="networkidle0"&&(e="networkidle"),!K5.kLifecycleEvents.has(e))throw new Error(`${r}: expected one of (load|domcontentloaded|networkidle)`);return e}});var uh=w(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.convertSelectOptionValues=$T;Wn.convertInputFiles=zT;Wn.determineScreenshotType=UT;Wn.ElementHandle=void 0;var BT=ho(),po=Hi(),HT=WT(require("fs")),Y5=Z5(li()),Q5=WT(require("path")),Y_=H();function jT(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(jT=function(i){return i?t:e})(r)}function Z5(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=jT(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function WT(r){return r&&r.__esModule?r:{default:r}}var Ui=class extends po.JSHandle{static from(e){return e._object}static fromNullable(e){return e?Ui.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._elementChannel=void 0,this._elementChannel=this._channel}asElement(){return this}async ownerFrame(){return this._wrapApiCall(async e=>BT.Frame.fromNullable((await e.ownerFrame()).frame))}async contentFrame(){return this._wrapApiCall(async e=>BT.Frame.fromNullable((await e.contentFrame()).frame))}async getAttribute(e){return this._wrapApiCall(async t=>{let i=(await t.getAttribute({name:e})).value;return i===void 0?null:i})}async inputValue(){return this._wrapApiCall(async e=>(await e.inputValue()).value)}async textContent(){return this._wrapApiCall(async e=>{let t=(await e.textContent()).value;return t===void 0?null:t})}async innerText(){return this._wrapApiCall(async e=>(await e.innerText()).value)}async innerHTML(){return this._wrapApiCall(async e=>(await e.innerHTML()).value)}async isChecked(){return this._wrapApiCall(async e=>(await e.isChecked()).value)}async isDisabled(){return this._wrapApiCall(async e=>(await e.isDisabled()).value)}async isEditable(){return this._wrapApiCall(async e=>(await e.isEditable()).value)}async isEnabled(){return this._wrapApiCall(async e=>(await e.isEnabled()).value)}async isHidden(){return this._wrapApiCall(async e=>(await e.isHidden()).value)}async isVisible(){return this._wrapApiCall(async e=>(await e.isVisible()).value)}async dispatchEvent(e,t={}){return this._wrapApiCall(async i=>{await i.dispatchEvent({type:e,eventInit:(0,po.serializeArgument)(t)})})}async scrollIntoViewIfNeeded(e={}){return this._wrapApiCall(async t=>{await t.scrollIntoViewIfNeeded(e)})}async hover(e={}){return this._wrapApiCall(async t=>{await t.hover(e)})}async click(e={}){return this._wrapApiCall(async t=>await t.click(e))}async dblclick(e={}){return this._wrapApiCall(async t=>await t.dblclick(e))}async tap(e={}){return this._wrapApiCall(async t=>await t.tap(e))}async selectOption(e,t={}){return this._wrapApiCall(async i=>(await i.selectOption({...$T(e),...t})).values)}async fill(e,t={}){return this._wrapApiCall(async i=>await i.fill({value:e,...t}))}async selectText(e={}){return this._wrapApiCall(async t=>{await t.selectText(e)})}async setInputFiles(e,t={}){return this._wrapApiCall(async i=>{await i.setInputFiles({files:await zT(e),...t})})}async focus(){return this._wrapApiCall(async e=>{await e.focus()})}async type(e,t={}){return this._wrapApiCall(async i=>{await i.type({text:e,...t})})}async press(e,t={}){return this._wrapApiCall(async i=>{await i.press({key:e,...t})})}async check(e={}){return this._wrapApiCall(async t=>await t.check(e))}async uncheck(e={}){return this._wrapApiCall(async t=>await t.uncheck(e))}async setChecked(e,t){e?await this.check(t):await this.uncheck(t)}async boundingBox(){return this._wrapApiCall(async e=>{let t=(await e.boundingBox()).value;return t===void 0?null:t})}async screenshot(e={}){return this._wrapApiCall(async t=>{let i={...e};i.type||(i.type=UT(e));let n=await t.screenshot(i),s=Buffer.from(n.binary,"base64");return e.path&&(await(0,Y_.mkdirIfNeeded)(e.path),await HT.default.promises.writeFile(e.path,s)),s})}async $(e){return this._wrapApiCall(async t=>Ui.fromNullable((await t.querySelector({selector:e})).element))}async $$(e){return this._wrapApiCall(async t=>(await t.querySelectorAll({selector:e})).elements.map(n=>Ui.from(n)))}async $eval(e,t,i){return this._wrapApiCall(async n=>{let s=await n.evalOnSelector({selector:e,expression:String(t),isFunction:typeof t=="function",arg:(0,po.serializeArgument)(i)});return(0,po.parseResult)(s.value)})}async $$eval(e,t,i){return this._wrapApiCall(async n=>{let s=await n.evalOnSelectorAll({selector:e,expression:String(t),isFunction:typeof t=="function",arg:(0,po.serializeArgument)(i)});return(0,po.parseResult)(s.value)})}async waitForElementState(e,t={}){return this._wrapApiCall(async i=>await i.waitForElementState({state:e,...t}))}async waitForSelector(e,t={}){return this._wrapApiCall(async i=>{let n=await i.waitForSelector({selector:e,...t});return Ui.fromNullable(n.element)})}};Wn.ElementHandle=Ui;function $T(r){if(r===null)return{};if(Array.isArray(r)||(r=[r]),!r.length)return{};for(let e=0;e<r.length;e++)(0,Y_.assert)(r[e]!==null,`options[${e}]: expected object, got null`);return r[0]instanceof Ui?{elements:r.map(e=>e._elementChannel)}:(0,Y_.isString)(r[0])?{options:r.map(e=>({value:e}))}:{options:r}}async function zT(r){let e=Array.isArray(r)?r:[r];return await Promise.all(e.map(async i=>typeof i=="string"?{name:Q5.default.basename(i),buffer:(await HT.default.promises.readFile(i)).toString("base64")}:{name:i.name,mimeType:i.mimeType,buffer:i.buffer.toString("base64")}))}function UT(r){if(r.path){let e=Y5.getType(r.path);if(e==="image/png")return"png";if(e==="image/jpeg")return"jpeg";throw new Error(`path: unsupported mime type "${e}"`)}return r.type}});var hh=w(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.Worker=void 0;var eW=Cr(),tW=Ve(),fo=Hi(),VT=class extends tW.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._page=void 0,this._context=void 0,this._channel.on("close",()=>{this._page&&this._page._workers.delete(this),this._context&&this._context._serviceWorkers.delete(this),this.emit(eW.Events.Worker.Close,this)})}url(){return this._initializer.url}async evaluate(e,t){return(0,fo.assertMaxArguments)(arguments.length,2),this._wrapApiCall(async i=>{let n=await i.evaluateExpression({expression:String(e),isFunction:typeof e=="function",arg:(0,fo.serializeArgument)(t)});return(0,fo.parseResult)(n.value)})}async evaluateHandle(e,t){return(0,fo.assertMaxArguments)(arguments.length,2),this._wrapApiCall(async i=>{let n=await i.evaluateExpressionHandle({expression:String(e),isFunction:typeof e=="function",arg:(0,fo.serializeArgument)(t)});return fo.JSHandle.from(n.handle)})}};dh.Worker=VT});var XT=w(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.Touchscreen=Vi.Mouse=Vi.Keyboard=void 0;var GT=class{constructor(e){this._page=void 0,this._page=e}async down(e){await this._page._wrapApiCall(async t=>{await t.keyboardDown({key:e})})}async up(e){await this._page._wrapApiCall(async t=>{await t.keyboardUp({key:e})})}async insertText(e){await this._page._wrapApiCall(async t=>{await t.keyboardInsertText({text:e})})}async type(e,t={}){await this._page._wrapApiCall(async i=>{await i.keyboardType({text:e,...t})})}async press(e,t={}){await this._page._wrapApiCall(async i=>{await i.keyboardPress({key:e,...t})})}};Vi.Keyboard=GT;var KT=class{constructor(e){this._page=void 0,this._page=e}async move(e,t,i={}){await this._page._wrapApiCall(async n=>{await n.mouseMove({x:e,y:t,...i})})}async down(e={}){await this._page._wrapApiCall(async t=>{await t.mouseDown({...e})})}async up(e={}){await this._page._wrapApiCall(async t=>{await t.mouseUp(e)})}async click(e,t,i={}){await this._page._wrapApiCall(async n=>{await n.mouseClick({x:e,y:t,...i})})}async dblclick(e,t,i={}){await this.click(e,t,{...i,clickCount:2})}async wheel(e,t){await this._page._wrapApiCall(async i=>{await i.mouseWheel({deltaX:e,deltaY:t})})}};Vi.Mouse=KT;var JT=class{constructor(e){this._page=void 0,this._page=e}async tap(e,t){await this._page._wrapApiCall(async i=>{await i.touchscreenTap({x:e,y:t})})}};Vi.Touchscreen=JT});var QT=w(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.FileChooser=void 0;var YT=class{constructor(e,t,i){this._page=void 0,this._elementHandle=void 0,this._isMultiple=void 0,this._page=e,this._elementHandle=t,this._isMultiple=i}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}async setFiles(e,t){return this._page._wrapApiCall(async()=>this._elementHandle.setInputFiles(e,t))}};ph.FileChooser=YT});var e1=w(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.Coverage=void 0;var ZT=class{constructor(e){this._channel=void 0,this._channel=e}async startJSCoverage(e={}){await this._channel.startJSCoverage(e)}async stopJSCoverage(){return(await this._channel.stopJSCoverage()).entries}async startCSSCoverage(e={}){await this._channel.startCSSCoverage(e)}async stopCSSCoverage(){return(await this._channel.stopCSSCoverage()).entries}};fh.Coverage=ZT});var r1=w(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.Video=void 0;var t1=class{constructor(e){this._artifact=null,this._artifactCallback=i=>{},this._isRemote=!1;let t=e.context()._browser;this._isRemote=!!t&&!!t._remoteType,this._artifact=Promise.race([new Promise(i=>this._artifactCallback=i),e._closedOrCrashedPromise.then(()=>null)])}_artifactReady(e){e._isRemote=this._isRemote,this._artifactCallback(e)}async path(){if(this._isRemote)throw new Error("Path is not available when using browserType.connect(). Use saveAs() to save a local copy.");let e=await this._artifact;if(!e)throw new Error("Page did not produce any video frames");return e._initializer.absolutePath}async saveAs(e){let t=await this._artifact;if(!t)throw new Error("Page did not produce any video frames");return t.saveAs(e)}async delete(){let e=await this._artifact;e&&await e.delete()}};mh.Video=t1});var Q_=w(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.Stream=void 0;var rW=require("stream"),iW=Ve(),i1=class extends iW.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}stream(){return new n1(this._channel)}};_h.Stream=i1;var n1=class extends rW.Readable{constructor(e){super();this._channel=void 0,this._channel=e}async _read(e){let t=await this._channel.read({size:e});t.binary?this.push(Buffer.from(t.binary,"base64")):this.push(null)}_destroy(e,t){this._channel.close().catch(i=>null),super._destroy(e,t)}}});var lc=w(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.Artifact=void 0;var nW=aW(require("fs")),s1=Q_(),sW=H(),oW=Ve();function o1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(o1=function(i){return i?t:e})(r)}function aW(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=o1(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var a1=class extends oW.ChannelOwner{constructor(...e){super(...e);this._isRemote=!1}static from(e){return e._object}async pathAfterFinished(){if(this._isRemote)throw new Error("Path is not available when using browserType.connect(). Use saveAs() to save a local copy.");return this._wrapApiCall(async e=>(await e.pathAfterFinished()).value||null)}async saveAs(e){return this._wrapApiCall(async t=>{if(!this._isRemote){await t.saveAs({path:e});return}let i=await t.saveAsStream(),n=s1.Stream.from(i.stream);await(0,sW.mkdirIfNeeded)(e),await new Promise((s,o)=>{n.stream().pipe(nW.createWriteStream(e)).on("finish",s).on("error",o)})})}async failure(){return this._wrapApiCall(async e=>(await e.failure()).error||null)}async createReadStream(){return this._wrapApiCall(async e=>{let t=await e.stream();return t.stream?s1.Stream.from(t.stream).stream():null})}async cancel(){return this._wrapApiCall(async e=>e.cancel())}async delete(){return this._wrapApiCall(async e=>e.delete())}};gh.Artifact=a1});var rg=w(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.BindingCall=mo.Page=void 0;var qe=Cr(),pr=H(),cW=$t(),c1=Xr(),lW=oT(),l1=Ve(),uW=G_(),dW=K_(),hW=mT(),u1=uh(),pW=hh(),$n=ho(),Z_=XT(),zn=Hi(),Gi=uo(),fW=QT(),d1=require("buffer"),mW=e1(),_W=Hn(),eg=p1(require("fs")),gW=p1(require("path")),wh=Kr(),wW=Mt(),vW=r1(),h1=lc();function p1(r){return r&&r.__esModule?r:{default:r}}var uc=class extends l1.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?uc.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._browserContext=void 0,this._ownedContext=void 0,this._mainFrame=void 0,this._frames=new Set,this._workers=new Set,this._closed=!1,this._closedOrCrashedPromise=void 0,this._viewportSize=void 0,this._routes=[],this.accessibility=void 0,this.coverage=void 0,this.keyboard=void 0,this.mouse=void 0,this._request=void 0,this.touchscreen=void 0,this._bindings=new Map,this._timeoutSettings=void 0,this._video=null,this._opener=void 0,this._browserContext=e,this._timeoutSettings=new cW.TimeoutSettings(this._browserContext._timeoutSettings),this.accessibility=new lW.Accessibility(this._channel),this.keyboard=new Z_.Keyboard(this),this.mouse=new Z_.Mouse(this),this._request=this._browserContext._request,this.touchscreen=new Z_.Touchscreen(this),this._mainFrame=$n.Frame.from(n.mainFrame),this._mainFrame._page=this,this._frames.add(this._mainFrame),this._viewportSize=n.viewportSize||null,this._closed=n.isClosed,this._opener=uc.fromNullable(n.opener),this._channel.on("bindingCall",({binding:s})=>this._onBinding(tg.from(s))),this._channel.on("close",()=>this._onClose()),this._channel.on("console",({message:s})=>this.emit(qe.Events.Page.Console,uW.ConsoleMessage.from(s))),this._channel.on("crash",()=>this._onCrash()),this._channel.on("dialog",({dialog:s})=>{let o=dW.Dialog.from(s);this.emit(qe.Events.Page.Dialog,o)||(o.type()==="beforeunload"?s.accept({}).catch(()=>{}):s.dismiss().catch(()=>{}))}),this._channel.on("domcontentloaded",()=>this.emit(qe.Events.Page.DOMContentLoaded,this)),this._channel.on("download",({url:s,suggestedFilename:o,artifact:c})=>{let l=h1.Artifact.from(c);l._isRemote=!!this._browserContext._browser&&!!this._browserContext._browser._remoteType,this.emit(qe.Events.Page.Download,new hW.Download(this,s,o,l))}),this._channel.on("fileChooser",({element:s,isMultiple:o})=>this.emit(qe.Events.Page.FileChooser,new fW.FileChooser(this,u1.ElementHandle.from(s),o))),this._channel.on("frameAttached",({frame:s})=>this._onFrameAttached($n.Frame.from(s))),this._channel.on("frameDetached",({frame:s})=>this._onFrameDetached($n.Frame.from(s))),this._channel.on("load",()=>this.emit(qe.Events.Page.Load,this)),this._channel.on("pageError",({error:s})=>this.emit(qe.Events.Page.PageError,(0,c1.parseError)(s))),this._channel.on("route",({route:s,request:o})=>this._onRoute(Gi.Route.from(s),Gi.Request.from(o))),this._channel.on("video",({artifact:s})=>{let o=h1.Artifact.from(s);this._forceVideo()._artifactReady(o)}),this._channel.on("webSocket",({webSocket:s})=>this.emit(qe.Events.Page.WebSocket,Gi.WebSocket.from(s))),this._channel.on("worker",({worker:s})=>this._onWorker(pW.Worker.from(s))),this.coverage=new mW.Coverage(this._channel),this._closedOrCrashedPromise=Promise.race([new Promise(s=>this.once(qe.Events.Page.Close,s)),new Promise(s=>this.once(qe.Events.Page.Crash,s))])}_onFrameAttached(e){e._page=this,this._frames.add(e),e._parentFrame&&e._parentFrame._childFrames.add(e),this.emit(qe.Events.Page.FrameAttached,e)}_onFrameDetached(e){this._frames.delete(e),e._detached=!0,e._parentFrame&&e._parentFrame._childFrames.delete(e),this.emit(qe.Events.Page.FrameDetached,e)}_onRoute(e,t){for(let i of this._routes)if(i.matches(t.url())){i.handle(e,t);return}this._browserContext._onRoute(e,t)}async _onBinding(e){let t=this._bindings.get(e._initializer.name);if(t){await e.call(t);return}await this._browserContext._onBinding(e)}_onWorker(e){this._workers.add(e),e._page=this,this.emit(qe.Events.Page.Worker,e)}_onClose(){this._closed=!0,this._browserContext._pages.delete(this),this._browserContext._backgroundPages.delete(this),this.emit(qe.Events.Page.Close,this)}_onCrash(){this.emit(qe.Events.Page.Crash,this)}context(){return this._browserContext}async opener(){return!this._opener||this._opener.isClosed()?null:this._opener}mainFrame(){return this._mainFrame}frame(e){let t=(0,pr.isString)(e)?e:e.name,i=(0,pr.isObject)(e)?e.url:void 0;return(0,pr.assert)(t||i,"Either name or url matcher should be specified"),this.frames().find(n=>t?n.name()===t:(0,wh.urlMatches)(this._browserContext._options.baseURL,n.url(),i))||null}frames(){return[...this._frames]}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e),this._channel.setDefaultNavigationTimeoutNoReply({timeout:e})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}_forceVideo(){return this._video||(this._video=new vW.Video(this)),this._video}video(){return this._browserContext._options.recordVideo?this._forceVideo():null}async $(e,t){return this._mainFrame.$(e,t)}async waitForSelector(e,t){return this._mainFrame.waitForSelector(e,t)}async dispatchEvent(e,t,i,n){return this._mainFrame.dispatchEvent(e,t,i,n)}async evaluateHandle(e,t){return(0,zn.assertMaxArguments)(arguments.length,2),this._mainFrame.evaluateHandle(e,t)}async $eval(e,t,i){return(0,zn.assertMaxArguments)(arguments.length,3),this._mainFrame.$eval(e,t,i)}async $$eval(e,t,i){return(0,zn.assertMaxArguments)(arguments.length,3),this._mainFrame.$$eval(e,t,i)}async $$(e){return this._mainFrame.$$(e)}async addScriptTag(e={}){return this._mainFrame.addScriptTag(e)}async addStyleTag(e={}){return this._mainFrame.addStyleTag(e)}async exposeFunction(e,t){return this._wrapApiCall(async i=>{await i.exposeBinding({name:e});let n=(s,...o)=>t(...o);this._bindings.set(e,n)})}async exposeBinding(e,t,i={}){return this._wrapApiCall(async n=>{await n.exposeBinding({name:e,needsHandle:i.handle}),this._bindings.set(e,t)})}async setExtraHTTPHeaders(e){return this._wrapApiCall(async t=>{(0,Gi.validateHeaders)(e),await t.setExtraHTTPHeaders({headers:(0,pr.headersObjectToArray)(e)})})}url(){return this._mainFrame.url()}async content(){return this._mainFrame.content()}async setContent(e,t){return this._mainFrame.setContent(e,t)}async goto(e,t){return this._mainFrame.goto(e,t)}async reload(e={}){return this._wrapApiCall(async t=>{let i=(0,$n.verifyLoadState)("waitUntil",e.waitUntil===void 0?"load":e.waitUntil);return Gi.Response.fromNullable((await t.reload({...e,waitUntil:i})).response)})}async waitForLoadState(e,t){return this._mainFrame.waitForLoadState(e,t)}async waitForNavigation(e){return this._mainFrame.waitForNavigation(e)}async waitForURL(e,t){return this._mainFrame.waitForURL(e,t)}async waitForRequest(e,t={}){return this._wrapApiCall(async i=>{let n=c=>(0,pr.isString)(e)||(0,pr.isRegExp)(e)?(0,wh.urlMatches)(this._browserContext._options.baseURL,c.url(),e):e(c),s=m1(e),o=s?`waiting for request ${s}`:void 0;return this._waitForEvent(qe.Events.Page.Request,{predicate:n,timeout:t.timeout},o)})}async waitForResponse(e,t={}){return this._wrapApiCall(async i=>{let n=c=>(0,pr.isString)(e)||(0,pr.isRegExp)(e)?(0,wh.urlMatches)(this._browserContext._options.baseURL,c.url(),e):e(c),s=m1(e),o=s?`waiting for response ${s}`:void 0;return this._waitForEvent(qe.Events.Page.Response,{predicate:n,timeout:t.timeout},o)})}async waitForEvent(e,t={}){return this._waitForEvent(e,t,`waiting for event "${e}"`)}async _waitForEvent(e,t,i){let n=this._timeoutSettings.timeout(typeof t=="function"?{}:t),s=typeof t=="function"?t:t.predicate,o=_W.Waiter.createForEvent(this,e);i&&o.log(i),o.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==qe.Events.Page.Crash&&o.rejectOnEvent(this,qe.Events.Page.Crash,new Error("Page crashed")),e!==qe.Events.Page.Close&&o.rejectOnEvent(this,qe.Events.Page.Close,new Error("Page closed"));let c=await o.waitForEvent(this,e,s);return o.dispose(),c}async goBack(e={}){return this._wrapApiCall(async t=>{let i=(0,$n.verifyLoadState)("waitUntil",e.waitUntil===void 0?"load":e.waitUntil);return Gi.Response.fromNullable((await t.goBack({...e,waitUntil:i})).response)})}async goForward(e={}){return this._wrapApiCall(async t=>{let i=(0,$n.verifyLoadState)("waitUntil",e.waitUntil===void 0?"load":e.waitUntil);return Gi.Response.fromNullable((await t.goForward({...e,waitUntil:i})).response)})}async emulateMedia(e={}){return this._wrapApiCall(async t=>{await t.emulateMedia({media:e.media===null?"null":e.media,colorScheme:e.colorScheme===null?"null":e.colorScheme,reducedMotion:e.reducedMotion===null?"null":e.reducedMotion,forcedColors:e.forcedColors===null?"null":e.forcedColors})})}async setViewportSize(e){return this._wrapApiCall(async t=>{this._viewportSize=e,await t.setViewportSize({viewportSize:e})})}viewportSize(){return this._viewportSize}async evaluate(e,t){return(0,zn.assertMaxArguments)(arguments.length,2),this._mainFrame.evaluate(e,t)}async addInitScript(e,t){return this._wrapApiCall(async i=>{let n=await(0,wh.evaluationScript)(e,t);await i.addInitScript({source:n})})}async route(e,t,i={}){return this._wrapApiCall(async n=>{this._routes.unshift(new Gi.RouteHandler(this._browserContext._options.baseURL,e,t,i.times)),this._routes.length===1&&await n.setNetworkInterceptionEnabled({enabled:!0})})}async unroute(e,t){return this._wrapApiCall(async i=>{this._routes=this._routes.filter(n=>n.url!==e||t&&n.handler!==t),this._routes.length===0&&await i.setNetworkInterceptionEnabled({enabled:!1})})}async screenshot(e={}){return this._wrapApiCall(async t=>{let i={...e};i.type||(i.type=(0,u1.determineScreenshotType)(e));let n=await t.screenshot(i),s=d1.Buffer.from(n.binary,"base64");return e.path&&(await(0,pr.mkdirIfNeeded)(e.path),await eg.default.promises.writeFile(e.path,s)),s})}async title(){return this._mainFrame.title()}async bringToFront(){return this._wrapApiCall(async e=>{await e.bringToFront()})}async close(e={runBeforeUnload:void 0}){try{await this._wrapApiCall(async t=>{this._ownedContext?await this._ownedContext.close():await t.close(e)})}catch(t){if((0,wW.isSafeCloseError)(t))return;throw t}}isClosed(){return this._closed}async click(e,t){return this._mainFrame.click(e,t)}async dragAndDrop(e,t,i){return this._mainFrame.dragAndDrop(e,t,i)}async dblclick(e,t){return this._mainFrame.dblclick(e,t)}async tap(e,t){return this._mainFrame.tap(e,t)}async fill(e,t,i){return this._mainFrame.fill(e,t,i)}locator(e){return this.mainFrame().locator(e)}async focus(e,t){return this._mainFrame.focus(e,t)}async textContent(e,t){return this._mainFrame.textContent(e,t)}async innerText(e,t){return this._mainFrame.innerText(e,t)}async innerHTML(e,t){return this._mainFrame.innerHTML(e,t)}async getAttribute(e,t,i){return this._mainFrame.getAttribute(e,t,i)}async inputValue(e,t){return this._mainFrame.inputValue(e,t)}async isChecked(e,t){return this._mainFrame.isChecked(e,t)}async isDisabled(e,t){return this._mainFrame.isDisabled(e,t)}async isEditable(e,t){return this._mainFrame.isEditable(e,t)}async isEnabled(e,t){return this._mainFrame.isEnabled(e,t)}async isHidden(e,t){return this._mainFrame.isHidden(e,t)}async isVisible(e,t){return this._mainFrame.isVisible(e,t)}async hover(e,t){return this._mainFrame.hover(e,t)}async selectOption(e,t,i){return this._mainFrame.selectOption(e,t,i)}async setInputFiles(e,t,i){return this._mainFrame.setInputFiles(e,t,i)}async type(e,t,i){return this._mainFrame.type(e,t,i)}async press(e,t,i){return this._mainFrame.press(e,t,i)}async check(e,t){return this._mainFrame.check(e,t)}async uncheck(e,t){return this._mainFrame.uncheck(e,t)}async setChecked(e,t,i){return this._mainFrame.setChecked(e,t,i)}async waitForTimeout(e){return this._mainFrame.waitForTimeout(e)}async waitForFunction(e,t,i){return this._mainFrame.waitForFunction(e,t,i)}workers(){return[...this._workers]}on(e,t){return e===qe.Events.Page.FileChooser&&!this.listenerCount(e)&&this._channel.setFileChooserInterceptedNoReply({intercepted:!0}),super.on(e,t),this}addListener(e,t){return e===qe.Events.Page.FileChooser&&!this.listenerCount(e)&&this._channel.setFileChooserInterceptedNoReply({intercepted:!0}),super.addListener(e,t),this}off(e,t){return super.off(e,t),e===qe.Events.Page.FileChooser&&!this.listenerCount(e)&&this._channel.setFileChooserInterceptedNoReply({intercepted:!1}),this}removeListener(e,t){return super.removeListener(e,t),e===qe.Events.Page.FileChooser&&!this.listenerCount(e)&&this._channel.setFileChooserInterceptedNoReply({intercepted:!1}),this}async pause(){return this.context()._wrapApiCall(async e=>{await e.pause()})}async pdf(e={}){return this._wrapApiCall(async t=>{let i={...e};i.margin&&(i.margin={...i.margin}),typeof e.width=="number"&&(i.width=e.width+"px"),typeof e.height=="number"&&(i.height=e.height+"px");for(let o of["top","right","bottom","left"]){let c=o;e.margin&&typeof e.margin[c]=="number"&&(i.margin[c]=i.margin[c]+"px")}let n=await t.pdf(i),s=d1.Buffer.from(n.pdf,"base64");return e.path&&(await eg.default.promises.mkdir(gW.default.dirname(e.path),{recursive:!0}),await eg.default.promises.writeFile(e.path,s)),s})}};mo.Page=uc;var tg=class extends l1.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}async call(e){try{let t=$n.Frame.from(this._initializer.frame),i={context:t._page.context(),page:t._page,frame:t},n;this._initializer.handle?n=await e(i,zn.JSHandle.from(this._initializer.handle)):n=await e(i,...this._initializer.args.map(zn.parseResult)),this._channel.resolve({result:(0,zn.serializeArgument)(n)}).catch(()=>{})}catch(t){this._channel.reject({error:(0,c1.serializeError)(t)}).catch(()=>{})}}};mo.BindingCall=tg;function f1(r){return r.length>50&&(r=r.substring(0,50)+"\u2026"),r}function m1(r){if((0,pr.isRegExp)(r))return`/${f1(r.source)}/${r.flags}`;if((0,pr.isString)(r))return`"${f1(r)}"`}});var yh=w(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.CDPSession=void 0;var yW=Ve(),_1=class extends yW.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._channel.on("event",({method:s,params:o})=>{this.emit(s,o)}),this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}async send(e,t){return this._wrapApiCall(async i=>(await i.send({method:e,params:t})).result)}async detach(){return this._wrapApiCall(async e=>e.detach())}};vh.CDPSession=_1});var w1=w(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.Tracing=void 0;var bW=lc(),g1=class{constructor(e){this._context=void 0,this._context=e}async start(e={}){await this._context._wrapApiCall(async t=>{await t.tracingStart(e),await t.tracingStartChunk()})}async startChunk(){await this._context._wrapApiCall(async e=>{await e.tracingStartChunk()})}async stopChunk(e){await this._context._wrapApiCall(async t=>{await this._doStopChunk(t,e.path)})}async stop(e={}){await this._context._wrapApiCall(async t=>{await this._doStopChunk(t,e.path),await t.tracingStop()})}async _doStopChunk(e,t){var i;let n=await e.tracingStopChunk({save:!!t});if(!n.artifact)return;let s=bW.Artifact.from(n.artifact);(i=this._context._browser)!==null&&i!==void 0&&i._remoteType&&(s._isRemote=!0),await s.saveAs(t),await s.delete()}};bh.Tracing=g1});var _o=w(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.prepareBrowserContextParams=RW;dc.BrowserContext=void 0;var kr=rg(),xW=ho(),Pr=DW(uo()),v1=FW(require("fs")),SW=Ve(),y1=Kr(),EW=Eh(),CW=hh(),Et=Cr(),kW=$t(),PW=Hn(),xh=H(),OW=Mt(),TW=yh(),AW=w1(),MW=lc(),IW=ic();function FW(r){return r&&r.__esModule?r:{default:r}}function b1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(b1=function(i){return i?t:e})(r)}function DW(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=b1(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}var Sh=class extends SW.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?Sh.from(e):null}constructor(e,t,i,n){var s;super(e,t,i,n);this._pages=new Set,this._routes=[],this._browser=null,this._browserType=void 0,this._bindings=new Map,this._timeoutSettings=new kW.TimeoutSettings,this._ownerPage=void 0,this._closedPromise=void 0,this._options={},this._request=void 0,this.tracing=void 0,this._backgroundPages=new Set,this._serviceWorkers=new Set,this._isChromium=void 0,e instanceof EW.Browser&&(this._browser=e),this._isChromium=((s=this._browser)===null||s===void 0?void 0:s._name)==="chromium",this.tracing=new AW.Tracing(this),this._request=IW.FetchRequest.from(n.fetchRequest),this._channel.on("bindingCall",({binding:o})=>this._onBinding(kr.BindingCall.from(o))),this._channel.on("close",()=>this._onClose()),this._channel.on("page",({page:o})=>this._onPage(kr.Page.from(o))),this._channel.on("route",({route:o,request:c})=>this._onRoute(Pr.Route.from(o),Pr.Request.from(c))),this._channel.on("backgroundPage",({page:o})=>{let c=kr.Page.from(o);this._backgroundPages.add(c),this.emit(Et.Events.BrowserContext.BackgroundPage,c)}),this._channel.on("serviceWorker",({worker:o})=>{let c=CW.Worker.from(o);c._context=this,this._serviceWorkers.add(c),this.emit(Et.Events.BrowserContext.ServiceWorker,c)}),this._channel.on("request",({request:o,page:c})=>this._onRequest(Pr.Request.from(o),kr.Page.fromNullable(c))),this._channel.on("requestFailed",({request:o,failureText:c,responseEndTiming:l,page:u})=>this._onRequestFailed(Pr.Request.from(o),l,c,kr.Page.fromNullable(u))),this._channel.on("requestFinished",o=>this._onRequestFinished(o)),this._channel.on("response",({response:o,page:c})=>this._onResponse(Pr.Response.from(o),kr.Page.fromNullable(c))),this._closedPromise=new Promise(o=>this.once(Et.Events.BrowserContext.Close,o))}_setBrowserType(e){this._browserType=e,e._contexts.add(this)}_onPage(e){this._pages.add(e),this.emit(Et.Events.BrowserContext.Page,e),e._opener&&!e._opener.isClosed()&&e._opener.emit(Et.Events.Page.Popup,e)}_onRequest(e,t){this.emit(Et.Events.BrowserContext.Request,e),t&&t.emit(Et.Events.Page.Request,e)}_onResponse(e,t){this.emit(Et.Events.BrowserContext.Response,e),t&&t.emit(Et.Events.Page.Response,e)}_onRequestFailed(e,t,i,n){e._failureText=i||null,e._timing&&(e._timing.responseEnd=t),this.emit(Et.Events.BrowserContext.RequestFailed,e),n&&n.emit(Et.Events.Page.RequestFailed,e)}_onRequestFinished(e){let{responseEndTiming:t}=e,i=Pr.Request.from(e.request),n=Pr.Response.fromNullable(e.response),s=kr.Page.fromNullable(e.page);i._timing&&(i._timing.responseEnd=t),this.emit(Et.Events.BrowserContext.RequestFinished,i),s&&s.emit(Et.Events.Page.RequestFinished,i),n&&n._finishedPromise.resolve()}_onRoute(e,t){for(let i of this._routes)if(i.matches(t.url())){i.handle(e,t);return}e.continue().catch(()=>{})}async _onBinding(e){let t=this._bindings.get(e._initializer.name);!t||await e.call(t)}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e),this._channel.setDefaultNavigationTimeoutNoReply({timeout:e})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}browser(){return this._browser}pages(){return[...this._pages]}async newPage(){return this._wrapApiCall(async e=>{if(this._ownerPage)throw new Error("Please use browser.newContext()");return kr.Page.from((await e.newPage()).page)})}async cookies(e){return e||(e=[]),e&&typeof e=="string"&&(e=[e]),this._wrapApiCall(async t=>(await t.cookies({urls:e})).cookies)}async addCookies(e){return this._wrapApiCall(async t=>{await t.addCookies({cookies:e})})}async clearCookies(){return this._wrapApiCall(async e=>{await e.clearCookies()})}async grantPermissions(e,t){return this._wrapApiCall(async i=>{await i.grantPermissions({permissions:e,...t})})}async clearPermissions(){return this._wrapApiCall(async e=>{await e.clearPermissions()})}async setGeolocation(e){return this._wrapApiCall(async t=>{await t.setGeolocation({geolocation:e||void 0})})}async setExtraHTTPHeaders(e){return this._wrapApiCall(async t=>{Pr.validateHeaders(e),await t.setExtraHTTPHeaders({headers:(0,xh.headersObjectToArray)(e)})})}async setOffline(e){return this._wrapApiCall(async t=>{await t.setOffline({offline:e})})}async setHTTPCredentials(e){return(0,xh.isUnderTest)()||(0,y1.deprecate)("context.setHTTPCredentials","warning: method |context.setHTTPCredentials()| is deprecated. Instead of changing credentials, create another browser context with new credentials."),this._wrapApiCall(async t=>{await t.setHTTPCredentials({httpCredentials:e||void 0})})}async addInitScript(e,t){return this._wrapApiCall(async i=>{let n=await(0,y1.evaluationScript)(e,t);await i.addInitScript({source:n})})}async exposeBinding(e,t,i={}){return this._wrapApiCall(async n=>{await n.exposeBinding({name:e,needsHandle:i.handle}),this._bindings.set(e,t)})}async exposeFunction(e,t){return this._wrapApiCall(async i=>{await i.exposeBinding({name:e});let n=(s,...o)=>t(...o);this._bindings.set(e,n)})}async route(e,t,i={}){return this._wrapApiCall(async n=>{this._routes.unshift(new Pr.RouteHandler(this._options.baseURL,e,t,i.times)),this._routes.length===1&&await n.setNetworkInterceptionEnabled({enabled:!0})})}async unroute(e,t){return this._wrapApiCall(async i=>{this._routes=this._routes.filter(n=>n.url!==e||t&&n.handler!==t),this._routes.length===0&&await i.setNetworkInterceptionEnabled({enabled:!1})})}async waitForEvent(e,t={}){return this._wrapApiCall(async i=>{let n=this._timeoutSettings.timeout(typeof t=="function"?{}:t),s=typeof t=="function"?t:t.predicate,o=PW.Waiter.createForEvent(this,e);o.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==Et.Events.BrowserContext.Close&&o.rejectOnEvent(this,Et.Events.BrowserContext.Close,new Error("Context closed"));let c=await o.waitForEvent(this,e,s);return o.dispose(),c})}async storageState(e={}){return await this._wrapApiCall(async t=>{let i=await t.storageState();return e.path&&(await(0,xh.mkdirIfNeeded)(e.path),await v1.default.promises.writeFile(e.path,JSON.stringify(i,void 0,2),"utf8")),i})}backgroundPages(){return[...this._backgroundPages]}serviceWorkers(){return[...this._serviceWorkers]}async newCDPSession(e){if(!(e instanceof kr.Page)&&!(e instanceof xW.Frame))throw new Error("page: expected Page or Frame");return this._wrapApiCall(async t=>{let i=await t.newCDPSession(e instanceof kr.Page?{page:e._channel}:{frame:e._channel});return TW.CDPSession.from(i.session)})}_onClose(){var e,t;this._browser&&this._browser._contexts.delete(this),(e=this._browserType)===null||e===void 0||(t=e._contexts)===null||t===void 0||t.delete(this),this.emit(Et.Events.BrowserContext.Close,this)}async close(){try{await this._wrapApiCall(async e=>{var t,i;if(await((t=this._browserType)===null||t===void 0||(i=t._onWillCloseContext)===null||i===void 0?void 0:i.call(t,this)),this._options.recordHar){var n;let s=await this._channel.harExport(),o=MW.Artifact.from(s.artifact);(n=this.browser())!==null&&n!==void 0&&n._remoteType&&(o._isRemote=!0),await o.saveAs(this._options.recordHar.path),await o.delete()}await e.close(),await this._closedPromise})}catch(e){if((0,OW.isSafeCloseError)(e))return;throw e}}async _enableRecorder(e){await this._channel.recorderSupplementEnable(e)}};dc.BrowserContext=Sh;async function RW(r){if(r.videoSize&&!r.videosPath)throw new Error('"videoSize" option requires "videosPath" to be specified');r.extraHTTPHeaders&&Pr.validateHeaders(r.extraHTTPHeaders);let e={...r,viewport:r.viewport===null?void 0:r.viewport,noDefaultViewport:r.viewport===null,extraHTTPHeaders:r.extraHTTPHeaders?(0,xh.headersObjectToArray)(r.extraHTTPHeaders):void 0,storageState:typeof r.storageState=="string"?JSON.parse(await v1.default.promises.readFile(r.storageState,"utf8")):r.storageState};return!e.recordVideo&&r.videosPath&&(e.recordVideo={dir:r.videosPath,size:r.videoSize}),e}});var Eh=w(kh=>{"use strict";Object.defineProperty(kh,"__esModule",{value:!0});kh.Browser=void 0;var x1=_o(),NW=Ve(),S1=Cr(),qW=Mt(),LW=yh(),Ch=class extends NW.ChannelOwner{static from(e){return e._object}static fromNullable(e){return e?Ch.from(e):null}constructor(e,t,i,n){super(e,t,i,n);this._contexts=new Set,this._isConnected=!0,this._closedPromise=void 0,this._remoteType=null,this._browserType=void 0,this._name=void 0,this._name=n.name,this._channel.on("close",()=>this._didClose()),this._closedPromise=new Promise(s=>this.once(S1.Events.Browser.Disconnected,s))}_setBrowserType(e){this._browserType=e;for(let t of this._contexts)t._setBrowserType(e)}async newContext(e={}){return this._wrapApiCall(async t=>{var i,n;e={...this._browserType._defaultContextOptions,...e};let s=await(0,x1.prepareBrowserContextParams)(e),o=x1.BrowserContext.from((await t.newContext(s)).context);return o._options=s,this._contexts.add(o),o._logger=e.logger||this._logger,o._setBrowserType(this._browserType),await((i=(n=this._browserType)._onDidCreateContext)===null||i===void 0?void 0:i.call(n,o)),o})}contexts(){return[...this._contexts]}version(){return this._initializer.version}async newPage(e={}){let t=await this.newContext(e),i=await t.newPage();return i._ownedContext=t,t._ownerPage=i,i}isConnected(){return this._isConnected}async newBrowserCDPSession(){return this._wrapApiCall(async e=>LW.CDPSession.from((await e.newBrowserCDPSession()).session))}async startTracing(e,t={}){return this._wrapApiCall(async i=>{await i.startTracing({...t,page:e?e._channel:void 0})})}async stopTracing(){return this._wrapApiCall(async e=>Buffer.from((await e.stopTracing()).binary,"base64"))}async close(){try{await this._wrapApiCall(async e=>{this._remoteType==="owns-connection"?this._connection.close():await e.close(),await this._closedPromise})}catch(e){if((0,qW.isSafeCloseError)(e))return;throw e}}_didClose(){this._isConnected=!1,this.emit(S1.Events.Browser.Disconnected,this)}};kh.Browser=Ch});var sg=w(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.BrowserType=void 0;var ig=Eh(),ng=_o(),BW=Ve(),HW=og(),jW=Cr(),E1=Kr(),Ki=H(),WW=Mt(),$W=zt(),C1=class extends BW.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._serverLauncher=void 0,this._contexts=new Set,this._defaultContextOptions={},this._defaultLaunchOptions={},this._onDidCreateContext=void 0,this._onWillCloseContext=void 0}executablePath(){if(!this._initializer.executablePath)throw new Error("Browser is not supported on current platform");return this._initializer.executablePath}name(){return this._initializer.name}async launch(e={}){let t=e.logger||this._defaultLaunchOptions.logger;return this._wrapApiCall(async i=>{(0,Ki.assert)(!e.userDataDir,"userDataDir option is not supported in `browserType.launch`. Use `browserType.launchPersistentContext` instead"),(0,Ki.assert)(!e.port,"Cannot specify a port without launching as a server."),e={...this._defaultLaunchOptions,...e};let n={...e,ignoreDefaultArgs:Array.isArray(e.ignoreDefaultArgs)?e.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!e.ignoreDefaultArgs&&!Array.isArray(e.ignoreDefaultArgs),env:e.env?(0,E1.envObjectToArray)(e.env):void 0},s=ig.Browser.from((await i.launch(n)).browser);return s._logger=t,s._setBrowserType(this),s},t)}async launchServer(e={}){if(!this._serverLauncher)throw new Error("Launching server is not supported");return this._serverLauncher.launchServer(e)}async launchPersistentContext(e,t={}){let i=t.logger||this._defaultLaunchOptions.logger;return this._wrapApiCall(async n=>{var s;(0,Ki.assert)(!t.port,"Cannot specify a port without launching as a server."),t={...this._defaultLaunchOptions,...this._defaultContextOptions,...t};let o=await(0,ng.prepareBrowserContextParams)(t),c={...o,ignoreDefaultArgs:Array.isArray(t.ignoreDefaultArgs)?t.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!t.ignoreDefaultArgs&&!Array.isArray(t.ignoreDefaultArgs),env:t.env?(0,E1.envObjectToArray)(t.env):void 0,channel:t.channel,userDataDir:e},l=await n.launchPersistentContext(c),u=ng.BrowserContext.from(l.context);return u._options=o,u._logger=i,u._setBrowserType(this),await((s=this._onDidCreateContext)===null||s===void 0?void 0:s.call(this,u)),u},i)}async connect(e,t){return typeof e=="string"?this._connect(e,t):((0,Ki.assert)(e.wsEndpoint,"options.wsEndpoint is required"),this._connect(e.wsEndpoint,e))}async _connect(e,t={}){let i=t.logger;return await this._wrapApiCall(async n=>{let s=t.timeout?(0,Ki.monotonicTime)()+t.timeout:0,o,{pipe:c}=await n.connect({wsEndpoint:e,headers:t.headers,slowMo:t.slowMo,timeout:t.timeout}),l=()=>c.close().catch(()=>{}),u=new HW.Connection(l),d=()=>{var f;for(let m of((_=o)===null||_===void 0?void 0:_.contexts())||[]){var _;for(let g of m.pages())g._onClose();m._onClose()}(f=o)===null||f===void 0||f._didClose(),u.didDisconnect(WW.kBrowserClosedError)};c.on("closed",d),u.onmessage=f=>c.send({message:f}).catch(d),c.on("message",({message:f})=>{try{u.isDisconnected()||u.dispatch(f)}catch(_){console.error("Playwright: Connection dispatch error"),console.error(_),l()}});let h=new Promise(async(f,_)=>{try{t.__testHookBeforeCreateBrowser&&await t.__testHookBeforeCreateBrowser();let m=await u.initializePlaywright();if(!m._initializer.preLaunchedBrowser){_(new Error("Malformed endpoint. Did you use launchServer method?")),l();return}o=ig.Browser.from(m._initializer.preLaunchedBrowser),o._logger=i,o._remoteType="owns-connection",o._setBrowserType(m[o._name]),o.on(jW.Events.Browser.Disconnected,()=>{m._cleanup(),l()}),f(o)}catch(m){_(m)}}),p=await(0,$W.raceAgainstDeadline)(h,s);if(p.result)return p.result;throw l(),new Error(`Timeout ${t.timeout}ms exceeded`)},i)}connectOverCDP(e,t){if(typeof e=="string")return this._connectOverCDP(e,t);let i="endpointURL"in e?e.endpointURL:e.wsEndpoint;return(0,Ki.assert)(i,"Cannot connect over CDP without wsEndpoint."),this.connectOverCDP(i,e)}async _connectOverCDP(e,t={}){if(this.name()!=="chromium")throw new Error("Connecting over CDP is only supported in Chromium.");let i=t.logger;return this._wrapApiCall(async n=>{let s=Object.assign({"User-Agent":(0,Ki.getUserAgent)()},t.headers),o=s?(0,Ki.headersObjectToArray)(s):void 0,c=await n.connectOverCDP({endpointURL:e,headers:o,slowMo:t.slowMo,timeout:t.timeout}),l=ig.Browser.from(c.browser);return c.defaultContext&&l._contexts.add(ng.BrowserContext.from(c.defaultContext)),l._remoteType="uses-connection",l._logger=i,l._setBrowserType(this),l},i)}};Ph.BrowserType=C1});var k1=w(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.createSocket=VW;var zW=UW(require("net"));function UW(r){return r&&r.__esModule?r:{default:r}}async function VW(r,e){return new Promise((t,i)=>{let n=zW.default.createConnection({host:r,port:e});n.on("connect",()=>t(n)),n.on("error",s=>i(s))})}});var fg=w(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.AndroidWebView=Zt.AndroidInput=Zt.AndroidSocket=Zt.AndroidDevice=Zt.Android=void 0;var P1=XW(require("fs")),GW=H(),Un=Cr(),cg=_o(),lg=Ve(),O1=$t(),KW=Hn(),JW=require("events");function XW(r){return r&&r.__esModule?r:{default:r}}var T1=class extends lg.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._timeoutSettings=void 0,this._timeoutSettings=new O1.TimeoutSettings}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}async devices(){return this._wrapApiCall(async e=>{let{devices:t}=await e.devices();return t.map(i=>ug.from(i))})}};Zt.Android=T1;var ug=class extends lg.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._timeoutSettings=void 0,this._webViews=new Map,this.input=void 0,this.input=new hg(this),this._timeoutSettings=new O1.TimeoutSettings(e._timeoutSettings),this._channel.on("webViewAdded",({webView:s})=>this._onWebViewAdded(s)),this._channel.on("webViewRemoved",({pid:s})=>this._onWebViewRemoved(s))}_onWebViewAdded(e){let t=new pg(this,e);this._webViews.set(e.pid,t),this.emit(Un.Events.AndroidDevice.WebView,t)}_onWebViewRemoved(e){let t=this._webViews.get(e);this._webViews.delete(e),t&&t.emit(Un.Events.AndroidWebView.Close)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}serial(){return this._initializer.serial}model(){return this._initializer.model}webViews(){return[...this._webViews.values()]}async webView(e,t){let i=[...this._webViews.values()].find(n=>n.pkg()===e.pkg);return i||this.waitForEvent("webview",{...t,predicate:n=>n.pkg()===e.pkg})}async wait(e,t){await this._wrapApiCall(async i=>{await i.wait({selector:Bt(e),...t})})}async fill(e,t,i){await this._wrapApiCall(async n=>{await n.fill({selector:Bt(e),text:t,...i})})}async press(e,t,i){await this.tap(e,i),await this.input.press(t)}async tap(e,t){await this._wrapApiCall(async i=>{await i.tap({selector:Bt(e),...t})})}async drag(e,t,i){await this._wrapApiCall(async n=>{await n.drag({selector:Bt(e),dest:t,...i})})}async fling(e,t,i){await this._wrapApiCall(async n=>{await n.fling({selector:Bt(e),direction:t,...i})})}async longTap(e,t){await this._wrapApiCall(async i=>{await i.longTap({selector:Bt(e),...t})})}async pinchClose(e,t,i){await this._wrapApiCall(async n=>{await n.pinchClose({selector:Bt(e),percent:t,...i})})}async pinchOpen(e,t,i){await this._wrapApiCall(async n=>{await n.pinchOpen({selector:Bt(e),percent:t,...i})})}async scroll(e,t,i,n){await this._wrapApiCall(async s=>{await s.scroll({selector:Bt(e),direction:t,percent:i,...n})})}async swipe(e,t,i,n){await this._wrapApiCall(async s=>{await s.swipe({selector:Bt(e),direction:t,percent:i,...n})})}async info(e){return await this._wrapApiCall(async t=>(await t.info({selector:Bt(e)})).info)}async screenshot(e={}){return await this._wrapApiCall(async t=>{let{binary:i}=await t.screenshot(),n=Buffer.from(i,"base64");return e.path&&await P1.default.promises.writeFile(e.path,n),n})}async close(){return this._wrapApiCall(async e=>{await e.close(),this.emit(Un.Events.AndroidDevice.Close)})}async shell(e){return this._wrapApiCall(async t=>{let{result:i}=await t.shell({command:e});return Buffer.from(i,"base64")})}async open(e){return this._wrapApiCall(async t=>dg.from((await t.open({command:e})).socket))}async installApk(e,t){return this._wrapApiCall(async i=>{await i.installApk({file:await A1(e),args:t&&t.args})})}async push(e,t,i){return this._wrapApiCall(async n=>{await n.push({file:await A1(e),path:t,mode:i?i.mode:void 0})})}async launchBrowser(e={}){return this._wrapApiCall(async t=>{let i=await(0,cg.prepareBrowserContextParams)(e),{context:n}=await t.launchBrowser(i);return cg.BrowserContext.from(n)})}async waitForEvent(e,t={}){return this._wrapApiCall(async i=>{let n=this._timeoutSettings.timeout(typeof t=="function"?{}:t),s=typeof t=="function"?t:t.predicate,o=KW.Waiter.createForEvent(this,e);o.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==Un.Events.AndroidDevice.Close&&o.rejectOnEvent(this,Un.Events.AndroidDevice.Close,new Error("Device closed"));let c=await o.waitForEvent(this,e,s);return o.dispose(),c})}};Zt.AndroidDevice=ug;var dg=class extends lg.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._channel.on("data",({data:s})=>this.emit(Un.Events.AndroidSocket.Data,Buffer.from(s,"base64"))),this._channel.on("close",()=>this.emit(Un.Events.AndroidSocket.Close))}async write(e){return this._wrapApiCall(async t=>{await t.write({data:e.toString("base64")})})}async close(){return this._wrapApiCall(async e=>{await e.close()})}};Zt.AndroidSocket=dg;async function A1(r){return(0,GW.isString)(r)?P1.default.promises.readFile(r,{encoding:"base64"}).toString():r.toString("base64")}var hg=class{constructor(e){this._device=void 0,this._device=e}async type(e){return this._device._wrapApiCall(async t=>{await t.inputType({text:e})})}async press(e){return this._device._wrapApiCall(async t=>{await t.inputPress({key:e})})}async tap(e){return this._device._wrapApiCall(async t=>{await t.inputTap({point:e})})}async swipe(e,t,i){return this._device._wrapApiCall(async n=>{await n.inputSwipe({segments:t,steps:i})})}async drag(e,t,i){return this._device._wrapApiCall(async n=>{await n.inputDrag({from:e,to:t,steps:i})})}};Zt.AndroidInput=hg;function Bt(r){let{checkable:e,checked:t,clazz:i,clickable:n,depth:s,desc:o,enabled:c,focusable:l,focused:u,hasChild:d,hasDescendant:h,longClickable:p,pkg:f,res:_,scrollable:m,selected:g,text:v}=r,x=b=>{if(b!==void 0)return b instanceof RegExp?b.source:"^"+b.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")+"$"};return{checkable:e,checked:t,clazz:x(i),pkg:x(f),desc:x(o),res:x(_),text:x(v),clickable:n,depth:s,enabled:c,focusable:l,focused:u,hasChild:d?{selector:Bt(d.selector)}:void 0,hasDescendant:h?{selector:Bt(h.selector),maxDepth:h.maxDepth}:void 0,longClickable:p,scrollable:m,selected:g}}var pg=class extends JW.EventEmitter{constructor(e,t){super();this._device=void 0,this._data=void 0,this._pagePromise=void 0,this._device=e,this._data=t}pid(){return this._data.pid}pkg(){return this._data.pkg}async page(){return this._pagePromise||(this._pagePromise=this._fetchPage()),this._pagePromise}async _fetchPage(){return this._device._wrapApiCall(async e=>{let{context:t}=await e.connectToWebView({pid:this._data.pid});return cg.BrowserContext.from(t).pages()[0]})}};Zt.AndroidWebView=pg});var _g=w(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.ElectronApplication=wo.Electron=void 0;var YW=$t(),QW=H(),ZW=_o(),M1=Ve(),e$=Kr(),go=Cr(),hc=Hi(),t$=Hn(),I1=class extends M1.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}async launch(e={}){return this._wrapApiCall(async t=>{let i={...e,extraHTTPHeaders:e.extraHTTPHeaders&&(0,QW.headersObjectToArray)(e.extraHTTPHeaders),env:(0,e$.envObjectToArray)(e.env?e.env:process.env)};return mg.from((await t.launch(i)).electronApplication)})}};wo.Electron=I1;var mg=class extends M1.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n);this._context=void 0,this._windows=new Set,this._timeoutSettings=new YW.TimeoutSettings,this._context=ZW.BrowserContext.from(n.context);for(let s of this._context._pages)this._onPage(s);this._context.on(go.Events.BrowserContext.Page,s=>this._onPage(s)),this._channel.on("close",()=>this.emit(go.Events.ElectronApplication.Close))}_onPage(e){this._windows.add(e),this.emit(go.Events.ElectronApplication.Window,e),e.once(go.Events.Page.Close,()=>this._windows.delete(e))}windows(){return[...this._windows]}async firstWindow(){return this._wrapApiCall(async e=>this._windows.size?this._windows.values().next().value:this.waitForEvent("window"))}context(){return this._context}async close(){return this._wrapApiCall(async e=>{await e.close()})}async waitForEvent(e,t={}){return this._wrapApiCall(async i=>{let n=this._timeoutSettings.timeout(typeof t=="function"?{}:t),s=typeof t=="function"?t:t.predicate,o=t$.Waiter.createForEvent(this,e);o.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==go.Events.ElectronApplication.Close&&o.rejectOnEvent(this,go.Events.ElectronApplication.Close,new Error("Electron application closed"));let c=await o.waitForEvent(this,e,s);return o.dispose(),c})}async browserWindow(e){return this._wrapApiCall(async t=>{let i=await t.browserWindow({page:e._channel});return hc.JSHandle.from(i.handle)})}async evaluate(e,t){return this._wrapApiCall(async i=>{let n=await i.evaluateExpression({expression:String(e),isFunction:typeof e=="function",arg:(0,hc.serializeArgument)(t)});return(0,hc.parseResult)(n.value)})}async evaluateHandle(e,t){return this._wrapApiCall(async i=>{let n=await i.evaluateExpressionHandle({expression:String(e),isFunction:typeof e=="function",arg:(0,hc.serializeArgument)(t)});return hc.JSHandle.from(n.handle)})}};wo.ElectronApplication=mg});var wg=w(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.sharedSelectors=Ji.SelectorsOwner=Ji.Selectors=void 0;var r$=Kr(),i$=Ve(),gg=class{constructor(){this._channels=new Set,this._registrations=[]}async register(e,t,i={}){let n=await(0,r$.evaluationScript)(t,void 0,!1),s={...i,name:e,source:n};for(let o of this._channels)await o._channel.register(s);this._registrations.push(s)}_addChannel(e){this._channels.add(e);for(let t of this._registrations)e._channel.register(t).catch(i=>{})}_removeChannel(e){this._channels.delete(e)}};Ji.Selectors=gg;var F1=class extends i$.ChannelOwner{static from(e){return e._object}};Ji.SelectorsOwner=F1;var n$=new gg;Ji.sharedSelectors=n$});var q1=w(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});Oh.Playwright=void 0;var s$=R1(require("dns")),o$=R1(require("util")),a$=Mt(),c$=k1(),l$=H(),u$=fg(),vg=sg(),d$=Ve(),h$=_g(),p$=ic(),D1=wg();function R1(r){return r&&r.__esModule?r:{default:r}}var f$=o$.default.promisify(s$.default.lookup),N1=class extends d$.ChannelOwner{constructor(e,t,i,n){super(e,t,i,n);this._android=void 0,this._electron=void 0,this.chromium=void 0,this.firefox=void 0,this.webkit=void 0,this.devices=void 0,this.selectors=void 0,this.errors=void 0,this._selectorsOwner=void 0,this._sockets=new Map,this._redirectPortForTest=void 0,this.chromium=vg.BrowserType.from(n.chromium),this.firefox=vg.BrowserType.from(n.firefox),this.webkit=vg.BrowserType.from(n.webkit),this._android=u$.Android.from(n.android),this._electron=h$.Electron.from(n.electron),this.devices={};for(let{name:s,descriptor:o}of n.deviceDescriptors)this.devices[s]=o;this.selectors=D1.sharedSelectors,this.errors={TimeoutError:a$.TimeoutError},this._selectorsOwner=D1.SelectorsOwner.from(n.selectors),this.selectors._addChannel(this._selectorsOwner)}async _newRequest(e={}){return await this._wrapApiCall(async t=>p$.FetchRequest.from((await t.newRequest({...e,extraHTTPHeaders:e.extraHTTPHeaders?(0,l$.headersObjectToArray)(e.extraHTTPHeaders):void 0})).request))}_enablePortForwarding(e){this._redirectPortForTest=e,this._channel.on("socksRequested",({uid:t,host:i,port:n})=>this._onSocksRequested(t,i,n)),this._channel.on("socksData",({uid:t,data:i})=>this._onSocksData(t,Buffer.from(i,"base64"))),this._channel.on("socksClosed",({uid:t})=>this._onSocksClosed(t))}async _onSocksRequested(e,t,i){t==="local.playwright"&&(t="localhost");try{this._redirectPortForTest&&(i=this._redirectPortForTest);let{address:n}=await f$(t),s=await(0,c$.createSocket)(n,i);s.on("data",l=>this._channel.socksData({uid:e,data:l.toString("base64")}).catch(()=>{})),s.on("error",l=>{this._channel.socksError({uid:e,error:l.message}).catch(()=>{}),this._sockets.delete(e)}),s.on("end",()=>{this._channel.socksEnd({uid:e}).catch(()=>{}),this._sockets.delete(e)});let o=s.localAddress,c=s.localPort;this._sockets.set(e,s),this._channel.socksConnected({uid:e,host:o,port:c}).catch(()=>{})}catch(n){this._channel.socksFailed({uid:e,errorCode:n.code}).catch(()=>{})}}_onSocksData(e,t){var i;(i=this._sockets.get(e))===null||i===void 0||i.write(t)}static from(e){return e._object}_onSocksClosed(e){var t;(t=this._sockets.get(e))===null||t===void 0||t.destroy(),this._sockets.delete(e)}_cleanup(){this.selectors._removeChannel(this._selectorsOwner)}};Oh.Playwright=N1});var B1=w(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.JsonPipe=void 0;var m$=Ve(),L1=class extends m$.ChannelOwner{static from(e){return e._object}constructor(e,t,i,n){super(e,t,i,n)}channel(){return this._channel}};Th.JsonPipe=L1});var og=w(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.Connection=void 0;var _$=Eh(),g$=_o(),w$=sg(),v$=Ve(),y$=uh(),b$=ho(),x$=Hi(),Ah=uo(),H1=rg(),S$=hh(),E$=G_(),C$=K_(),k$=Xr(),P$=yh(),j1=q1(),W1=_g(),O$=Q_(),yg=ze(),T$=wg(),bg=fg(),A$=lc(),M$=require("events"),I$=B1(),F$=ic(),$1=class extends v$.ChannelOwner{constructor(e){super(e,"Root","",{})}async initialize(){return j1.Playwright.from((await this._channel.initialize({sdkLanguage:"javascript"})).playwright)}},z1=class extends M$.EventEmitter{constructor(e){super();this._objects=new Map,this._waitingForObject=new Map,this.onmessage=t=>{},this._lastId=0,this._callbacks=new Map,this._rootObject=void 0,this._disconnectedErrorMessage=void 0,this._onClose=void 0,this._rootObject=new $1(this),this._onClose=e}async initializePlaywright(){return await this._rootObject.initialize()}pendingProtocolCalls(){return Array.from(this._callbacks.values()).map(e=>e.stackTrace)}getObjectWithKnownName(e){return this._objects.get(e)}async sendMessageToServer(e,t,i,n){let s=e._guid,o=n||{frameTexts:[],frames:[],apiName:"",allFrames:[]},{frames:c,apiName:l}=o,u=++this._lastId,d={id:u,guid:s,method:t,params:i};yg.debugLogger.log("channel:command",d);let h={stack:c,apiName:l};if(this.onmessage({...d,metadata:h}),this._disconnectedErrorMessage)throw new Error(this._disconnectedErrorMessage);return await new Promise((p,f)=>this._callbacks.set(u,{resolve:p,reject:f,stackTrace:o}))}_debugScopeState(){return this._rootObject._debugScopeState()}dispatch(e){let{id:t,guid:i,method:n,params:s,result:o,error:c}=e;if(t){yg.debugLogger.log("channel:response",e);let u=this._callbacks.get(t);if(!u)throw new Error(`Cannot find command to respond: ${t}`);this._callbacks.delete(t),c?u.reject((0,k$.parseError)(c)):u.resolve(this._replaceGuidsWithChannels(o));return}if(yg.debugLogger.log("channel:event",e),n==="__create__"){this._createRemoteObject(i,s.type,s.guid,s.initializer);return}if(n==="__dispose__"){let u=this._objects.get(i);if(!u)throw new Error(`Cannot find object to dispose: ${i}`);u._dispose();return}let l=this._objects.get(i);if(!l)throw new Error(`Cannot find object to emit "${n}": ${i}`);l._channel.emit(n,l._type==="JsonPipe"?s:this._replaceGuidsWithChannels(s))}close(){this._onClose&&this._onClose()}didDisconnect(e){this._disconnectedErrorMessage=e;for(let t of this._callbacks.values())t.reject(new Error(e));this._callbacks.clear(),this.emit("disconnect")}isDisconnected(){return!!this._disconnectedErrorMessage}_replaceGuidsWithChannels(e){if(!e)return e;if(Array.isArray(e))return e.map(t=>this._replaceGuidsWithChannels(t));if(e.guid&&this._objects.has(e.guid))return this._objects.get(e.guid)._channel;if(typeof e=="object"){let t={};for(let i of Object.keys(e))t[i]=this._replaceGuidsWithChannels(e[i]);return t}return e}_createRemoteObject(e,t,i,n){let s=this._objects.get(e);if(!s)throw new Error(`Cannot find parent object ${e} to create ${i}`);let o;switch(n=this._replaceGuidsWithChannels(n),t){case"Android":o=new bg.Android(s,t,i,n);break;case"AndroidSocket":o=new bg.AndroidSocket(s,t,i,n);break;case"AndroidDevice":o=new bg.AndroidDevice(s,t,i,n);break;case"Artifact":o=new A$.Artifact(s,t,i,n);break;case"BindingCall":o=new H1.BindingCall(s,t,i,n);break;case"Browser":o=new _$.Browser(s,t,i,n);break;case"BrowserContext":o=new g$.BrowserContext(s,t,i,n);break;case"BrowserType":o=new w$.BrowserType(s,t,i,n);break;case"CDPSession":o=new P$.CDPSession(s,t,i,n);break;case"ConsoleMessage":o=new E$.ConsoleMessage(s,t,i,n);break;case"Dialog":o=new C$.Dialog(s,t,i,n);break;case"Electron":o=new W1.Electron(s,t,i,n);break;case"ElectronApplication":o=new W1.ElectronApplication(s,t,i,n);break;case"ElementHandle":o=new y$.ElementHandle(s,t,i,n);break;case"FetchRequest":o=new F$.FetchRequest(s,t,i,n);break;case"Frame":o=new b$.Frame(s,t,i,n);break;case"JSHandle":o=new x$.JSHandle(s,t,i,n);break;case"JsonPipe":o=new I$.JsonPipe(s,t,i,n);break;case"Page":o=new H1.Page(s,t,i,n);break;case"Playwright":o=new j1.Playwright(s,t,i,n);break;case"Request":o=new Ah.Request(s,t,i,n);break;case"Response":o=new Ah.Response(s,t,i,n);break;case"Route":o=new Ah.Route(s,t,i,n);break;case"Stream":o=new O$.Stream(s,t,i,n);break;case"Selectors":o=new T$.SelectorsOwner(s,t,i,n);break;case"WebSocket":o=new Ah.WebSocket(s,t,i,n);break;case"Worker":o=new S$.Worker(s,t,i,n);break;default:throw new Error("Missing type "+t)}let c=this._waitingForObject.get(i);return c&&(c(o),this._waitingForObject.delete(i)),o}};Mh.Connection=z1});var J1=w(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.PlaywrightServer=void 0;var D$=B$(Fr()),R$=K1(require("http")),U1=K1(os()),V1=$e(),N$=Qd(),q$=fa(),L$=va();function G1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(G1=function(i){return i?t:e})(r)}function K1(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=G1(e);if(t&&t.has(r))return t.get(r);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var o=n?Object.getOwnPropertyDescriptor(r,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=r[s]}return i.default=r,t&&t.set(r,i),i}function B$(r){return r&&r.__esModule?r:{default:r}}var vo=(0,D$.default)("pw:server"),Ih=class{static async startDefault(){let e=async()=>{await(0,L$.gracefullyCloseAll)().catch(i=>{})},t={path:"/ws",allowMultipleClients:!1,onClose:e,onConnect:async i=>{let n;return new V1.Root(i,async s=>{n=(0,q$.createPlaywright)("javascript");let o=new N$.PlaywrightDispatcher(s,n);return process.env.PW_SOCKS_PROXY_PORT&&await o.enableSocksProxy(),o}),()=>{var s;e(),(s=n)===null||s===void 0||s.selectors.unregisterAll()}}};return new Ih(t)}constructor(e){this._wsServer=void 0,this._clientsCount=0,this._delegate=void 0,this._delegate=e}async listen(e=0){let t=R$.createServer((s,o)=>{o.end("Running")});t.on("error",s=>vo(s));let i=this._delegate.path,n=await new Promise((s,o)=>{t.listen(e,()=>{let c=t.address(),l=typeof c=="string"?`${c}${i}`:`ws://127.0.0.1:${c.port}${i}`;s(l)}).on("error",o)});return vo("Listening at "+n),this._wsServer=new U1.Server({server:t,path:i}),this._wsServer.on("connection",async s=>{if(this._clientsCount&&!this._delegate.allowMultipleClients){s.close();return}this._clientsCount++,vo("Incoming connection");let o=new V1.DispatcherConnection;o.onmessage=d=>{s.readyState!==U1.CLOSING&&s.send(JSON.stringify(d))},s.on("message",d=>{o.dispatch(JSON.parse(Buffer.from(d).toString()))});let c=()=>s.close(),l=()=>{},u=()=>{this._clientsCount--,o.onmessage=()=>{},l()};s.on("close",()=>{vo("Client closed"),u()}),s.on("error",d=>{vo("Client error "+d),u()}),l=await this._delegate.onConnect(o,c)}),n}async close(){!this._wsServer||(vo("Closing server"),await new Promise(e=>this._wsServer.close(e)),await new Promise(e=>this._wsServer.options.server.close(e)),this._wsServer=void 0,await this._delegate.onClose())}};Fh.PlaywrightServer=Ih});var eA=w(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.BrowserServerLauncherImpl=void 0;var H$=xs(),j$=os(),X1=$e(),W$=oo(),$$=Kr(),z$=H(),U$=W_(),V$=Jm(),Y1=Qe(),G$=fa(),K$=Qd(),J$=J1(),X$=ht(),Y$=zd(),Q1=class{constructor(e){this._browserName=void 0,this._browserName=e}async launchServer(e={}){let t=(0,G$.createPlaywright)("javascript"),i=await t[this._browserName].launch((0,Y1.internalCallMetadata)(),{...e,ignoreDefaultArgs:Array.isArray(e.ignoreDefaultArgs)?e.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!e.ignoreDefaultArgs&&!Array.isArray(e.ignoreDefaultArgs),env:e.env?(0,$$.envObjectToArray)(e.env):void 0},Q$(e.logger)),n=`/${(0,z$.createGuid)()}`;e.wsPath&&(n=e.wsPath.startsWith("/")?e.wsPath:`/${e.wsPath}`);let s={path:n,allowMultipleClients:!0,onClose:()=>{},onConnect:this._onConnect.bind(this,t,i)},o=new J$.PlaywrightServer(s),c=await o.listen(e.port),l=new j$.EventEmitter;return l.process=()=>i.options.browserProcess.process,l.wsEndpoint=()=>c,l.close=()=>i.options.browserProcess.close(),l.kill=()=>i.options.browserProcess.kill(),l._disconnectForTest=()=>o.close(),i.options.browserProcess.onclose=async(u,d)=>{o.close(),l.emit("close",u,d)},l}async _onConnect(e,t,i,n){let s;return new X1.Root(i,async o=>{let c=new V$.Selectors,l=new U$.SelectorsDispatcher(o,c);return s=new Z1(o,t,c),t.on(H$.Browser.Events.Disconnected,()=>{n()}),new K$.PlaywrightDispatcher(o,e,l,s)}),()=>{var o;(o=s)===null||o===void 0||o.cleanupContexts().catch(c=>{})}}};Dh.BrowserServerLauncherImpl=Q1;var Z1=class extends X1.Dispatcher{constructor(e,t,i){super(e,t,"Browser",{version:t.version(),name:t.options.name},!0);this._contexts=new Set,this._selectors=void 0,this._selectors=i}async newContext(e,t){e.recordVideo&&(e.recordVideo.dir=this._object.options.artifactsDir);let i=await this._object.newContext(e);return this._contexts.add(i),i._setSelectors(this._selectors),i.on(X$.BrowserContext.Events.Close,()=>this._contexts.delete(i)),e.storageState&&await i.setStorageState(t,e.storageState),{context:new W$.BrowserContextDispatcher(this._scope,i)}}async close(){}async killForTests(){}async newBrowserCDPSession(){if(!this._object.options.isChromium)throw new Error("CDP session is only available in Chromium");let e=this._object;return{session:new Y$.CDPSessionDispatcher(this._scope,await e.newBrowserCDPSession())}}async startTracing(e){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");await this._object.startTracing(e.page?e.page._object:void 0,e)}async stopTracing(){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");return{binary:(await this._object.stopTracing()).toString("base64")}}async cleanupContexts(){await Promise.all(Array.from(this._contexts).map(e=>e.close((0,Y1.internalCallMetadata)())))}};function Q$(r){return r?(e,t)=>{r.isEnabled("protocol","verbose")&&r.log("protocol","verbose",(e==="send"?"SEND \u25BA ":"\u25C0 RECV ")+JSON.stringify(t),[],{})}:void 0}});var iA=w((wV,rA)=>{"use strict";var tA=$e(),Z$=fa(),ez=Qd(),tz=og(),xg=eA();function rz(){let r=(0,Z$.createPlaywright)("javascript"),e=new tz.Connection,t=new tA.DispatcherConnection;t.onmessage=s=>e.dispatch(s),e.onmessage=s=>t.dispatch(s);let i=new tA.Root(t);new ez.PlaywrightDispatcher(i,r);let n=e.getObjectWithKnownName("Playwright");return n.chromium._serverLauncher=new xg.BrowserServerLauncherImpl("chromium"),n.firefox._serverLauncher=new xg.BrowserServerLauncherImpl("firefox"),n.webkit._serverLauncher=new xg.BrowserServerLauncherImpl("webkit"),t.onmessage=s=>setImmediate(()=>e.dispatch(s)),e.onmessage=s=>setImmediate(()=>t.dispatch(s)),n._toImpl=s=>t._dispatchers.get(s._guid)._object,n}rA.exports=rz()});var sA=w((vV,nA)=>{nA.exports=iA()});dA(exports,{_android:()=>uz,_electron:()=>lz,chromium:()=>iz,devices:()=>az,errors:()=>cz,firefox:()=>nz,selectors:()=>oz,webkit:()=>sz});var Jr=Mg(sA()),iz=Jr.default.chromium,nz=Jr.default.firefox,sz=Jr.default.webkit,oz=Jr.default.selectors,az=Jr.default.devices,cz=Jr.default.errors,lz=Jr.default._electron,uz=Jr.default._android;0&&(module.exports={_android,_electron,chromium,devices,errors,firefox,selectors,webkit});
